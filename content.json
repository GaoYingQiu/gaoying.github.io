{"meta":{"title":"littleWhale","subtitle":"å‹‡æ•¢å»åšï¼Œå¤§èƒ†å°è¯•ã€‚","description":"åšå®šä¿¡å¿µï¼Œç›¸ä¿¡ç¾å¥½ã€‚","author":"QiuGaoYing","url":"https://www.littlewhale.xyz","root":"/"},"pages":[{"title":"å•†å“æµ·æŠ¥æŠ€æœ¯å®è·µ","date":"2020-05-26T13:31:34.000Z","updated":"2020-05-26T13:51:56.000Z","comments":true,"path":"å•†å“æµ·æŠ¥æŠ€æœ¯å®è·µ.html","permalink":"https://www.littlewhale.xyz/%E5%95%86%E5%93%81%E6%B5%B7%E6%8A%A5%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5.html","excerpt":"","text":"åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼šçº¢è‰²ã€é»„è‰²ã€ç»¿è‰²ã€é’è‰²ã€è“è‰²ã€ç°è‰²ã€‚ Volantis A Wonderful Theme for Hexo çº¯æ–‡æœ¬æµ‹è¯• æ”¯æŒç®€å•çš„ markdown è¯­æ³• æ”¯æŒè‡ªå®šä¹‰é¢œè‰² ç»¿è‰² + é»˜è®¤é€‰ä¸­ é»„è‰² + é»˜è®¤é€‰ä¸­ é’è‰² + é»˜è®¤é€‰ä¸­ è“è‰² + é»˜è®¤é€‰ä¸­ å¢åŠ  å‡å°‘ å‰ çº¯æ–‡æœ¬æµ‹è¯• æ”¯æŒç®€å•çš„ markdown è¯­æ³• æ”¯æŒè‡ªå®šä¹‰é¢œè‰² ç»¿è‰² é»„è‰² é’è‰² è“è‰² ä¸è®¾ç½®ä»»ä½•å‚æ•°çš„ æŒ‰é’® é€‚åˆèå…¥æ®µè½ä¸­ã€‚regular æŒ‰é’®é€‚åˆç‹¬ç«‹äºæ®µè½ä¹‹å¤–ï¼šç¤ºä¾‹åšå®¢ large æŒ‰é’®æ›´å…·æœ‰å¼ºè°ƒä½œç”¨ï¼Œå»ºè®®æ­é… center ä½¿ç”¨ï¼š å¼€å§‹ä½¿ç”¨ æ·»åŠ æè¿°ï¼š æŒ‡å®šå®½åº¦ï¼š æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š Your browser does not support the video tag. xaoxuu xaoxuu xaoxuu xaoxuu xaoxuu"},{"title":"å…³äºæˆ‘","date":"2020-01-06T08:29:31.000Z","updated":"2020-01-07T04:38:09.000Z","comments":true,"path":"about/index.html","permalink":"https://www.littlewhale.xyz/about/index.html","excerpt":"","text":"å—¨ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼ç¼˜åˆ†ä¸å·§åˆè®©æˆ‘ä»¬ç›¸é‡ã€‚ æˆ‘æ˜¯é‚±é«˜é¢–ï¼Œå‡ºç”Ÿäº94å¹´ï¼Œè½¯ä»¶å·¥ç¨‹ä¸“ä¸šæ¯•ä¸šï¼Œç›®å‰åœ¨å¹¿å·ã€‚ä»¥ç å­—ä¸ºç”Ÿï¼Œåˆ†äº«ä¸ºè¶£ã€‚ å¼€æ­¤åšå®¢ç½‘ç«™çš„ç›®çš„ä¹Ÿæ˜¯å¯¹å·¥ä½œç”Ÿæ´»çš„ä¸€ä¸ªæ€»ç»“ï¼Œåœ¨åˆ†äº«çš„åŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ã€‚ æˆ‘æ¥è‡ªæ±Ÿè¥¿èµ£å·ï¼Œå‡ºç”Ÿä¸€ä¸ªæ™®é€šå®¶å¢ƒå®¶åº­ã€‚è‡ªå°æ²¡æœ‰æ¥è§¦è¿‡ç”µè„‘ï¼ŒçœŸæ­£æ¥è§¦ç”µè„‘çš„é‚£ä¸€å¹´åˆšå¥½18å²ã€‚ ç»è¿‡ä¸¤å¹´çš„ITçŸ¥è¯†å­¦ä¹ ï¼Œå…¥è½¯ä»¶ç¼–ç¨‹å¼€å‘è¡Œä¸šã€‚å­¦æ ¡æœŸé—´ä¸»ä¿®JavaæŠ€æœ¯ã€‚æ¯•ä¸šå2015å¹´æ¥åˆ°å¹¿å·ä»äº‹iOSå¼€å‘ä¸€èŒã€‚ é‚£æ—¶å€™æ˜¯åœ¨ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œå¯ä»¥è¯´ä¹Ÿæ˜¯å·¥ä½œå¤šå¹´æ¥æœ€æœ‰æ¿€æƒ…çš„ä¸€å¹´ã€‚åŠè·¯ç›²è½¬ç»å†äº†P2På…¬å¸ï¼Œä¹Ÿç»å†äº†å¤–åŒ…å…¬å¸ä»¥åŠåˆ›ä¸šå°ä¼ä¸šã€‚ åˆ†åˆ«æ˜¯åšç”µå•†ã€ç¤¾äº¤ã€è½¦é™© çš„åœˆå±‚å…³ç³»é“¾çš„app. ä½†æ— ç–‘éƒ½æ˜¯æ²¡ç”¨è¿è¥å¥½ç¤¾äº¤å…³ç³»é“¾çš„ç”Ÿæ€ï¼Œå¯¼è‡´äº§å“è¿è¥å¾—ä¸å¥½ã€‚ å¤±è´¥å› æ•° ä¼ä¸šç›²ç›®è·Ÿé£ï¼Œè¿½éšä¸ç¨³å®šä¸æˆç†Ÿçš„æŠ€æœ¯ æ¯”å¦‚P2Pï¼ŒåŒºå—é“¾ã€‚ é£æŠ•å‡å°‘ï¼Œå¤§ç¯å¢ƒä¸å¥½ï¼Œå¦äº§å“çš„ç«äº‰åŠ›å¤ªå¼±ï¼Œç”¨æˆ·ä½“éªŒå’Œè¿è¥åšå¾—ä¸å¤Ÿå¥½ã€‚ æµé‡å…¥å£åƒç´§ï¼Œäº§å“é‡å¿ƒåˆ†æ•£ï¼Œæ²¡èƒ½å¤Ÿèšç„¦ã€‚ èµ„é‡‘è¢«åŠ¨ï¼Œå—åˆ°å„æ–¹é¢çš„å½±å“ã€‚ ä¸ªäººä¸€ç‚¹çœ‹æ³• åšäº’è”ç½‘äº§å“è¦æœ‰è¶³å¤Ÿå¥½çš„ä½“éªŒï¼Œå¿«é€Ÿåœ°è¿­ä»£ã€‚ ç”¨æˆ·è¿è¥ä¸€å®šè¦åšå¾—å¤Ÿå¥½ï¼Œäº§å“åœ¨åšå¥½ä¸€ä¸ªå·¥å…·æˆ–æœåŠ¡çš„åŒæ—¶å†å»å›´ç»•ç”¨æˆ·ä¹°å•è¿è¥ç²¾ç»†åŒ–æœåŠ¡ã€‚ èµ„é‡‘é“¾ä¸æ–­ï¼Œåœ¨æ‰“é€ ç”Ÿæ€çš„åŒæ—¶è¦èšç„¦ï¼Œäº§å“è¦æœ‰é‡å¿ƒã€‚ æ—¶åˆ»å’Œæœ€å‰æ²¿çš„å¯¹æ‰‹æ¯”è¾ƒï¼Œç´§è·Ÿå¸‚åœºç»æµåŠ¨æ€å’Œæ”¿ç­–ã€‚ ç»å†æ€»ç»“è¿™äº›å¹´ï¼Œä¸ªäººæŠ€æœ¯ä¸Šä¸å†å±€é™appçš„å¼€å‘ã€‚å¤šæ–¹é¢åœ°æŒæ¡ç†Ÿæ‚‰å‰ç«¯ä¸€äº›æŠ€èƒ½ã€‚å°ç¨‹åºï¼ŒH5, æµè¡Œçš„æ¡†æ¶Vue ,react ä»¥åŠ æ··åˆå¼å¼€å‘appã€‚ åœ¨æŠ€æœ¯è¿ç”¨çš„åŒæ—¶ï¼Œä¸šä½™å¶å°”äº†è§£ä¸€ä¸‹é€»è¾‘ç®—æ³•å’Œæ•°æ®ç»“æ„çš„ä¸œè¥¿ ä¹Ÿä¸ä¹ç¼–ç¨‹æ—¶å¯¹å¤§è„‘çš„ä¸€ä¸ªçµæ´»é”»ç‚¼ã€‚åœ¨åšæŠ€æœ¯çš„åŒæ—¶ï¼Œä¸šåŠ¡ç†Ÿé€è¿™æ˜¯æœ€åŸºæœ¬çš„ã€‚å½“ç„¶ä¸šä½™æ—¶å¯ä»¥å¤šäº†è§£ä¸€ä¸‹å¸‚åœºä¸Šçš„ä¸€äº›å¯¹æ‰‹ï¼Œä¸€äº›äº§å“çš„é­”æ€§ã€‚ äººå·¥æ™ºèƒ½æ—¶ä»£çš„åˆ°æ¥å¤§æ•°æ®ï¼Œäººå·¥æ™ºèƒ½ï¼Œç‰©è”ç½‘ è¿™äº›é«˜ç«¯è¯å›ºç„¶å¸å¼•äººã€‚ä¸‡ç‰©çš†æ•°æ®ï¼Œè€Œä½œä¸ºç¨‹åºå‘˜ æˆ‘ä»¬éœ€è¦å¯¹æ•°æ®æ¨¡å‹åŒ–ï¼Œç»“æ„åŒ–ï¼Œå†™èµ·ä»£ç ä¹Ÿè‡ªç„¶å¾—å¿ƒåº”æ‰‹ã€‚ æ—¶åˆ»äº†è§£å¸‚åœºåŠ¨æ€ï¼Œåƒé€æŠ€æœ¯çš„åŸºæœ¬åŸç†å’Œåº•å±‚çš„ä¸œè¥¿ã€‚ ä¸ªäººæŠ€æœ¯ æ‡‚iOSå¼€å‘åˆ°ä¸Šæ¶æ•´ä¸ªæµç¨‹ã€‚è¿ç”¨è¯­è¨€ä¸º OC å’ŒSwift ã€‚ç†Ÿæ‚‰çš„é¢†åŸŸæœ‰ ç”µå•†ï¼Œç¤¾äº¤ï¼Œä¿¡æ¯æµï¼ŒçŸ­è§†é¢‘ ç­‰æ–¹é¢ç»éªŒã€‚ æ‡‚H5å¼€å‘ã€‚èƒ½ç‹¬ç«‹å¼€å‘ä¸åŸç”Ÿäº¤äº’çš„ H5é¡µé¢ å•é¡µé¢æˆ–å¤šé¡µé¢ã€‚å¸¸ç”¨å‰ç«¯æ¡†æ¶ä¸ºVue. æ‡‚å°ç¨‹åºå¼€å‘ã€‚èƒ½å¤Ÿé…åˆåç«¯å®Œæˆä¸€ä¸ªå®Œæ•´çš„ç”µå•†å°ç¨‹åºå¼€å‘ã€‚ è”ç³»æ–¹å¼å¾®ä¿¡å·ï¼š qgy5201994æ‰‹æœºå·: 17612042025 å†²ç ´é™©é˜»ï¼Œäº²è¿‘ç”Ÿæ´». go ahead."},{"title":"categories","date":"2016-01-21T08:37:59.000Z","updated":"2016-01-21T08:42:44.000Z","comments":true,"path":"categories/index.html","permalink":"https://www.littlewhale.xyz/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2016-01-21T08:39:20.000Z","updated":"2016-01-21T08:40:08.000Z","comments":true,"path":"tags/index.html","permalink":"https://www.littlewhale.xyz/tags/index.html","excerpt":"","text":""},{"title":"èƒ–æ©™çš„ç”»å»Š","date":"2020-05-26T13:31:34.000Z","updated":"2020-06-05T10:48:58.000Z","comments":true,"path":"paint/index.html","permalink":"https://www.littlewhale.xyz/paint/index.html","excerpt":"","text":"èƒ–æ©™ç”»é¦† åªä¸ºçˆ±å¥½ï¼Œä¸€ä¸ªç§å¯†çš„å°è—é¦† åœ¨å–§åš£çš„ä¸–ç•Œï¼Œé™¤äº†å·¥ä½œï¼Œç”Ÿæ´»ï¼Œé—²æš‡ä¹‹ä½™ï¼Œæœ‰ä¸€ä¸ªçˆ±å¥½æ˜¯å¹³ç”Ÿä¹‹æ‰€å¹¸ã€‚æ¯ä¸€æ¬¡çš„è‡ªç”±åœ°ç”»ä½œï¼Œè®©æˆ‘æ„Ÿå—ç”Ÿæ´»æŸ´ç±³æ²¹ç›æµ¸é€ç€æ˜Ÿè¾°å¤§æµ·ã€‚è¿™äº›ç”»è®©æˆ‘åœ¨ä¸å¼€å¿ƒçš„æ—¶å€™æ„Ÿåˆ°æ„‰æ‚¦ï¼Œåœ¨ä½è°·çš„æ—¶å€™ç»™äº†æˆ‘åŠ›é‡ã€‚ åœ¨è§†è§‰ä¸­å›½å…³æ³¨æˆ‘"}],"posts":[{"title":"ä¸­ä»‹è€…(mediator)æ¨¡å¼","slug":"mediator","date":"2021-07-12T08:50:10.000Z","updated":"2021-07-12T08:10:19.167Z","comments":true,"path":"2021/07/12/mediator/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/12/mediator/","excerpt":"","text":"ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰æ˜¯ç”¨æ¥é™ä½å¤šä¸ªå¯¹è±¡å’Œç±»ä¹‹é—´çš„é€šä¿¡å¤æ‚æ€§ã€‚è¿™ç§æ¨¡å¼æä¾›äº†ä¸€ä¸ªä¸­ä»‹ç±»ï¼Œè¯¥ç±»é€šå¸¸å¤„ç†ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶æ”¯æŒæ¾è€¦åˆï¼Œä½¿ä»£ç æ˜“äºç»´æŠ¤ã€‚ä¸­ä»‹è€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚åœ¨MVC æ¡†æ¶ä¸­ï¼Œå…¶ä¸­Cï¼ˆæ§åˆ¶å™¨ï¼‰å°±æ˜¯ Mï¼ˆæ¨¡å‹ï¼‰å’Œ Vï¼ˆè§†å›¾ï¼‰çš„ä¸­ä»‹è€…ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªæœç´¢è§†å›¾æ¥å±•ç¤ºä¸­ä»‹è€…æ¨¡å¼:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667protocol HistoryView &#123; var isHidden: Bool &#123; get set &#125; func setHistory(_ history: [String])&#125;protocol HistoryRepository &#123; var history: [String] &#123; get &#125; func addSearchTerm(_ term: String)&#125;class SearchHistoryMediator: NSObject &#123; private let searchBar: UISearchBar private var historyView: HistoryView private var observasion: NSKeyValueObservation? private let historyRepository: HistoryRepository init(searchBar: UISearchBar, historyView: HistoryView, historyRepository: HistoryRepository) &#123; self.searchBar = searchBar self.historyView = historyView self.historyRepository = historyRepository super.init() self.historyView.isHidden = true self.historyView.setHistory(historyRepository.history) searchBar.delegate = self observasion = searchBar.observe(\\.text) &#123; [weak self] (searchBar, _) in self?.historyView.isHidden = searchBar.text?.isEmpty ?? false &#125; &#125;&#125;extension SearchHistoryMediator: UISearchBarDelegate &#123; func searchBarTextDidBeginEditing(_ searchBar: UISearchBar) &#123; historyView.isHidden = false &#125; func searchBarTextDidEndEditing(_ searchBar: UISearchBar) &#123; historyView.isHidden = true &#125; func searchBarSearchButtonClicked(_ searchBar: UISearchBar) &#123; historyView.isHidden = true if let text = searchBar.text, !text.isEmpty &#123; historyRepository.addSearchTerm(text) historyView.setHistory(historyRepository.history) searchBar.text = nil &#125; searchBar.resignFirstResponder() &#125; func searchBarCancelButtonClicked(_ searchBar: UISearchBar) &#123; historyView.isHidden = true searchBar.resignFirstResponder() &#125;&#125;//åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä¸­ä»‹è€…private(set) lazy var mediator: SearchHistoryMediator = &#123; return SearchHistoryMediator(searchBar: searchBar, historyView: historyView, historyRepository: historyRepository)&#125;()override func viewDidLoad() &#123; super.viewDidLoad() _ = mediator&#125; ä¼˜ç‚¹ï¼šé™ä½äº†ç±»çš„å¤æ‚åº¦ï¼Œå°†ä¸€å¯¹å¤šè½¬åŒ–æˆäº†ä¸€å¯¹ä¸€ã€‚å„ä¸ªç±»ä¹‹é—´çš„è§£è€¦ï¼Œå‡å°‘å¯¹è±¡ä¹‹é—´çš„å…³è”æ€§ï¼Œè®©æ¯ä¸€ä¸ªå¯¹è±¡éƒ½èƒ½å¤Ÿç‹¬ç«‹","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://www.littlewhale.xyz/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[]},{"title":"æœ‰é™çŠ¶æ€æœºé©±åŠ¨è®¾è®¡","slug":"controllersStates","date":"2021-07-12T07:50:10.000Z","updated":"2021-07-12T07:09:03.885Z","comments":true,"path":"2021/07/12/controllersStates/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/12/controllersStates/","excerpt":"æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆFSM â€œfinite state machineâ€ æˆ–è€…FSA â€œfinite state automatonâ€ ï¼‰æ˜¯ä¸ºç ”ç©¶æœ‰é™å†…å­˜çš„è®¡ç®—è¿‡ç¨‹å’ŒæŸäº›è¯­è¨€ç±»è€ŒæŠ½è±¡å‡ºçš„ä¸€ç§è®¡ç®—æ¨¡å‹ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºæ‹¥æœ‰æœ‰é™æ•°é‡çš„çŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€å¯ä»¥è¿ç§»åˆ°é›¶ä¸ªæˆ–å¤šä¸ªçŠ¶æ€ï¼Œè¾“å…¥å­—ä¸²å†³å®šæ‰§è¡Œå“ªä¸ªçŠ¶æ€çš„è¿ç§»ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæœ‰å‘å›¾ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºæ˜¯è‡ªåŠ¨æœºç†è®ºçš„ç ”ç©¶å¯¹è±¡ã€‚æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ç‰‡æ®µä»£ç ï¼š1234567class ViewController &#123; @IBOutlet var tableView: UITableView! @IBOutlet var errorLabel: UILabel! @IBOutlet var emptyStateLabel: UILabel! @IBOutlet var activityIndicator: UIActivityIndicatorView! // Some implementation&#125;æˆ‘ä»¬å¾—å‡º4ç§çŠ¶æ€ï¼Œä¸”æ¯ç§ç‹¬ç«‹å­˜åœ¨: æ˜¾ç¤ºæ•°æ® æ˜¯å¦åœ¨åŠ è½½æ•°æ®ä¸­ æ˜¯å¦æ˜¾ç¤ºé”™è¯¯ ç©ºçŠ¶æ€æˆ‘ä»¬åœ¨æ§åˆ¶å™¨ä¸­å®šä¹‰è¯¥æšä¸¾ï¼š12345678extension ViewController &#123; enum State &#123; case loading case showingData([Item]) case empty case error(Error) &#125;&#125;","text":"æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆFSM â€œfinite state machineâ€ æˆ–è€…FSA â€œfinite state automatonâ€ ï¼‰æ˜¯ä¸ºç ”ç©¶æœ‰é™å†…å­˜çš„è®¡ç®—è¿‡ç¨‹å’ŒæŸäº›è¯­è¨€ç±»è€ŒæŠ½è±¡å‡ºçš„ä¸€ç§è®¡ç®—æ¨¡å‹ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºæ‹¥æœ‰æœ‰é™æ•°é‡çš„çŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€å¯ä»¥è¿ç§»åˆ°é›¶ä¸ªæˆ–å¤šä¸ªçŠ¶æ€ï¼Œè¾“å…¥å­—ä¸²å†³å®šæ‰§è¡Œå“ªä¸ªçŠ¶æ€çš„è¿ç§»ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæœ‰å‘å›¾ã€‚æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºæ˜¯è‡ªåŠ¨æœºç†è®ºçš„ç ”ç©¶å¯¹è±¡ã€‚æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ç‰‡æ®µä»£ç ï¼š1234567class ViewController &#123; @IBOutlet var tableView: UITableView! @IBOutlet var errorLabel: UILabel! @IBOutlet var emptyStateLabel: UILabel! @IBOutlet var activityIndicator: UIActivityIndicatorView! // Some implementation&#125;æˆ‘ä»¬å¾—å‡º4ç§çŠ¶æ€ï¼Œä¸”æ¯ç§ç‹¬ç«‹å­˜åœ¨: æ˜¾ç¤ºæ•°æ® æ˜¯å¦åœ¨åŠ è½½æ•°æ®ä¸­ æ˜¯å¦æ˜¾ç¤ºé”™è¯¯ ç©ºçŠ¶æ€æˆ‘ä»¬åœ¨æ§åˆ¶å™¨ä¸­å®šä¹‰è¯¥æšä¸¾ï¼š12345678extension ViewController &#123; enum State &#123; case loading case showingData([Item]) case empty case error(Error) &#125;&#125; æˆ‘ä»¬åœ¨æ§åˆ¶å™¨ä¸­åŠ è½½æ•°æ®çš„è¿‡ç¨‹ï¼ŒçŠ¶æ€çš„å˜åŒ–:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263protocol ItemService &#123; func loadItems(completion: @escaping (Result&lt;[Item]&gt;) -&gt; Void)&#125;class ViewController: UIViewController &#123; @IBOutlet var tableView: UITableView! @IBOutlet var errorLabel: UILabel! @IBOutlet var emptyStateLabel: UILabel! @IBOutlet var activityIndicator: UIActivityIndicatorView! private var items: [Item] = [] var itemService: ItemService! private var state: State = .empty &#123; didSet &#123; hideAll() switch state &#123; case .empty: emptyStateLabel.isHidden = false case .error(let error): errorLabel.isHidden = false errorLabel.text = error.localizedDescription case .loading: activityIndicator.isHidden = false activityIndicator.startAnimating() case .showingData(let items): self.items = items tableView.isHidden = false tableView.reloadData() &#125; &#125; &#125; override func viewDidLoad() &#123; super.viewDidLoad() loadData() &#125; private func loadData() &#123; state = .loading itemService.loadItems &#123; [weak self] result in switch result &#123; case .success(let items) where items.isEmpty: self?.state = .empty case .success(let items): self?.state = .showingData(items) case .failure(let error): self?.state = .error(error) &#125; &#125; &#125; private func hideAll() &#123; tableView.isHidden = true errorLabel.isHidden = true activityIndicator.isHidden = true activityIndicator.stopAnimating() emptyStateLabel.isHidden = true &#125;&#125; ç”¨çŠ¶æ€è®¾è®¡æ¨¡å¼å®ç°æœ‰é™çŠ¶æ€æœºç”¨çŠ¶æ€è®¾è®¡æ¨¡å¼æ¥æ”¹è¿›viewcontroller ä¸­çš„çŠ¶æ€æœº: ä¸ºæ¯ä¸ªçŠ¶æ€ç‹¬ç«‹ä¸€ä¸ªå­ç±»ï¼Œåˆ†åˆ«æ§åˆ¶çŠ¶æ€å¯¹åº”çš„å“åº”å˜åŒ–ã€‚ é¦–å…ˆåº”è¯¥å®šä¹‰ä¸€ä¸ªStateæ ¹class, æä¾›ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œæ„å»ºå½“å‰ä¼ é€’è¿›æ¥çš„æšä¸¾çŠ¶æ€æ„å»ºæ‰€å¯¹åº”çš„çŠ¶æ€å­ç±»ã€‚ çŠ¶æ€æ–¹æ³•enter()ä¸ºæ ‡è®°ä¸”å“åº”æ¯ä¸€ä¸ªçŠ¶æ€è¿›å…¥åæ‰€å“åº”æ‰§è¡Œçš„ä¸šåŠ¡å˜åŒ–ã€‚123456789101112131415161718192021222324252627282930313233343536373839class State &#123; weak var viewController: ViewController! init(viewController: ViewController) &#123; self.viewController = viewController &#125; static func state(_ state: Kind, viewController: ViewController) -&gt; State &#123; switch state &#123; case .showingData(let items): return ShowingDataState(items: items, viewController: viewController) case .loading: return LoadingState(viewController: viewController) case .empty: return EmptyState(viewController: viewController) case .error(let error): return ErrorState(error: error, viewController: viewController) &#125; &#125; func enter() &#123; viewController.tableView.isHidden = true viewController.errorLabel.isHidden = true viewController.activityIndicator.isHidden = true viewController.activityIndicator.stopAnimating() viewController.emptyStateLabel.isHidden = true &#125;&#125;extension State &#123; enum Kind &#123; case loading case showingData([Item]) case empty case error(Error) &#125;&#125; åˆ†åˆ«å®ç°ä¸åŒçŠ¶æ€çš„å­ç±»ï¼Œå¹¶ä¸”finalä¿®é¥°ï¼Œä¿è¯å­ç±»ä¸å¯å†ç»§æ‰¿ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748final class ShowingDataState: State &#123; let items: [Item] init(items: [Item], viewController: ViewController) &#123; self.items = items super.init(viewController: viewController) &#125; override func enter() &#123; super.enter() viewController.items = items viewController.tableView.isHidden = false viewController.tableView.reloadData() &#125;&#125;final class LoadingState: State &#123; override func enter() &#123; super.enter() viewController.emptyStateLabel.isHidden = false &#125;&#125;final class EmptyState: State &#123; override func enter() &#123; super.enter() viewController.emptyStateLabel.isHidden = false &#125;&#125;final class ErrorState: State &#123; let error: Error init(error: Error, viewController: ViewController) &#123; self.error = error super.init(viewController: viewController) &#125; override func enter() &#123; super.enter() viewController.errorLabel.isHidden = false viewController.errorLabel.text = error.localizedDescription &#125;&#125; OK,æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€äº›viewControllerå¦‚ä½•ä½¿ç”¨æœ‰é™çŠ¶æ€æœº:12345678910111213141516171819202122232425262728293031323334353637class ViewController: UIViewController &#123; @IBOutlet var tableView: UITableView! @IBOutlet var errorLabel: UILabel! @IBOutlet var emptyStateLabel: UILabel! @IBOutlet var activityIndicator: UIActivityIndicatorView! var items: [Item] = [] var itemService: ItemService! lazy var state = State.state(.empty, viewController: self) override func viewDidLoad() &#123; super.viewDidLoad() loadData() &#125; private func loadData() &#123; state = .state(.loading, viewController: self) state.enter() itemService.loadItems &#123; [weak self] result in guard let self = self else &#123; return &#125; switch result &#123; case .success(let items) where items.isEmpty: self.state = .state(.empty, viewController: self) case .success(let items): self.state = .state(.showingData(items), viewController: self) case .failure(let error): self.state = .state(.error(error), viewController: self) &#125; self.state.enter() &#125; &#125;&#125; è¿™æ ·å¯¹äºçŠ¶æ€æœºçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œself.state.enter()æ–¹æ³•å“åº”çŠ¶æ€å˜æ›´åå‘ç”Ÿçš„äº‹æƒ…ï¼Œè¿™æ ·ä»£ç æ˜¯ä¸æ˜¯å¾ˆç®€æ´ï¼Ÿhahaã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"åœ¨Swiftä¸­å®ç°â€œå¤šç»§æ‰¿â€","slug":"inheritance","date":"2021-07-12T02:50:10.000Z","updated":"2021-07-12T03:08:19.125Z","comments":true,"path":"2021/07/12/inheritance/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/12/inheritance/","excerpt":"Swiftèƒ½å®ç°å¤šç»§æ‰¿å—ï¼Ÿè™½ç„¶å¤šç»§æ‰¿åœ¨C++ä¸­å¯ä»¥å®ç°ï¼Œä½†åœ¨Swiftä¸­ï¼Œæ˜¯ä¸èƒ½å¤Ÿå®ç°å¤šç»§æ‰¿çš„ã€‚ä½†ä¸€ä¸ªclasså¯ä»¥éµå¾ªå¤šä¸ªåè®®ï¼Œåªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ã€‚ä½†å€¼ç±»å‹æ¯”å¦‚ struct , enum å°±ä¸å­˜åœ¨ç»§æ‰¿è¿™ä¹ˆä¸€è¯´ï¼Œä½†è¿˜æ˜¯å¯ä»¥éµå¾ªå¤šä¸ªåè®®çš„ã€‚Swiftåªæ”¯æŒåè®®å¤šç»§æ‰¿å¦‚ï¼š1234567protocol ChildAB:ChildA,ChildB &#123;&#125;class MyClass: ChildAB &#123; func method() &#123; &#125;&#125; structæˆ–classå¯éµå¾ªå¤šä¸ªåè®®å®ç°å‡â€œå¤šç»§æ‰¿â€æ¯”å¦‚ä»¥ä¸‹ç‰‡æ®µç»™UIViewæ‰©å±•å®ç°å¤šä¸ªåè®®çš„æ–¹æ³•ï¼š12345678910111213141516171819202122232425262728293031323334353637protocol Blinkable &#123; func blink()&#125;extension Blinkable where Self: UIView &#123; func blink() &#123; alpha = 1 UIView.animate( withDuration: 0.5, delay: 0.25, options: [.repeat, .autoreverse], animations: &#123; self.alpha = 0 &#125;) &#125;&#125;// MARK: - Scalableprotocol Scalable &#123; func scale()&#125;extension Scalable where Self: UIView &#123; func scale() &#123; transform = .identity UIView.animate( withDuration: 0.5, delay: 0.25, options: [.repeat, .autoreverse], animations: &#123; self.transform = CGAffineTransform(scaleX: 1.5, y: 1.5) &#125;) &#125;&#125;è¿™æ ·ï¼Œæˆ‘ä»¬ç”³æ˜ä¸€ä¸ªViewçš„å®ä¾‹ï¼Œé‚£ä¹ˆå¯ä»¥è°ƒç”¨blink,scale ç­‰æ–¹æ³•ã€‚123extension UIView: Scalable, Blinkable &#123;&#125;aView.blink()aView.scale()","text":"Swiftèƒ½å®ç°å¤šç»§æ‰¿å—ï¼Ÿè™½ç„¶å¤šç»§æ‰¿åœ¨C++ä¸­å¯ä»¥å®ç°ï¼Œä½†åœ¨Swiftä¸­ï¼Œæ˜¯ä¸èƒ½å¤Ÿå®ç°å¤šç»§æ‰¿çš„ã€‚ä½†ä¸€ä¸ªclasså¯ä»¥éµå¾ªå¤šä¸ªåè®®ï¼Œåªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ã€‚ä½†å€¼ç±»å‹æ¯”å¦‚ struct , enum å°±ä¸å­˜åœ¨ç»§æ‰¿è¿™ä¹ˆä¸€è¯´ï¼Œä½†è¿˜æ˜¯å¯ä»¥éµå¾ªå¤šä¸ªåè®®çš„ã€‚Swiftåªæ”¯æŒåè®®å¤šç»§æ‰¿å¦‚ï¼š1234567protocol ChildAB:ChildA,ChildB &#123;&#125;class MyClass: ChildAB &#123; func method() &#123; &#125;&#125; structæˆ–classå¯éµå¾ªå¤šä¸ªåè®®å®ç°å‡â€œå¤šç»§æ‰¿â€æ¯”å¦‚ä»¥ä¸‹ç‰‡æ®µç»™UIViewæ‰©å±•å®ç°å¤šä¸ªåè®®çš„æ–¹æ³•ï¼š12345678910111213141516171819202122232425262728293031323334353637protocol Blinkable &#123; func blink()&#125;extension Blinkable where Self: UIView &#123; func blink() &#123; alpha = 1 UIView.animate( withDuration: 0.5, delay: 0.25, options: [.repeat, .autoreverse], animations: &#123; self.alpha = 0 &#125;) &#125;&#125;// MARK: - Scalableprotocol Scalable &#123; func scale()&#125;extension Scalable where Self: UIView &#123; func scale() &#123; transform = .identity UIView.animate( withDuration: 0.5, delay: 0.25, options: [.repeat, .autoreverse], animations: &#123; self.transform = CGAffineTransform(scaleX: 1.5, y: 1.5) &#125;) &#125;&#125;è¿™æ ·ï¼Œæˆ‘ä»¬ç”³æ˜ä¸€ä¸ªViewçš„å®ä¾‹ï¼Œé‚£ä¹ˆå¯ä»¥è°ƒç”¨blink,scale ç­‰æ–¹æ³•ã€‚123extension UIView: Scalable, Blinkable &#123;&#125;aView.blink()aView.scale() å¤šä¸ªåè®®æ‰©å±•ç›¸åŒæ–¹æ³•ï¼šå¯¹è±¡æ–¹æ³•è°ƒç”¨æ—¶çš„è±å½¢é—®é¢˜123456789101112131415161718192021222324252627282930protocol Root &#123; func method()&#125;extension Root &#123; func method() &#123; print(\"Method from Root\") &#125;&#125;protocol ChildA: Root &#123;&#125;extension ChildA &#123; func method() &#123; print(\"Method from ChildA\") &#125;&#125;protocol ChildB: Root &#123;&#125;extension ChildB &#123; func method() &#123; print(\"Method from ChildB\") &#125;&#125;class MyClass: ChildA, ChildB &#123;&#125; // Error: Type 'MyClass' does not conform to protocol 'Root'let classA = MyClass()classA.method() //æ­¤åˆ»ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å¾ˆæ˜æ˜¾ç¼–è¯‘ä¸é€šè¿‡ï¼Œç”±äºChildA ,ChildB ä¸¤åè®®éƒ½æ‰©å±•äº†åè®®methodæ–¹æ³•ï¼Œæ­¤åˆ»æ¨¡æ£±ä¸¤å¯ï¼Œç¨‹åºä¸çŸ¥é“methodæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯å“ªä¸ªåè®®æ‰©å±•çš„æ–¹æ³•ã€‚ å¦‚ä½•è§£å†³é—®é¢˜è±å½¢ï¼Ÿåœ¨éµå¾ªè¯¥æ–¹æ³•çš„ç±»é‡Œï¼Œå®ç°è¯¥åè®®çš„æ–¹æ³•ã€‚ä¸ä½¿ç”¨åè®®ChildA,ChildBé»˜è®¤çš„æ‰©å±•æ–¹æ³•ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±çŸ¥é“è°ƒç”¨çš„æ˜¯è‡ªèº«çš„method()æ–¹æ³•12345class MyClass: ChildA, ChildB &#123; func method() &#123; print(\"hello,it's MyClass\") &#125;&#125;å°½é‡è®©åè®®çš„æ–¹æ³•åä¸é‡åã€‚åœ¨ChildAæˆ–è€…ChildBä¸­æ‰©å±•ä¸åŒçš„å®ç°æ–¹æ³•ï¼Œç„¶åéµå¾ªåè®®çš„ç±»æˆ–è€…ç»“æ„ä½“å®ç°methodæ–¹æ³•æ ¹æ®éœ€è¦è°ƒç”¨methodA è¿˜æ˜¯methodB123456789101112131415161718192021extension ChildA &#123; func methodA() &#123; print(\"Method from ChildA\") &#125;&#125;extension ChildB &#123; func methodB() &#123; print(\"Method from ChildB\") &#125;&#125;class MyClass: ChildA, ChildB &#123; func method() &#123; if æ¡ä»¶ &#123; methodA() &#125;else&#123; methodB() &#125; &#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å­—å…¸","slug":"safeDic","date":"2021-07-09T09:30:10.000Z","updated":"2021-07-12T03:01:33.187Z","comments":true,"path":"2021/07/09/safeDic/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/09/safeDic/","excerpt":"Swiftä¸OCæœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ–°å¢äº†å€¼ç±»å‹Struct, letå˜é‡ä¿®é¥°åæ— æ³•å†æ¬¡è¢«èµ‹å€¼å®ç°çœŸæ­£çš„immutableï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦èµ‹å€¼ä¸èƒ½å†æ¬¡ä¿®æ”¹ã€‚è™½ç„¶OCä¸­å®šä¹‰NSArray *arr ä¹Ÿæ˜¯ä¸€ä¸ªimmutableï¼Œä½†æ˜¯arrå¯¹è±¡æŒ‡é’ˆæŒ‡å‘è¿˜å¯ä»¥è¢«å†æ¬¡é‡æ–°èµ‹å€¼ã€‚OCæ˜¯ä¸€é—¨è¿è¡Œæ—¶è¯­è¨€ï¼Œarræ‰€æŒ‡å‘çš„å˜é‡éƒ½æ˜¯è¿è¡Œæ—¶è·å–å¯¹è±¡ã€‚OCä¸­ä½¿ç”¨immutableä¸ç›´æ¥ç­‰åŒäºçº¿ç¨‹å®‰å…¨ã€‚Objective-Cä¸­å­˜åœ¨æ·±æ‹·è´ã€æµ…æ‹·è´ï¼Œå³ä½¿ä½ è°ƒç”¨ä¸€ä¸ª[NSMutableArray Copy]å¾—åˆ°çš„NSArrayä¹Ÿä¸ä»£è¡¨è¿™ä¸ªæ•°ç»„ä¸­çš„å¯¹è±¡éƒ½æ˜¯ç»è¿‡æ·±æ‹·è´ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å¦‚ä¸‹ä»£ç ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿï¼š123if (self.xxx) &#123; [self.dict setObject:@\"ah\" forKey:self.xxx];&#125;åœ¨å•çº¿ç¨‹æ¨¡å¼ä¸‹è‚¯å®šæ˜¯æ²¡å•¥é—®é¢˜ï¼Œä½†åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹æ¯”å¦‚çº¿ç¨‹A,çº¿ç¨‹Bä¸¤è€…éƒ½åŒæ—¶è¿›å…¥äº†ifæ¡ä»¶ï¼Œå½“Aæ­£è¦æ‰§è¡Œsetæ“ä½œ,Bå·²ç»å¯¹self.dict = nilã€‚é‚£ä¹ˆçº¿ç¨‹Aè‚¯å®šæ˜¯ä¸èƒ½è®¾ç½®æˆåŠŸçš„ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æƒ…å†µï¼Œå½“æˆ‘ä»¬çš„æ•°æ®èµ„æºæ¯”å¦‚é›†åˆï¼Œå¤šçº¿ç¨‹å¯¹èµ„æºè¿›è¡Œäº‰å¤ºã€‚å¦‚æ·»åŠ å’Œç§»é™¤æ“ä½œã€‚ä¸ºäº†ä¿è¯æœ€ç»ˆç»“æœçš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç»™æ“ä½œä»£ç åŠ é”ã€‚123OSSpinLock(&amp;_lock);[self.array addObject:@\"data1\"];OSSpinUnlock(&amp;_lock);","text":"Swiftä¸OCæœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ–°å¢äº†å€¼ç±»å‹Struct, letå˜é‡ä¿®é¥°åæ— æ³•å†æ¬¡è¢«èµ‹å€¼å®ç°çœŸæ­£çš„immutableï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦èµ‹å€¼ä¸èƒ½å†æ¬¡ä¿®æ”¹ã€‚è™½ç„¶OCä¸­å®šä¹‰NSArray *arr ä¹Ÿæ˜¯ä¸€ä¸ªimmutableï¼Œä½†æ˜¯arrå¯¹è±¡æŒ‡é’ˆæŒ‡å‘è¿˜å¯ä»¥è¢«å†æ¬¡é‡æ–°èµ‹å€¼ã€‚OCæ˜¯ä¸€é—¨è¿è¡Œæ—¶è¯­è¨€ï¼Œarræ‰€æŒ‡å‘çš„å˜é‡éƒ½æ˜¯è¿è¡Œæ—¶è·å–å¯¹è±¡ã€‚OCä¸­ä½¿ç”¨immutableä¸ç›´æ¥ç­‰åŒäºçº¿ç¨‹å®‰å…¨ã€‚Objective-Cä¸­å­˜åœ¨æ·±æ‹·è´ã€æµ…æ‹·è´ï¼Œå³ä½¿ä½ è°ƒç”¨ä¸€ä¸ª[NSMutableArray Copy]å¾—åˆ°çš„NSArrayä¹Ÿä¸ä»£è¡¨è¿™ä¸ªæ•°ç»„ä¸­çš„å¯¹è±¡éƒ½æ˜¯ç»è¿‡æ·±æ‹·è´ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å¦‚ä¸‹ä»£ç ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿï¼š123if (self.xxx) &#123; [self.dict setObject:@\"ah\" forKey:self.xxx];&#125;åœ¨å•çº¿ç¨‹æ¨¡å¼ä¸‹è‚¯å®šæ˜¯æ²¡å•¥é—®é¢˜ï¼Œä½†åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹æ¯”å¦‚çº¿ç¨‹A,çº¿ç¨‹Bä¸¤è€…éƒ½åŒæ—¶è¿›å…¥äº†ifæ¡ä»¶ï¼Œå½“Aæ­£è¦æ‰§è¡Œsetæ“ä½œ,Bå·²ç»å¯¹self.dict = nilã€‚é‚£ä¹ˆçº¿ç¨‹Aè‚¯å®šæ˜¯ä¸èƒ½è®¾ç½®æˆåŠŸçš„ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æƒ…å†µï¼Œå½“æˆ‘ä»¬çš„æ•°æ®èµ„æºæ¯”å¦‚é›†åˆï¼Œå¤šçº¿ç¨‹å¯¹èµ„æºè¿›è¡Œäº‰å¤ºã€‚å¦‚æ·»åŠ å’Œç§»é™¤æ“ä½œã€‚ä¸ºäº†ä¿è¯æœ€ç»ˆç»“æœçš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç»™æ“ä½œä»£ç åŠ é”ã€‚123OSSpinLock(&amp;_lock);[self.array addObject:@\"data1\"];OSSpinUnlock(&amp;_lock);åœ¨OCä¸­ï¼Œä¿®é¥°å±æ€§é€šå¸¸ä¼šç”¨éåŸå­æ€§nonatomicã€‚å½“å±æ€§è®¾ç½®åœ¨å¤šçº¿ç¨‹å¹¶å‘æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½ä¼šå´©æºƒã€‚ self.xxx = â€œ111â€ å…¶å®æ˜¯è°ƒç”¨äº†xxxå±æ€§çš„setteræ–¹æ³•ã€‚1234567- (void)setXxx:(NSString *)newXXX &#123; if (newXXX != _xxx) &#123; [newXXX retain]; [_xxx release]; _userName = newXXX; &#125;&#125;ç”±äºæ²¡æœ‰åŠ é”ï¼Œå½“å¤šä¸ªçº¿ç¨‹éƒ½è¿›å…¥ifæ¡ä»¶åˆ¤æ–­åï¼Œä¼šå¯¹_xxxå¤šæ¬¡release,è¿™å°±ç›´æ¥crashæ‰ã€‚å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¯•éªŒ,åœ¨å¤šæ¬¡æ‰§è¡Œåï¼Œéšæœºåœ°å¯èƒ½crashæ‰ï¼š12345for (int i = 0; i &lt; 5000; i++) &#123; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; self.data = [[NSMutableData alloc] init]; &#125;);&#125;è€Œä¿®é¥°è¯atomicä¿®é¥°ä¿è¯å±æ€§çš„åŸå­æ€§ï¼Œç³»ç»Ÿç»™å±æ€§çš„getã€setæ–¹æ³•åŒ…è£…ä¸€å±‚äº’æ–¥é”ã€‚ä½†è‹¹æœä¸å»ºè®®æˆ‘ä»¬ä½¿ç”¨ï¼Œå› ä¸ºé¢‘ç¹è¯»å–æ€§èƒ½æŸè€—éå¸¸å¤§ã€‚å¹¶ä¸”ä¹Ÿåªèƒ½ä¿è¯set,getçš„å®‰å…¨æ€§ã€‚å¦‚æœå±æ€§å¯¹è±¡æ˜¯æ•°ç»„ï¼Œå‡è®¾åœ¨å­çº¿ç¨‹Aä¸­å¯¹æ•°ç»„å†™æ“ä½œï¼Œè€Œä¸»çº¿ç¨‹ä¸€ç›´åœ¨è¯»æ•°æ®ï¼Œ[self.arr objectAtIndex:index] å°±å¾ˆå®¹æ˜“å‡ºç°è¶Šç•Œå´©æºƒã€‚ atomicå¹¶ä¸èƒ½èµ·åˆ°çº¿ç¨‹å®‰å…¨æ€§ä½œç”¨ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦æ€ä¹ˆæ ·æ‰èƒ½ä¿è¯å¯å˜æ•°ç»„çš„çº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢ï¼Ÿé€šè¿‡æ …æ å‡½æ•°dispatch_barrierå¯ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨ã€‚123456789101112131415161718192021222324252627282930313233343536@interface QGYSafeDic: NSObject- (void)qgy_setSafeObject: (id)object forKey:(NSString *)key;- (id)qgy_safeObjectForKey: (NSString *)key;@end@implementation QGYSafeDic&#123; NSMutableDictionary* _dic; dispatch_queue_t _concurrentQueue ;&#125; - (instancetype)init &#123; if (self = [super init])&#123; _concurrentQueue = dispatch_queue_create(\"com.qgy.syncQueue\", DISPATCH_QUEUE_CONCURRENT); _dic = [NSMutableDictionary dictionary]; &#125; return self; &#125;- (void)qgy_setSafeObject: (id)object forKey:(NSString *)key&#123; key = [key copy]; dispatch_barrier_async(_concurrentQueue, ^&#123; [_dic setObject:object forKey:key]; &#125;);&#125;- (id)qgy_safeObjectForKey: (NSString *)key&#123; __block NSString *tempObj; dispatch_sync(_concurrentQueue, ^&#123; tempObj = [_dic objectForKey:key]; &#125;); return tempObj;&#125;@end Swift ç‰ˆæœ¬ï¼š123456789101112131415161718192021222324public class SafeDict&lt;Key: Hashable, Value&gt;: CustomDebugStringConvertible &#123; private var dictStorage = [Key: Value]() private let queue = DispatchQueue(label: \"com.qgy.\\(UUID().uuidString)\", qos: .utility, attributes: .concurrent, autoreleaseFrequency: .inherit, target: .global()) public init() &#123;&#125; public subscript(key: Key) -&gt; Value? &#123; get &#123; queue.sync &#123; dictStorage[key] &#125; &#125; set &#123; queue.async(flags: .barrier) &#123; [weak self] in self?.dictStorage[key] = newValue &#125; &#125; &#125; public var debugDescription: String &#123; return dictStorage.debugDescription &#125;&#125;æµ‹è¯•ï¼š1234567891011121314151617181920212223class MyTest &#123; var atomicDict = SafeDict&lt;String, Int&gt;() func test()&#123; let g = DispatchGroup() for index in (0..&lt;10) &#123; g.enter() DispatchQueue.global().async &#123; self.atomicDict[\"key\\(index)\"] = index g.leave() &#125; &#125; g.notify(queue: .main, execute: &#123; print(self.atomicDict) &#125;) &#125;&#125;let obj = MyTest()obj.test()//ç»“æœï¼š[\"key8\": 8, \"key0\": 0, \"key2\": 2, \"key9\": 9, \"key6\": 6, \"key3\": 3, \"key7\": 7, \"key5\": 5, \"key1\": 1, \"key4\": 4]","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ç»™æ•°ç»„å…ƒç´ å»é‡","slug":"hash","date":"2021-07-08T07:30:10.000Z","updated":"2021-07-08T07:06:29.076Z","comments":true,"path":"2021/07/08/hash/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/08/hash/","excerpt":"","text":"ä¸€ä¸ªæ•°ç»„ï¼Œè¦å¯¹å…ƒç´ è¿›è¡Œå»é‡æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ï¼Œè¦ä¹ˆé‡å†™equalsæ–¹æ³•åšæ¯”è¾ƒï¼Œè¦ä¹ˆåˆ©ç”¨Hashå€¼åšæ¯”è¾ƒã€‚å‡è®¾å¯¹è±¡ä¸ºç‚¹Point1234struct Point &#123; let x: Int let y: Int&#125; è®©å¯¹è±¡å®ç°equalsæ–¹æ³•12345extension Point: Equatable &#123; static func == (lhs: Point, rhs: Point) -&gt; Bool &#123; return lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y &#125;&#125; æ¥ç€ï¼Œæˆ‘ä»¬å¯¹Arrayåšæ‰©å±•ï¼Œæ–°å¢å»é‡æ–¹æ³•å¹¶è¿”å›æ–°æ•°ç»„ï¼š1234567891011extension Array where Element: Equatable &#123; func uniqueElements() -&gt; [Element] &#123; var out = [Element]() for element in self &#123; if !out.contains(element) &#123; out.append(element) &#125; &#125; return out &#125;&#125; ç”¨Hashå€¼æ–¹å¼æ¯”è¾ƒå¯¹è±¡æŠŠå…ƒç´ å¯¹è±¡æ”¾è‡³Setæ— åºé›†åˆä¸­ï¼Œç”±äºSetæ ¹æ®Hashå€¼æ¥å­˜å‚¨ï¼Œå¯å­˜å‚¨å”¯ä¸€Hashå€¼å¯¹è±¡ä¿è¯ä¸é‡å¤ã€‚å‡†å¤‡ä¸€ä¸ªç©ºæ•°ç»„æ¥æ”¶ã€‚1extension Point: Hashable &#123;&#125;123456789101112131415extension Array where Element: Hashable &#123; func uniqueElements() -&gt; [Element] &#123; var seen = Set&lt;Element&gt;() var out = [Element]() for element in self &#123; if !seen.contains(element) &#123; out.append(element) seen.insert(element) &#125; &#125; return out &#125;&#125;å°†ä»£ç ç”¨compactMapæ”¹è¿›ä¸€ä¸‹ï¼šéå†æ¯ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›ä¸ä¸ºnilçš„å…ƒç´ ã€‚æˆ‘ä»¬æ ¹æ®å…ƒç´ æ˜¯å¦å­˜åœ¨Seté›†åˆä¸­ä¸ºæ¡ä»¶ï¼Œå½“å­˜åœ¨é›†åˆä¸­æ—¶è¿”å›nilã€‚12345678910111213extension Array where Element: Hashable &#123; func uniqueElements() -&gt; [Element] &#123; var seen = Set&lt;Element&gt;() return self.compactMap &#123; element in guard !seen.contains(element) else &#123; return nil &#125; seen.insert(element) return element &#125; &#125;&#125;å½“æˆ‘ä»¬ä¸è€ƒè™‘åŸå…ƒç´ å¯¹è±¡é¡ºåºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¿«é€Ÿå¯¹å…ƒç´ å»é‡123456extension Array where Element: Hashable &#123; func unsortedUniqueElements() -&gt; [Element] &#123; let set = Set(self) return Array(set) &#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ä½•æ—¶ä½¿ç”¨weak self é˜²æ­¢å†…å­˜æ³„éœ²","slug":"weak","date":"2021-07-08T03:50:10.000Z","updated":"2021-07-08T04:28:57.745Z","comments":true,"path":"2021/07/08/weak/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/08/weak/","excerpt":"æˆ‘ä»¬éƒ½æƒ³å†™å¾—ä¸€æ‰‹å¥½ä»£ç ã€‚è¿™åŒ…å«é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå½“åœ¨å†™é—­åŒ…æ—¶ä¸šåŠ¡å¦‚æœéœ€è¦ç”¨åˆ°selfï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨[weak self] ä¿®é¥°ã€‚ä½†ä¸ºä»€ä¹ˆéœ€è¦å¼±æ•è·å‘¢ï¼Ÿæ˜¯å¦ä»»ä½•æƒ…å†µä¸‹åœ¨é—­åŒ…é‡Œéƒ½è¦ç”¨weak? æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç”¨æ•è·åˆ—è¡¨æ¥å›ç­”è¿™å‡ ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†è®²è§£åˆ°ä¸åŒçš„æ•è·ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨åˆé€‚çš„æ•è·å»å¤„ç†é—®é¢˜ã€‚ ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨æˆ‘ä»¬å…ˆçœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼Œè°ƒç”¨é—­åŒ…åæ˜¾ç¤ºçš„ç»“æœ:12345678var name = \"qiu\"var appendToName = &#123; (string: String) -&gt; String in return name.appending(string)&#125;let one = appendToName(\"gaoying\") //qiugaoyingname = \"liu\"let two = appendToName(\"gaoying\") //liugaoyingé—­åŒ…å¯å¯¹åŒä¸€ä½œç”¨åŸŸèŒƒå›´å†…çš„å±æ€§åšå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…å†…æŒæœ‰çš„å±æ€§åœ¨åŒä¸€ä¸Šä¸‹æ–‡ä½œç”¨åŸŸå†…å˜æ›´å—å½±å“ã€‚æˆ‘ä»¬å†è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼š 12345678var name = \"qiu\"var appendToName = &#123; [name] (string: String) -&gt; String in return name.appending(string)&#125;let one = appendToName(\"gaoying\") //qiugaoyingname = \"liu\"let two = appendToName(\"gaoying\") //qiugaoying è¿™æ—¶è¾“å‡ºçš„ç»“æœéƒ½ä¸ºqiugaoyingã€‚[name] å°†å±æ€§nameæ”¾åœ¨é—­åŒ…çš„æ•è·åˆ—è¡¨ï¼Œæ˜ç¡®åœ°å‘Šè¯‰é—­åŒ…å¼ºæŒæœ‰é—­åŒ…é¦–æ¬¡è°ƒç”¨æ—¶çš„nameå€¼ã€‚å¦‚æœè¦åœ¨é—­åŒ…æ•è·åˆ—è¡¨å†…æ•è·å¤šä¸ªå€¼ï¼Œåˆ™ç”¨é€—å·éš”å¼€ï¼Œå¦‚[property, anotherProperty] in æ–¹å¼ã€‚","text":"æˆ‘ä»¬éƒ½æƒ³å†™å¾—ä¸€æ‰‹å¥½ä»£ç ã€‚è¿™åŒ…å«é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå½“åœ¨å†™é—­åŒ…æ—¶ä¸šåŠ¡å¦‚æœéœ€è¦ç”¨åˆ°selfï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨[weak self] ä¿®é¥°ã€‚ä½†ä¸ºä»€ä¹ˆéœ€è¦å¼±æ•è·å‘¢ï¼Ÿæ˜¯å¦ä»»ä½•æƒ…å†µä¸‹åœ¨é—­åŒ…é‡Œéƒ½è¦ç”¨weak? æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç”¨æ•è·åˆ—è¡¨æ¥å›ç­”è¿™å‡ ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†è®²è§£åˆ°ä¸åŒçš„æ•è·ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨åˆé€‚çš„æ•è·å»å¤„ç†é—®é¢˜ã€‚ ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨æˆ‘ä»¬å…ˆçœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼Œè°ƒç”¨é—­åŒ…åæ˜¾ç¤ºçš„ç»“æœ:12345678var name = \"qiu\"var appendToName = &#123; (string: String) -&gt; String in return name.appending(string)&#125;let one = appendToName(\"gaoying\") //qiugaoyingname = \"liu\"let two = appendToName(\"gaoying\") //liugaoyingé—­åŒ…å¯å¯¹åŒä¸€ä½œç”¨åŸŸèŒƒå›´å†…çš„å±æ€§åšå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…å†…æŒæœ‰çš„å±æ€§åœ¨åŒä¸€ä¸Šä¸‹æ–‡ä½œç”¨åŸŸå†…å˜æ›´å—å½±å“ã€‚æˆ‘ä»¬å†è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼š 12345678var name = \"qiu\"var appendToName = &#123; [name] (string: String) -&gt; String in return name.appending(string)&#125;let one = appendToName(\"gaoying\") //qiugaoyingname = \"liu\"let two = appendToName(\"gaoying\") //qiugaoying è¿™æ—¶è¾“å‡ºçš„ç»“æœéƒ½ä¸ºqiugaoyingã€‚[name] å°†å±æ€§nameæ”¾åœ¨é—­åŒ…çš„æ•è·åˆ—è¡¨ï¼Œæ˜ç¡®åœ°å‘Šè¯‰é—­åŒ…å¼ºæŒæœ‰é—­åŒ…é¦–æ¬¡è°ƒç”¨æ—¶çš„nameå€¼ã€‚å¦‚æœè¦åœ¨é—­åŒ…æ•è·åˆ—è¡¨å†…æ•è·å¤šä¸ªå€¼ï¼Œåˆ™ç”¨é€—å·éš”å¼€ï¼Œå¦‚[property, anotherProperty] in æ–¹å¼ã€‚ å…³äºå†…å­˜æ³„éœ²12345678910class MyClass &#123;&#125;var instance: MyClass? = MyClass()var aClosure = &#123; [instance] in print(instance)&#125;aClosure() // MyClassinstance = nilaClosure() // MyClass å¦‚ä¸Šä»£ç ç‰‡æ®µï¼Œå½“instance = nilä¹‹åï¼Œé—­åŒ…å†æ¬¡è°ƒç”¨ï¼Œæ­¤æ—¶instanceä»ç„¶åœ¨é—­åŒ…å†…è¢«å¼ºæ•è·ã€‚å³è™½ç„¶instanceç½®ä¸ºnilï¼Œä½†é—­åŒ…é‡Œå¼ºæ•è·çš„å±æ€§æ²¡æœ‰è¢«é‡Šæ”¾ã€‚æ­¤åˆ»instanceæ•è·çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆé—­åŒ…å¼ºæŒ‡é’ˆå¼•ç”¨è¯¥å¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“åœ¨å†…å­˜ç®¡ç†æ—¶å€™ï¼Œå¼•ç”¨ç±»å‹å¯¹è±¡åªè¦å¼•ç”¨è®¡æ•°å¤§äº1ï¼Œé‚£ä¹ˆå†å†…å­˜ä¸­æ˜¯ä¸ä¼šè¢«å›æ”¶çš„ï¼Œæ­¤åˆ»ï¼Œå³é€ æˆäº†å†…å­˜æ³„éœ²ã€‚ å¦‚æœå¼ºæ•è·çš„å±æ€§æ˜¯å€¼ç±»å‹(ç»“æ„ä½“æˆ–è€…æšä¸¾)ï¼Œé‚£ä¹ˆå¼ºæ•è·çš„æ—¶å€™å°†å‘ç”Ÿcopyã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯ä¸å¸Œæœ›è¿™ç§æƒ…å†µå‘ç”Ÿçš„ã€‚ä¸¾ä¸€ä¸ªåœºæ™¯ï¼šå½“æˆ‘ä»¬åœ¨ViewControlleræ‰§è¡Œç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œåœ¨è¯·æ±‚ç»“æœå›æ¥ä¹‹å‰ï¼Œæˆ‘ä»¬dismissedäº†æ§åˆ¶å™¨ï¼Œå¦‚æœç½‘ç»œè¯·æ±‚å›è°ƒçš„å¿…è¦å†…å¼ºæ•è·äº†æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆå†…å­˜ä¸­æ˜¯ä»ç„¶å­˜åœ¨è¯¥ViewControllerã€‚å½“æ¥å›åˆ‡æ¢çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯é€ æˆäº†å¾ˆå¤šå†…å­˜æ³„éœ²å‘¢ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼ŸæŠŠå¼ºæ•è·æ”¹æˆå¼±æ•è·å°±è¡Œäº†ï¼Œä½¿ç”¨weakå…³é”®å­—ã€‚123456789101112class MyClass &#123;&#125;var instance: MyClass? = MyClass()var aClosure = &#123; [weak instance] in print(instance) guard strongSelf = instance else &#123; return &#125; //do something&#125;aClosure() // MyClassinstance = nilaClosure() // nilåœ¨é—­åŒ…è°ƒç”¨ä¹‹å‰ï¼Œå¦‚æœå¯¹è±¡é”€æ¯äº†ç»§ç»­è°ƒç”¨é—­åŒ…å¯èƒ½ä¼šå‡ºä¸€äº›æ½œåœ¨çš„ä¸šåŠ¡bugã€‚å¦‚æœä½ æƒ³ç«‹å³æŠ›å‡ºå¼‚å¸¸æˆ–ç›´æ¥è®©ç¨‹åºcrashæ‰ï¼Œè¿™æ ·æœ‰åŠ©äºåŠæ—©åœ°å‘ç°é—®é¢˜ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨å…³é”®å­—unownedå…³é”®å­—è¿›è¡Œæ•è·ã€‚123456789101112class MyClass &#123;&#125;var instance: MyClass? = MyClass()var aClosure = &#123; [unowned instance] in print(instance) guard strongSelf = instance else &#123; return &#125; //do something&#125;aClosure() // MyClassinstance = nilaClosure() // Crash é—­åŒ…å†…ä½•æ—¶ç›´æ¥ç”¨ self å½“self æŒ‡çš„æ˜¯å€¼ç±»å‹(ç»“æ„ä½“ã€æšä¸¾)æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ç”¨self. å› ä¸ºç»“æ„ä½“æ²¡æœ‰æŒ‡é’ˆå¼•ç”¨ä»–ä»¬ï¼Œåœ¨é—­åŒ…å†…ä¹Ÿä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²ä¸€è¯´ã€‚ å½“é—­åŒ…å’Œselfå¯¹è±¡æ— ç›´æ¥æŒæœ‰å…³ç³»æ—¶å€™ï¼Œæ¯”å¦‚DispatchQueue.123456class MyClass &#123; func dispatchSomething() &#123; DispatchQueue.global().async &#123; &#125; &#125;&#125; åœ¨è°ƒç”¨dispatchSomethingæ–¹æ³•åï¼Œå¼‚æ­¥é—­åŒ…ä½“ä¼šç«‹å³æ‰§è¡Œï¼Œåœ¨é—­åŒ…ä½“å¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨selfã€‚å¦‚æœé—­åŒ…æ˜¯å¯¹è±¡çš„æŸä¸€äº‹ä»¶å›è°ƒä½ éœ€è¦ç•™æ„selfæ˜¯å¦å¼±å¼•ç”¨é¿å…å¼•èµ·å¾ªç¯å¼•ç”¨ã€‚æœ‰ä¸ªæœ€ç®€å•çš„æ–¹æ³•åˆ¤æ–­è°ƒç”¨çš„å‡½æ•°é—­åŒ…æ˜¯å¦è¢«æŒæœ‰ï¼šåˆ¤æ–­æ˜¯å¦æœ‰å…³é”®å­—@escapingã€‚ é—­åŒ…é‡Œä½•æ—¶ç”¨å¼ºæ•è·å˜é‡å¼ºæ•è·ç”¨çš„åœºæ™¯æ¯”è¾ƒå°‘ã€‚ä»¥ä¸‹æœ‰ä¸€ä¸ªä¾‹å­ï¼Œå¦‚åœ¨ç½‘ç»œè¯·æ±‚åï¼Œé€šè¿‡æœ¬åœ°å­˜å‚¨CoreDataæˆ–è€…SqliteæŠŠæ•°æ®æŒä¹…åŒ–ã€‚1234567891011struct SomeDataSource &#123; var storage: MyDataStore //class let networking: NetworkingLayer // more properties func refreshData() &#123; networking.refresh &#123; [storage] data in storage.persist(data) &#125; &#125;&#125;è¿™ä¸ªæ—¶å€™ï¼Œæ— è®ºé¡µé¢é”€æ¯SomeDataSourceï¼Œåªè¦ç½‘ç»œè¯·æ±‚ç»“æœå›æ¥ï¼Œéƒ½èƒ½å¤Ÿä¿è¯æ•°æ®è¢«æŒä¹…åŒ–ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚è€Œä¸”storageåªæ•è·é¦–æ¬¡è°ƒç”¨refreshDataæ—¶å€™çš„storageå˜é‡ã€‚ï¼ˆå‡è®¾ï¼‰åæœŸæ— è®ºå¯¹storageæ›´æ”¹ï¼Œstorageä»ç„¶æ˜¯ä¹‹å‰æ—§çš„å¯¹è±¡ã€‚ ä½•æ—¶ä½¿ç”¨Weak æˆ–è€… unowned å…³é”®å­—å¼±æ•è·æ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨ä¸”æœ€å¥½é»˜è®¤çš„ä¸€ç§æ•è·é€‰æ‹©ã€‚å½“ä½ ä¸æƒ³è®©ä¸€ä¸ªå·²é‡Šæ”¾å¯¹è±¡è¿˜åœ¨é—­åŒ…å†…æ‰§è¡Œæ—¶å€™ï¼Œæˆ–è€…å½“ä½ è°ƒç”¨çš„å‡½æ•°é—­åŒ…è¢«åº”ç”¨æ—¶ï¼Œè¿™ä¸ªæ—¶å€™éœ€è€ƒè™‘ç”¨å¼±æ•è·ã€‚å¼±æ•è·çš„å±æ€§è®°å¾—ç»™å¯é€‰å€¼ï¼Œå› ä¸ºå¯èƒ½æ˜¯nilã€‚è¿™æ ·ç»™nilå‘é€æ¶ˆæ¯çš„æ—¶å€™å°±ä¸è‡³äºå´©æºƒã€‚ä½¿ç”¨weakæˆ–è€…unownedèƒ½100%ç¡®ä¿å¼•ç”¨ç±»å‹åœ¨é”€æ¯åä¹Ÿèƒ½ä»å†…å­˜ä¸­å›æ”¶ï¼Œä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²çš„æƒ…å†µã€‚å¦‚æœä½ å®åœ¨ä¸çŸ¥é“ç”¨å“ªç§æ•è·æ–¹å¼çš„æ—¶å€™ï¼Œé‚£å°±ç”¨å®ƒå§ğŸ˜ã€‚\b","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ä½¿ç”¨Resultï¼ˆSwift5ï¼‰","slug":"result","date":"2021-07-07T08:30:10.000Z","updated":"2021-07-07T08:23:21.671Z","comments":true,"path":"2021/07/07/result/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/07/result/","excerpt":"åœ¨æˆ‘ä»¬è®¾è®¡ç½‘ç»œå±‚å“åº”ç»“æœçš„æ—¶å€™ï¼ŒResultæ˜¯å¤§å®¶ç”¨çš„æ¯”è¾ƒå¤šçš„ã€‚å’ŒOptionalæœ‰ç‚¹ç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨è¿°è¿”å›ç±»å‹æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥ã€‚åœ¨Swift5.0ä¸­ï¼ŒSwiftå›¢é˜Ÿå·²ç»æŠŠResultåŠ å…¥åˆ°äº†æ ‡å‡†åº“ã€‚è¿™ç¯‡æ–‡ç« å°†è®²è§£åˆ°ä½•æ—¶å»ä½¿ç”¨Result,ä»¥åŠæ€æ ·ä½¿ç”¨Resultã€‚ä¸Šç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è®²åˆ°Swiftå¼‚å¸¸å¤„ç†ï¼Œåœ¨å¤„ç†æ—¶å€™ç”¨do{}catch{}æ•æ‰å¼‚å¸¸,ä»¥åŠåœ¨æ–¹æ³•ååé€šè¿‡throwså…³é”®å­—å°†å¼‚å¸¸å¾€ä¸Šå±‚æŠ›ã€‚å’ŒæŠ›é”™è¯¯ä¸åŒçš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­ç”¨Resultä½œä¸ºè¿”å›ç±»å‹å¯ä»¥è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚æ›´å¤§çš„ä¸åŒæ˜¯ï¼ŒResultå¯ä»¥ç”¨äºåœ¨å¼‚æ­¥å¤„ç†æ—¶å€™ï¼Œå¦‚é±¼å¾—æ°´èˆ¬åœ°ä¼˜é›…å¤„ç†æˆåŠŸä¸å¤±è´¥çš„å›è°ƒè¿”å›ã€‚åœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»¥ä¸‹ç‰‡æ®µ1ä»£ç ï¼š12345678910func loadData(from url: URL, completion:@escaping (Data?) -&gt; Void) throws &#123; URLSession.shared.dataTask(with: url) &#123; data, response, error in if let error = error &#123; throw error &#125; if let data = data &#123; completion(data) &#125; &#125;.resume()&#125;æŒ‰ç…§ä»¥å¾€çš„æ–¹å¼ï¼Œå½“erroræœ‰å¼‚å¸¸æ—¶å€™ï¼Œæˆ‘ä»¬è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åæ–¹æ³•ä¸Šä¹ŸåŠ ä¸Šthrowsã€‚å‡è®¾ä»¥ä¸Šä»£ç ç¼–è¯‘é€šè¿‡ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š123456789do &#123; try loadData(from: aURL) &#123; data in print(\"fetched data\") &#125; print(\"This will be executed before any data is fetched from the network.\") //è¿™è¡Œä»£ç ä¼šè¢«å…ˆæ‰§è¡Œã€‚ç”±äºloadDataæ–¹æ³•æ˜¯å¼‚æ­¥å¤„ç†è¯·æ±‚æ•°æ®ï¼Œå°±ç®—å‘ç”Ÿé”™è¯¯ï¼ŒerroræŠ›å‡ºå­˜åœ¨ä¸€å®šçš„æ‰§è¡Œæ—¶é•¿ã€‚è¿™å°±è¿èƒŒäº†å¼‚å¸¸æ•æ‰è€Œä¸­æ­¢çš„æ€§è´¨äº†ï¼Œä¹Ÿè°ˆä¸ä¸Šå¼‚å¸¸æ•æ‰ã€‚&#125; catch &#123; print(error)&#125;","text":"åœ¨æˆ‘ä»¬è®¾è®¡ç½‘ç»œå±‚å“åº”ç»“æœçš„æ—¶å€™ï¼ŒResultæ˜¯å¤§å®¶ç”¨çš„æ¯”è¾ƒå¤šçš„ã€‚å’ŒOptionalæœ‰ç‚¹ç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨è¿°è¿”å›ç±»å‹æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥ã€‚åœ¨Swift5.0ä¸­ï¼ŒSwiftå›¢é˜Ÿå·²ç»æŠŠResultåŠ å…¥åˆ°äº†æ ‡å‡†åº“ã€‚è¿™ç¯‡æ–‡ç« å°†è®²è§£åˆ°ä½•æ—¶å»ä½¿ç”¨Result,ä»¥åŠæ€æ ·ä½¿ç”¨Resultã€‚ä¸Šç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è®²åˆ°Swiftå¼‚å¸¸å¤„ç†ï¼Œåœ¨å¤„ç†æ—¶å€™ç”¨do{}catch{}æ•æ‰å¼‚å¸¸,ä»¥åŠåœ¨æ–¹æ³•ååé€šè¿‡throwså…³é”®å­—å°†å¼‚å¸¸å¾€ä¸Šå±‚æŠ›ã€‚å’ŒæŠ›é”™è¯¯ä¸åŒçš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­ç”¨Resultä½œä¸ºè¿”å›ç±»å‹å¯ä»¥è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚æ›´å¤§çš„ä¸åŒæ˜¯ï¼ŒResultå¯ä»¥ç”¨äºåœ¨å¼‚æ­¥å¤„ç†æ—¶å€™ï¼Œå¦‚é±¼å¾—æ°´èˆ¬åœ°ä¼˜é›…å¤„ç†æˆåŠŸä¸å¤±è´¥çš„å›è°ƒè¿”å›ã€‚åœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»¥ä¸‹ç‰‡æ®µ1ä»£ç ï¼š12345678910func loadData(from url: URL, completion:@escaping (Data?) -&gt; Void) throws &#123; URLSession.shared.dataTask(with: url) &#123; data, response, error in if let error = error &#123; throw error &#125; if let data = data &#123; completion(data) &#125; &#125;.resume()&#125;æŒ‰ç…§ä»¥å¾€çš„æ–¹å¼ï¼Œå½“erroræœ‰å¼‚å¸¸æ—¶å€™ï¼Œæˆ‘ä»¬è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åæ–¹æ³•ä¸Šä¹ŸåŠ ä¸Šthrowsã€‚å‡è®¾ä»¥ä¸Šä»£ç ç¼–è¯‘é€šè¿‡ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š123456789do &#123; try loadData(from: aURL) &#123; data in print(\"fetched data\") &#125; print(\"This will be executed before any data is fetched from the network.\") //è¿™è¡Œä»£ç ä¼šè¢«å…ˆæ‰§è¡Œã€‚ç”±äºloadDataæ–¹æ³•æ˜¯å¼‚æ­¥å¤„ç†è¯·æ±‚æ•°æ®ï¼Œå°±ç®—å‘ç”Ÿé”™è¯¯ï¼ŒerroræŠ›å‡ºå­˜åœ¨ä¸€å®šçš„æ‰§è¡Œæ—¶é•¿ã€‚è¿™å°±è¿èƒŒäº†å¼‚å¸¸æ•æ‰è€Œä¸­æ­¢çš„æ€§è´¨äº†ï¼Œä¹Ÿè°ˆä¸ä¸Šå¼‚å¸¸æ•æ‰ã€‚&#125; catch &#123; print(error)&#125;ä»¥ä¸Šç‰‡æ®µ1ä»£ç ç¼–è¯‘æ˜¾ç„¶æŠ¥é”™ï¼Œå¾ˆä¸å¹¸ï¼ŒdataTaskå¤„ç†æ–¹æ³•APIå¹¶æ²¡æœ‰throwså…³é”®å­—ã€‚é‚£è¦æ€ä¹ˆå¤„ç†å¼‚å¸¸å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™Resultæ´¾ä¸Šç”¨åœºäº†ã€‚åœ¨è®²è§£Resultä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹Resultçš„æ ¸å¿ƒæºç ã€‚12345678910/// A value that represents either a success or a failure, including an/// associated value in each case.@frozen public enum Result&lt;Success, Failure&gt; where Failure : Error &#123; /// A success, storing a `Success` value. case success(Success) /// A failure, storing a `Failure` value. case failure(Failure)&#125; ç„¶åç”¨Resultè¿›è¡Œæ”¹é€ ,è¿™æ ·å°±å¾ˆå‹å¥½åœ°å¤„ç†äº†æˆåŠŸå’Œå¼‚å¸¸çš„ç»“æœã€‚123456789101112131415161718func loadData(from url: URL, completion:@escaping (Result&lt;Data, URLError&gt;) -&gt; Void) &#123; URLSession.shared.dataTask(with: url) &#123; data, response, error in if let urlError = error as? URLError &#123; completion(.failure(urlError)) &#125; if let data = data &#123; completion(.success(data)) &#125; &#125;.resume()&#125;loadData(from: URL(string: \"http://api.littleWhale/myAvatar\")!) &#123; result in guard let data = try? result.get() else &#123; return &#125; print(data)&#125;ç»§ç»­å†çœ‹ä¸€ä¾‹å­ï¼šæ‹¿åˆ°data,éœ€è¦å°†å®ƒè½¬æˆå›¾ç‰‡ã€‚12345678910111213enum ConversionFailure: Error &#123; case invalidData&#125;func convertToImage(_ data: Data, completionHandler: @escaping (Result&lt;UIImage, ConversionFailure&gt;) -&gt; Void) &#123; DispatchQueue.global(qos: .userInitiated).async &#123; if let image = UIImage(data: data) &#123; completionHandler(.success(image)) &#125; else &#123; completionHandler(.failure(ConversionFailure.invalidData)) &#125; &#125;&#125;è¿™é‡Œï¼Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ªé”™è¯¯ç±»å‹ã€‚ç„¶åé€šè¿‡GCDå¼‚æ­¥æ–¹å¼å°†dataè½¬åŒ–æˆimageã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†Result ä½œä¸ºè¿”å›ç±»å‹ã€‚å½“æµè½¬æˆäº†å›¾ç‰‡åˆ™è¿”å›å›¾ç‰‡ï¼Œå¦åˆ™è¿”å›ConversionFailureé”™è¯¯ã€‚ç„¶åæˆ‘ä»¬å†çœ‹è°ƒç”¨:12345678convertToImage(data) &#123; result in switch result &#123; case .success(let image): print(\"we get an image!\") case .failure(let error): print(\"invalid data error! \\(error)\") &#125;&#125;è¿™é‡Œæˆ‘ä»¬ç”¨switchè¯­å¥å¯¹resultæšä¸¾ç±»å‹åˆ¤æ–­.success å’Œ .failureä¸¤ç§ç±»å‹ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨result.get()æ–¹æ³•è·å¾—è¿”å›çš„ç»“æœè¦ä¹ˆæ˜¯æˆåŠŸï¼Œè¦ä¹ˆæ˜¯å¤±è´¥ã€‚å¤±è´¥errorå¯ä»¥è¢«do{}catch{}æ•æ‰åˆ°ï¼š12345678convertToImage(data) &#123; result in do &#123; let image = try result.get() print(\"we get an image!\") &#125; catch &#123; print(\"invalid data error! \\(error)\") &#125;&#125; æˆ–è€…ç”¨try? å¯èƒ½è¿”å›nilï¼Œå½“è¿”å›nilå€¼æ—¶å³å‘ç”Ÿäº†é”™è¯¯123456convertToImage(data) &#123; result in guard let image = try? result.get() else &#123; return &#125; print(\"we get an image!\")&#125; Resultä¹Ÿæä¾›äº†ä¸€äº›åº“æ–¹æ³•ï¼Œå¦‚mapï¼ŒmapErrorç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦å¯¹resultç»“æœè¿›è¡Œå¤„ç†åŒ…è£…ã€‚123456789101112131415convertToImage(data) &#123; result in let newResult = result.map &#123; uiImage in return uiImage.cgImage &#125;&#125;struct WrappedError: Error &#123; let cause: Error&#125;convertToImage(data) &#123; result in let newResult = result.mapError &#123; conversionFailure in return WrappedError(cause: conversionFailure) &#125;&#125;æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç½‘ç»œå¤„ç†å±‚ç”¨Resultè¿›è¡ŒåŒ…è£…ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041protocol GYRemoteFetch &#123; associatedtype ResultModel:Codable func loadData(from url: URL, completion:@escaping (Result&lt;ResultModel, Error&gt;) -&gt; Void)&#125;extension GYRemoteFetch &#123; func loadData(from url: URL, completion:@escaping (Result&lt;ResultModel, Error&gt;) -&gt; Void) &#123; URLSession.shared.dataTask(with: url) &#123; data, response, error in guard let data = data else &#123; if let error = error &#123; completion(.failure(error)) return &#125; fatalError(\"data can't be nil\") &#125; let decoder = JSONDecoder() let result = Result(catching: &#123; try decoder.decode(ResultModel.self, from: data) &#125;) completion(result) &#125;.resume() &#125;&#125;struct User:Codable&#123;&#125;//UserViewModelè¯·æ±‚ç½‘ç»œç”¨æˆ·ä¿¡æ¯ä¸¾ä¾‹ï¼šstruct UserViewModel:GYRemoteFetch &#123; typealias ResultModel = User func fetchUser()&#123; loadData(from: URL(string: \"http://api.littleWhale/user\")!) &#123; result in guard let user = try? result.get() else &#123; return &#125; print(user) &#125; &#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"åœ¨Swiftä¸­æœ‰æ•ˆåœ°æŠ›å¼‚å¸¸","slug":"error","date":"2021-07-07T03:50:10.000Z","updated":"2021-07-07T03:57:09.596Z","comments":true,"path":"2021/07/07/error/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/07/error/","excerpt":"åœ¨swift2.0, è‹¹æœåœ¨swiftä¸­å°±ä»‹ç»äº†throws å…³é”®å­—ã€‚è¿™æ–¹ä¾¿å¼€å‘è€…åœ¨å†™ä»£ç æ—¶å€™ä¿è¯æ¸…æ™°çš„æ€è·¯ä»¥åŠåœ¨æ‰§è¡Œæ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯åšå¼‚å¸¸å¤„ç†ã€‚å¯åšå¼‚å¸¸æ•æ‰æˆ–è€…å¿½ç•¥å¼‚å¸¸ã€‚è¿™ç¯‡æ–‡ç« å°†è¯¦ç»†è®²è§£ throws å…³é”®å­—ï¼Œä»¥åŠåœ¨ä»£ç ä¸­å¦‚ä½•å»å¤„ç†å¼‚å¸¸ã€‚ å¤„ç†å¼‚å¸¸å¦‚æœä½ åœ¨Swiftä¸­ä½¿ç”¨è¿‡JSONDecoderï¼Œå°±çŸ¥é“åœ¨ç¼–å†™ä»£ç æ—¶å€™å¯æŠ›å‡ºå¼‚å¸¸ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š123456789var greeting = \"Hello, playground\"do &#123; let data = greeting.data(using: .utf8)! let decoder = JSONDecoder() let string = try decoder.decode(String.self, from: data)&#125; catch &#123; error print(error)&#125;åœ¨Playground æ‰§è¡Œä»£ç ç‰‡æ®µï¼Œå‘ç°æ§åˆ¶å°è¾“å‡ºSwift.DecodingErrorå¼‚å¸¸é”™è¯¯ï¼Œå¼‚å¸¸è¢«catchæ•æ‰åˆ°äº†ã€‚ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨do {} catch {} æ–¹å¼æŠŠå¯èƒ½å‘ç”Ÿçš„ä»£ç ä¸€æ¬¡ç”¨try æ–¹å¼å†™åœ¨do{}é‡Œé¢ã€‚å½“æ•æ‰åˆ°ä¸€æ¬¡ç«‹é©¬è¿›å…¥catch{error }æ®µã€‚catchå°†æ•æ‰åˆ°Error, åœ¨catchæ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ•æ‰ç²¾ç¡®çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚","text":"åœ¨swift2.0, è‹¹æœåœ¨swiftä¸­å°±ä»‹ç»äº†throws å…³é”®å­—ã€‚è¿™æ–¹ä¾¿å¼€å‘è€…åœ¨å†™ä»£ç æ—¶å€™ä¿è¯æ¸…æ™°çš„æ€è·¯ä»¥åŠåœ¨æ‰§è¡Œæ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯åšå¼‚å¸¸å¤„ç†ã€‚å¯åšå¼‚å¸¸æ•æ‰æˆ–è€…å¿½ç•¥å¼‚å¸¸ã€‚è¿™ç¯‡æ–‡ç« å°†è¯¦ç»†è®²è§£ throws å…³é”®å­—ï¼Œä»¥åŠåœ¨ä»£ç ä¸­å¦‚ä½•å»å¤„ç†å¼‚å¸¸ã€‚ å¤„ç†å¼‚å¸¸å¦‚æœä½ åœ¨Swiftä¸­ä½¿ç”¨è¿‡JSONDecoderï¼Œå°±çŸ¥é“åœ¨ç¼–å†™ä»£ç æ—¶å€™å¯æŠ›å‡ºå¼‚å¸¸ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š123456789var greeting = \"Hello, playground\"do &#123; let data = greeting.data(using: .utf8)! let decoder = JSONDecoder() let string = try decoder.decode(String.self, from: data)&#125; catch &#123; error print(error)&#125;åœ¨Playground æ‰§è¡Œä»£ç ç‰‡æ®µï¼Œå‘ç°æ§åˆ¶å°è¾“å‡ºSwift.DecodingErrorå¼‚å¸¸é”™è¯¯ï¼Œå¼‚å¸¸è¢«catchæ•æ‰åˆ°äº†ã€‚ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨do {} catch {} æ–¹å¼æŠŠå¯èƒ½å‘ç”Ÿçš„ä»£ç ä¸€æ¬¡ç”¨try æ–¹å¼å†™åœ¨do{}é‡Œé¢ã€‚å½“æ•æ‰åˆ°ä¸€æ¬¡ç«‹é©¬è¿›å…¥catch{error }æ®µã€‚catchå°†æ•æ‰åˆ°Error, åœ¨catchæ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ•æ‰ç²¾ç¡®çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚ 1234567891011var greeting = \"Hello, playground\"do &#123; let data = greeting.data(using: .utf8)! let decoder = JSONDecoder() let string = try decoder.decode(String.self, from: data)&#125; catch is DecodingError &#123; print(\"something went wrong while decoding!\")&#125; catch &#123; error print(error)&#125; Erroråœ¨Swiftä¸­æ˜¯ä¸€ä¸ªåè®®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±é”™è¯¯ç±»å‹ï¼Œåœ¨ä¸€äº›ä¸šåŠ¡é”™è¯¯ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ°ã€‚1234567enum MyError: Error &#123; case myErrorCase&#125;func doSomething() throws &#123; throw MyError.myErrorCase&#125;å½“æ‰§è¡ŒdoSomethingæ–¹æ³•æ—¶å€™ï¼Œç¨‹åºä¼šä¸­ç«¯ã€‚try doSomething ä½ å¦‚æœè¦æ•æ‰åˆ™ç”¨do{} catch{}æ–¹å¼ã€‚å¦‚æœä½ è¦å¿½ç•¥æ­¤å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨try? doSomething()ï¼Œè¿™ä¸ªæ—¶å€™è¿”å›nilã€‚å¦‚æœä½ å¯¹è¿”å›å€¼ä¸ºnilä¸careçš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆç”¨ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„jsonè§£æï¼š12345var greeting = \"Hello, playground\"let data = greeting.data(using: .utf8)!let decoder = JSONDecoder()let string = try? decoder.decode(String.self, from: data)print(string) //è¾“å‡ºnilï¼Œå½“stringå˜é‡è¢«å…¶ä»–ä¸šåŠ¡ç»§ç»­ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦åšå¥½nilå€¼åˆ¤æ–­ã€‚å½“ä½ çœŸçš„ä¸åœ¨ä¹æ•æ‰å¼‚å¸¸ï¼Œæˆ–è€…ä¸ç®¡é”™è¯¯æ˜¯ä¸æ˜¯å‘ç”Ÿæ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨try?ã€‚ è¿˜æœ‰ä¸€ç§æ–¹å¼å¤„ç†é”™è¯¯ï¼Œä½ å¯ä»¥ç”¨try! ã€‚ä½†è¿™ç§æ–¹å¼åªé€‚ç”¨äºä½ éå¸¸è‚¯å®šä¸”æœ‰æŠŠæ¡ä½ çš„ä»£ç æ¡ä»¶æ­£ç¡®æ¯”å¦‚ä¸Šè¿°greetingå˜é‡ä¸€å®šè¦æ˜¯å¤åˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²è§£ææ‰èƒ½æˆåŠŸï¼Œå¦åˆ™éå¸¸å±é™©ï¼Œç¨‹åºç›´æ¥crashæ‰ã€‚ å‡½æ•°å¯ä»¥æŠ›å‡ºå¼‚å¸¸æ–¹æ³•å¿…é¡»å«æœ‰throwså…³é”®å­—ï¼Œå¦‚æœæœ‰è¿”å›ç±»å‹ï¼Œåˆ™throwæ”¾åœ¨è¿”å›ç±»å‹ä¹‹å‰ã€‚123456func doSomething() throws &#123; throw MyError.myErrorCase&#125;func doSomething2() throws -&gt; String? &#123; throw MyError.myErrorCase&#125;å½“ä½ ä¸æƒ³åœ¨æŸæ–¹æ³•é‡Œå¤„ç†å¼‚å¸¸æ—¶å€™ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨çš„æ–¹æ³•ååç”¨throwså°†å¼‚å¸¸æŠ›å‡ºåˆ°ä¸Šå±‚å‡½æ•°åšå¤„ç†ã€‚123456789101112131415func decodeJSON(_ data: Data) throws -&gt; String &#123; let decoder = JSONDecoder() let decodedString = try decoder.decode(String.self, from: data) return decodedString&#125;var greeting = \"Hello, playground\"let data = greeting.data(using: .utf8)!do &#123; let string = try decodeJSON(data) print(string)&#125; catch &#123; print(\"decode error\")&#125; åœ¨blockä¸­æŠ›å¼‚å¸¸123func executeGYBlock(_ closure: (() throws -&gt; Void)) throws &#123; try closure()&#125; è¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªthrows, executeGYBlocké‡Œçš„closureé—­åŒ…å¯èƒ½æœ‰å¼‚å¸¸éœ€è¦throwsæŠ›å‡ºï¼ŒexecuteGYBlock å‡½æ•°æœ¬èº«throwsæ˜¯åœ¨æ‰§è¡ŒexecuteGYBlockå‡½æ•°æ—¶æŠŠå†…éƒ¨blockå—å¯èƒ½å‡ºç°çš„ç§»é™¤éœ€è¦å†æ¬¡å‘ä¸Šå±‚è°ƒç”¨è€…è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ã€‚è°ƒç”¨æ—¶å¦‚ä¸‹ä»£ç ç¤ºä¾‹ï¼šå°†blockå—å†…å¤„ç†çš„é”™è¯¯è¿›è¡ŒæŠ›å‡ºã€‚12345678do &#123; try executeGYBlock &#123; let string = try decodeJSON(data) print(string) &#125;&#125;catch&#123; print(error)&#125;å½“æœ‰å¤šä¸ªå¼‚å¸¸æ—¶å€™ï¼šcatché¦–å…ˆæ•æ‰åˆ°ç¬¬ä¸€ä¸ªtry çš„å¼‚å¸¸é”™è¯¯ç„¶åå°±ä¸­æ­¢ã€‚1234567891011do &#123; try executeGYBlock &#123; try doSomething() &#125; try executeGYBlock &#123; let string = try decodeJSON(data) print(string) &#125;&#125;catch&#123; print(error)&#125;å› ä¸ºå¼‚å¸¸ä¸€æ—¦catchåï¼Œç¨‹åºé‡Œçš„ä»£ç ç‰‡æ®µå°†ä¸å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œå…¶ä»–ä»£ç ã€‚ç”¨ä¸‹é¢çš„ä»£ç è¡¨ç¤º12345func doSomething() throws &#123; print(&quot;doSomethingBefore...&quot;) throw MyError.myErrorCase print(&quot;doSomethingAfter...&quot;) &#x2F;&#x2F;Code after &#39;throw&#39; will never be executed&#125; æ€»ç»“ å¼‚å¸¸é”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨do{ try something} catch{}è¿›è¡Œæ•æ‰å¤„ç†ã€‚ Erroræ˜¯åè®®ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„å¼‚å¸¸ç±»å‹ã€‚ å¼‚å¸¸å¯ç”¨try? è¿›è¡Œå¿½ç•¥ï¼Œæ³¨æ„è¿”å›å€¼nilçš„åˆ¤æ–­å¤„ç†ã€‚ å½“ä½ éå¸¸è‚¯å®šä¸ä¼šæœ‰å¼‚å¸¸æ—¶å€™åˆä¸æƒ³å†™do catch çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨try!ã€‚ ä½†è¿™ç§æ–¹å¼éå¸¸å±é™©ï¼Œä¸‡ä¸€æœ‰å¼‚å¸¸å°±ç›´æ¥crashã€‚ å½“ä½ æ–¹æ³•é‡Œä¸æƒ³å¤„ç†å¼‚å¸¸æ—¶å€™ï¼Œåœ¨æ–¹æ³•åå¤„ç»§ç»­ç”¨throws å°†å¼‚å¸¸æŠ›å‡ºè‡³ä¸Šå±‚ã€‚ å½“blockå—éœ€è¦throwsæ—¶ï¼Œé—­åŒ…å‡½æ•°éœ€å†æ¬¡throwsã€‚æœ€ç»ˆæŠŠå¼‚å¸¸æŠ›ç»™è°ƒç”¨å¤„ç†ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ç”¨æ³›å‹å’Œåè®®æ„å»ºå¯ä¼¸ç¼©æ€§ç»„ä»¶","slug":"generics","date":"2021-07-06T10:01:10.000Z","updated":"2021-07-06T10:18:50.818Z","comments":true,"path":"2021/07/06/generics/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/06/generics/","excerpt":"åœ¨Appå¼€å‘ä¸­ï¼Œæ•°æ®å±‚å¾€å¾€ä¼šåšæœ¬åœ°ç¼“å­˜ï¼Œä»¥ä¾¿åœ¨ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹èƒ½å¤Ÿå…ˆæ˜¾ç¤ºæœ¬åœ°ç¼“å­˜æ•°æ®ã€‚æ¥ä¸‹æ¥å°†è®²è§£åˆ°å¦‚ä½•è®¾è®¡æœ¬åœ°æ•°æ®æºä¸­é—´ä»¶æ¥å®ç°ä¸šåŠ¡æ•°æ®çš„è¯»å–ã€‚åœ¨è®²è§£ä¹‹å‰æˆ‘ä»¬ä¼šå…ˆäº†è§£ä¸€ä¸‹ç®€å•æ³›å‹åœ¨Swiftä¸­çš„åº”ç”¨ï¼Œç»“åˆassociated types, ä½ ä¹Ÿå¯ä»¥åœ¨åè®®ä¸­ä½¿ç”¨æ³›å‹ã€‚ åœ¨ä»‹ç»ä¹‹å‰ï¼Œæˆ‘åˆšæåˆ°æˆ‘æƒ³è¦å¯¹æ³›å‹æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç„¶åè¿˜éœ€è¦ä¸€ä¸ªè¿œç¨‹æ•°æ®æ¥å£APIæä¾›æ•°æ®ä»¥ä¾¿åœ¨æœ¬åœ°æ•°æ®æ²¡æœ‰çš„æƒ…å†µä¸‹è°ƒç”¨ã€‚å‡è®¾æˆ‘éœ€è¦ç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼š1234567let localDataStore = UserDataStore()let remoteDataStore = UserApi()let dataStore = CacheBackedDataStore(localDataStore, remoteDataStore)dataStore.fetch(userID) &#123; result in // handle result&#125;","text":"åœ¨Appå¼€å‘ä¸­ï¼Œæ•°æ®å±‚å¾€å¾€ä¼šåšæœ¬åœ°ç¼“å­˜ï¼Œä»¥ä¾¿åœ¨ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹èƒ½å¤Ÿå…ˆæ˜¾ç¤ºæœ¬åœ°ç¼“å­˜æ•°æ®ã€‚æ¥ä¸‹æ¥å°†è®²è§£åˆ°å¦‚ä½•è®¾è®¡æœ¬åœ°æ•°æ®æºä¸­é—´ä»¶æ¥å®ç°ä¸šåŠ¡æ•°æ®çš„è¯»å–ã€‚åœ¨è®²è§£ä¹‹å‰æˆ‘ä»¬ä¼šå…ˆäº†è§£ä¸€ä¸‹ç®€å•æ³›å‹åœ¨Swiftä¸­çš„åº”ç”¨ï¼Œç»“åˆassociated types, ä½ ä¹Ÿå¯ä»¥åœ¨åè®®ä¸­ä½¿ç”¨æ³›å‹ã€‚ åœ¨ä»‹ç»ä¹‹å‰ï¼Œæˆ‘åˆšæåˆ°æˆ‘æƒ³è¦å¯¹æ³›å‹æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç„¶åè¿˜éœ€è¦ä¸€ä¸ªè¿œç¨‹æ•°æ®æ¥å£APIæä¾›æ•°æ®ä»¥ä¾¿åœ¨æœ¬åœ°æ•°æ®æ²¡æœ‰çš„æƒ…å†µä¸‹è°ƒç”¨ã€‚å‡è®¾æˆ‘éœ€è¦ç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼š1234567let localDataStore = UserDataStore()let remoteDataStore = UserApi()let dataStore = CacheBackedDataStore(localDataStore, remoteDataStore)dataStore.fetch(userID) &#123; result in // handle result&#125;ä»¥ä¸Šä¸ºå¤§è‡´é€»è¾‘ç®€å†™ï¼Œç»§ç»­æ‹†è§£CacheBackedDataStore:1234567891011121314151617181920class CacheBackedDataStore &#123; let localStore: LocalStore let remoteStore: RemoteStore func fetch(_ identifier: IdentifierType, completion: @escaping Result&lt;T, Error&gt;) &#123; localStore.fetchObject(identifier) &#123; result in if let result = try? result.get() &#123; completion(.success(result)) &#125; else &#123; remoteStore.fetchObject(identifier) &#123; result in if let result = try? result.get() &#123; completion(.success(result)) &#125; else &#123; // extract error and forward to the completion handler &#125; &#125; &#125; &#125; &#125;&#125;æ³¨æ„åˆ°Resultï¼Œ T ä¸ºæ³›å‹çš„ä¸€ä¸ªå ä½ç¬¦ã€‚å¯ä»£è¡¨ä»»ä½•å¯¹è±¡ã€‚è®²è§£æ³›å‹ä¹‹å‰ï¼Œå›é¡¾ä¸€ä¸‹åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼:12let words1 &#x3D; [String]()let words2 &#x3D; Array&lt;String&gt;()ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬ç•™æ„åˆ°æ–¹å¼æ³¨æ˜æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚æˆ‘ä»¬æŸ¥çœ‹Arrayçš„ä»£ç å¯ä»¥çœ‹åˆ°ã€‚123struct Array&lt;T&gt; &#123; &#x2F;&#x2F; implementation code&#125;Tå³ä»£è¡¨æˆ‘ä»¬å°†è¦æ³¨å…¥çš„ç±»å‹ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸²ä»£ç ï¼š12345struct SpecializedPrinter&lt;T&gt; &#123; func print(_ object: T) &#123; print(object) &#125;&#125;æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªSpecializedPrinteræ³›å‹ç»“æ„ä½“ï¼Œprintæ–¹æ³•ä½¿ç”¨äº†æ³›å‹å‚æ•°ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥äº†å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆè¾“å‡ºæ‰“å°çš„å°±æ˜¯å­—ç¬¦ä¸²ã€‚123let printer = SpecializedPrinter&lt;String&gt;()printer.print(\"Hello!\") // this is fineprinter.print(10) // this is not okay since T for this printer is String, not Intç°åœ¨ä½ å·²ç»äº†è§£äº†æ³›å‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¯¹CacheBackedDataStoreè¿›è¡Œæ”¹è¿›ï¼š12345678struct CacheBackedDataSource&lt;T&gt; &#123; let localStore: LocalStore let remoteStore: RemoteStore func find(_ objectID: String, completion: @escaping (Result&lt;T?, Error&gt;) -&gt; Void) &#123; &#125;&#125;ä¹‹å‰çš„ä»£ç ï¼Œæˆ‘ä»¬localStore,å’ŒremoteStoreä¸èƒ½å¤Ÿå†™æ­»ï¼Œéœ€è¦åˆ¶å®šä¸€å¥—æ ‡å‡†ã€‚å³localStoreå¯ä»¥åšä»€ä¹ˆï¼ŒremoteStoreå¯ä»¥åšä»€ä¹ˆã€‚è¿›è€Œç»§ç»­æ”¹è¿›ï¼š12345678protocol LocalStore &#123; func find(_ objectID: String, completion: @escaping (Result&lt;T, Error&gt;) -&gt; Void) func persist(_ object: T)&#125;protocol RemoteStore &#123; func find(_ objectID: String, completion: @escaping (Result&lt;T, Error&gt;) -&gt; Void)&#125;å½“æ”¹æˆä¸Šè¿°ä»£ç çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œåœ¨åè®®ä¸­ï¼Œæ³›å‹å‚æ•°Tæ²¡æœ‰å£°æ˜ï¼æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨åè®®ä¸­ä½¿ç”¨æ³›å‹æœºåˆ¶ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°AssociateTypeè¿›è¡Œç±»å‹å…³è”ã€‚123456789101112protocol LocalStore &#123; associatedtype StoredObject func find(_ objectID: String, completion: @escaping (Result&lt;StoredObject, Error&gt;) -&gt; Void) func persist(_ object: StoredObject)&#125;protocol RemoteStore &#123; associatedtype TargetObject:Decodable //ä¸ºäº†çº¦æŸTargetObjectè¦ç¬¦åˆDecodableåè®®è§„åˆ™ func find(_ objectID: String, completion: @escaping (Result&lt;TargetObject, Error&gt;) -&gt; Void)&#125;æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰ArrayBackedUserStoreçš„ä¸šåŠ¡ç±»å®ç°LocalStoreåè®®,RemoteUserStoreä¸šåŠ¡ç±»å®ç° RemoteStore åè®®ï¼š1234567891011121314151617struct ArrayBackedUserStore: LocalStore &#123; func find(_ objectID: String, completion: @escaping (Result&lt;User, Error&gt;) -&gt; Void) &#123; //æœ¬åœ°æ•°æ®è¯»å– &#125; func persist(_ object: User) &#123; //æœ¬åœ°æŒä¹…åŒ–æ“ä½œ &#125;&#125;struct RemoteUserStore: RemoteStore &#123; typealias TargetObject = User //å¦‚æœæ‰€ä½¿ç”¨çš„å¯¹è±¡Userä¸æ˜¯Decodableåè®®ï¼Œåˆ™ä¼šæŠ¥é”™ func find(_ objectID: String, completion: @escaping (Result&lt;TargetObject, Error&gt;) -&gt; Void) &#123; &#125;&#125;å›åˆ°ä¸Šè¿°CacheBackedDataSourceæ³›å‹ç»“æ„ä½“ï¼Œå…¶ä¸­ä¸¤ä¸ªå˜é‡localStoreå’ŒremoteStoreå°†ä¼šç¼–è¯‘å‡ºé”™ï¼Œæç¤ºâ€œProtocol â€˜LocalStoreâ€™ can only be used as a generic constraint because it has Self or associated type requirementsâ€ æ„æ€æ˜¯LocalStoreåè®®é‡Œæœ‰associatedtypeå…³è”ç±»å‹ï¼Œåªèƒ½å¤Ÿé€šè¿‡æ³›å‹çº¦æŸæ¥ä½¿ç”¨ã€‚ç»§ç»­æ”¹è¿›ä»£ç ï¼š12345678struct CacheBackedDataSource&lt;Local:LocalStore,Remote:RemoteStore&gt; &#123; let localStore: Local let remoteStore: Remote func find(_ objectID: String, completion: @escaping (Result&lt;Local.StoredObject, Error&gt;) -&gt; Void) &#123; &#125;&#125;è¿™æ ·å°±ç¼–è¯‘æ­£å¸¸äº†ã€‚æ­¤æ—¶CacheBackedDataSourceå«æœ‰ä¸¤ä¸ªæ³›å‹å‚æ•°ï¼Œè€ŒResult æ”¹æˆäº†Resultã€‚å…¶å®ç”¨Resultä¹Ÿæ˜¯å¯ä»¥ï¼Œä¸ºäº†ä¿è¯localå’Œremoteå…³è”çš„ç±»å‹ä¸ºåŒä¸€å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬ç»§ç»­å¯¹CacheBackedDataSourceå¢åŠ çº¦æŸï¼š1234567891011121314151617181920212223struct CacheBackedDataSource&lt;Local:LocalStore,Remote:RemoteStore&gt; where Local.StoredObject == Remote.TargetObject &#123; let localStore: Local let remoteStore: Remote func find(_ objectID: String, completion: @escaping (Result&lt;Local.StoredObject, Error&gt;) -&gt; Void) &#123; localStore.find(objectID) &#123; result in do &#123; let object = try result.get() completion(.success(object)) &#125; catch &#123; self.remoteStore.find(objectID) &#123; result in do &#123; let object = try result.get() self.localStore.persist(object) completion(.success(object)) &#125; catch &#123; completion(.failure(error)) &#125; &#125; &#125; &#125; &#125;&#125;æœ€åè°ƒç”¨çš„æ—¶å€™ï¼š123456let localUserStore = ArrayBackedUserStore()let remoteUserStore = RemoteUserStore()let cache = CacheBackedDataSource(localStore: localUserStore, remoteStore: remoteUserStore)cache.find(\"someObjectId\") &#123; (result: Result&lt;User, Error&gt;) in&#125;é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å·²ç»çŸ¥é“ä½¿ç”¨ç»™å¯¹è±¡å®šä¹‰æ³›å‹ï¼Œä½¿ç”¨æ³›å‹å‚æ•°ï¼Œä»¥åŠåœ¨åœ¨åè®®ä¸­ä½¿ç”¨å…³è”ç±»å‹æ¥çº¦æŸå‚æ•°ç±»å‹ã€‚ä»¥åŠåœ¨å¯¹è±¡ä¸­åŒ…å«å®šä¹‰äº†å…³è”çš„åè®®å˜é‡ï¼Œéœ€ä½¿ç”¨æ³›å‹å‚æ•°æ¥å¯¹åè®®å˜é‡è¿›è¡Œçº¦æŸã€‚æ³›å‹çš„åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä½¿ç»„ä»¶æŠ½è±¡ï¼Œå¤ç”¨ã€‚å¯å¸®åŠ©æˆ‘ä»¬æ„å»ºå¼¹æ€§ç»„ä»¶ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"SwiftUI å±æ€§åŒ…è£¹å™¨","slug":"@State","date":"2021-07-05T09:01:10.000Z","updated":"2021-07-06T06:32:33.941Z","comments":true,"path":"2021/07/05/@State/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/05/@State/","excerpt":"ç®€ä»‹æ–‡ç« å°†ç®€è¦è®²è¿°ä½•æ—¶ä½¿ç”¨@State, @Binding, @StateObject, @ObservedObject, @EnvironmentObjectã€‚ @State@Stateå±æ€§åŒ…è£¹å™¨å¯ç”¨äºå½“ä½ çš„è§†å›¾å¯¹è±¡å“åº”ä»»ä½•çŠ¶æ€æ”¹å˜æ—¶å€™ã€‚æ¢å¥è¯è¯´ï¼Œè§†å›¾åˆå§‹åŒ–@Stateä¿®é¥°çš„å±æ€§å˜é‡ã€‚è¯¥å±æ€§å˜é‡çš„å˜æ›´åªå‘ç”Ÿåœ¨å†…éƒ¨Viewï¼Œè€Œä¸è¢«å¤–ç•Œæ‰€æ”¹å˜ã€‚12345678910111213struct StateExample: View &#123; @State private var intValue &#x3D; 0 var body: some View &#123; VStack &#123; Text(&quot;intValue equals \\(intValue)&quot;) Button(&quot;Increment&quot;) &#123; intValue +&#x3D; 1 &#125; &#125; &#125;&#125;åœ¨å†…éƒ¨ï¼ŒSwiftUIå°†ä¼šå­˜å‚¨ @Stateä¿®é¥°çš„å±æ€§å€¼ï¼Œç„¶åè´¯ç©¿æ•´ä¸ªæ¸²æŸ“æˆ–é‡å¤æ¸²æŸ“çš„ç”Ÿå‘½å‘¨æœŸä¸­å°†æŒä¹…åŒ–å­˜å‚¨è¿™ä¸ªå€¼ï¼Œå½“åœ¨è§†å›¾åˆ·æ–°æˆ–è€…é‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼Œè¯¥å±æ€§å€¼å¯ä»¥å¾ˆå¥½åœ°è¢«è§†å›¾è‡ªèº«ç®¡ç†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨privateä¿®é¥°è¯ä¿®é¥°@Stateå±æ€§ï¼Œä¿è¯åªåœ¨å†…éƒ¨ä¿®æ”¹@Stateå±æ€§ã€‚@Stateä½¿ç”¨åœºæ™¯ï¼š åœ¨è¢«ä¿®é¥°çš„å±æ€§éœ€è¦å“åº”ä½ è§†å›¾å˜åŒ–çš„çŠ¶æ€æ—¶å€™ ä½ ä¿®é¥°çš„æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼ˆç»“æ„ä½“ã€æšä¸¾ï¼‰","text":"ç®€ä»‹æ–‡ç« å°†ç®€è¦è®²è¿°ä½•æ—¶ä½¿ç”¨@State, @Binding, @StateObject, @ObservedObject, @EnvironmentObjectã€‚ @State@Stateå±æ€§åŒ…è£¹å™¨å¯ç”¨äºå½“ä½ çš„è§†å›¾å¯¹è±¡å“åº”ä»»ä½•çŠ¶æ€æ”¹å˜æ—¶å€™ã€‚æ¢å¥è¯è¯´ï¼Œè§†å›¾åˆå§‹åŒ–@Stateä¿®é¥°çš„å±æ€§å˜é‡ã€‚è¯¥å±æ€§å˜é‡çš„å˜æ›´åªå‘ç”Ÿåœ¨å†…éƒ¨Viewï¼Œè€Œä¸è¢«å¤–ç•Œæ‰€æ”¹å˜ã€‚12345678910111213struct StateExample: View &#123; @State private var intValue &#x3D; 0 var body: some View &#123; VStack &#123; Text(&quot;intValue equals \\(intValue)&quot;) Button(&quot;Increment&quot;) &#123; intValue +&#x3D; 1 &#125; &#125; &#125;&#125;åœ¨å†…éƒ¨ï¼ŒSwiftUIå°†ä¼šå­˜å‚¨ @Stateä¿®é¥°çš„å±æ€§å€¼ï¼Œç„¶åè´¯ç©¿æ•´ä¸ªæ¸²æŸ“æˆ–é‡å¤æ¸²æŸ“çš„ç”Ÿå‘½å‘¨æœŸä¸­å°†æŒä¹…åŒ–å­˜å‚¨è¿™ä¸ªå€¼ï¼Œå½“åœ¨è§†å›¾åˆ·æ–°æˆ–è€…é‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼Œè¯¥å±æ€§å€¼å¯ä»¥å¾ˆå¥½åœ°è¢«è§†å›¾è‡ªèº«ç®¡ç†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨privateä¿®é¥°è¯ä¿®é¥°@Stateå±æ€§ï¼Œä¿è¯åªåœ¨å†…éƒ¨ä¿®æ”¹@Stateå±æ€§ã€‚@Stateä½¿ç”¨åœºæ™¯ï¼š åœ¨è¢«ä¿®é¥°çš„å±æ€§éœ€è¦å“åº”ä½ è§†å›¾å˜åŒ–çš„çŠ¶æ€æ—¶å€™ ä½ ä¿®é¥°çš„æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼ˆç»“æ„ä½“ã€æšä¸¾ï¼‰ @Binding@Bindingå±æ€§åŒ…è£¹å™¨ä¿®é¥°çš„å±æ€§å€¼è¢«å…¶ä»–Viewæ‰€ä¼ é€’ã€‚è§†å›¾å†…å®šä¹‰çš„@Bindingä¿®é¥°çš„å±æ€§å€¼å¯æ¥å—å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œä¹ŸåŒ…å«å†™çš„æƒé™ï¼Œå³å¯å¯¹Bindingä¿®é¥°çš„å±æ€§åšæ›´æ”¹ï¼Œå¯å°†å€¼å“åº”å›åˆ°çˆ¶å®¹å™¨ã€‚ï¼ˆä¸€èˆ¬åœ¨å­view Bindingä¿®é¥°å±æ€§æ¥æ”¶çˆ¶å®¹å™¨åˆå§‹å€¼ï¼Œç„¶åå­viewåšæ›´æ”¹ï¼Œçˆ¶è§†å›¾å¯å®æ—¶å“åº”å…¶ç»“æœã€‚ï¼‰123456789101112131415161718192021struct StateView: View &#123; @State private var intValue &#x3D; 0 var body: some View &#123; VStack &#123; Text(&quot;intValue equals \\(intValue)&quot;) BindingView(intValue: $intValue) &#125; &#125;&#125;struct BindingView: View &#123; @Binding var intValue: Int var body: some View &#123; Button(&quot;Increment&quot;) &#123; intValue +&#x3D; 1 &#125; &#125;&#125;è¯´æ˜ï¼šä»¥ä¸Šä»£ç StateViewä¸­æŠŠ @StateåŒ…è£¹ä¿®é¥°çš„intValueé€šè¿‡$ç¬¦å·ä¼ é€’åˆ°BindingViewä¸­ã€‚å­Viewé€šè¿‡Bindingå½¢å¼é—´æ¥ä¿®æ”¹äº†@StateåŒ…è£¹çš„intValueã€‚ç”±äº@BindingåŒ…è£¹ä¿®é¥°æ—¶ï¼Œå€¼æ€»æ˜¯ä»å¤–éƒ¨ä¼ é€’è¿›æ¥ã€‚æ‰€ä»¥å½“è¯•å›¾è¢«ä¸¢å¼ƒæ—¶ï¼ŒSwiftUIä¸ç®¡ç†Bindingã€‚ @Bindinggå¯ä»¥æ¯”ä½œæ˜¯ç»‘å®šä¼ é€’ã€å“åº”çˆ¶è§†å›¾ï¼Œè€Œ@Stateæ˜¯éœ€è¦æŒä¹…åŒ–çŠ¶æ€å˜æ›´ã€‚ @Bindingä½¿ç”¨åœºæ™¯ï¼š ä½ éœ€è¦å¯¹çˆ¶è§†å›¾çš„å±æ€§è¿›è¡Œè¯»æˆ–å†™æƒé™æ—¶å€™ è¢«åŒ…è£¹çš„å±æ€§æ˜¯å€¼ç±»å‹çš„æ—¶å€™(ç»“æ„ä½“æˆ–æšä¸¾) @StateObject@StateObjectä¿®é¥°å±æ€§æœ‰ç‚¹ç±»ä¼¼@Stateçš„ç”¨æ³•ï¼Œä½†å¯ç”¨æ¥å¼•ç”¨ç±»å‹æ¯”å¦‚class. ä¸€èˆ¬ç”¨äºä¿®é¥°ObservableObjectå¯¹è±¡ã€‚ä»¥åŠè®¢é˜…ObservableObjecté‡Œ@Publishedä¿®é¥°çš„å±æ€§ã€‚1234567891011class DataProvider: ObservableObject &#123; @Published var currentValue &#x3D; &quot;a value&quot;&#125;struct DataOwnerView: View &#123; @StateObject private var provider &#x3D; DataProvider() var body: some View &#123; Text(&quot;provider value: \\(provider.currentValue)&quot;) &#125;&#125;è¯´æ˜ï¼šDataOwnerViewæŒæœ‰DataProviderçš„å®ä¾‹ã€‚å½“DataProvideré‡Œçš„currentValueå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå€¼å°†åœ¨DataOwnerViewé‡Œå®æ—¶æ˜¾ç¤ºã€‚å†…éƒ¨ï¼Œå½“DataOwnerViewå‘ç”Ÿåˆ·æ–°éœ€è¦é‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼ŒSwiftUIå°†ä¼šç®¡ç†æŒæœ‰@StateObjectåŒ…è£¹çš„å˜é‡ã€‚æ„å‘³ç€è§†å›¾ä¸­@StateObjectä¿®é¥°çš„å˜é‡åªåˆ›å»º1æ¬¡ã€‚SwiftUIå°†å®ä¾‹å’Œ@StateObjectå…³è”ï¼Œå½“è§†å›¾å†æ¬¡åˆå§‹åŒ–æ—¶å°†ä¼šå†æ¬¡é‡ç”¨@StateObjectä¿®é¥°çš„å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œ@StateObject æ ‡è®°çš„å±æ€§ï¼ŒSwiftUIç»´æŠ¤ç®¡ç†ç€è¯¥å®ä¾‹ï¼Œä¾›è§†å›¾éœ€è¦æ—¶ä½¿ç”¨ï¼ˆç”šè‡³SwiftUIé‡æ–°åˆ›å»ºæ¸²æŸ“è§†å›¾ï¼‰ã€‚å’Œ@Stateä¸åŒçš„æ˜¯ï¼Œ@StateObjectå¯ç”¨æ¥æ¥æ”¶ObservableObjectçš„å¯¹è±¡è€Œä¸æ˜¯æ¥æ”¶ä¸€ä¸ªå€¼ç±»å‹ã€‚ @StateObjectä½¿ç”¨åœºæ™¯ï¼š ä½ æƒ³åœ¨ObservableObjecté‡Œå“åº”æˆ–è€…æ›´æ–°è§†å›¾ã€‚ åœ¨è§†å›¾ä¸­ï¼Œåˆ›å»ºäº†ObservableObjectå®ä¾‹ï¼Œéœ€è¦ç”¨@StateObjectä¿®é¥°ã€‚ @ObservedObject@ObservedObjectæ˜¯ç”¨æ¥åŒ…è£¹ObservableObjectå®ä¾‹ï¼Œå’Œ@StateObjectç›¸ä¼¼ï¼Œé™¤äº†è§†å›¾ä¸åˆ›å»ºæ‹¥æœ‰@ObservedObject å®ä¾‹ã€‚12345678910111213141516171819struct DataOwnerView: View &#123; @StateObject private var provider &#x3D; DataProvider() var body: some View &#123; VStack &#123; Text(&quot;provider value: \\(provider.currentValue)&quot;) DataUserView(provider: provider) &#125; &#125;&#125;struct DataUserView: View &#123; @ObservedObject var provider: DataProvider var body: some View &#123; &#x2F;&#x2F; create body and use &#x2F; modify &#96;provider&#96; &#125;&#125; DataOwnerViewå¾€DataUserViewä¼ é€’äº†ä¸€ä¸ª@StateObjectï¼Œè€ŒDataProviderå®ä¾‹åœ¨DatauserViewä¸­è¢«ä½¿ç”¨ã€‚åœ¨DatauserViewä¸­ï¼Œå½“è¯¥è§†å›¾éœ€è¦åˆ·æ–°æ¸²æŸ“çš„æ—¶å€™ï¼ŒSwiftUIå†…éƒ¨ä¸ç»´æŠ¤ä¸ç®¡ç† @ObservedObjectã€‚SwiftUIçŸ¥é“çˆ¶è§†å›¾å°†ä¼šä¼ é€’ObservedObjectè¿‡æ¥,ç”¨äºDatauserViewä¸­ä½œä¸ºä¸€ä¸ªå±æ€§å€¼æ¥ä½¿ç”¨å³å¯ã€‚ @ObservedObjectä½¿ç”¨åœºæ™¯ï¼š ä½ éœ€è¦åœ¨ObservedObjectå“åº”å˜æ›´æˆ–è€…æ›´æ–° åœ¨è§†å›¾ä¸­ä¸éœ€åˆ›å»ºObservedObjectçš„å®ä¾‹ï¼ˆå¦‚æœéœ€è¦ï¼Œåˆ™ç”¨@StateObjectï¼‰ @EnvironmentObjectæœ‰æ—¶å€™ä½ éœ€è¦åœ¨ä½ çš„Appå„ç§å„æ ·çš„åœ°æ–¹ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä½ åˆä¸æƒ³ä¸€å±‚å±‚ä¼ é€’ã€‚ä½ å¯èƒ½æƒ³åšä¸€ä¸ªå…¨å±€ä¾èµ–å¯ç”¨äºè®©è§†å›¾çš„æ‰€æœ‰èŠ‚ç‚¹æˆ–è€…ä½ çš„Appéƒ½å…±äº«ä½¿ç”¨åˆ°è¯¥å¯¹è±¡ã€‚é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨@EnvironmentObjectã€‚1234567struct EnvironmentUsingView: View &#123; @EnvironmentObject var dependency: DataProvider var body: some View &#123; Text(dependency.currentValue) &#125;&#125;@EnvironmentObject ä¿®é¥°çš„å¯¹è±¡å¿…é¡»éµå¾ªObservableObjectåè®®ï¼Œä¸€èˆ¬å¯é…ç½®åœ¨çˆ¶èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Appå…¥å£æ³¨å…¥ä¸€ä¸ªå…¨å±€çš„ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬æ•´ä¸ªAppéƒ½å¯ä»¥ä½¿ç”¨ã€‚12345678910struct MyApp: App &#123; @StateObject var dataProvider &#x3D; DataProvider() var body: some Scene &#123; WindowGroup &#123; EnvironmentUsingView() .environmentObject(dataProvider) &#125; &#125;&#125;å½“@EnvironmentObject ä¿®é¥°çš„å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™ï¼Œä½ çš„è§†å›¾å°†ä¼šé‡æ–°æ¸²æŸ“ã€‚@EnvironmentObjectä½¿ç”¨åœºæ™¯ï¼š æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨@ObservedObjectï¼Œä½†ä½ å¯èƒ½éœ€è¦æŠŠObservableObjectå¯¹è±¡ä¼ é€’åˆ°å¤šä¸ªè§†å›¾ä¸­åˆå§‹åŒ–ä¹‹å‰ï¼Œå› ä¸ºè§†å›¾æ¸²æŸ“çš„æ—¶å€™å¯èƒ½ç”¨åˆ°å®ƒï¼Œé‚£ä¹ˆæ­¤åˆ»å°±ç”¨@EnvironmentObjectã€‚ æ€»ç»“é€šè¿‡ä»¥ä¸Šè®²è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¸²æŸ“çš„ç±»å‹åˆ†ä¸ºå€¼ç±»å‹å’Œå¯¹è±¡ã€‚å€¼ç±»å‹ï¼š æ•°æ®æ€æ ·ä½¿ç”¨ï¼Ÿå¸¸è§„å±æ€§ï¼Ÿåªè¯»ï¼Ÿè¯»æˆ–å†™ï¼Ÿ è°æŒæœ‰è¯¥æ•°æ®ï¼Ÿæ¥è‡ªå¤–ç•Œï¼Ÿï¼ˆ@Bindingï¼‰ è¿˜æ˜¯è‡ªèº«Viewçš„çŠ¶æ€ï¼ˆ@Stateï¼‰?å¯¹è±¡ç±»å‹ï¼š Viewæ€æ ·æ¥æ”¶è¯¥å¯¹è±¡ï¼Ÿ ä½œä¸ºå‚æ•°ï¼Ÿï¼ˆ@ObservedObjectï¼‰ è‡ªèº«åˆ›å»ºè¯¥å¯¹è±¡å®ä¾‹ï¼Ÿï¼ˆ@StateObjectï¼‰ é€šè¿‡ç¯å¢ƒå˜é‡ï¼Ÿï¼ˆ@EnvironmentObjectï¼‰","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"Sqlite å¹¶è¡Œæ¨¡å¼çš„è¯•éªŒæ¢ç©¶","slug":"sqlite","date":"2021-07-05T09:01:10.000Z","updated":"2021-07-05T09:53:36.819Z","comments":true,"path":"2021/07/05/sqlite/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/05/sqlite/","excerpt":"å¤§å¤šæ•°äº§å“åœ¨æœ¬åœ°Sqliteå­˜å‚¨çš„æ—¶å€™ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”¨äº†ä¸²è¡Œæ¨¡å¼ã€‚å³æ•´ä¸ªåº”ç”¨å…¨å±€åªæœ‰ä¸€ä¸ªsqlæ“ä½œå¥æŸ„ï¼Œç”¨å•ä¾‹ç®¡ç†ç€è¿™ä¸ªSqlHandlerã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ¨¡å¼å«çº¿ç¨‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹å¾ˆå®¹æ˜“å‡ºç°Sqlite_Busyé”™è¯¯ã€‚ å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–è¯»æ“ä½œä¼šè¢«é©³å›ã€‚ å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–äº‹åŠ¡è¯·æ±‚ä¼šè¢«é©³å›ã€‚ å½“æœ‰è¯»æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ è¯»æ“ä½œä¹‹é—´èƒ½å¤Ÿå¹¶å‘æ‰§è¡Œã€‚ ç¬¬ä¸‰æ–¹åº“WCDBæ”¯æŒå¤šçº¿ç¨‹åº¦äºè¯»ä¸è¯»ï¼Œè¯»ä¸å†™å¹¶å‘æ‰§è¡Œï¼Œå†™ä¸å†™ä¸²è¡Œæ‰§è¡Œã€‚WCDB åœ¨å¤šçº¿ç¨‹æ–¹é¢æ˜æ˜¾ä¼˜äº FMDB å’Œ ModelSqliteKitï¼Œé€šè¿‡ WCDB çš„æ”¹é€ ï¼Œä½¿å¾—SQLiteçš„æ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚","text":"å¤§å¤šæ•°äº§å“åœ¨æœ¬åœ°Sqliteå­˜å‚¨çš„æ—¶å€™ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”¨äº†ä¸²è¡Œæ¨¡å¼ã€‚å³æ•´ä¸ªåº”ç”¨å…¨å±€åªæœ‰ä¸€ä¸ªsqlæ“ä½œå¥æŸ„ï¼Œç”¨å•ä¾‹ç®¡ç†ç€è¿™ä¸ªSqlHandlerã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ¨¡å¼å«çº¿ç¨‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹å¾ˆå®¹æ˜“å‡ºç°Sqlite_Busyé”™è¯¯ã€‚ å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–è¯»æ“ä½œä¼šè¢«é©³å›ã€‚ å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–äº‹åŠ¡è¯·æ±‚ä¼šè¢«é©³å›ã€‚ å½“æœ‰è¯»æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚ è¯»æ“ä½œä¹‹é—´èƒ½å¤Ÿå¹¶å‘æ‰§è¡Œã€‚ ç¬¬ä¸‰æ–¹åº“WCDBæ”¯æŒå¤šçº¿ç¨‹åº¦äºè¯»ä¸è¯»ï¼Œè¯»ä¸å†™å¹¶å‘æ‰§è¡Œï¼Œå†™ä¸å†™ä¸²è¡Œæ‰§è¡Œã€‚WCDB åœ¨å¤šçº¿ç¨‹æ–¹é¢æ˜æ˜¾ä¼˜äº FMDB å’Œ ModelSqliteKitï¼Œé€šè¿‡ WCDB çš„æ”¹é€ ï¼Œä½¿å¾—SQLiteçš„æ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚ æˆ‘ä»¬å¯ä»¥è®¾è®¡æ‰€æœ‰å†™çš„ä»»åŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚1_gyWriteQueue &#x3D; dispatch_queue_create([[NSString stringWithFormat:@&quot;gy_write_queue.%@&quot;, self]å½“æ‰€æœ‰å…³äºæ–°å¢ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ç­‰sql ä¸šåŠ¡æ—¶å€™ç»Ÿä¸€ç”¨_gyWriteQueueã€‚123dispatch_sync(_gyWriteQueue,^&#123; &#x2F;&#x2F;è¿›è¡Œå†™æ“ä½œ);æˆ‘ä»¬å¯ä»¥æ ¹æ®é˜Ÿåˆ—çš„åå­—ï¼Œç¡®å®šæ˜¯å±äºå†™é˜Ÿåˆ—ï¼Œè¿˜æ˜¯è¯»é˜Ÿåˆ—ã€‚12const char * queueLabel &#x3D; dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL); &#x2F;&#x2F;è·å–å½“å‰é˜Ÿåˆ—çš„åå­—ã€‚NSString *queueName &#x3D; [NSString stringWithUTF8String:queueLabel];å¦‚æœæ˜¯è¯»é˜Ÿåˆ—ï¼Œåˆ™ä»è¯»çš„é˜Ÿåˆ—æ± ä¸­å–ä¸­å–å‡ºä¸ä¹‹å¯¹åº”çš„é˜Ÿåˆ—ï¼Œæ‹¿å‡ºé˜Ÿåˆ—ä¸­æ‰€æŒæœ‰çš„handleå¥æŸ„ã€‚è¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªé˜Ÿåˆ—ä¸­å”¯ä¸€æ­£åœ¨æ‰§è¡Œçš„å­çº¿ç¨‹ä½¿ç”¨è¯¥handleå¥æŸ„ã€‚é¦–å…ˆå‡†å¤‡é˜Ÿåˆ—æ± ï¼Œé˜Ÿåˆ—æœ€å¤§å¹¶å‘æ•°1ï¼Œå¹¶ä¸”æŒæœ‰ä¸€ä¸ªhandle. è¯»å–æ“ä½œæ—¶å€™ï¼Œä»é˜Ÿåˆ—æ± å–å½“å‰æ“ä½œæ•°æœ€å°çš„é˜Ÿåˆ—è¿›è¡Œæ·»åŠ ä»»åŠ¡ã€‚ ä»¥ä¸‹æ˜¯åˆ›å»ºè¯»é˜Ÿåˆ—çš„é˜Ÿåˆ—æ± :12345678910111213- (void)createSqlHandleToPool:(NSString *)queueName&#123; GYSqlHandle *handleModel &#x3D; [[GYSqlHandle alloc] init]; &#x2F;&#x2F;åˆå§‹åŒ–å³åˆ›å»ºäº†ä¸€ä¸ªsqlå¥æŸ„ if(handleModel.sqlHandle)&#123; GYSqlOperationQueue *sqlQueue &#x3D; [[GYSqlOperationQueue alloc] init]; sqlQueue.name &#x3D; queueName; sqlQueue.sqlQueueName &#x3D; queueName; sqlQueue.maxConcurrentOperationCount &#x3D; 1; sqlQueue.handle &#x3D; handleModel; [self.dbQueueList addObject:sqlQueue]; &#125;&#125;ç”±äºsqliteçš„å¥æŸ„è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆï¼Œæ‰€ä»¥ç”¨GYSqlHandleå¯¹è±¡è¿›è¡ŒåŒ…è£¹ä¸€ä¸‹æ–¹ä¾¿å¤„ç†ã€‚ GYSqlOperationQueueä»£ç å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132@interface GYSqlOperationQueue: NSOperationQueue@property(nonatomic,strong) GYSqlHandle *handle; &#x2F;&#x2F;æ¯ä¸€ä¸ªqueueæŒæœ‰ä¸€ä¸ªhandleæ¨¡å‹@property(nonatomic,strong) NSString *sqlQueueName; &#x2F;&#x2F;è®°å½•é˜Ÿåˆ—å- (NSComparisonResult)compareByOperationsCount:(GYSqlOperationQueue *) another;-(void)addSqlOperationWithBlock:(void (^)(void))block;@end@implementation GYSqlOperationQueue- (NSComparisonResult)compareByOperationsCount:(GYSqlOperationQueue *) another&#123; if (self.operations.count &gt; another.operations.count) &#123; return NSOrderedAscending; &#125; else if(self.operations.count &lt; another.operations.count) &#123; return NSOrderedDescending; &#125; return NSOrderedSame;&#125;-(void)addSqlOperationWithBlock:(void (^)(void))block &#123; if(self)&#123; NSOperation *operation &#x3D; [NSBlockOperation blockOperationWithBlock:block]; id lastOperation &#x3D; self.operations.lastObject; if(lastOperation)&#123; [operation addDependency:lastOperation]; &#125; [self addOperation:operation]; &#125;&#125;@endè¿™é‡Œä»…ä¸ºä¸ªäººçš„ä¸€äº›è¯•éªŒæ€§çš„æ¢ç´¢ï¼Œå› ä¸ºå…¨å±€ä¸šåŠ¡ä»£ç æ— æ³•å›ºå®šä½¿ç”¨æŸç»Ÿä¸€é˜Ÿåˆ—ï¼Œçº¿ç¨‹ä¹‹é—´å¯èƒ½å‡ºç°åµŒå¥—ç­‰ï¼Œæ— æ³•ä¿è¯ä¸€ä¸ªHandleåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯æˆ‘çš„ç–‘æƒ‘ç‚¹ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šäº¤æµã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"å›¾ç‰‡ç¼–è¾‘æ€»ç»“","slug":"pictureEdit","date":"2021-07-04T09:15:10.000Z","updated":"2021-07-04T09:16:15.070Z","comments":true,"path":"2021/07/04/pictureEdit/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/04/pictureEdit/","excerpt":"ç®€ä»‹å›¾ç‰‡ç¼–è¾‘æ˜¯åŸºäº CLImageEditor ç¬¬ä¸‰æ–¹è¿›è¡Œæ”¹è£…å¾—åˆ°ä»¿å¾®ä¿¡çš„å›¾ç‰‡ç¼–è¾‘äº¤äº’ã€‚åŸCLImageEditoråº“æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„å›¾ç‰‡ç¼–è¾‘ï¼Œæ”¯æŒæ¶‚é¸¦ï¼Œè£å‰ªï¼Œæ—‹è½¬ï¼Œæ–‡å­—å¸–åŠŸèƒ½ã€‚ä½†æœ‰å‡ é¡¹æˆ‘ä»¬è¿›è¡Œæ”¹è¿›ã€‚ æ‰€æœ‰çš„è¿™äº›å›¾ç‰‡æ“ä½œæˆ‘ä»¬æ±‡æ€»åˆ°ä¸€èµ·è¿›è¡Œç¼–è¾‘ï¼Œæœ€ç»ˆä¿å­˜çš„æ—¶å€™æ‰å¤„ç†æ‰€æœ‰æ“ä½œæ±‡æ€»æˆä¸€å¼ å¤„ç†å›¾ç‰‡ã€‚ æ¶‚é¸¦æ’¤é”€åŠŸèƒ½å®ç°çœŸæ­£çš„ä¸Šä¸€æ­¥æ’¤é”€ï¼Œè€Œä¸æ˜¯ä»…ä»…é€æ˜è‰²è¿›è¡Œæ©¡çš®æ“¦æ“¦é™¤ã€‚ æ–°å¢é©¬èµ›å…‹æ“ä½œåŠŸèƒ½ã€‚ æŠŠå›¾ç‰‡è£å‰ªå’Œæ—‹è½¬è¿›è¡Œç»“åˆåˆ°ä¸€ä¸ªé¡µé¢æ“ä½œï¼Œå¦å¤–æ–°å¢è£å‰ªã€æ—‹è½¬ä¹‹åçš„å›¾ç‰‡æ¢å¤ã€‚ æ”¹å˜é¢œè‰²é€‰æ‹©ï¼Œæ–‡å­—ç¼–è¾‘çš„äº¤äº’ï¼Œæ–°å¢å›¾ç‰‡è£å‰ªåŒºåŸŸçš„è¾¹è§’é‡ç‚¹æ ‡æ³¨ã€‚12345678910111213CLImageEditorViewControllerï¼šusedToolDicï¼šä½¿ç”¨è¿‡çš„å·¥å…·ã€toolName:CLImageToolBaseã€‘-(CLImageToolBase *)currentEditTool; å½“å‰æ­£åœ¨ä½¿ç”¨çš„å·¥å…·ã€‚-(UIImage *)getMergeDrawImageForCropTool; æœ€ååˆæˆçš„å›¾ç‰‡ã€‚ç”¨äºä¸šåŠ¡è½¬å‘ã€ä¿å­˜ã€å›è°ƒç»™ç”¨æˆ·ã€‚&#x2F;&#x2F;å›¾ç‰‡ç¼–è¾‘å™¨æ‰€æ”¯æŒçš„å·¥å…·ç±»éƒ½ç»§æ‰¿äºCLImageToolBase, é€šè¿‡CLClassListè¾…åŠ©ç±»runtimeæ–¹å¼è‡ªåŠ¨å°†ç›¸å…³å·¥å…·ç±»æ³¨å…¥åˆ°èœå•é¡¹ä¸­ã€‚+ (NSArray*)subtools&#123; return [CLImageToolInfo toolsWithToolClass:[CLImageToolBase class]];&#125; CLImageToolBase å·¥å…·åŸºç±»ï¼šæŒæœ‰editorç¼–è¾‘å™¨æ–¹ä¾¿æ‹¿åˆ°å›¾ç‰‡ï¼ŒåŒæ—¶å…·æœ‰setup, cleanUp è¿™å‡ ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€æ–¹æ³•ï¼Œåšç›¸å…³å·¥å…·çš„è§†å›¾åˆ›å»ºä¸æ¸…é™¤ã€‚","text":"ç®€ä»‹å›¾ç‰‡ç¼–è¾‘æ˜¯åŸºäº CLImageEditor ç¬¬ä¸‰æ–¹è¿›è¡Œæ”¹è£…å¾—åˆ°ä»¿å¾®ä¿¡çš„å›¾ç‰‡ç¼–è¾‘äº¤äº’ã€‚åŸCLImageEditoråº“æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„å›¾ç‰‡ç¼–è¾‘ï¼Œæ”¯æŒæ¶‚é¸¦ï¼Œè£å‰ªï¼Œæ—‹è½¬ï¼Œæ–‡å­—å¸–åŠŸèƒ½ã€‚ä½†æœ‰å‡ é¡¹æˆ‘ä»¬è¿›è¡Œæ”¹è¿›ã€‚ æ‰€æœ‰çš„è¿™äº›å›¾ç‰‡æ“ä½œæˆ‘ä»¬æ±‡æ€»åˆ°ä¸€èµ·è¿›è¡Œç¼–è¾‘ï¼Œæœ€ç»ˆä¿å­˜çš„æ—¶å€™æ‰å¤„ç†æ‰€æœ‰æ“ä½œæ±‡æ€»æˆä¸€å¼ å¤„ç†å›¾ç‰‡ã€‚ æ¶‚é¸¦æ’¤é”€åŠŸèƒ½å®ç°çœŸæ­£çš„ä¸Šä¸€æ­¥æ’¤é”€ï¼Œè€Œä¸æ˜¯ä»…ä»…é€æ˜è‰²è¿›è¡Œæ©¡çš®æ“¦æ“¦é™¤ã€‚ æ–°å¢é©¬èµ›å…‹æ“ä½œåŠŸèƒ½ã€‚ æŠŠå›¾ç‰‡è£å‰ªå’Œæ—‹è½¬è¿›è¡Œç»“åˆåˆ°ä¸€ä¸ªé¡µé¢æ“ä½œï¼Œå¦å¤–æ–°å¢è£å‰ªã€æ—‹è½¬ä¹‹åçš„å›¾ç‰‡æ¢å¤ã€‚ æ”¹å˜é¢œè‰²é€‰æ‹©ï¼Œæ–‡å­—ç¼–è¾‘çš„äº¤äº’ï¼Œæ–°å¢å›¾ç‰‡è£å‰ªåŒºåŸŸçš„è¾¹è§’é‡ç‚¹æ ‡æ³¨ã€‚12345678910111213CLImageEditorViewControllerï¼šusedToolDicï¼šä½¿ç”¨è¿‡çš„å·¥å…·ã€toolName:CLImageToolBaseã€‘-(CLImageToolBase *)currentEditTool; å½“å‰æ­£åœ¨ä½¿ç”¨çš„å·¥å…·ã€‚-(UIImage *)getMergeDrawImageForCropTool; æœ€ååˆæˆçš„å›¾ç‰‡ã€‚ç”¨äºä¸šåŠ¡è½¬å‘ã€ä¿å­˜ã€å›è°ƒç»™ç”¨æˆ·ã€‚&#x2F;&#x2F;å›¾ç‰‡ç¼–è¾‘å™¨æ‰€æ”¯æŒçš„å·¥å…·ç±»éƒ½ç»§æ‰¿äºCLImageToolBase, é€šè¿‡CLClassListè¾…åŠ©ç±»runtimeæ–¹å¼è‡ªåŠ¨å°†ç›¸å…³å·¥å…·ç±»æ³¨å…¥åˆ°èœå•é¡¹ä¸­ã€‚+ (NSArray*)subtools&#123; return [CLImageToolInfo toolsWithToolClass:[CLImageToolBase class]];&#125; CLImageToolBase å·¥å…·åŸºç±»ï¼šæŒæœ‰editorç¼–è¾‘å™¨æ–¹ä¾¿æ‹¿åˆ°å›¾ç‰‡ï¼ŒåŒæ—¶å…·æœ‰setup, cleanUp è¿™å‡ ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€æ–¹æ³•ï¼Œåšç›¸å…³å·¥å…·çš„è§†å›¾åˆ›å»ºä¸æ¸…é™¤ã€‚ ç”»ç¬”æ¶‚é¸¦ ç”»ç¬”æ‰‹åŠ¿ï¼šé€šè¿‡ UIPanGestureRecongnizer æ‰‹åŠ¿å®ç°åœ¨ imageview çš„è¡¨å±‚æ–° ImageView,é€šè¿‡ç”»å¸ƒç”Ÿæˆ image ç»™ ImageView èµ‹å€¼ã€‚ ç”»ç¬”æ’¤é”€æ—§æ’¤é”€ï¼šCLImageEditor å¼€æºåº“æ¶‚é¸¦æ’¤é”€åŸæœ¬æ˜¯ä¸€ä¸ªæ©¡çš®æª«åŠŸèƒ½ï¼Œé€šè¿‡è®¾ç½®BlendModeä¸ºé€æ˜è‰²æ¥å®ç°æ“¦é™¤ç”»ç¬”çº¿æ¡ã€‚å‡â€œæ’¤é”€â€ã€‚ CGContextSetBlendMode(context, kCGBlendModeClear);æ’¤é”€-æ–¹æ¡ˆæ¼”å˜ï¼š æ–°æ–¹æ¡ˆ1: ä¸ºäº†å¯ä»¥çœŸæ­£çš„å®ç°æ’¤é”€ï¼Œæˆ‘ä»¬æŠŠ Pan æ‰‹åŠ¿ç”±å¼€å§‹åˆ°è§¦æ‘¸ç»“æŸè¡¨ç¤ºä¸ºä¸€æ¡çº¿ï¼Œç„¶åç”¨ä¸€ä¸ªæ•°æ®æºå­˜å‚¨å¥½è¿™äº›çº¿æ¡ã€‚å½“æ’¤é”€çš„æ—¶å€™ï¼Œå®é™…ä¸ºç§»é™¤æœ€åä¸€ä¸ªçº¿æ¡å³å¯ã€‚è¡¨å±‚å³ä¸€ä¸ªdrawImageView,æ‰€æœ‰ç”»ç¬”æ¶‚é¸¦åˆæˆå›¾ç‰‡æœ€ç»ˆåªèµ‹å€¼ç»™drawImageViewæ˜¾ç¤ºã€‚åœ¨CLDrawTool ç±»ä¸Šæ–°å¢ä¸‰ä¸ªå±æ€§ï¼šç”¨æ¥è®°å½•ç”»å¸ƒå›¾å±‚ä¸Šåˆ’çº¿çš„æ“ä½œã€‚ç”±äºæ¯æ¡çº¿å¯åˆ‡æ¢é¢œè‰²è¿›è¡Œæ¶‚é¸¦ï¼Œæ‰€ä»¥æ¯æ¡çº¿éƒ½å¯¹åº”lineColorsArray é¢œè‰²æ•°ç»„æ¥è®°å½•ã€‚ä¸€æ¡çº¿å³ä¸ºnowPointArrayæ•°ç»„ã€‚è®°å½•ä¸€æ¡çº¿ä¸Šçš„æ‰€æœ‰ç‚¹ã€‚è€ŒlinePointArrayç”¨æ¥è®°å½•æ‰€æœ‰çº¿ã€‚ 1234@property(nonatomic,strong) NSMutableArray *nowPointArray; &#x2F;&#x2F;å½“å‰çº¿çš„æ‰€æœ‰ç‚¹@property(nonatomic,strong) NSMutableArray *lineColorsArray;&#x2F;&#x2F;æ¯æ¡çº¿å¯¹åº”çš„é¢œè‰²@property(nonatomic,strong) NSMutableArray *linePointArray;&#x2F;&#x2F;æ‰€æœ‰çº¿ã€nowPointArrayã€‘ æ’¤é”€çš„æ—¶å€™ï¼šç§»é™¤æœ€åä¸€æ¡çº¿ä»¥åŠé¢œè‰²ã€‚é‡æ–°ç»˜åˆ¶åˆ°å½“å‰çš„ç”»å¸ƒä¸Šï¼Œç„¶åç”Ÿæˆimageèµ‹å€¼ç»™è¡¨å±‚çš„drawImageView. ç¼ºç‚¹1ï¼šæ¯æ¬¡æ’¤é”€ç§»é™¤æœ€åä¸€æ¡çº¿ï¼Œéƒ½éœ€è¦é‡ç»˜æ‰€æœ‰çº¿ã€‚ä»¥åŠæ¯æ¬¡æ–°æ¶‚é¸¦æ—¶å€™ï¼Œéƒ½éœ€è¦é‡æ–°å®æ—¶ç»˜åˆ¶æ‰€æœ‰çº¿æ¥è¾¾åˆ°å®æ—¶æ˜¾ç¤ºçš„æ•ˆæœã€‚æ€§èƒ½æ¶ˆè€—å¤ªå¤§ï¼Œä¸åˆ©äºç”¨äºå¿«é€Ÿç»˜åˆ¶ã€‚ ç¼ºç‚¹2ï¼šå½“å›¾ç‰‡æ—‹è½¬åï¼Œæ— æ³•å¯¹æ‰€æœ‰çº¿ä¸Šçš„ç‚¹åšç›¸åº”çš„æ—‹è½¬å’Œæ”¾å¤§ã€‚æ—‹è½¬å›¾ç‰‡åï¼Œçº¿æ¡é”™ä½ã€‚ ç¼ºé™·ï¼šè¿™ç§â€œæ­£å¸¸â€æ’¤é”€æ— æ³•æ»¡è¶³å½“å›¾ç‰‡æ—‹è½¬åï¼Œæ‰€æœ‰çº¿æ¡çš„ä½ç½®å˜åŒ–ï¼Œå³ æˆ‘ä»¬åº”è¯¥æ ¹æ®è§’åº¦å»æ—‹è½¬æ‰€æœ‰ç‚¹çš„æ—‹è½¬åçš„ç‚¹åæ ‡ æ–°æ–¹æ¡ˆ2ã€ä¸ºäº†è§£å†³å›¾ç‰‡æ—‹è½¬åçš„çš„åæ ‡ç‚¹æ”¹å˜å’Œè®¡ç®—é—®é¢˜ï¼Œæˆ‘ä»¬æ¢äº†ä¸€ç§æ€è·¯ï¼šå³ä¸€æ¬¡ Pan æ‰‹åŠ¿ç”Ÿæˆä¸€å¼ å›¾å±‚ï¼Œæ—‹è½¬æ—¶æ—‹è½¬æ‰€æœ‰ç”»ç¬”å›¾å±‚è¿›è¡Œæ—‹è½¬ã€‚ æ¯æ¬¡ç”»å®Œä¸€æ¡çº¿ï¼Œå³åœ¨è¡¨å±‚ç”Ÿæˆä¸€å¼ æ–°çš„drawImageView. å½“ç”»å¤šæ¡çº¿çš„æ—¶å€™ï¼Œå®åˆ™ã€drawImageViewã€‘é›†åˆã€‚ 1234if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123; &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚ [self generateDrawImageView];&#125; å°†çº¿æ¡å±æ€§ç§»è‡³DrawPageDataæ¨¡å‹ä¸­ã€‚ 12345@interface DrawPageData : NSObject@property(nonatomic,strong) NSMutableArray *nowPointArray; &#x2F;&#x2F;å½“å‰ç‚¹@property(nonatomic,strong) NSMutableArray *lineColorsArray;&#x2F;&#x2F;æ¯æ¡çº¿å¯¹åº”çš„é¢œè‰²@property(nonatomic,strong) NSMutableArray *linePointArray; &#x2F;&#x2F;æ‰€æœ‰çº¿@end CLDrawTool ä¸­ æ–°å¢ä¸¤å±æ€§ç”¨æ¥è®°å½•æ‰€æœ‰å›¾å±‚ä»¥åŠå›¾å±‚æ‰€å¯¹åº”çš„åˆ’çº¿æ•°æ®æ¨¡å‹ã€‚ 12@property(nonatomic,strong) NSMutableArray *drawImageViews; &#x2F;&#x2F;[imageView]@property(nonatomic,strong) NSMutableArray *drawPages; &#x2F;&#x2F;[DrawPageData] æ’¤é”€ï¼š 123_lastDrawPage.linePointArray removeLastObject ç§»é™¤æœ€åä¸€æ¡çº¿;_lastDrawPage.lineColorsArray removeLastObject ç§»é™¤é¢œè‰²;clearTopDrawImageView ç§»é™¤æœ€é¡¶å±‚çš„ç”»ç¬”å›¾ç‰‡å±‚ã€‚ ä¼˜ç‚¹ï¼šæ­¤æ–¹æ¡ˆæ—¢ä¿è¯äº†ç»˜åˆ¶æ—¶ä¸å†èµ°é‡ç»˜ï¼Œæ¯æ¡çº¿éƒ½åœ¨å•ç‹¬çš„å›¾å±‚ä¸Šã€‚åŒæ—¶åœ¨å›¾ç‰‡å‘ç”Ÿæ—‹è½¬æ—¶ï¼Œæ—‹è½¬æ¯ä¸€æ¡çº¿é”åœ¨çš„å›¾ç‰‡drawImageView,ä¿è¯äº†æ¯ä¸€æ¡çº¿æ˜¾ç¤ºéƒ½æ­£ç¡®ã€‚ 123456789101112131415161718192021222324252627282930313233343536@property(nonatomic,strong) DrawPageData _lastDrawPage; &#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªå½“å‰é¡µè®°å½•æ¨¡å‹&#x2F;&#x2F;ç”»ç¬”æ’¤é”€åŠŸèƒ½-(void)eraserButtonDidTap:(UIButton *)btn&#123;if (_lastDrawPage.linePointArray &amp;&amp; _lastDrawPage.linePointArray.count &gt;&#x3D; 1) &#123; [_lastDrawPage.linePointArray removeLastObject]; [_lastDrawPage.lineColorsArray removeLastObject]; [self drawAllPanLine:_drawingView byDrawPage:_lastDrawPage]; &#x2F;&#x2F;å½“å‰ç”»ç¬”å±‚æ‰€æœ‰çº¿éƒ½ç§»é™¤äº†çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨ç§»é™¤å½“å‰ç”»ç¬”å±‚ if(_lastDrawPage.linePointArray.count &#x3D;&#x3D; 0)&#123; &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚ if(self.drawImageViews.count &gt; 1)&#123; [self clearTopDrawImageView]; &#125; &#125; &#125;else&#123; &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚ if(self.drawPages.count &gt; 1)&#123; [self clearTopDrawImageView]; [self eraserButtonDidTap:nil]; &#x2F;&#x2F;é€’å½’ç§»é™¤ç©ºçš„drawImageView &#125; &#125;&#125;&#x2F;&#x2F;æ¸…é™¤é¡¶å±‚çš„ç”»ç¬” imageview-(void)clearTopDrawImageView&#123; [self.drawPages removeLastObject]; [((UIImageView *)self.drawImageViews.lastObject) removeFromSuperview]; [self.drawImageViews removeLastObject]; &#x2F;&#x2F;é‡ç½®å½“å‰çš„å±‚çº§page _lastDrawPage &#x3D; self.drawPages.lastObject; _drawingView &#x3D; self.drawImageViews.lastObject;&#125; æ¸²æŸ“ç”»ç¬”å›¾å±‚ ç°åœ¨çš„æ¸²æŸ“é€»è¾‘æ˜¯æ¯ä¸ª DrawPage é‡Œé¢çš„ linePointArray åªä¼šæœ‰ä¸€æ¡çº¿ï¼Œå¤–å±‚ for å¾ªç¯å…¶å®å¯ä»¥çœç•¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839&#x2F;&#x2F;ä¼ å…¥drawImageView å’Œ drawPageData è¿›è¡Œåˆ’çº¿-(void)drawAllPanLine:(UIImageView *)drawImageView byDrawPage:(DrawPageData *)lastDrawPage&#123; CGSize size &#x3D; drawImageView.frame.size; UIGraphicsBeginImageContextWithOptions(size, NO, 0.0); &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿ for (int i &#x3D; 0 ; i &lt; lastDrawPage.linePointArray.count ; i ++ ) &#123; NSMutableArray *pointArray &#x3D; [lastDrawPage.linePointArray objectAtIndex:i]; CGContextRef context &#x3D; UIGraphicsGetCurrentContext(); CGFloat strokeWidth &#x3D; 6.5; CGContextSetLineWidth(context, strokeWidth); CGContextSetLineJoin(context, kCGLineJoinRound); CGContextSetLineCap(context, kCGLineCapRound); UIColor *strokeColor &#x3D; lastDrawPage.lineColorsArray[i]; &#x2F;&#x2F;å¾—å‡ºæ¯æ¡çº¿çš„é¢œè‰² CGContextSetStrokeColorWithColor(context, strokeColor.CGColor); &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹ for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123; NSValue *value &#x3D; [pointArray objectAtIndex:j]; CGPoint p &#x3D; [value CGPointValue]; if (j &#x3D;&#x3D; 0) &#123; CGContextMoveToPoint(context, p.x, p.y); CGContextAddLineToPoint(context, p.x, p.y); &#125;else&#123; CGContextAddLineToPoint(context, p.x, p.y); &#125; &#125; CGContextStrokePath(context); &#125; drawImageView.image &#x3D; UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext();&#125; Pan æ‰‹åŠ¿çš„äº‹ä»¶å¤„ç† 1234567891011121314151617181920212223242526272829303132- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender&#123; if([[self.editor currentEditTool] isKindOfClass:[CLMosaicTool class]])&#123; &#x2F;&#x2F;æ‰‹åŠ¿åŠŸèƒ½ä¼ é€’ï¼Œæ‰€æœ‰toolå›¾å±‚éƒ½å åœ¨ä¸€èµ·ã€‚å› é©¬èµ›å…‹å›¾å±‚åœ¨æœ€åº•å±‚ï¼Œæ¶‚é¸¦åœ¨é©¬èµ›å…‹ä¸Šå±‚ï¼Œæ–‡å­—å±‚åœ¨æœ€é¡¶å±‚ã€‚ CLMosaicTool *mosaicTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;]; [mosaicTool drawingViewDidPan:sender]; return; &#125; CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView]; if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123; _lastDrawPage.nowPointArray &#x3D; [[NSMutableArray alloc] init]; UIColor *currentLineStrokeColor &#x3D; _strokePreview.backgroundColor; &#x2F;&#x2F;è®°å½•å½“å‰ç”»çº¿é¢œè‰²ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½åˆ‡æ¢é¢œè‰²ã€‚ [_lastDrawPage.lineColorsArray addObject:currentLineStrokeColor]; [_lastDrawPage.linePointArray addObject:_lastDrawPage.nowPointArray]; _prevDraggingPosition &#x3D; currentDraggingPosition; &#125; &#x2F;&#x2F;è®°å½•å½“å‰çš„ç‚¹ NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition]; [_lastDrawPage.nowPointArray addObject:point]; [self drawAllPanLine:_drawingView byDrawPage:_lastDrawPage]; _prevDraggingPosition &#x3D; currentDraggingPosition; if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123; &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚ [self generateDrawImageView]; &#x2F;&#x2F;å¦‚æœè¦åœ¨ä¸€å¼ å›¾ä¸Šç”»å¤šæ¡çº¿ï¼Œåˆ™å±è”½æ‰æ­¤å±€ã€‚ &#125;&#125; ç”»å®Œä¸€æ¡çº¿ç”Ÿæˆä¸€å¼ å›¾å±‚ 123456789101112131415161718192021-(void)generateDrawImageView&#123; DrawPageData *pageData &#x3D; [[DrawPageData alloc] init]; [self.drawPages addObject:pageData]; _lastDrawPage &#x3D; pageData; UIImageView *lastDrawImageView &#x3D; [[UIImageView alloc] initWithFrame:self.editor.imageView.bounds]; UIPanGestureRecognizer *panGesture &#x3D; [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(drawingViewDidPan:)]; panGesture.maximumNumberOfTouches &#x3D; 1; lastDrawImageView.userInteractionEnabled &#x3D; YES; lastDrawImageView.tag &#x3D; 100 + self.drawImageViews.count; [lastDrawImageView addGestureRecognizer:panGesture]; if(self.drawImageViews.count)&#123; [self.editor.imageView insertSubview:lastDrawImageView aboveSubview:_drawingView]; &#125;else&#123; [self.editor.imageView addSubview:lastDrawImageView]; &#125; [self.drawImageViews addObject:lastDrawImageView]; _drawingView &#x3D; lastDrawImageView;&#125; å›¾ç‰‡æ—‹è½¬ å½“å›¾ç‰‡å‘ç”Ÿæ—‹è½¬æˆ–è€…è£å‰ªæ“ä½œæ—¶å€™ï¼Œéœ€è¦ä» usedToolDic ä¸­æ‹¿å‡ºCLDrawTool å’Œ CLMosialTool ï¼Œå–å‡ºå…¶ä¸­çš„ã€drawImageViewã€‘é›†åˆï¼Œå¯¹å…¶ä¸­çš„æ¯ä¸€å¼ å›¾å±‚è¿›è¡Œæ—‹è½¬å’Œè£å‰ªï¼Œå†èµ‹å›ç»™å¯¹åº”çš„æ¯ä¸€é¡¹å›¾å±‚drawImageView. å†è°ƒæ•´æ¯ä¸€é¡¹drawImageViewçš„frame. è°ƒç”¨æ­¤æ–¹æ³•ã€‚ //é‡ç½®ç”»ç¬”å±‚&amp;é©¬èµ›å…‹å±‚çš„frameã€‚1- (void)resetDrawImageViewFrame:(UIImage *)image withDrawImageView:(UIImageView *)drawingView //ä»¥ä¸‹ä»£ç åœ¨CLClippingæ—‹è½¬æˆ–è£å‰ªæ“ä½œå®Œæˆæ—¶å€™çš„å›è°ƒéœ€è¦å¯¹æ¶‚é¸¦å›¾å±‚åšçš„imageå’Œframeå¤„ç†ã€‚1234567891011121314151617CLDrawTool *_drawTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLDrawTool&quot;];if(_drawTool)&#123; &#x2F;&#x2F;å°†å¤šå¼ ç”»ç¬”å›¾è¿›è¡Œå›¾ç‰‡æºæ—‹è½¬ã€‚ for(UIImageView *drawingView in _drawTool.drawImageViews)&#123; UIImage *roateDrawImage &#x3D; [self buildRoteImage:drawingView.image]; &#x2F;&#x2F;éœ€è¦å¯¹imageviewsè¿›è¡Œæ—‹è½¬ CGFloat roateZoomScale &#x3D; _rotateImageView.width &#x2F; roateDrawImage.size.width; CGRect roateRct &#x3D; _gridView.clippingRect; roateRct.size.width &#x2F;&#x3D; roateZoomScale; roateRct.size.height &#x2F;&#x3D; roateZoomScale; roateRct.origin.x &#x2F;&#x3D; roateZoomScale; roateRct.origin.y &#x2F;&#x3D; roateZoomScale; UIImage *roateCropDrawImage &#x3D; [roateDrawImage crop:roateRct]; drawingView.image &#x3D; roateCropDrawImage; &#x2F;&#x2F;è®¾ç½®è£å‰ªåçš„å›¾ç‰‡ã€‚ [self.editor resetDrawImageViewFrame:roateCropDrawImage withDrawImageView:drawingView]; &#125;&#125; é©¬èµ›å…‹é©¬èµ›å…‹çš„æ€è·¯å’Œç”»ç¬”å·®ä¸å¤šï¼Œä¹Ÿæ˜¯æ ¹æ®ç”¨æˆ· pan æ‰‹åŠ¿è¿›è¡Œè§¦æ‘¸ï¼Œæ‰€ç”»çš„é¢œè‰²ä¸ºåŸå›¾ç» RGB æ¨¡ç³Šæ¢ç®—å¾—åˆ°çš„é©¬èµ›å…‹å›¾ç‰‡ï¼Œç®—æ³•ä½¿ç”¨ XRGBTool ç¬¬ä¸‰æ–¹çš„ä¸€ä¸ªç±»ã€‚ é©¬èµ›å…‹åˆå§‹æ–¹æ¡ˆåŸå…ˆçš„æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ª imageLayerï¼Œç„¶åæ·»åŠ åˆ° imageView çš„ layer: [self.editor.imageView.layer insertSublayer:_imageLayer atIndex:0]; //ç¡®å®šé©¬èµ›å…‹åœ¨æœ€åº•éƒ¨. 123456789101112CALayer *imageLayer &#x3D; [CALayer layer];imageLayer.frame &#x3D; drawingView.bounds;imageLayer.contents &#x3D; (id)_mohuImage.CGImage;CAShapeLayer *shapeLayer &#x3D; [CAShapeLayer layer];shapeLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds;shapeLayer.lineCap &#x3D; kCALineCapRound;shapeLayer.lineJoin &#x3D; kCALineJoinRound;shapeLayer.lineWidth &#x3D; 15;shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor;shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……imageLayer.mask &#x3D; shapeLayer; 1234åœ¨panæ‰‹åŠ¿æ—¶å€™ï¼Œé€šè¿‡æ”¹å˜shareLayer.pathCGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView];CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);_shapeLayer.path &#x3D; _path; æœ€ååˆæˆå›¾ç‰‡çš„æ—¶å€™ï¼Œé€šè¿‡ imageview.layer æ¸²æŸ“åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼š [self.editor.imageView.layer renderInContext:context]; å­˜åœ¨çš„é—®é¢˜(ä¸€)ï¼špath è·¯å¾„ä¸å¯æ’¤å› é©¬èµ›å…‹æ’¤å›åˆ›å»ºä¸€ä¸ªå¯å˜çš„ path è·¯å¾„ CGMutablePathRef _path = CGPathCreateMutable(); å¹¶å°†æ¯æ¡çº¿è¿›è¡Œå åŠ ï¼ŒCGPathAddPath(_path, nil, _onePath);æœ€åå°†æ€»çš„_path èµ‹ç»™_shapeLayer.pathã€‚ 12345678910111213141516171819202122232425- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender&#123; CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView]; if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123; _prevDraggingPosition &#x3D; currentDraggingPosition; _nowPointArray &#x3D; [[NSMutableArray alloc] init]; [_linePointArray addObject:_nowPointArray]; &#x2F;&#x2F;æ— æ’¤é”€æ—¶å€™çš„å•æ¬¡é©¬èµ›å…‹æ¶‚æŠ¹&#x2F;&#x2F; CGPathMoveToPoint(_path, nil, _prevDraggingPosition.x, _prevDraggingPosition.y);&#x2F;&#x2F; _shapeLayer.path &#x3D; _path; &#125;&#x2F;&#x2F; if(sender.state !&#x3D; UIGestureRecognizerStateEnded)&#123;&#x2F;&#x2F;&#x2F;&#x2F; CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);&#x2F;&#x2F; _shapeLayer.path &#x3D; _path;&#x2F;&#x2F; &#125; NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition]; [_nowPointArray addObject:point]; [self drawAllPanLine]; _prevDraggingPosition &#x3D; currentDraggingPosition;&#125; æ’¤é”€çš„æ“ä½œ(æ—§)æµç¨‹ï¼šå½“æ’¤é”€æ—¶ï¼Œä»…ç§»é™¤æ•°ç»„è®°å½•çš„æœ€åä¸€æ¡çº¿ã€‚ç„¶åè¦é‡æ–°è°ƒç”¨ä¸€éæ¸²æŸ“ã€‚æŠŠæ¯æ¡çº¿çš„æ‰€æœ‰ç‚¹è¿›è¡Œè¿æ¥ CGPathAddPathï¼Œèµ‹å€¼ç»™æ€»çš„å¯å˜_pathï¼Œæœ€åæŠŠ_path ç»™_shapeLayer.path 1234567&#x2F;&#x2F;æ’¤å›ä¸Šä¸€æ­¥-(void)eraserButtonDidTap:(UIButton *)btn&#123; if (_linePointArray &amp;&amp; _linePointArray.count &gt;&#x3D; 1) &#123; [_linePointArray removeLastObject]; [self drawAllPanLine]; &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637-(void)drawAllPanLine&#123; CGPathRelease(_path); _path &#x3D; CGPathCreateMutable(); &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿ for (int i &#x3D; 0 ; i &lt; _linePointArray.count ; i ++ ) &#123; NSMutableArray *pointArray &#x3D; [_linePointArray objectAtIndex:i]; &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹ CGMutablePathRef _onePath &#x3D; CGPathCreateMutable(); for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123; NSValue *value &#x3D; [pointArray objectAtIndex:j]; CGPoint p &#x3D; [value CGPointValue]; if (j &#x3D;&#x3D; 0) &#123; CGPathMoveToPoint(_onePath, nil, p.x, p.y); &#125;else&#123; CGPathAddLineToPoint(_onePath, nil, p.x, p.y); &#125; &#125; CGPathAddPath(_path, nil, _onePath); &#125; _shapeLayer.path &#x3D; _path;&#125;- (UIImage*)buildImage&#123; __weak typeof(self) weakSelf &#x3D; self; UIGraphicsBeginImageContextWithOptions(self.editor.imageView.frame.size, NO, 0); CGContextRef context &#x3D; UIGraphicsGetCurrentContext(); [weakSelf.editor.imageView.layer renderInContext:context]; UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return tmp;&#125; æ’¤é”€çš„æ“ä½œ(æ–°)æ–°æ–¹æ¡ˆçš„æ’¤é”€æ˜¯å’Œç”»ç¬”æµç¨‹è§£å†³æ–¹æ¡ˆä¸€è‡´ï¼Œéƒ½æ˜¯æ¯å®Œæˆä¸€æ¬¡è§¦æ‘¸æ¶‚æŠ¹é©¬èµ›å…‹ï¼Œåˆ™åœ¨è¡¨é¢è¦†ç›–ä¸€å¼ å›¾ç‰‡. åœ¨MosaicPageData æ•°æ®æºåŸºç¡€ä¸Šæ–°å¢ä¸¤ä¸ªlayerå±æ€§ã€‚ CAShapeLayer shapeLayer; CALayer imageLayer; æ“ä½œåŸç†ï¼šé€šè¿‡è®¾ç½®å½“å‰PageDataçš„ shapeLayer.path æ¥å®ç°è·¯å¾„æ¶‚æŠ¹ã€‚ç„¶åå°†imageLayeræ¸²æŸ“åˆ°ç”»å¸ƒä¸Š[lastMosaicPage.imageLayer renderInContext:context];å¾—åˆ°imageèµ‹å€¼ç»™å½“å‰ä¸Šå±‚çš„drawImageView. buildImage:å›¾ç‰‡åˆæˆã€‚ å…ˆå°†åŸå›¾ç»˜åˆ¶ï¼Œç„¶åå°†æ¯ä¸€å¼ é©¬èµ›å…‹å›¾å±‚çš„imageè¿›è¡Œç»˜åˆ¶ã€‚æœ€åå¾—åˆ°åˆæˆçš„é©¬èµ›å…‹å›¾ç‰‡ã€‚å…·ä½“å‚ç…§CLMosialTool buildImageæ–¹æ³•ã€‚ //å‡†å¤‡å¥½åŸå›¾çš„é©¬èµ›å…‹è™šåŒ–å›¾ç‰‡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140 _mohuImage &#x3D; [XRGBTool getMosaicImageWith:image level:0];_shapeLayer &#x3D; [CAShapeLayer layer];_shapeLayer.frame &#x3D; _drawingView.bounds;_shapeLayer.lineCap &#x3D; kCALineCapRound;_shapeLayer.lineJoin &#x3D; kCALineJoinRound;_shapeLayer.lineWidth &#x3D; 15;_shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor;_shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……_imageLayer &#x3D; [CALayer layer];_imageLayer.frame &#x3D; _drawingView.bounds;_imageLayer.contents &#x3D; (id)_mohuImage.CGImage;_imageLayer.mask &#x3D; _shapeLayer;- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender&#123; CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView]; if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123; _prevDraggingPosition &#x3D; currentDraggingPosition; _lastMosaicPage.nowPointArray &#x3D; [[NSMutableArray alloc] init]; [_lastMosaicPage.linePointArray addObject:_lastMosaicPage.nowPointArray]; &#x2F;&#x2F;æ— æ’¤é”€æ—¶å€™çš„å•æ¬¡é©¬èµ›å…‹æ¶‚æŠ¹&#x2F;&#x2F; CGPathMoveToPoint(_path, nil, _prevDraggingPosition.x, _prevDraggingPosition.y);&#x2F;&#x2F; _shapeLayer.path &#x3D; _path; &#125;&#x2F;&#x2F; if(sender.state !&#x3D; UIGestureRecognizerStateEnded)&#123;&#x2F;&#x2F;&#x2F;&#x2F; CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);&#x2F;&#x2F; _shapeLayer.path &#x3D; _path;&#x2F;&#x2F; &#125; NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition]; [_lastMosaicPage.nowPointArray addObject:point]; [self drawAllPanLine:_drawingView byDrawPage:_lastMosaicPage]; _prevDraggingPosition &#x3D; currentDraggingPosition; if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123; &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚ [self generateDrawImageView]; &#x2F;&#x2F;å¦‚æœè¦åœ¨ä¸€å¼ å›¾ä¸Šç”»å¤šæ¡çº¿ï¼Œåˆ™å±è”½æ‰æ­¤å±€ã€‚ &#125;&#125;-(void)drawAllPanLine:(UIImageView *)drawImageView byDrawPage:(MosaicPageData *)lastMosaicPage&#123; CGMutablePathRef _path &#x3D; CGPathCreateMutable(); &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿ for (int i &#x3D; 0 ; i &lt; lastMosaicPage.linePointArray.count ; i ++ ) &#123; NSMutableArray *pointArray &#x3D; [lastMosaicPage.linePointArray objectAtIndex:i]; &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹ CGMutablePathRef _onePath &#x3D; CGPathCreateMutable(); for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123; NSValue *value &#x3D; [pointArray objectAtIndex:j]; CGPoint p &#x3D; [value CGPointValue]; if (j &#x3D;&#x3D; 0) &#123; CGPathMoveToPoint(_onePath, nil, p.x, p.y); &#125;else&#123; CGPathAddLineToPoint(_onePath, nil, p.x, p.y); &#125; &#125; CGPathAddPath(_path, nil, _onePath); &#125; lastMosaicPage.shapeLayer.path &#x3D; _path; &#x2F;* æ‰‹æŒ‡çš„æ¶‚æŠ¹è·¯å¾„ *&#x2F; &#x2F;&#x2F;ç”»å›¾ CGFloat scale &#x3D; self.editor.imageView.image.size.width &#x2F; self.editor.imageView.width; UIGraphicsBeginImageContextWithOptions(self.editor.imageView.image.size, NO, self.editor.imageView.image.scale); CGContextRef context &#x3D; UIGraphicsGetCurrentContext(); CGContextScaleCTM(UIGraphicsGetCurrentContext(), scale, scale); [lastMosaicPage.imageLayer renderInContext:context]; UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext(); drawImageView.image &#x3D; tmp; UIGraphicsEndImageContext();&#125;-(void)generateDrawImageView&#123; MosaicPageData *pageData &#x3D; [[MosaicPageData alloc] init]; [self.mosaicPages addObject:pageData]; _lastMosaicPage &#x3D; pageData; UIImage *_mohuImage &#x3D; [XRGBTool getMosaicImageWith:self.editor.imageView.image level:0]; UIImageView *drawingView &#x3D; [[UIImageView alloc] initWithFrame:self.editor.imageView.bounds]; UIPanGestureRecognizer *panGesture &#x3D; [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(drawingViewDidPan:)]; panGesture.maximumNumberOfTouches &#x3D; 1; drawingView.userInteractionEnabled &#x3D; YES; drawingView.tag &#x3D; 1000 + self.drawImageViews.count; [drawingView addGestureRecognizer:panGesture]; if(self.drawImageViews.count)&#123;&#x2F;&#x2F; for(NSInteger tagIndex &#x3D; 0; tagIndex &lt; self.drawImageViews.count ; tagIndex++)&#123;&#x2F;&#x2F; UIImageView *imageView &#x3D; self.drawImageViews[tagIndex];&#x2F;&#x2F; [imageView removeFromSuperview];&#x2F;&#x2F; &#125; [self.editor.imageView.subviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; NSLog(@&quot;å­imageviewçš„å±‚æ¬¡tag:%d&quot;,obj.tag); &#125;];&#x2F;&#x2F; for(NSInteger tagIndex &#x3D; 0; tagIndex &lt; self.drawImageViews.count ; tagIndex++)&#123;&#x2F;&#x2F; UIImageView *imageView &#x3D; self.drawImageViews[tagIndex];&#x2F;&#x2F; if(tagIndex &#x3D;&#x3D; 0)&#123;&#x2F;&#x2F; [self.editor.imageView insertSubview:imageView atIndex:0]; &#x2F;&#x2F;åº•å±‚ç¬¬ä¸€å¼ &#x2F;&#x2F; &#125;else&#123;&#x2F;&#x2F; [self.editor.imageView insertSubview:imageView aboveSubview:_drawingView];&#x2F;&#x2F; &#125;&#x2F;&#x2F; &#125; [self.editor.imageView insertSubview:drawingView aboveSubview:_drawingView]; &#125;else&#123; [self.editor.imageView insertSubview:drawingView atIndex:0]; &#x2F;&#x2F;åº•å±‚ç¬¬ä¸€å¼  &#125;&#x2F;&#x2F; [self.editor.imageView addSubview:drawingView]; [self.drawImageViews addObject:drawingView]; _drawingView &#x3D; drawingView; &#x2F;&#x2F;é‡æ–°åˆ›å»ºï¼Ÿæ‰‹åŠ¿åœæ­¢æ—¶å€™ï¼Œåˆ›å»ºä¸æ–­å¾€imageview.layeråˆ›å»º ã€‚æœ€ç»ˆçš„ç»“æœæ˜¯ç†æŸ“imageLayeré›†åˆæ¸²æŸ“åœ¨å›¾ç‰‡ä¸Šã€‚ CALayer *imageLayer &#x3D; [CALayer layer]; imageLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds;&#x2F;&#x2F; [self.editor.imageView.layer insertSublayer:_imageLayer atIndex:0]; &#x2F;&#x2F;ç¡®å®šé©¬èµ›å…‹åœ¨æœ€åº•éƒ¨&#x2F;&#x2F; [_drawingView.layer addSublayer:_imageLayer]; imageLayer.contents &#x3D; (id)_mohuImage.CGImage; CAShapeLayer *shapeLayer &#x3D; [CAShapeLayer layer]; shapeLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds; shapeLayer.lineCap &#x3D; kCALineCapRound; shapeLayer.lineJoin &#x3D; kCALineJoinRound; shapeLayer.lineWidth &#x3D; 15; shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor; shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å…… imageLayer.mask &#x3D; shapeLayer; _lastMosaicPage.shapeLayer &#x3D; shapeLayer; _lastMosaicPage.imageLayer &#x3D; imageLayer;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&#x2F;&#x2F;æ¸…é™¤é¡¶å±‚çš„ç”»ç¬”imageview-(void)clearTopDrawImageView&#123; [self.mosaicPages removeLastObject]; [((UIImageView *)self.drawImageViews.lastObject) removeFromSuperview]; [self.drawImageViews removeLastObject]; &#x2F;&#x2F;é‡ç½®å½“å‰çš„å±‚çº§page _lastMosaicPage &#x3D; self.mosaicPages.lastObject; _drawingView &#x3D; self.drawImageViews.lastObject;&#x2F;&#x2F; [self.editor.imageView bringSubviewToFront:_drawingView]; &#x2F;&#x2F;å°†ä¸‹ä¸€å±‚æ”¾åˆ°æœ€é¡¶å±‚, ç§»é™¤æ­¤å¥ã€‚ä¼šé®æŒ¡ç”»ç¬”å±‚ã€‚&#125;&#x2F;&#x2F;æ’¤å›ä¸Šä¸€æ­¥-(void)eraserButtonDidTap:(UIButton *)btn&#123; if (_lastMosaicPage.linePointArray &amp;&amp; _lastMosaicPage.linePointArray.count &gt;&#x3D; 1) &#123; [_lastMosaicPage.linePointArray removeLastObject]; [self drawAllPanLine:_drawingView byDrawPage:_lastMosaicPage]; &#x2F;&#x2F;å½“å‰ç”»ç¬”å±‚æ‰€æœ‰çº¿éƒ½ç§»é™¤äº†çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨ç§»é™¤å½“å‰ç”»ç¬”å±‚ if(_lastMosaicPage.linePointArray.count &#x3D;&#x3D; 0)&#123; &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚ if(self.drawImageViews.count &gt; 1)&#123; [self clearTopDrawImageView]; &#125; &#125; &#125;else&#123; &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚ if(self.mosaicPages.count &gt; 1)&#123; [self clearTopDrawImageView]; [self eraserButtonDidTap:nil]; &#x2F;&#x2F;é€’å½’ç§»é™¤ç©ºçš„drawImageView &#125; &#125; &#x2F;&#x2F;å•å±‚æ’¤é”€&#x2F;&#x2F; if (_lastDrawPage.linePointArray &amp;&amp; _lastDrawPage.linePointArray.count &gt;&#x3D; 1) &#123;&#x2F;&#x2F; [_lastDrawPage.linePointArray removeLastObject];&#x2F;&#x2F; [self drawAllPanLine];&#x2F;&#x2F; &#125;&#125;- (UIImage*)buildImage&#123; CGSize originalImageSize &#x3D; self.editor.imageView.image.size; UIGraphicsBeginImageContextWithOptions(originalImageSize, NO, self.editor.imageView.image.scale); [self.editor.imageView.image drawAtPoint:CGPointZero]; &#x2F;&#x2F;å¾ªç¯_drawingViewæ•°ç»„ã€‚ for(UIImageView *eachDrawImageView in self.drawImageViews)&#123; if(eachDrawImageView.image)&#123; [eachDrawImageView.image drawInRect:CGRectMake(0, 0, originalImageSize.width, originalImageSize.height)]; &#125; &#125; UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return tmp;&#125; æ–‡å­—å¸–å¯Œæ–‡æœ¬æ¡†doneAppendNewText ç‚¹å‡»å®Œæˆçš„æ—¶å€™ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ã€‚ [_CLTextView setActiveTextView:nil]; ä½¿å½“å‰label å¤±å»ç„¦ç‚¹ã€‚ é”®ç›˜æ˜¾ç¤ºæ—¶å€™ï¼Œè°ƒæ•´textviewçš„é«˜åº¦ã€‚12345678- (void)keyBoardWillShow:(NSNotification *)notificatioin&#123; NSDictionary * info &#x3D; [notificatioin userInfo]; CGSize kbSize &#x3D; [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size; [_textView mas_updateConstraints:^(MASConstraintMaker *make) &#123; make.bottom.mas_equalTo(-kbSize.height); &#125;];&#125; drawingViewDidPanäº‹ä»¶ç©¿é€12345678910111213141516- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender&#123; if([[self.editor currentEditTool] isKindOfClass:[CLMosaicTool class]])&#123; &#x2F;&#x2F;æ­¤ä»£ç ä¸ºå½“é¡¶å±‚ä¸ºæ–‡å­—å±‚æ—¶å€™ï¼Œ æ‰“å¼€é©¬èµ›å…‹ï¼Œpanæ‰‹åŠ¿çš„ä¼ é€’ã€‚ CLMosaicTool *mosaicTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;]; [mosaicTool drawingViewDidPan:sender]; return; &#125;else if([[self.editor currentEditTool] isKindOfClass:[CLDrawTool class]])&#123; &#x2F;&#x2F;æ­¤ä»£ç ä¸ºå½“é¡¶å±‚ä¸ºæ–‡å­—å±‚æ—¶å€™ï¼Œ æ‰“å¼€æ¶‚é¸¦ï¼Œpanæ‰‹åŠ¿çš„ä¼ é€’ã€‚ CLDrawTool *drawTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLDrawTool&quot;]; [drawTool drawingViewDidPan:sender]; return; &#125;&#125; Viewå®¹å™¨layeræ¸²æŸ“åˆ°ç”»å¸ƒ123456789101112131415161718192021222324252627-(UIImage *)mergeDrawImage:(UIImage *)mergeImage&#123; __block CALayer *layer &#x3D; nil; __block CGFloat scale &#x3D; 1; safe_dispatch_sync_main(^&#123; scale &#x3D; mergeImage.size.width &#x2F; self-&gt;_workingView.width; layer &#x3D; self-&gt;_workingView.layer; &#125;); UIGraphicsBeginImageContextWithOptions(mergeImage.size, NO, mergeImage.scale); [mergeImage drawAtPoint:CGPointZero]; CGContextRef context &#x3D; UIGraphicsGetCurrentContext(); CGContextSaveGState(context); CGContextScaleCTM(context, scale, scale); CGContextTranslateCTM(context, _workingView.center.x, _workingView.center.y); CGContextConcatCTM(context, _workingView.transform); CGContextTranslateCTM(context, -_workingView.bounds.size.width * [layer anchorPoint].x, -_workingView.bounds.size.height*[layer anchorPoint].y); [layer renderInContext:context]; CGContextRestoreGState(context); UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return tmp;&#125; æ—‹è½¬åœ¨CLClippingTool æ—‹è½¬å®Œæˆæ—¶å€™executeWithCompletionBlock:(void (^)(UIImage , NSError , NSDictionary *))completionBlock å¯¹æ–‡å­—å¸–è¿›è¡Œå¤„ç†,æ ¹æ®æ—‹è½¬è£å‰ªåå¾—åˆ°çš„å›¾ç‰‡å¤§å°å†³å®šworkingViewçš„å®¹å™¨frameå¤§å°ã€‚123456CLTextTool *_textTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLTextTool&quot;]; if(_textTool)&#123; &#x2F;&#x2F;å°†workingView è¿›è¡Œtransformæ—‹è½¬ CGAffineTransform transform &#x3D; CATransform3DGetAffineTransform([self rotateTransform:CATransform3DIdentity clockwise:NO]); [self.editor resetTextWorkingViewFrame:_textTool.workingView byResultImage:result transform:transform]; å¯¹workingView å®¹å™¨è¿›è¡Œæ—‹è½¬ï¼Œè®¾ç½®å…¶transform.1234567891011121314151617181920212223242526272829303132- (void)resetTextWorkingViewFrame:(UIView *)workingView byResultImage:(UIImage *)image transform:(CGAffineTransform )transform&#123; CGRect originFrame &#x3D; workingView.frame; CLTextTool *textTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLTextTool&quot;]; CGFloat offsetBottom &#x3D; textTool.workingViewBottomOffset; originFrame.size.height +&#x3D; offsetBottom; workingView.frame &#x3D; originFrame; &#x2F;&#x2F;åŠ ä¸Šåº•éƒ¨çš„èœå•åç¦»å·® _textToolNeedAddBottomFlag &#x3D; NO; if(offsetBottom &#x3D;&#x3D; 0)&#123; _textToolNeedAddBottomFlag &#x3D; YES; &#125; CGSize size &#x3D; image ? image.size : workingView.frame.size; CGAffineTransform resultTransform &#x3D; transform; if(!CGAffineTransformIsIdentity(workingView.transform))&#123; &#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦è¿›è¡Œæ—‹è½¬è¿‡,ç„¶åè¿›è¡Œå åŠ  resultTransform &#x3D; CGAffineTransformConcat(workingView.transform,transform); &#125; workingView.transform &#x3D; resultTransform; &#x2F;&#x2F;692, 409,æ—‹è½¬äº†ä¸¤æ¬¡ï¼Œè¿™ä¸ªä¸å¯¹ã€‚ CGRect workingViewWillFrame &#x3D; workingView.frame; &#x2F;&#x2F;409 , 692 if(size.width&gt;0 &amp;&amp; size.height&gt;0)&#123; CGFloat ratio &#x3D; MIN(_scrollView.frame.size.width &#x2F; size.width, _scrollView.frame.size.height &#x2F; size.height); CGFloat W &#x3D; ratio * size.width * _scrollView.zoomScale; CGFloat H &#x3D; ratio * size.height * _scrollView.zoomScale; CGFloat scaleX &#x3D; W&#x2F;workingViewWillFrame.size.width; CGFloat scaleY &#x3D; H&#x2F;(workingViewWillFrame.size.height); CGFloat willScale &#x3D; MIN(scaleX, scaleY); &#x2F;&#x2F;æ‹¿åˆ°æ—‹è½¬åçš„ç¼©æ”¾æ¯” workingView.transform &#x3D;CGAffineTransformIdentity; &#x2F;&#x2F;æ—‹è½¬ï¼ŒåŠ ç¼©æ”¾ç³»æ•°ã€‚ workingView.transform &#x3D; CGAffineTransformScale(resultTransform, willScale, willScale); &#125; è£å‰ªæ—‹è½¬æ—‹è½¬ç”¨æˆ·é€šè¿‡ç‚¹å‡»æ—‹è½¬æŒ‰é’®- (void)tappedRoteMenu:(UITapGestureRecognizer*)sender æ—‹è½¬é€šè¿‡_rotateImageView æ¥å±•ç¤ºæ—‹è½¬çš„åŠ¨ç”»å’Œå®æ—¶æ•ˆæœï¼Œ rotateStateDidChangeæ–¹æ³•å®ç°æ—‹è½¬åŠ¨ç”»1234- (void)rotateStateDidChange&#123; CATransform3D transform &#x3D; [self rotateTransform:CATransform3DIdentity clockwise:NO]; _rotateImageView.layer.transform è®¾ç½®ã€‚ æ—‹è½¬åŠ¨ç”»ç»“æŸåï¼šé‡æ–°è®¾ç½®ä¸€ä¸‹è£å‰ªæ ¼å­ã€‚123456 _rotateView.hidden &#x3D; YES; _gridView &#x3D; [[CLClippingPanel alloc] initWithSuperview:self.editor.imageView.superview frame:_rotateImageView.frame];_gridView.backgroundColor &#x3D; [UIColor clearColor];_gridView.bgColor &#x3D; [self.editor.view.backgroundColor colorWithAlphaComponent:0.8];_gridView.gridColor &#x3D; [[UIColor whiteColor] colorWithAlphaComponent:0.8];_gridView.clipsToBounds &#x3D; NO; å›¾ç‰‡æ—‹è½¬ï¼šå°†åŸå›¾çš„CIImageæ³¨å…¥åˆ°CIFilterä¸­ï¼Œè®¾ç½®CIFilterçš„æ—‹è½¬ç³»æ•°ï¼ŒCIFilterå¯¼å‡ºæ—‹è½¬åçš„CIImage, é€šè¿‡CIContext å°†å¯¼å‡ºçš„æ–°å›¾ç‰‡CIImageè½¬æ¢æˆCGImage,æœ€åæ‹¿åˆ°UIImageã€‚ å‚è€ƒä»¥ä¸‹ä»£ç ï¼š12345678910111213141516171819- (UIImage*)buildRoteImage:(UIImage*)image&#123; CIImage *ciImage &#x3D; [[CIImage alloc] initWithImage:image]; CIFilter *filter &#x3D; [CIFilter filterWithName:@&quot;CIAffineTransform&quot; keysAndValues:kCIInputImageKey, ciImage, nil]; [filter setDefaults]; CGAffineTransform transform &#x3D; CATransform3DGetAffineTransform([self rotateTransform:CATransform3DIdentity clockwise:YES]); [filter setValue:[NSValue valueWithBytes:&amp;transform objCType:@encode(CGAffineTransform)] forKey:@&quot;inputTransform&quot;]; CIContext *context &#x3D; [CIContext contextWithOptions:@&#123;kCIContextUseSoftwareRenderer : @(NO)&#125;]; CIImage *outputImage &#x3D; [filter outputImage]; CGImageRef cgImage &#x3D; [context createCGImage:outputImage fromRect:[outputImage extent]]; UIImage *result &#x3D; [UIImage imageWithCGImage:cgImage]; CGImageRelease(cgImage); return result;&#125; è£å‰ªè£å‰ªæ–¹æ³•crop:12345678910111213- (UIImage*)crop:(CGRect)rect&#123; CGPoint origin &#x3D; CGPointMake(-rect.origin.x, -rect.origin.y); UIImage *img &#x3D; nil; UIGraphicsBeginImageContextWithOptions(rect.size, NO, self.scale); [self drawAtPoint:origin]; img &#x3D; UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return img;&#125;è£å‰ªè§†å›¾: CLClippingPanelï¼š subLayer: CLGridLayar -&gt; drawInContextã€‚æ¨ªç«–å„ç”»å››æ¡çº¿ã€‚ CLClippingCircle-&gt;drawRect: å››ä¸ªè¾¹è§’æ¡†è§†å›¾è¿›è¡Œè¾¹è§’åˆ’çº¿æ“ä½œã€‚ å››ä¸ªè¾¹è§’è§†å›¾æ·»åŠ panCircleViewæ‰‹åŠ¿ï¼Œå®ç°clippingRectè£å‰ªåŒºåŸŸçš„å˜æ›´ã€‚ CLClippingPanl è‡ªèº«äº‹ä»¶panGridViewï¼Œæ‹–åŠ¨æ ¼å­è¿›è¡Œä¸Šä¸‹å·¦å³ç§»åŠ¨æ”¹å˜clippingRectåŒºåŸŸã€‚ åŸå›¾æ¢å¤resetOriginImage æ–¹æ³•ã€‚åŸå›¾æ¢å¤åªæ¢å¤åŸå›¾çš„frameï¼ŒåŸå›¾çš„æ–¹å‘ã€‚ å·²ç”»æ¶‚é¸¦å’Œé©¬èµ›å…‹æ“ä½œä¸è¿›è¡Œæ¢å¤ã€‚ å…ˆå°†_originalImage èµ‹å€¼ç»™_imageView,é‡æ–°è®¡ç®—æœ€æ–°originFrame. å¹¶ä¸”å°†é©¬èµ›å…‹å’Œæ¶‚é¸¦å·¥å…·å¯¹è±¡çš„[drawImageView]é›†åˆéå†æ¯ä¸€å±‚çš„drawImageViewè®¾ç½®ä¸º_imageViewæœ€æ–°frame,å¹¶å†æ¬¡æ¸²æŸ“æ¯å¼ å›¾çš„ä¸€æ¡çº¿çš„æ¶‚é¸¦å›¾ç‰‡èµ‹å€¼ç»™drawImageView,å¹¶æ›´æ”¹drawImageViewæœ€æ–°çš„frame. æœ€åèµ°ä¸€éé‡æ–°å…³å’Œå¼€ï¼Œå±•ç¤ºæ¢å¤åçš„è£å‰ªæ ¼å’Œå›¾ç‰‡ã€‚è¿™æ ·å°±å®Œæˆäº†åŸå›¾æ¢å¤è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ã€‚ 1234567891011121314151617181920212223242526272829303132- (void)resetOriginImage&#123; _imageView.image &#x3D; _originalImage; &#x2F;&#x2F;è®¾ç½®å½“å‰imageviewæœ€æ–°frame [self resetImageViewFrame]; &#x2F;&#x2F;å¯¹é©¬èµ›å…‹å±‚è¿›è¡Œframeé‡æ–°è®¾ç½®ã€‚ CLMosaicTool *_mosaicTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;]; if(_mosaicTool)&#123; for(NSInteger i&#x3D;0; i &lt; _mosaicTool.drawImageViews.count; i++)&#123; UIImageView *drawingView &#x3D; _mosaicTool.drawImageViews[i]; drawingView.frame &#x3D; self.imageView.bounds; [_mosaicTool drawAllPanLine:drawingView byDrawPage:_mosaicTool.mosaicPages[i]]; [self resetDrawImageViewFrame:drawingView.image withDrawImageView:drawingView]; &#125; &#125; &#x2F;&#x2F;å¯¹ç”»ç¬”å±‚è¿›è¡Œframeé‡æ–°è®¾ç½®ã€‚ CLDrawTool *_drawTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLDrawTool&quot;]; if(_drawTool)&#123; for(NSInteger i&#x3D;0; i &lt; _drawTool.drawImageViews.count; i++)&#123; UIImageView *drawingView &#x3D; _drawTool.drawImageViews[i]; drawingView.frame &#x3D; self.imageView.bounds; [_drawTool drawAllPanLine:drawingView byDrawPage:_drawTool.drawPages[i]]; [self resetDrawImageViewFrame:drawingView.image withDrawImageView:drawingView]; &#125; &#125; &#x2F;&#x2F;é‡æ–°å¼€å¯è£å‰ªé¡µé¢åŠŸèƒ½ [_currentTool cleanup]; [_currentTool setup];&#125; ç¡®å®šèµ°pushDoneæ–¹æ³•ï¼Œè°ƒç”¨è‡ªèº«çš„executeWithCompletionBlockæ–¹æ³•ï¼Œæ£€æŸ¥UseToolDicæ˜¯å¦å«æœ‰æ¶‚é¸¦ï¼Œé©¬èµ›å…‹ã€æ–‡å­—å¸–ç­‰ï¼Œè¿›è¡Œç›¸å…³è§†å›¾çš„æ—‹è½¬è£å‰ªè®¾ç½®frameç­‰æ“ä½œã€‚ [self.currentTool executeWithCompletionBlock: å–æ¶ˆé‡ç½®currentTool ä¸ºnil , èµ°cleanUpæ–¹æ³•ï¼Œç§»é™¤ç›¸å…³è§†å›¾ã€‚æ­¤ç¯‡æ–‡ç« ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œä»…ä¸ºå›¾ç‰‡ç¼–è¾‘ä¸­æ‰€é‡éš¾ç‚¹æä¾›å‡ ç‚¹æ€è·¯ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ç¾¤é€šçŸ¥é‡Œçš„äººå‘˜åå­—ç‚¹å‡»å‰–æ","slug":"nameClick","date":"2021-07-02T09:01:10.000Z","updated":"2021-07-02T09:05:59.601Z","comments":true,"path":"2021/07/02/nameClick/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/02/nameClick/","excerpt":"æˆ‘ä»¬æ¯ä¸ªäººçš„æ‰‹æœºéƒ½å®‰è£…æœ‰å¾®ä¿¡App,è‚¯å®šå¤§å®¶éƒ½ä½¿ç”¨è¿‡ä»¥ä¸‹åœºæ™¯åœ¨èŠå¤©ç¾¤ä¸­ï¼Œå½“æœ‰æ–°çš„æˆå‘˜è¿›å…¥çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ° æŸæŸé‚€è¯·äº†æŸæŸ1è¿›å…¥ç¾¤èŠï¼Œæˆ–è€…å½“ä½ æ˜¯ç¾¤ä¸»çš„æ—¶å€™ï¼ŒæŸç®¡ç†äººå‘˜é‚€è¯·äº†å‡ ä¸ªäººè¿›å…¥æ—¶å€™çœ‹åˆ° æŸæŸç®¡ç†å‘˜é‚€è¯·äº†å¼ ä¸‰ã€æå››ï¼Œç‹äº”ï¼Œå¼ ä¸‰ï¼ˆåŒåï¼‰è¿›å…¥äº†ç¾¤èŠã€‚å¯¹äºé‚€è¯·äººå‘˜æˆ–è€…è¢«é‚€è¯·äººå‘˜ï¼Œæˆ‘ä»¬å‘ç°äººå‘˜çš„åç§°æ˜¯å¯ä»¥ç‚¹å‡»çš„ï¼Œå³ä½¿åŒåçš„äººï¼Œç‚¹å‡»å…¶åå­—ä¹Ÿå¯ä»¥è·³è½¬åˆ°å„è‡ªçš„ä¸»é¡µè¯¦æƒ…ä¸­ã€‚ å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿä¸€æ¡ç¾¤æˆå‘˜å˜æ›´é€šçŸ¥å°±æ˜¯ä¸€ä¸²æ–‡æœ¬ï¼Œæˆ‘ä»¬ç‚¹å‡»çš„æ—¶å€™è‚¯å®šè¦å­˜å‚¨å¥½ä»–çš„äººå‘˜id,ç„¶åç‚¹å‡»çš„æ—¶å€™å°±èƒ½æ‹¿åˆ°å¯¹åº”äººå‘˜çš„idã€‚ä»æœ€ç®€å•çš„å­˜å‚¨æ–¹æ¡ˆæ¥çœ‹ï¼Œè¿™æ¡å†…å®¹å¯ä»¥å†™æˆä»¥ä¸‹æ ¼å¼ï¼š ç®¡ç†å‘˜åˆ˜æŸæŸé‚€è¯·äº†å¼ ä¸‰ã€æå››ã€ç‹äº”ã€å¼ ä¸‰è¿›å…¥äº†ç¾¤èŠã€‚æ¢æˆä»£ç çš„æ ¼å¼å³ä¸ºï¼šâ€œç®¡ç†å‘˜\\â€åˆ˜æŸæŸ::1000\\â€é‚€è¯·äº†\\â€å¼ ä¸‰::1001ã€æå››::1002ã€ç‹äº”::1003ã€å¼ ä¸‰::1004\\â€è¿›å…¥äº†ç¾¤èŠâ€ã€‚å…¶ä¸­çš„ä»£ç æ ¼å¼ä¸ºuserName::userIdè¿™æ ·ä¸€ç§å½¢å¼è¿›è¡Œæ‹¼æ¥ï¼Œä¸­é—´çš„ç¬¦å·å¯ä»¥é‡‡ç”¨å…¶ä»–ç‰¹æ®Šç¬¦å·ä»£æ›¿ã€‚è¿™é‡Œä¸ºäº†åŒºåˆ«ç”¨æˆ·ç‰¹æ®Šæ€§è¾“å…¥ç”¨äº†åŒå†’å·ã€‚å¤šä¸ªæˆå‘˜ä¹‹é—´ç”¨é¡¿å·éš”å¼€ï¼Œäººå‘˜ä¸æ™®é€šå†…å®¹ä¹‹é—´ç”¨ç¬¦å·åŒå¼•å·\\â€è¿›è¡Œåˆ†å‰²ï¼ˆæ–œæ†ä¸ºè½¬ä¹‰ç¬¦ï¼‰ã€‚ æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸€ä¸²æ–‡å­—è¡¨è¾¾å¼è¿›è¡Œè§£æè¿›è¡ŒUIæ˜¾ç¤ºï¼ŒæŠŠäººå‘˜åå­—åçš„æ‹¼æ¥ç¬¦å·ç”¨æˆ·idè¿›è¡Œè¿‡æ»¤æ‰,ç»„åˆæˆä¸å¸¦ç”¨æˆ·idçš„æ˜“æ‡‚æ–‡å­—å†…å®¹ç»™åˆ°ç”¨æˆ·ã€‚","text":"æˆ‘ä»¬æ¯ä¸ªäººçš„æ‰‹æœºéƒ½å®‰è£…æœ‰å¾®ä¿¡App,è‚¯å®šå¤§å®¶éƒ½ä½¿ç”¨è¿‡ä»¥ä¸‹åœºæ™¯åœ¨èŠå¤©ç¾¤ä¸­ï¼Œå½“æœ‰æ–°çš„æˆå‘˜è¿›å…¥çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ° æŸæŸé‚€è¯·äº†æŸæŸ1è¿›å…¥ç¾¤èŠï¼Œæˆ–è€…å½“ä½ æ˜¯ç¾¤ä¸»çš„æ—¶å€™ï¼ŒæŸç®¡ç†äººå‘˜é‚€è¯·äº†å‡ ä¸ªäººè¿›å…¥æ—¶å€™çœ‹åˆ° æŸæŸç®¡ç†å‘˜é‚€è¯·äº†å¼ ä¸‰ã€æå››ï¼Œç‹äº”ï¼Œå¼ ä¸‰ï¼ˆåŒåï¼‰è¿›å…¥äº†ç¾¤èŠã€‚å¯¹äºé‚€è¯·äººå‘˜æˆ–è€…è¢«é‚€è¯·äººå‘˜ï¼Œæˆ‘ä»¬å‘ç°äººå‘˜çš„åç§°æ˜¯å¯ä»¥ç‚¹å‡»çš„ï¼Œå³ä½¿åŒåçš„äººï¼Œç‚¹å‡»å…¶åå­—ä¹Ÿå¯ä»¥è·³è½¬åˆ°å„è‡ªçš„ä¸»é¡µè¯¦æƒ…ä¸­ã€‚ å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿä¸€æ¡ç¾¤æˆå‘˜å˜æ›´é€šçŸ¥å°±æ˜¯ä¸€ä¸²æ–‡æœ¬ï¼Œæˆ‘ä»¬ç‚¹å‡»çš„æ—¶å€™è‚¯å®šè¦å­˜å‚¨å¥½ä»–çš„äººå‘˜id,ç„¶åç‚¹å‡»çš„æ—¶å€™å°±èƒ½æ‹¿åˆ°å¯¹åº”äººå‘˜çš„idã€‚ä»æœ€ç®€å•çš„å­˜å‚¨æ–¹æ¡ˆæ¥çœ‹ï¼Œè¿™æ¡å†…å®¹å¯ä»¥å†™æˆä»¥ä¸‹æ ¼å¼ï¼š ç®¡ç†å‘˜åˆ˜æŸæŸé‚€è¯·äº†å¼ ä¸‰ã€æå››ã€ç‹äº”ã€å¼ ä¸‰è¿›å…¥äº†ç¾¤èŠã€‚æ¢æˆä»£ç çš„æ ¼å¼å³ä¸ºï¼šâ€œç®¡ç†å‘˜\\â€åˆ˜æŸæŸ::1000\\â€é‚€è¯·äº†\\â€å¼ ä¸‰::1001ã€æå››::1002ã€ç‹äº”::1003ã€å¼ ä¸‰::1004\\â€è¿›å…¥äº†ç¾¤èŠâ€ã€‚å…¶ä¸­çš„ä»£ç æ ¼å¼ä¸ºuserName::userIdè¿™æ ·ä¸€ç§å½¢å¼è¿›è¡Œæ‹¼æ¥ï¼Œä¸­é—´çš„ç¬¦å·å¯ä»¥é‡‡ç”¨å…¶ä»–ç‰¹æ®Šç¬¦å·ä»£æ›¿ã€‚è¿™é‡Œä¸ºäº†åŒºåˆ«ç”¨æˆ·ç‰¹æ®Šæ€§è¾“å…¥ç”¨äº†åŒå†’å·ã€‚å¤šä¸ªæˆå‘˜ä¹‹é—´ç”¨é¡¿å·éš”å¼€ï¼Œäººå‘˜ä¸æ™®é€šå†…å®¹ä¹‹é—´ç”¨ç¬¦å·åŒå¼•å·\\â€è¿›è¡Œåˆ†å‰²ï¼ˆæ–œæ†ä¸ºè½¬ä¹‰ç¬¦ï¼‰ã€‚ æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸€ä¸²æ–‡å­—è¡¨è¾¾å¼è¿›è¡Œè§£æè¿›è¡ŒUIæ˜¾ç¤ºï¼ŒæŠŠäººå‘˜åå­—åçš„æ‹¼æ¥ç¬¦å·ç”¨æˆ·idè¿›è¡Œè¿‡æ»¤æ‰,ç»„åˆæˆä¸å¸¦ç”¨æˆ·idçš„æ˜“æ‡‚æ–‡å­—å†…å®¹ç»™åˆ°ç”¨æˆ·ã€‚ è§£æå¸¦ç”¨æˆ·idçš„å­—ç¬¦ä¸²è§„åˆ™ï¼Œæ‹¼è£…æˆæ­£å¸¸æ–‡æœ¬åˆ¤æ–­å¾…è§£æçš„ç›®æ ‡å†…å®¹æ˜¯å¦åŒ…å«æˆ‘ä»¬å®šä¹‰çš„ç‰¹æ®Šè¿æ¥ç¬¦å·ä¸åŒå¼•å·ï¼Œç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ç¬¬ä¸€æ­¥ä»¥åŒå¼•å·å°†æ–‡æœ¬è¿›è¡Œåˆ†å‰²ã€‚åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ã€‚ åŒå¼•å·å°†æ–‡æœ¬è¿›è¡Œåˆ†å‰²æˆä¸åŒæ®µçš„æ•°ç»„ã€‚ éå†æ•°ç»„ï¼Œåˆ¤æ–­ä¸åŒæ®µä¸­æ˜¯å¦è¿˜æœ‰é¡¿å·ï¼Œå¦‚æœæœ‰åˆ™éœ€è¦å†æ ¹æ®é¡¿å·è¿›è¡Œåˆ†å‰²æˆæœ€å°ç²’åŒ–æ®µï¼ˆuserName::userIdï¼‰ï¼Œå¦åˆ™ç›´æ¥åˆ¤æ–­æ˜¯å¦æœ€å°ç²’åŒ–æ®µï¼ˆåˆ¤æ–­æ˜¯å¦åŒ…å«ç‰¹æ®Šç¬¦::ï¼‰,å¦‚æœåŒ…å«ï¼Œåˆ™ä»¥ç‰¹èˆ’ç¬¦å†å°†æ–‡æœ¬åˆ†å‰²ã€å¦åˆ™ç›´æ¥æ·»åŠ åˆ°å¯å˜å­—ç¬¦ä¸²ä¸­è¿›è¡Œæ‹¼æ¥ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿæ‹¿åˆ°userName ä»¥åŠ userId. å¦å¤–å‡†å¤‡ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨æ¯ä¸€ä¸ªè¢«åˆ†å‰²çš„æœ€å°ç²’åŒ–æ®µ {userName::userId}ã€‚ è®°å¾—æŠŠäººå‘˜ä¹‹é—´çš„é¡¿å·ï¼Œä»¥åŠæ™®é€šæ–‡æœ¬ä¸äººå‘˜ä¹‹é—´çš„åŒå¼•å·åŠ å›å»ã€‚æœ€ç»ˆçš„åˆ°äº†æ­£å¸¸æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960if([msgBody containsString:@&quot;\\&quot;&quot;] &amp;&amp; [msgBody containsString:@&quot;::&quot;])&#123; NSArray *descArr &#x3D; [msgBody componentsSeparatedByString:@&quot;\\&quot;&quot;]; NSMutableString *afterFilterIdStr &#x3D; [[NSMutableString alloc] init]; &#x2F;&#x2F;è¿‡æ»¤å‡ºIdåè¦æ˜¾ç¤ºåœ¨ç•Œé¢çš„str NSMutableArray *filterEmpDicArr &#x3D; [[NSMutableArray alloc] init]; &#x2F;&#x2F;è¿‡æ»¤å‡ºæˆå‘˜ NSInteger findIndex &#x3D; 0; for (NSString *eachStr in descArr) &#123; findIndex ++; &#x2F;&#x2F;åŠ å…¥åŒå¼•å· if(eachStr.length &gt; 0)&#123; if([eachStr containsString:@&quot;ã€&quot;])&#123; NSArray *namesArr &#x3D; [eachStr componentsSeparatedByString:@&quot;ã€&quot;]; NSInteger otherFindIndex &#x3D; 0; for(NSString *otherName in namesArr)&#123; otherFindIndex ++; if([otherName containsString:@&quot;::&quot;])&#123; &#x2F;&#x2F;éœ€åˆ†å‰²å–å¾—åå­— NSArray *itemStrArr &#x3D; [otherName componentsSeparatedByString:@&quot;::&quot;]; if(itemStrArr.count)&#123; NSString *empName &#x3D; itemStrArr.firstObject; NSString *empId &#x3D; itemStrArr.lastObject; [afterFilterIdStr appendString:empName]; [filterEmpDicArr addObject:@&#123;@&quot;name&quot;:empName,@&quot;id&quot;:empId&#125;]; &#125; &#125; if(otherFindIndex &lt; namesArr.count)&#123; [afterFilterIdStr appendString:@&quot;ã€&quot;]; &#125; &#125; &#125;else&#123; if([eachStr containsString:@&quot;::&quot;])&#123; &#x2F;&#x2F;éœ€åˆ†å‰²å–å¾—åå­— NSArray *itemStrArr &#x3D; [eachStr componentsSeparatedByString:@&quot;::&quot;]; if(itemStrArr.count)&#123; NSString *empName &#x3D; itemStrArr.firstObject; NSString *empId &#x3D; itemStrArr.lastObject; [afterFilterIdStr appendString:empName]; NSString * oldContainsStr &#x3D; @&quot;å°†&quot;; &#x2F;&#x2F;å…¼å®¹ç§»é™¤ç¾¤èŠçš„æ˜¾ç¤ºç»“æœ if([empId containsString:oldContainsStr])&#123; [afterFilterIdStr appendString:oldContainsStr]; NSArray *oldArr &#x3D; [empId componentsSeparatedByString:oldContainsStr]; empId &#x3D; oldArr.firstObject; &#125; [filterEmpDicArr addObject:@&#123;@&quot;name&quot;:empName,@&quot;id&quot;:empId&#125;]; &#125; &#125;else&#123; &#x2F;&#x2F;æ™®é€šå­—ç¬¦ä¸² [afterFilterIdStr appendString:eachStr]; &#125; &#125; &#125; if(findIndex &lt; descArr.count)&#123; [afterFilterIdStr appendString:@&quot;\\&quot;&quot;]; &#125; &#125; NSString *realMsgBody &#x3D; [afterFilterIdStr copy];&#125; é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°realMsgBodyå°±æ˜¯éœ€è¦åœ¨æ–‡æœ¬ä¸Šç›´æ¥æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦å¤–æˆ‘ä»¬è¿˜å¾—åˆ°äº†filterEmpDicArråŒ…å«äº†æˆå‘˜idçš„ä¸€ä¸ªmapã€‚ æ¸²æŸ“äººå‘˜åå­—ã€å¢åŠ æ ·å¼è“è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ç‚¹å‡»ç”±ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å¾—åˆ°å¯æ­£å¸¸æ˜¾ç¤ºåœ¨UIä¸Šçš„æ–‡å­—ï¼Œå¦å¤–è¿˜å¾—åˆ°ä¸€ä¸ªäººåidçš„å­—å…¸æ•°ç»„ã€‚æ¸²æŸ“æ˜¾ç¤ºæˆ‘ä»¬é‡‡ç”¨YYLabelè®¾ç½®Attributeçš„æ–¹å¼ã€‚å…ˆè®¾ç½®å…¨å†…å®¹å±æ€§mAttributedStringã€‚ç„¶åå¾ªç¯éå†filterEmpDicArr,æ ¹æ®äººååˆ›å»ºåå­—é«˜äº®çš„lightAttributeã€‚æ ¹æ®äººåå¾—åˆ°nameRange, æœ€åå†é‡‡ç”¨æ›¿æ¢æ–¹å¼å°†å¯¹åº”rangeè¿›è¡Œæ›¿æ¢æ‰å±æ€§ã€‚ä»£ç ï¼š1[mAttributedString replaceCharactersInRange:nameRange withAttributedString:lightNameAttributeStr];è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“åŒ¹é…åˆ°ç¬¬å››ä¸ªäººæ—¶å€™ï¼Œå–åˆ°çš„nameRangeæ˜¯ç¬¬ä¸€ä¸ªäººå¼ ä¸‰ï¼Œç»“æœå¹¶ä¸å¯¹ã€‚æ¥çœ‹çœ‹æˆ‘ä»¬å–nameRangeçš„æ–¹å¼ï¼š1NSRange range &#x3D; [realMsgBody rangeOfString:empName]; &#x2F;&#x2F;å¯èƒ½å­˜åœ¨å¤šä¸ª è¿™ä¸ªæ—¶å€™å°±éœ€è¦åˆ¤æ–­åå­—æ˜¯å¦åœ¨æ–‡æœ¬ä¸­å¤šæ¬¡å‡ºç°ã€‚å½“åŒåæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåŒ¹é…åˆ°è¯¥äººåçš„rangeå…¨éƒ¨æ‰¾å‡ºæ¥ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªrangeã€‚ å½“éå†å½“å‰çš„nameæ—¶å€™ï¼Œæ£€æŸ¥è¯¥äººåå‡ºç°çš„æ¬¡æ•°ï¼Œå‡ºç°ç¬¬å‡ æ¬¡åˆ™è¿™ä¸ªå½“å‰éå†çš„äººåçš„rangeåˆ™æ˜¯å¯¹åº”ç¬¬å‡ ä¸ªrange. è¿™ä¸ªé€»è¾‘æ‰æ˜¯æ­£ç¡®çš„ï¼è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå½“å‰éå†çš„userIdå¯¹åº”çš„æ­£ç¡®çš„rangeè®°å½•ä¸‹æ¥å­˜åˆ°ä¸€ä¸ªmapä¸­ã€‚æœ€åå½“ç”¨æˆ·ç‚¹å‡»è“è‰²æŸåå­—æ—¶å€™labelç‚¹å‡»å¤„æ‰€å¯¹åº”çš„rangeä¼šè¿”å›ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®rangeæ¥å‘½ä¸­userIdäº†ã€‚å½“ç‚¹å‡»åŒåçš„æ—¶å€™ä¸çŸ¥é“ç‚¹å‡»çš„æ˜¯è°çš„é—®é¢˜å°±å¯ä»¥è¿åˆƒè€Œè§£ï¼æ­¤å¤„åº”è¯¥æœ‰ç‚¹èµï¼Œå“ˆã€‚è¿‡å¥–äº†ï¼Œåªæ˜¯ä¸€ä¸ªæŠ€å·§ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657NSString *realMsgBody &#x3D; [afterFilterIdStr copy];NSMutableAttributedString *mAttributedString &#x3D; [[NSMutableAttributedString alloc] initWithString:realMsgBody];mAttributedString.yy_font &#x3D; labelFont;mAttributedString.yy_color &#x3D; message_centerTextColor;mAttributedString.yy_alignment &#x3D; NSTextAlignmentCenter;NSMutableDictionary *recordNameCountDic &#x3D; [[NSMutableDictionary alloc] init]; &#x2F;&#x2F;ç¼“å­˜æ¯ä¸ªåå­—è®°å½•çš„æ¬¡æ•°NSMutableDictionary *recordRangeEmpIdDic &#x3D; [[NSMutableDictionary alloc] init]; &#x2F;&#x2F;è®°å½•æ¯ä¸ªåå­—çš„rangeå¯¹åº”çš„id&#x2F;&#x2F;å¾ªç¯æ‰¾å‡ºåå­—ï¼Œå¹¶ä¸”æ›¿æ¢attribute;for (NSDictionary *empDic in filterEmpDicArr) &#123; NSString *empName &#x3D; empDic[@&quot;name&quot;]; NSString *empId &#x3D; empDic[@&quot;id&quot;]; NSMutableAttributedString *lightNameAttributeStr &#x3D; [[NSMutableAttributedString alloc] initWithString:empName]; lightNameAttributeStr.yy_font &#x3D; labelFont; lightNameAttributeStr.yy_underlineStyle &#x3D; NSUnderlineStyleNone; &#x2F;&#x2F;NSUnderlineStyleSingle; lightNameAttributeStr.yy_color &#x3D; message_centerTextColor; lightNameAttributeStr.yy_lineSpacing &#x3D; 2; __weak typeof(self) weakSelf &#x3D; self; [lightNameAttributeStr yy_setTextHighlightRange:lightNameAttributeStr.yy_rangeOfAll color:[UIColor colorWithRed:110&#x2F;255.0f green:121&#x2F;255.0f blue:151&#x2F;255.0f alpha:1] backgroundColor:[UIColor colorWithWhite:0.000 alpha:0.0] tapAction:^(UIView *containerView, NSAttributedString *text, NSRange range, CGRect rect)&#123; &#x2F;&#x2F;ç‚¹å‡»åå­—è·³è½¬ &#x2F;&#x2F; NSString *empName &#x3D; [text.string substringWithRange:range]; NSString *empId &#x3D; [recordRangeEmpIdDic objectForKey:[NSValue valueWithRange:range]]; if(empId &amp;&amp; weakSelf.tappedNameBlock)&#123; weakSelf.tappedNameBlock(empId); &#125; &#125;]; NSRange range &#x3D; [realMsgBody rangeOfString:empName]; &#x2F;&#x2F;å¯èƒ½å­˜åœ¨å¤šä¸ª &#x2F;&#x2F;åŒåå¯åŒ¹é…å‡ºå¤šä¸ªrange NSArray *rangeArr &#x3D; [self rangeOfSubString:empName inString:realMsgBody]; if(rangeArr.count &amp;&amp; rangeArr.count &gt; 1)&#123; &#x2F;&#x2F;æœ‰å¤šä¸ªé‡åï¼Œæ‹¿å­—å…¸è®°å½•çš„å€¼&#123;name:count&#125; åå­—æ¬¡æ•°. countæœ‰å­˜åˆ‡å¤§äº1æ—¶ï¼Œæœ¬æ¬¡çš„rangeä¸º rangeArrã€countã€‘ if([recordNameCountDic objectForKey:empName])&#123; NSInteger nameCount &#x3D; [[recordNameCountDic objectForKey:empName] integerValue]; nameCount++; &#x2F;&#x2F;rangeArr[name]è®°å½•çš„countç´¯åŠ  [recordNameCountDic setObject:@(nameCount) forKey:empName]; NSValue * value &#x3D; rangeArr[nameCount-1]; range &#x3D; [value rangeValue]; &#125;else&#123; [recordNameCountDic setObject:@1 forKey:empName]; NSValue * value &#x3D; rangeArr.firstObject; range &#x3D; [value rangeValue]; &#125; &#125; &#x2F;&#x2F;æ ¹æ®rangeæ¥è®°å½•id NSValue *rangeKey &#x3D; [NSValue valueWithRange:range]; [recordRangeEmpIdDic setObject:empId forKey:rangeKey]; [mAttributedString replaceCharactersInRange:range withAttributedString:lightNameAttributeStr];&#125;mAttributedString.yy_lineSpacing &#x3D; 2;self.groupInfolabel.attributedText &#x3D; mAttributedString; ä»¥ä¸‹æ˜¯åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²é‡ŒåŒ…å«å­—æ®µæŸå­—ç¬¦ä¸²çš„æ‰€æœ‰range12345678910111213- (NSArray*)rangeOfSubString:(NSString*)subStr inString:(NSString*)string &#123; NSMutableArray *rangeArray &#x3D; [NSMutableArray array]; NSString*string1 &#x3D; [string stringByAppendingString:subStr]; NSString *temp; for(int i &#x3D;0; i &lt; string.length; i ++) &#123; temp &#x3D; [string1 substringWithRange:NSMakeRange(i, subStr.length)]; if ([temp isEqualToString:subStr]) &#123; NSRange range &#x3D; &#123;i,subStr.length&#125;; [rangeArray addObject: [NSValue valueWithRange:range]]; &#125; &#125; return rangeArray;&#125; æ­£åˆ™è¿‡æ»¤å¤„ç†å°†ç¬¦åˆæ”¹æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æ‰¾å‡ºæ¥ï¼ŒNSRegularExpressionå¯ä»¥æ‹¿åˆ°NSTextCheckingResult,ç„¶åresultå¯ä»¥æ‹¿åˆ°range.æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²æˆªå–å‡ºæ¥ã€‚æœ€åå†å¾ªç¯éæ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ã€‚1234567891011121314151617181920 if([msgBody containsString:@&quot;::&quot;])&#123; &#x2F;&#x2F;åŒ¹é…æ›¿æ¢æ‰::å·¥å·æ˜¾ç¤ºã€‚ NSMutableArray *replaceFormatStrArr &#x3D; [[NSMutableArray alloc] init]; NSError *error &#x3D; nil; NSRegularExpression *regexp &#x3D; [NSRegularExpression regularExpressionWithPattern:@&quot;::\\\\d&#123;1,&#125;&quot; options:NSRegularExpressionCaseInsensitive error:&amp;error]; [regexp enumerateMatchesInString:msgBody options:0 range:NSMakeRange(0, msgBody.length) usingBlock:^(NSTextCheckingResult *result, __unused NSMatchingFlags flags, __unused BOOL *stop) &#123; if (flags !&#x3D; NSMatchingInternalError) &#123; NSRange firstHalfRange &#x3D; [result rangeAtIndex:0]; if (firstHalfRange.length &gt; 0) &#123; NSString *resultString1 &#x3D; [msgBody substringWithRange:result.range]; [replaceFormatStrArr addObject:resultString1]; NSLog(@&quot;result1 &#x3D; %@&quot;,resultString1); &#125; &#125; &#125;]; for(NSString *formatStr in replaceFormatStrArr)&#123; msgBody &#x3D; [msgBody stringByReplacingOccurrencesOfString:formatStr withString:@&quot;&quot;]; &#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ç¾¤æ’ä»¶å¦‚ä½•å¼€å‘ï¼Ÿ","slug":"groupPlugin","date":"2021-07-01T09:52:11.000Z","updated":"2021-07-01T10:02:44.468Z","comments":true,"path":"2021/07/01/groupPlugin/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/01/groupPlugin/","excerpt":"ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§ç¾¤æ’ä»¶ä¸€èˆ¬æ˜¯ç”¨H5é…ç½®çš„ç½‘é¡µå°æ’ä»¶ï¼Œç„¶åå’Œç¾¤æ„é€ ä¸€ä¸ªå…¥å£ã€‚æœ¬åœ°é€šè¿‡sqliteç»´æŠ¤ä¸€ä¸ªæ’ä»¶è¡¨ï¼Œä»¥åŠç¾¤æ’ä»¶å…³ç³»è¡¨ã€‚æ’ä»¶ä¿¡æ¯å‡çº§ä¸€ä¸‹å¯åˆ†ä¸ºå¹³å°ç³»ç»Ÿå¿…é¡»æ’ä»¶ä»¥åŠä¸šåŠ¡è‡ªå®šä¹‰æ’ä»¶ã€‚å…·ä½“å¯ç”±ä¸šåŠ¡å†³å®šã€‚æ’ä»¶æœ‰å…¶åŸºæœ¬å±æ€§ï¼šåç§°ï¼Œæ’ä»¶idï¼Œç±»å‹ï¼Œé»˜è®¤æ’åºå€¼ï¼Œè·³è½¬å†…å®¹(æœ¬åœ°æ¨¡å—å/h5é“¾æ¥åœ°å€)ï¼Œè·³è½¬ç±»å‹ï¼šh5/æœ¬åœ°æ¨¡å— ç­‰ç­‰ã€‚æ’ä»¶å…³ç³»è¡¨ï¼š ç¾¤idï¼Œæ’ä»¶idï¼Œè§’æ ‡æ•°é‡ï¼Œæ’åºå€¼ï¼Œæ˜¯å¦æ˜¾ç¤ºï¼Œç­‰ç­‰ã€‚","text":"ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§ç¾¤æ’ä»¶ä¸€èˆ¬æ˜¯ç”¨H5é…ç½®çš„ç½‘é¡µå°æ’ä»¶ï¼Œç„¶åå’Œç¾¤æ„é€ ä¸€ä¸ªå…¥å£ã€‚æœ¬åœ°é€šè¿‡sqliteç»´æŠ¤ä¸€ä¸ªæ’ä»¶è¡¨ï¼Œä»¥åŠç¾¤æ’ä»¶å…³ç³»è¡¨ã€‚æ’ä»¶ä¿¡æ¯å‡çº§ä¸€ä¸‹å¯åˆ†ä¸ºå¹³å°ç³»ç»Ÿå¿…é¡»æ’ä»¶ä»¥åŠä¸šåŠ¡è‡ªå®šä¹‰æ’ä»¶ã€‚å…·ä½“å¯ç”±ä¸šåŠ¡å†³å®šã€‚æ’ä»¶æœ‰å…¶åŸºæœ¬å±æ€§ï¼šåç§°ï¼Œæ’ä»¶idï¼Œç±»å‹ï¼Œé»˜è®¤æ’åºå€¼ï¼Œè·³è½¬å†…å®¹(æœ¬åœ°æ¨¡å—å/h5é“¾æ¥åœ°å€)ï¼Œè·³è½¬ç±»å‹ï¼šh5/æœ¬åœ°æ¨¡å— ç­‰ç­‰ã€‚æ’ä»¶å…³ç³»è¡¨ï¼š ç¾¤idï¼Œæ’ä»¶idï¼Œè§’æ ‡æ•°é‡ï¼Œæ’åºå€¼ï¼Œæ˜¯å¦æ˜¾ç¤ºï¼Œç­‰ç­‰ã€‚ ç¾¤æ’ä»¶çš„æœ¬åœ°å­˜å‚¨ä»¥åŠä¸šåŠ¡é€»è¾‘ç”±äºæ¯ä¸ªIMç”¨æˆ·æœ¬åœ°éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„userIdå”¯ä¸€æ•°æ®åº“ï¼Œæ’ä»¶åŸºç¡€ä¿¡æ¯å­˜å‚¨åœ¨ä¸€å¼ è¡¨ï¼Œä¿¡æ¯æ›´æ–°é¢‘ç‡è¾ƒä½ã€‚æ’ä»¶å…³ç³»ä¸€å¼ è¡¨ï¼Œå’Œç¾¤idå…³è”æ€§è¾ƒé«˜ï¼Œå³ä¸€ä¸ªç¾¤å¯ä»¥æœ‰å¤šä¸ªæ’ä»¶ã€‚å½“ç”¨æˆ·ç™»å½•åï¼Œåœ¨é€‚å½“çš„æ—¶æœºè¯·æ±‚Javaæ¥å£è¿›è¡ŒåŒæ­¥æ’ä»¶ä¿¡æ¯ã€‚ï¼ˆå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ—¶é—´æˆ³å®šä¹‰ä¸€ä¸ªæ—¶é—´æ®µï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡ç™»å½•åŒæ­¥æ’ä»¶ä¿¡æ¯äº†ï¼‰ç”±ä¸šåŠ¡å†³å®šå¤šä¹…æ—¶é—´æ®µåŒæ­¥æœ€æ–°çš„æ’ä»¶ä¿¡æ¯åˆ°æœ¬åœ°ã€‚å¦‚æœåç«¯åå°é…ç½®äº†æœ€æ–°æ’ä»¶ï¼Œå®¢æˆ·å•éœ€è¦åŠæ—¶æ˜¾ç¤ºçš„è¯å°±éœ€è¦æœåŠ¡ç«¯è¿›è¡Œå®æ—¶ä¸‹å‘IMé€šçŸ¥ï¼Œè¡¨ç¤ºæœ‰æ’ä»¶æ›´æ–°æˆ–æ–°å¢ã€‚ç¾¤æ’ä»¶å½“ä¸”ä»…å½“å’Œç¾¤æŒ‚é’©æ—¶å€™æ‰ä¼šå®æ—¶ä¸‹å‘ã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°ç¾¤æ’ä»¶å˜æ›´æŒ‡ä»¤çš„æ—¶å€™ï¼Œé¦–å…ˆåˆ¤æ–­ç¾¤æ’ä»¶å˜æ›´ç±»å‹å¦‚æœæ˜¯æ’ä»¶ä¿¡æ¯å˜æ›´ï¼Œåˆ™æ ¹æ®idè¯·æ±‚æœ€æ–°çš„æŸæ’ä»¶ä¿¡æ¯ replace intoï¼ˆæ›´æ–°æˆ–æ–°å¢ï¼‰ æ’ä»¶ä¿¡æ¯çš„è®°å½•ã€‚å¦‚æœæ˜¯å…¶ä»–å˜æ›´ç±»å‹ï¼š é¦–å…ˆæ£€æŸ¥æ’ä»¶è¡¨æ˜¯å¦æœ‰è¯¥æ’ä»¶è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å­˜å‚¨åˆ°æ’ä»¶å…³ç³»è¡¨ï¼Œå®Œæˆååˆ™é€šçŸ¥ç•Œé¢å»è¯»å–ç¾¤æœ€æ–°çš„æ’ä»¶ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å…ˆè¯·æ±‚ç½‘ç»œæ’ä»¶ä¿¡æ¯ï¼Œå†replace into åˆ°æ’ä»¶è¡¨ã€‚ç„¶åå†å¤„ç†æ’ä»¶å…³ç³»è¡¨ï¼Œæœ€åé€šçŸ¥åˆ°ç•Œé¢åˆ·æ–°ã€‚ ç¾¤æ’ä»¶çš„å˜æ›´ç±»å‹ä¸€èˆ¬å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼šç»‘å®šï¼Œè§£ç»‘ï¼Œè§’æ ‡æ•°é‡ï¼Œç¾¤æ’ä»¶æ’åºï¼Œæ˜¾ç¤º/éšè—ç­‰ç­‰ã€‚å…·ä½“æ ¹æ®ä¸šåŠ¡æƒ…å†µï¼Œè¿™é‡Œåªæ˜¯ç®€å•åˆ—ä¸¾ã€‚ ç•Œé¢åˆ·æ–°å½“IMæ”¶åˆ°ç¾¤æ’ä»¶è‡ªå®šä¹‰é€šçŸ¥æ—¶ï¼Œè¿›è¡Œæ¡ä»¶å¤„ç†å¯¹åº”çš„ä¸šåŠ¡ã€‚å½“å®Œæˆç¾¤æ’ä»¶å…³ç³»è¡¨çš„å˜æ›´æ—¶ï¼Œå‘é€é€šçŸ¥åˆ°æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨æ”¶åˆ°é€šçŸ¥åï¼Œåˆ¤æ–­ä»…å½“å½“å‰ä¼šidä¸è¦æ¥æ”¶é€šçŸ¥çš„ç¾¤idç›¸ç­‰çš„æ—¶å€™ï¼Œæ‰è¿›è¡Œè°ƒç”¨daoæŸ¥è¯¢ç¾¤æ’ä»¶åˆ—è¡¨æ–¹æ³•è¿”å›ç›¸å…³çš„æ’ä»¶å…³ç³»é›†åˆã€‚æ’ä»¶å…³ç³»ModelåŒ…å«æ’ä»¶ä¿¡æ¯Modelï¼Œç„¶åç•Œé¢å°±èƒ½å®Œæ•´æ˜¾ç¤ºäº†ã€‚ åŒæ­¥æ—¶æœºï¼Ÿ å½“ç”¨æˆ·ç™»å½•åï¼Œé¦–æ¬¡ç‚¹å¼€æŸç¾¤æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨åŒæ­¥ç¾¤ä¿¡æ¯åŸºç¡€æ¥å£ï¼Œé‡Œé¢åŒ…å«æ’ä»¶é›†åˆã€‚é›†åˆé‡Œåˆ†åˆ«ä¸ºå·²å…³è”çš„æŸæ’ä»¶idåœ¨å½“å‰ç¾¤çš„æœ€ç»ˆçŠ¶æ€ã€‚æ ¹æ®existGroupFlagä¸ºtrueè¡¨ç¤ºä¸è¯¥ç¾¤å…³è”ç€ï¼Œå¦‚æœä¸ºfalse åˆ™éœ€è¦è°ƒç”¨è§£ç»‘åˆ é™¤ç¾¤æ’ä»¶å…³ç³»ã€‚ å½“ç”¨æˆ·é¦–æ¬¡å®‰è£…æˆ–å¸è½½é‡è£…æ—¶å€™ï¼Œè¿›å…¥æ¶ˆæ¯é¦–é¡µä¼šè¿›è¡Œå¤šç¾¤åŒæ­¥ï¼Œåœ¨ç¾¤ä¿¡æ¯åŒæ­¥æ—¶è¿”å›çš„åŸºç¡€ä¿¡æ¯ä¹Ÿä¼šåŒ…å«æ­¤ç¾¤æ’ä»¶é›†åˆåŸºä¿¡æ¯ã€‚ ä»£ç å»ºè®®æ’ä»¶Daoæä¾›æŸ¥è¯¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ç­‰åŸºæœ¬æ–¹æ³•ã€‚æ’ä»¶Managerä¸“é—¨å¤„ç†ä¸šåŠ¡ï¼Œè°ƒç”¨Daoç›¸å…³æ–¹æ³•ç»“åˆå®Œæˆä¸šåŠ¡éœ€æ±‚ã€‚é¿å…blockå›è°ƒåœ°ç‹±,é˜²æ­¢å¤šå±‚åµŒå¥—ã€‚å†…å­˜æ’åºå’Œsqlæ’åºç›¸ç»“åˆï¼Œç»“æ„ä½“å’Œå¯¹è±¡Modelç›¸æ˜ å°„ï¼Œè§£åŒ…æ—¶å€™ç•™æ„ç»“æ„ä½“å­—æ®µç±»å‹ï¼Œè§£ç æ—¶å€™å¯¹åº”ç›¸å…³ç½‘ç»œå­—èŠ‚åºï¼Œç•™æ„æ–°å¢ä¸replace into çš„åŒºåˆ«ï¼Œç•Œé¢åˆ·æ–°ä¸¥æ ¼æ¡ä»¶è¿‡æ»¤é˜²æ­¢é€ æˆä¸å¿…è¦çš„åˆ·æ–°ã€‚æ’ä»¶åŸºæœ¬ä¿¡æ¯åŒæ­¥é¢‘ç‡çœ‹ä¸šåŠ¡ï¼Œå…³ç³»ç»‘å®šè¦å®æ—¶ï¼Œæµ‹è¯•è¦å……åˆ†ç•™æ„å¸è½½é‡è£…åçš„æ’ä»¶ä¿¡æ¯åŒæ­¥é—®é¢˜ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"èŠå¤©è¾“å…¥æ¡†@æŸäºº","slug":"input@","date":"2021-07-01T08:42:10.000Z","updated":"2021-07-01T08:42:41.992Z","comments":true,"path":"2021/07/01/input@/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/01/input@/","excerpt":"èŠå¤©è¾“å…¥æ¡†@æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜IM åº”ç”¨è½¯ä»¶æ— è®ºæ˜¯Appç«¯æˆ–è€…æ˜¯PCç«¯éƒ½æœ‰@æŸäººè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œç”±äºç”¨æˆ·è¾“å…¥æ¡†è¾“å…¥æ¡ä»¶çš„å¤æ‚éšæœºæ€§ç§ç±»å¤šï¼Œ@çš„é’ˆå¯¹ä¸åŒæƒ…å†µè¿›è¡Œæ‹¼æ¥æˆ–è€…æ–°å¢æ ·å¼æ˜¾ç¤ºè“è‰²å­—ä½“è¡¨ç¤ºè¯¥äººåå¯é“¾æ¥ã€‚ç”±è¾“å…¥æ¡†å¼€å§‹ï¼Œç”¨æˆ·è¾“å…¥@çš„æ–¹å¼è¿›è¡Œåˆ†ç±»ï¼š é¦–å­—æ¯ä¸ºç©ºï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥@ï¼Œç„¶åè·³è½¬åˆ°æˆå‘˜é¡µé¢è¿›è¡Œé€‰æ‹©ç›¸å…³äººå‘˜ï¼Œé€‰å®Œå³å¸¦å›äººå ç»“æœä¸ºï¼šâ€œ@æŸäººâ€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Š: åœ¨æœ€å‰é¢ä¸‹ç­ä¸º0çš„ç¬¬1ä¸ªä½ç½®è¿›è¡Œæ’å…¥@ ç»“æœä¸ºï¼šâ€œ@æŸäººåŸinputè¾“å…¥æ¡†çš„æ–‡å­—â€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æœ€åé¢ä¸‹ç­ä¸ºlength-1çš„ç¬¬åä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥@ ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥æ¡†çš„æ–‡å­—@æŸäººâ€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æ–‡å­—å†…å®¹ä¸­è¾“å…¥@ã€‚å³æ¡ä»¶ 0 &lt; index &lt; length-1 ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥@æŸäººæ¡†çš„æ–‡å­—â€ åœ¨ä»¥ä¸Šå››ç§è¾“å…¥æƒ…å†µä¸­ï¼Œ3ï¼Œ4 è¾“å…¥æ‹¼æ¥@æŸäººçš„æ—¶å€™ï¼Œéœ€è¦åˆ¤æ–­å‰ä¸€ä¸ªå­—æ˜¯å¦ä¸º@, å¦‚æœæ˜¯,åˆ™åé¢æ‹¼æ¥çš„æ—¶å€™ç›´æ¥+æŸäººå³å¯ã€‚å¦å¤–å½“åœ¨ç¬¬4ç§æƒ…å†µæ–‡å­—ä¸­é—´è¾“å…¥çš„æ—¶å€™ï¼Œä¸­è‹±æ–‡ä¸‹è¾“å…¥å¯èƒ½é‡åˆ°æ–‡æœ¬æ¡†çš„å€¼ä¸º â€œ @@æ–‡å­—â€ï¼ŒæŒ‰ç…§ä¹‹å‰çš„é€»è¾‘å½“å…‰æ ‡è¾“å…¥åœ¨ç¬¬2ä¸ª@åæ—¶ï¼Œç„¶åé”®ç›˜è¾“å…¥@è·³è½¬é¡µé¢é€‰æ‹©æˆå‘˜ï¼Œæœ€åçš„ç»“æœåº”è¯¥æ˜¯â€œ @@æŸäººæ–‡å­—â€è¿™ä¸ªç»„åˆï¼Œä¸ºäº†æ›´å‹å¥½åœ°æ˜¾ç¤ºï¼Œè¿˜éœ€æ£€æŸ¥å½“å‰ä¸¤ä¸ªä¹Ÿæ˜¯@çš„æ—¶å€™ï¼Œå³å‡ºç°1ä¸ª@. å³ç»“æœä¸ºâ€œ @æŸäººæ–‡å­—â€ ä»¥ä¾¿æ›´å‹å¥½åœ°æ˜¾ç¤ºã€‚ æ ¸å¿ƒé€»è¾‘ï¼šæ ¹æ®æ–‡æœ¬æ¡†åŸè¾“å…¥æ–‡å­—æ˜¯å¦æœ‰å†…å®¹ï¼Œæ— å†…å®¹æ—¶å€™ç›´æ¥æ‹¼æ¥ã€‚æœ‰å†…å®¹æ—¶å€™åˆ†ä¸¤ç§æƒ…å†µï¼Œå³å…‰æ ‡çš„è¾“å…¥ä½ç½®æƒ…å†µï¼šå½“locationç­‰äº0çš„æ—¶å€™ï¼Œå³åœ¨é¦–ä½ç½®è¾“å…¥@æŸäººæ‹¼æ¥åŸæ–‡æœ¬å†…å®¹ã€‚å½“locationå¤§äº0çš„æ—¶å€™ï¼Œå³å…‰æ ‡å¯èƒ½å‡ºç°åœ¨å†…å®¹æ–‡å­—ä¹‹é—´ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ¨æœ€åé¢ã€‚ä¹Ÿæ˜¯åˆ†ä¸¤ç§æƒ…å†µï¼šæ ¹æ®location+1åˆ¤æ–­æ˜¯å¦å°äºåŸæ–‡æœ¬æ¡†æ–‡å­—é•¿åº¦length.å¦‚æœå°äºï¼Œåˆ™è¡¨ç¤ºåœ¨å†…å®¹ä¹‹é—´æ’å…¥ã€‚å¦åˆ™,åœ¨å†…å®¹æœ€åå°¾éƒ¨æ’å…¥ã€‚æ— è®ºæ˜¯ä¹‹é—´è¿˜æ˜¯å°¾éƒ¨åšæ’å…¥ï¼Œéƒ½éœ€æ£€æŸ¥å‰ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸º@,å¦‚æœæ˜¯ï¼Œåˆ™åœ¨åšæ‹¼æ¥äººåæ—¶å€™å°±æ— éœ€å†è¿½åŠ @ã€‚å½“åœ¨ä¹‹é—´åšæ’å…¥çš„æ—¶å€™ï¼Œä¸ºäº†å‹å¥½æ˜¾ç¤ºï¼Œå¯é€‚å½“åˆ¤æ–­å‰ä¸¤ä¸ªå­—ç¬¦ä¸º@@æ—¶å€™è¿›è¡Œæ›¿æ¢ä¸ºä¸€ä¸ª@ã€‚","text":"èŠå¤©è¾“å…¥æ¡†@æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜IM åº”ç”¨è½¯ä»¶æ— è®ºæ˜¯Appç«¯æˆ–è€…æ˜¯PCç«¯éƒ½æœ‰@æŸäººè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œç”±äºç”¨æˆ·è¾“å…¥æ¡†è¾“å…¥æ¡ä»¶çš„å¤æ‚éšæœºæ€§ç§ç±»å¤šï¼Œ@çš„é’ˆå¯¹ä¸åŒæƒ…å†µè¿›è¡Œæ‹¼æ¥æˆ–è€…æ–°å¢æ ·å¼æ˜¾ç¤ºè“è‰²å­—ä½“è¡¨ç¤ºè¯¥äººåå¯é“¾æ¥ã€‚ç”±è¾“å…¥æ¡†å¼€å§‹ï¼Œç”¨æˆ·è¾“å…¥@çš„æ–¹å¼è¿›è¡Œåˆ†ç±»ï¼š é¦–å­—æ¯ä¸ºç©ºï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥@ï¼Œç„¶åè·³è½¬åˆ°æˆå‘˜é¡µé¢è¿›è¡Œé€‰æ‹©ç›¸å…³äººå‘˜ï¼Œé€‰å®Œå³å¸¦å›äººå ç»“æœä¸ºï¼šâ€œ@æŸäººâ€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Š: åœ¨æœ€å‰é¢ä¸‹ç­ä¸º0çš„ç¬¬1ä¸ªä½ç½®è¿›è¡Œæ’å…¥@ ç»“æœä¸ºï¼šâ€œ@æŸäººåŸinputè¾“å…¥æ¡†çš„æ–‡å­—â€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æœ€åé¢ä¸‹ç­ä¸ºlength-1çš„ç¬¬åä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥@ ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥æ¡†çš„æ–‡å­—@æŸäººâ€ inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æ–‡å­—å†…å®¹ä¸­è¾“å…¥@ã€‚å³æ¡ä»¶ 0 &lt; index &lt; length-1 ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥@æŸäººæ¡†çš„æ–‡å­—â€ åœ¨ä»¥ä¸Šå››ç§è¾“å…¥æƒ…å†µä¸­ï¼Œ3ï¼Œ4 è¾“å…¥æ‹¼æ¥@æŸäººçš„æ—¶å€™ï¼Œéœ€è¦åˆ¤æ–­å‰ä¸€ä¸ªå­—æ˜¯å¦ä¸º@, å¦‚æœæ˜¯,åˆ™åé¢æ‹¼æ¥çš„æ—¶å€™ç›´æ¥+æŸäººå³å¯ã€‚å¦å¤–å½“åœ¨ç¬¬4ç§æƒ…å†µæ–‡å­—ä¸­é—´è¾“å…¥çš„æ—¶å€™ï¼Œä¸­è‹±æ–‡ä¸‹è¾“å…¥å¯èƒ½é‡åˆ°æ–‡æœ¬æ¡†çš„å€¼ä¸º â€œ @@æ–‡å­—â€ï¼ŒæŒ‰ç…§ä¹‹å‰çš„é€»è¾‘å½“å…‰æ ‡è¾“å…¥åœ¨ç¬¬2ä¸ª@åæ—¶ï¼Œç„¶åé”®ç›˜è¾“å…¥@è·³è½¬é¡µé¢é€‰æ‹©æˆå‘˜ï¼Œæœ€åçš„ç»“æœåº”è¯¥æ˜¯â€œ @@æŸäººæ–‡å­—â€è¿™ä¸ªç»„åˆï¼Œä¸ºäº†æ›´å‹å¥½åœ°æ˜¾ç¤ºï¼Œè¿˜éœ€æ£€æŸ¥å½“å‰ä¸¤ä¸ªä¹Ÿæ˜¯@çš„æ—¶å€™ï¼Œå³å‡ºç°1ä¸ª@. å³ç»“æœä¸ºâ€œ @æŸäººæ–‡å­—â€ ä»¥ä¾¿æ›´å‹å¥½åœ°æ˜¾ç¤ºã€‚ æ ¸å¿ƒé€»è¾‘ï¼šæ ¹æ®æ–‡æœ¬æ¡†åŸè¾“å…¥æ–‡å­—æ˜¯å¦æœ‰å†…å®¹ï¼Œæ— å†…å®¹æ—¶å€™ç›´æ¥æ‹¼æ¥ã€‚æœ‰å†…å®¹æ—¶å€™åˆ†ä¸¤ç§æƒ…å†µï¼Œå³å…‰æ ‡çš„è¾“å…¥ä½ç½®æƒ…å†µï¼šå½“locationç­‰äº0çš„æ—¶å€™ï¼Œå³åœ¨é¦–ä½ç½®è¾“å…¥@æŸäººæ‹¼æ¥åŸæ–‡æœ¬å†…å®¹ã€‚å½“locationå¤§äº0çš„æ—¶å€™ï¼Œå³å…‰æ ‡å¯èƒ½å‡ºç°åœ¨å†…å®¹æ–‡å­—ä¹‹é—´ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ¨æœ€åé¢ã€‚ä¹Ÿæ˜¯åˆ†ä¸¤ç§æƒ…å†µï¼šæ ¹æ®location+1åˆ¤æ–­æ˜¯å¦å°äºåŸæ–‡æœ¬æ¡†æ–‡å­—é•¿åº¦length.å¦‚æœå°äºï¼Œåˆ™è¡¨ç¤ºåœ¨å†…å®¹ä¹‹é—´æ’å…¥ã€‚å¦åˆ™,åœ¨å†…å®¹æœ€åå°¾éƒ¨æ’å…¥ã€‚æ— è®ºæ˜¯ä¹‹é—´è¿˜æ˜¯å°¾éƒ¨åšæ’å…¥ï¼Œéƒ½éœ€æ£€æŸ¥å‰ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸º@,å¦‚æœæ˜¯ï¼Œåˆ™åœ¨åšæ‹¼æ¥äººåæ—¶å€™å°±æ— éœ€å†è¿½åŠ @ã€‚å½“åœ¨ä¹‹é—´åšæ’å…¥çš„æ—¶å€™ï¼Œä¸ºäº†å‹å¥½æ˜¾ç¤ºï¼Œå¯é€‚å½“åˆ¤æ–­å‰ä¸¤ä¸ªå­—ç¬¦ä¸º@@æ—¶å€™è¿›è¡Œæ›¿æ¢ä¸ºä¸€ä¸ª@ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152NSString *newNameStr &#x3D; nil; if(originStr.length &gt; 1)&#123; NSMutableString *mStr &#x3D; [[NSMutableString alloc] init]; if(_range.location &gt; 0)&#123; &#x2F;&#x2F;åœ¨ä¸­é—´æˆ–è€…åœ¨æœ«å°¾æ’å…¥@,å–å‡ºä¹‹å‰çš„ï¼Œå†å–å‡ºä¹‹åçš„ã€‚ NSString *beforeStr &#x3D; [originStr substringWithRange:NSMakeRange(0, _range.location)]; [mStr appendString:beforeStr]; BOOL bCenterInsertFlag &#x3D; NO; BOOL bNeedInsertAtFlag &#x3D; YES; if(_range.location + 1 &lt; originStr.length)&#123; bCenterInsertFlag &#x3D; YES; &#x2F;&#x2F;ä¸­é—´æ’å…¥.åˆ¤æ–­å‰ä¸€ä¸ªæ˜¯å¦@ NSString *lastChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-1]; if([lastChar isEqualToString:@&quot;@&quot;])&#123; bNeedInsertAtFlag &#x3D; NO; &#125; if(beforeStr.length &gt; 2 &amp;&amp; beforeStr.length-2 &gt; 0)&#123; NSString *lastTwoChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-2]; if([lastTwoChar isEqualToString:@&quot;@@&quot;])&#123; [mStr replaceOccurrencesOfString:@&quot;@@&quot; withString:@&quot;@&quot; options:nil range:NSMakeRange(0, mStr.length)]; &#125; &#125; &#125;else&#123; &#x2F;&#x2F;æœ«å°¾æ’å…¥.åˆ¤æ–­å‰ä¸€ä¸ªæ˜¯å¦@ NSString *lastChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-1]; if([lastChar isEqualToString:@&quot;@&quot;])&#123; bNeedInsertAtFlag &#x3D; NO; &#125; &#125; if(bNeedInsertAtFlag)&#123; [mStr appendString:@&quot;@&quot;]; &#125; [mStr appendString:nameStr]; if(bCenterInsertFlag)&#123; &#x2F;&#x2F;å¦‚æœåœ¨æ–‡å­—ä¸­é—´æ’å…¥,æ‹¿åˆ°@ä¹‹åçš„å­—ç¬¦ä¸² NSString *afterStr &#x3D; [originStr substringFromIndex:_range.location+1]; [mStr appendString:afterStr]; &#125; &#125;else&#123; &#x2F;&#x2F;é¦–å­—æ¯ä¸º@ç¬¦å·ï¼Œæˆªå–ä¹‹åçš„. [mStr appendString:@&quot;@&quot;]; [mStr appendString:nameStr]; NSString *afterStr &#x3D; [originStr substringFromIndex:1]; [mStr appendString:afterStr]; &#125; newNameStr &#x3D; mStr; &#125;else&#123; newNameStr &#x3D; [NSString stringWithFormat:@&quot;%@%@&quot;,mutableStr,nameStr]; &#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"å¥‡æ€ªçš„ä¾§è¾¹æ é—®é¢˜","slug":"LeftSlide","date":"2021-07-01T03:37:12.000Z","updated":"2021-07-01T03:42:09.324Z","comments":true,"path":"2021/07/01/LeftSlide/","link":"","permalink":"https://www.littlewhale.xyz/2021/07/01/LeftSlide/","excerpt":"å¼€å‘ä¸­ç”±äºç³»ç»Ÿç‰ˆæœ¬ä»¥åŠsdkï¼Œç¬¬ä¸‰æ–¹åº“ç­‰åŸå› ï¼Œéƒ½ä¼šå½±å“æˆå‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚å½“æ—¶æ˜¯å¼•ç”¨YYTextviewæ§ä»¶è§£å†³æ¶ˆæ¯cellé•¿æ–‡æœ¬çš„å…‰æ ‡é€‰æ‹©èŒƒå›´å†…å®¹å¤åˆ¶çš„å°åŠŸèƒ½ã€‚ç”±äºYYTextviewå…‰æ ‡å¼¹å‡ºå±‚è‡ªå®šä¹‰åœ¨å¦å¤–ä¸€ä¸ªæ–°çš„Windownä¸Šï¼Œç„¶åå·¦ä¾§ä¾§æ»‘å‡ºçš„viewæ˜¯æ–°å¢åœ¨å¦ä¸€ä¸ªæ–°çš„Windownä¸­ã€‚å½“ä¾§è¾¹æ dismissçš„æ—¶å€™ï¼Œå¯èƒ½ç”±äºwindownå±‚çº§çš„å½±å“ï¼Œå½“åœ¨èŠå¤©è¾“å…¥æ¡†å†æ¬¡è¾“å…¥æ–‡å­—é•¿æŒ‰æ—¶å€™ï¼Œç³»ç»Ÿå‡ºç°çš„UIMenuå±‚çš„Buttonä¸è§äº†ã€‚å½“æ—¶æƒ³ä»æ ¹æœ¬é—®é¢˜å»æ’æŸ¥ä¸ºå•¥ç³»ç»Ÿçš„UIMenuå½“é•¿æŒ‰çš„æ—¶å€™æ“ä½œåŠŸèƒ½çš„buttonä¸ºå•¥ä¸è§å»è§£å†³ï¼ŒèŠ±è´¹äº†å°†è¿‘2ä¸ªå¤šå°æ—¶é€šè¿‡Xcodeè°ƒè¯•æŸ¥çœ‹å±‚çº§ï¼Œé˜…è¯»YYTextviewçš„å…‰æ ‡è‡ªå®šä¹‰å±‚çš„å®ç°ä»¥åŠæ·»åŠ åˆ°windownçš„å±‚çº§ï¼ŒæŸ¥çœ‹å·¦ä¾§ä¾§è¾¹æ æ·»åŠ åŠ¨ç”»å®ç°æ–¹å¼ç­‰éƒ½æœªè§£å†³ã€‚ç„¶åæƒ³åˆ°å¦‚æœä¸é€šè¿‡æ–°åˆ›å»ºwindowæ¥æ·»åŠ view å®ç°åŠ¨ç”»ï¼Œè€Œæ˜¯é€šè¿‡presentä¸€ä¸ªæ§åˆ¶å™¨å®ç°ä¾§è¾¹æ åŠ¨ç”»ã€‚æœ€ç»ˆé—®é¢˜å¾—åˆ°äº†è§£å†³ã€‚ æ—§Slideä¾§æ»‘æ–¹æ¡ˆæ—§æœ‰çš„ä¾§æ»‘æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–°window,ç„¶åè®¾ç½®å…¶windowLevel ä¸ºæ­£å¸¸çš„+1ï¼Œè¿™æ ·å°±åœ¨æœ€é¡¶å±‚äº†ï¼Œç„¶åè®¾ç½®å…¶rootViewControllerä¸ºä¾§æ»‘çš„æ§åˆ¶å™¨ã€‚å¾ˆæœ‰å¯èƒ½æ˜¯æ–°åˆ›å»ºçš„windowä¸YYtextViewçš„å…‰æ ‡é€‰æ‹©å±‚åˆ›å»ºçš„windowæœ‰å†²çªï¼Œç„¶åé€ æˆUIMenuæŒ‰é’®æ¶ˆå¤±äº†ã€‚ æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨ SlideVCå®åˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¿åˆ°æœ€é¡¶å±‚æ§åˆ¶å™¨topVCï¼Œç”¨å¯¼èˆªæ§åˆ¶å™¨æŠŠSlideVCåŒ…è£¹å¥½ï¼Œè®¾ç½®å®ƒçš„ modalPresentationStyle æ¨¡å¼ä¸ºUIModalPresentationOverCurrentContextï¼Œç„¶åpresentå‡ºæ¥ .è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»Ÿçš„presentæ–¹æ³•æ˜¯å¦æœ‰è¢«runtime method swizledè¿›è¡Œæ–¹æ³•æ›¿æ¢æ¥å…¬å…±ç»Ÿä¸€å¤„ç†modelPresentStyleé—®é¢˜ï¼Œå› ä¸ºæœ‰äº›Appäº¤äº’ä¸æƒ³ä½¿ç”¨ç³»ç»Ÿçš„æŠ½å±‰å¼presentæ•ˆæœ, å¦‚æœæœ‰éœ€è¦åšç›¸å…³çš„è¿‡æ»¤ä¸šåŠ¡æ§åˆ¶å™¨é€»è¾‘åˆ¤æ–­ã€‚ ä¾§è¾¹åŠ¨ç”»çš„å®ç°ï¼šåœ¨SlideVCä¸­å®šä¹‰ä¸€ä¸ªåŠé€æ˜å±‚èƒŒæ™¯bgViewï¼Œæ·»åŠ tapæ‰‹åŠ¿ï¼Œç‚¹å‡»å³å…³é—­ã€‚å¾€bgViewæ·»åŠ ä¸€ä¸ªå·¦ä¾§å†…å®¹è§†å›¾leftView 75%å®½,å³ä¾§rightViewã€‚self.viewæ·»åŠ ä¸€ä¸ªPanæ‰‹åŠ¿ï¼Œç”¨æ¥è®¡ç®—leftViewæ‹–æ‹½æ—¶å€™Xçš„å€¼ä½ç§»å˜åŒ–ã€‚å°†å†…å®¹æ§åˆ¶å™¨äº¤ç”±SlideVCç®¡ç†ï¼š","text":"å¼€å‘ä¸­ç”±äºç³»ç»Ÿç‰ˆæœ¬ä»¥åŠsdkï¼Œç¬¬ä¸‰æ–¹åº“ç­‰åŸå› ï¼Œéƒ½ä¼šå½±å“æˆå‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚å½“æ—¶æ˜¯å¼•ç”¨YYTextviewæ§ä»¶è§£å†³æ¶ˆæ¯cellé•¿æ–‡æœ¬çš„å…‰æ ‡é€‰æ‹©èŒƒå›´å†…å®¹å¤åˆ¶çš„å°åŠŸèƒ½ã€‚ç”±äºYYTextviewå…‰æ ‡å¼¹å‡ºå±‚è‡ªå®šä¹‰åœ¨å¦å¤–ä¸€ä¸ªæ–°çš„Windownä¸Šï¼Œç„¶åå·¦ä¾§ä¾§æ»‘å‡ºçš„viewæ˜¯æ–°å¢åœ¨å¦ä¸€ä¸ªæ–°çš„Windownä¸­ã€‚å½“ä¾§è¾¹æ dismissçš„æ—¶å€™ï¼Œå¯èƒ½ç”±äºwindownå±‚çº§çš„å½±å“ï¼Œå½“åœ¨èŠå¤©è¾“å…¥æ¡†å†æ¬¡è¾“å…¥æ–‡å­—é•¿æŒ‰æ—¶å€™ï¼Œç³»ç»Ÿå‡ºç°çš„UIMenuå±‚çš„Buttonä¸è§äº†ã€‚å½“æ—¶æƒ³ä»æ ¹æœ¬é—®é¢˜å»æ’æŸ¥ä¸ºå•¥ç³»ç»Ÿçš„UIMenuå½“é•¿æŒ‰çš„æ—¶å€™æ“ä½œåŠŸèƒ½çš„buttonä¸ºå•¥ä¸è§å»è§£å†³ï¼ŒèŠ±è´¹äº†å°†è¿‘2ä¸ªå¤šå°æ—¶é€šè¿‡Xcodeè°ƒè¯•æŸ¥çœ‹å±‚çº§ï¼Œé˜…è¯»YYTextviewçš„å…‰æ ‡è‡ªå®šä¹‰å±‚çš„å®ç°ä»¥åŠæ·»åŠ åˆ°windownçš„å±‚çº§ï¼ŒæŸ¥çœ‹å·¦ä¾§ä¾§è¾¹æ æ·»åŠ åŠ¨ç”»å®ç°æ–¹å¼ç­‰éƒ½æœªè§£å†³ã€‚ç„¶åæƒ³åˆ°å¦‚æœä¸é€šè¿‡æ–°åˆ›å»ºwindowæ¥æ·»åŠ view å®ç°åŠ¨ç”»ï¼Œè€Œæ˜¯é€šè¿‡presentä¸€ä¸ªæ§åˆ¶å™¨å®ç°ä¾§è¾¹æ åŠ¨ç”»ã€‚æœ€ç»ˆé—®é¢˜å¾—åˆ°äº†è§£å†³ã€‚ æ—§Slideä¾§æ»‘æ–¹æ¡ˆæ—§æœ‰çš„ä¾§æ»‘æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–°window,ç„¶åè®¾ç½®å…¶windowLevel ä¸ºæ­£å¸¸çš„+1ï¼Œè¿™æ ·å°±åœ¨æœ€é¡¶å±‚äº†ï¼Œç„¶åè®¾ç½®å…¶rootViewControllerä¸ºä¾§æ»‘çš„æ§åˆ¶å™¨ã€‚å¾ˆæœ‰å¯èƒ½æ˜¯æ–°åˆ›å»ºçš„windowä¸YYtextViewçš„å…‰æ ‡é€‰æ‹©å±‚åˆ›å»ºçš„windowæœ‰å†²çªï¼Œç„¶åé€ æˆUIMenuæŒ‰é’®æ¶ˆå¤±äº†ã€‚ æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨ SlideVCå®åˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¿åˆ°æœ€é¡¶å±‚æ§åˆ¶å™¨topVCï¼Œç”¨å¯¼èˆªæ§åˆ¶å™¨æŠŠSlideVCåŒ…è£¹å¥½ï¼Œè®¾ç½®å®ƒçš„ modalPresentationStyle æ¨¡å¼ä¸ºUIModalPresentationOverCurrentContextï¼Œç„¶åpresentå‡ºæ¥ .è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»Ÿçš„presentæ–¹æ³•æ˜¯å¦æœ‰è¢«runtime method swizledè¿›è¡Œæ–¹æ³•æ›¿æ¢æ¥å…¬å…±ç»Ÿä¸€å¤„ç†modelPresentStyleé—®é¢˜ï¼Œå› ä¸ºæœ‰äº›Appäº¤äº’ä¸æƒ³ä½¿ç”¨ç³»ç»Ÿçš„æŠ½å±‰å¼presentæ•ˆæœ, å¦‚æœæœ‰éœ€è¦åšç›¸å…³çš„è¿‡æ»¤ä¸šåŠ¡æ§åˆ¶å™¨é€»è¾‘åˆ¤æ–­ã€‚ ä¾§è¾¹åŠ¨ç”»çš„å®ç°ï¼šåœ¨SlideVCä¸­å®šä¹‰ä¸€ä¸ªåŠé€æ˜å±‚èƒŒæ™¯bgViewï¼Œæ·»åŠ tapæ‰‹åŠ¿ï¼Œç‚¹å‡»å³å…³é—­ã€‚å¾€bgViewæ·»åŠ ä¸€ä¸ªå·¦ä¾§å†…å®¹è§†å›¾leftView 75%å®½,å³ä¾§rightViewã€‚self.viewæ·»åŠ ä¸€ä¸ªPanæ‰‹åŠ¿ï¼Œç”¨æ¥è®¡ç®—leftViewæ‹–æ‹½æ—¶å€™Xçš„å€¼ä½ç§»å˜åŒ–ã€‚å°†å†…å®¹æ§åˆ¶å™¨äº¤ç”±SlideVCç®¡ç†ï¼š12[self addChildViewController:self.leftVC];[self.leftVC didMoveToParentViewController:self];å½“slideVCæ§åˆ¶å™¨ViewDidApperæ˜¾ç¤ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å³åšåŠ¨ç”»ï¼ˆå¯ä»¥åŠ ä¸€ä¸ªå¼€å…³çŠ¶æ€åˆ¤æ–­å…¶æ˜¯å¦æ‰“å¼€ï¼‰ã€‚æ ¹æ®ä¾§æ»‘æ‰‹æŒ‡ç§»åŠ¨è·ç¦»æ˜¯å¦ä½¿å†…å®¹Viewåˆ°å±å¹•çš„ä¸€åŠï¼Œå¦åˆ™å¤ä½ã€‚ç„¶åå¯ä»¥é€‚å½“åšä¸€ç‚¹å¼¹æ€§åŠ¨ç”»ã€‚é€šè¿‡UIviewçš„animateWithDuration: usingSpringWithDamping:æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚123456789101112131415161718192021- (void)showAnimation &#123; self.view.userInteractionEnabled &#x3D; NO; self.menuOpenFlag &#x3D; YES; if(!self.hasMoreThenHalf)&#123; CGAffineTransform translate &#x3D; CGAffineTransformMakeTranslation(-300, 0); CGAffineTransform scale &#x3D; CGAffineTransformMakeScale(3.0, 1.0); self.modalView.transform &#x3D; CGAffineTransformConcat(translate, scale); &#125; CGFloat time &#x3D; fabs(self.modalView.frame.origin.x &#x2F; self.modalView.frame.size.width) * animationTime; [UIView animateWithDuration:time delay:0.0 usingSpringWithDamping:0.85 initialSpringVelocity:0.7 options:UIViewAnimationOptionCurveLinear animations:^&#123; if(self.hasMoreThenHalf)&#123; self.modalView.frame &#x3D; CGRectMake(0, 0, MenuWidth, [UIScreen mainScreen].bounds.size.height); &#125;else&#123; self.modalView.transform &#x3D; CGAffineTransformIdentity; &#125; &#125; completion:^(BOOL finished) &#123; self.view.userInteractionEnabled &#x3D; YES; self.menuOpenFlag &#x3D; YES; &#125;];&#125;å½“å…³é—­çš„æ—¶å€™ï¼šè¿›è¡Œè§†å›¾çš„å¤ä½åŠ¨ç”»ï¼Œç„¶ådismissæ§åˆ¶å™¨ã€‚è¿™ä¸ªæ˜¯ä¸»åŠ¨å…³é—­ã€‚å¦å¤–éœ€è¦é¢„ç•™å¥½è¢«åŠ¨å…¶ä»–ä¸šåŠ¡æƒ…å†µä¸‹éœ€è¦å…³é—­ä¾§è¾¹æ çš„æƒ…å†µï¼Œæ³¨å†Œå¥½ç›¸å…³çš„é€šçŸ¥ï¼Œå½“æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œå°±è‡ªåŠ¨å…³é—­äº†ä¾§è¾¹æ ã€‚1234567891011121314- (void)closeAnimation &#123; self.view.userInteractionEnabled &#x3D; NO; self.hasMoreThenHalf &#x3D; NO; &#x2F;&#x2F; æ ¹æ®å½“å‰xï¼Œè®¡ç®—éšè—æ—¶é—´ CGFloat time &#x3D; (1 - fabs(self.modalView.frame.origin.x &#x2F; self.modalView.frame.size.width)) * animationTime; [UIView animateWithDuration:time animations:^&#123; self.modalView.frame &#x3D; CGRectMake(-self.modalView.frame.size.width, 0, self.modalView.frame.size.width, [UIScreen mainScreen].bounds.size.height); self.bgView.alpha &#x3D; 0.0; &#125; completion:^(BOOL finished) &#123; self.menuOpenFlag &#x3D; NO; [self dismissViewControllerAnimated:false completion:nil]; &#125;];&#125; Panæ‰‹åŠ¿çš„äº‹ä»¶æ§åˆ¶LeftView Xåæ ‡ä½ç§»12345678910111213141516171819202122232425262728293031323334353637383940414243444546- (void)moveViewWithGesture:(UIPanGestureRecognizer *)panGes &#123; &#x2F;&#x2F; å¼€å§‹ä½ç½® static CGFloat startX; &#x2F;&#x2F; ç»“æŸä½ç½® static CGFloat lastX; &#x2F;&#x2F; æ”¹å˜å¤šå°‘ static CGFloat durationX; CGPoint touchPoint &#x3D; [panGes locationInView:self.view]; &#x2F;&#x2F; æ‰‹åŠ¿å¼€å§‹ if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateBegan) &#123; startX &#x3D; touchPoint.x; lastX &#x3D; touchPoint.x; &#125; if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateChanged) &#123; CGFloat currentX &#x3D; touchPoint.x; durationX &#x3D; currentX - lastX; lastX &#x3D; currentX; self.hasMoreThenHalf &#x3D; NO; CGFloat leftVC_X &#x3D; durationX + self.modalView.x; if (leftVC_X &lt;&#x3D; -self.modalView.width) &#123; leftVC_X &#x3D; - self.modalView.width; &#125; &#x2F;&#x2F;å¦‚æœæ˜¯å‘å³æ»‘åŠ¨ if (leftVC_X &gt; 0) &#123; leftVC_X &#x3D; 0; &#125; self.bgView.alpha &#x3D; (1 + leftVC_X &#x2F; self.modalView.frame.size.width) * 0.5; [self.modalView setFrame:CGRectMake(leftVC_X, 0, _modalView.frame.size.width, _modalView.frame.size.height)]; &#125; if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateEnded) &#123; &#x2F;&#x2F; è¶…è¿‡ä¸€åŠå±å¹• if (_modalView.x &gt; - _modalView.frame.size.width + [UIScreen mainScreen].bounds.size.width &#x2F; 2) &#123; self.hasMoreThenHalf &#x3D; YES; [self showAnimation]; &#125;else&#123; [self closeAnimation]; &#125; &#125;&#125; H5é¡µé¢å¥‡æ€ªçš„UIDocumentMenuViewControlleråœ¨è¾¹æ æ§åˆ¶å™¨ç‚¹å‡»èœå•è¿›å…¥è¿›å…¥æ„è§åé¦ˆæ¨¡å—ï¼Œé€šè¿‡inputæ ‡ç­¾æ‰“å¼€åŸç”Ÿå›¾ç‰‡é€‰æ‹©å™¨å‡ºç°é—ªé€€ã€‚æ­¤æ—¶ç³»ç»Ÿçš„presentä¼šç»è¿‡ä¸¤å±‚ã€‚ç¬¬ä¸€å±‚æ˜¯UIDocumentMenuViewController,ç¬¬äºŒå±‚æ‰åˆ°ç³»ç»Ÿé€‰æ‹©ç›¸å†Œé‚£ä¸ªæ§åˆ¶å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„å¯¼èˆªæ§åˆ¶å™¨ä¸­é‡å†™dismissæ–¹æ³•ï¼Œæ ¹æ®presentedViewControlleræ˜¯å¦ä¸ºUIDocumentMenuViewControlleråšä¸€ä¸ªæ ‡è®°documentFlag, éœ€è¦æ‰‹åŠ¨æ§åˆ¶å½“ç¬¬äºŒæ¬¡ç³»ç»Ÿè°ƒç”¨dismissæ—¶å€™å°±æ— éœ€å›è°ƒçˆ¶ç±»çš„dismissæ–¹æ³•ã€‚123456789101112-(void) dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion&#123; if(self.presentedViewController !&#x3D; nil &amp;&amp; [self.presentedViewController isKindOfClass:[NSClassFromString(@&quot;UIDocumentMenuViewController&quot;) class]])&#123; self.documentFlag &#x3D; YES; [super dismissViewControllerAnimated:flag completion:completion]; &#125;else&#123; &#x2F;&#x2F;ç¬¬äºŒæ¬¡dismissé˜»æ­¢æ‰ã€‚ if(!self.documentFlag)&#123; [super dismissViewControllerAnimated:flag completion:completion]; &#125; self.documentFlag &#x3D; NO; &#125;&#125; æ€»ç»“ï¼šé—®é¢˜æœ¬èº«ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯ä¸æ„¿æ„å°è¯•ä»å½±å“è¯¥é—®é¢˜ç‚¹å»ç»•å¼€è¯¥ç‚¹æ‰€å¯¼è‡´çš„é—®é¢˜ã€‚è¿™æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æ·å¾„æ–¹æ¡ˆã€‚å½“äº§ç”Ÿæ–°çš„é—®é¢˜ç‚¹æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è€å¿ƒè°ƒè¯•ï¼Œæ­¥æ­¥ç»†å¿ƒï¼Œå‘ç°é€ æˆé—®é¢˜ç‚¹çš„ç›´æ¥åŸå› ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"2020å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹","slug":"2020iOS","date":"2021-06-29T09:52:11.000Z","updated":"2021-06-29T09:57:07.000Z","comments":true,"path":"2021/06/29/2020iOS/","link":"","permalink":"https://www.littlewhale.xyz/2021/06/29/2020iOS/","excerpt":"2020 å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹ tipsèƒŒæ™¯ï¼šç–«æƒ…åŸå› å¯¼è‡´ä¹‹å‰äº‘å–µå·¥ä½œä¸èƒ½å¤Ÿç»§ç»­ï¼Œ2020å¹´6æœˆè¿˜æ˜¯é¢è¯•æ‰¾äº†ä¸€ä»½ç›¸å¯¹ç¨³å®šçš„å·¥ä½œï¼Œå»äº†å—èˆªçš„ä¸€å®¶å¤–åŒ…ä¾›åº”å•†ã€‚ E App æ˜¯ä¸€ä¸ªä¼ä¸šå†…éƒ¨OAå³æ—¶é€šè®¯App. é©»åœºå—èˆªåä¸»è¦æ˜¯é’ˆå¯¹æ­¤é¡¹ç›®è¿›è¡ŒåŠŸèƒ½è¿­ä»£æ•æ·å¼€å‘ã€‚ä¸»è¦è¯´ä¸€ä¸‹å‡ ä¸ªæŠ€æœ¯ä»»åŠ¡ç‚¹ï¼š é¦–è¦ä»»åŠ¡å°±æ˜¯å°†æ—§æœ‰MRCå†…å­˜è¿è¡Œç¯å¢ƒæ”¹æˆARCè¿è¡Œç¯å¢ƒã€‚ ä»»åŠ¡åˆ°ä¸æ˜¯å¤æ‚ï¼Œä¸»è¦ä¿®æ”¹ç‚¹æ˜¯å¤šï¼Œä½“åŠ›åŠ³åŠ¨ã€‚å°†ARCç›¸å…³çš„ä¿®é¥°å…³é”®è¯ï¼Œæ§åˆ¶å™¨çš„dealloc æ–¹æ³•ä»¥åŠè®¾ç½®çš„ä»£ç†delegate, é…ç½®æ–‡ä»¶-fno-objc ç›¸å…³é…ç½®å¹²æ‰ã€‚é‡åˆ°çš„é—®é¢˜ï¼Ÿ æœŸé—´ç”±äºä¹‹å‰æ˜¯MRCæ‰‹åŠ¨å†…å­˜å›æ”¶æœºåˆ¶ï¼Œç”±äºå¼€å‘äººå‘˜ä»£ç æŸäº›å˜é‡æ²¡æœ‰å›æ”¶æˆ–è€…æ³„éœ²è´®å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æ”¹æˆARCä¹‹åä¼šè‡ªåŠ¨é‡Šæ”¾å¯¼è‡´å†æ¬¡ä½¿ç”¨è¯¥å˜é‡çš„æ—¶å€™å‡ºç°nilå€¼å´©æºƒæˆ–è€…ä¸šåŠ¡çš„ä¸­æ–­å¼€ï¼C++ä»£ç å—Clientç±»æŸæ–¹æ³•çš„å˜é‡è¢«é‡Šæ”¾é€ æˆå´©æºƒï¼Ÿ å½“æ—¶é—®é¢˜ç‚¹æŠ›å‘å¦‚ä½•åœæ­¢æŸçº¿ç¨‹çš„è§£å†³æ–¹æ¡ˆä¸Šå»äº†ï¼Œè€Œä¸æ˜¯ç»ˆæ­¢æŸæ¡ä»¶ç„¶åè®©çº¿ç¨‹è‡ªç„¶åœæ­¢ã€‚å½“ç¨‹åºè¿›å…¥åå°applicationWillTerminateçš„æ—¶å€™ï¼Œæ‰‹åŠ¨é€€å‡ºIM.ç„¶åè¿›å…¥é”€æ¯è¿æ¥é˜¶æ®µã€‚ä¸ºäº†ä½¿alive_thread , recv_thread ä¸¤çº¿ç¨‹é€€å‡º,åœ¨CLIENT_Disconnect é”€æ¯é˜¶æ®µï¼Œé€šè¿‡æ”¹å˜alivethreadçš„æ¡ä»¶è®©whileæ¡ä»¶ä¸­æ­¢ï¼Œçº¿ç¨‹å¿…ç„¶é€€å‡ºã€‚ h5ç½‘é¡µæ‰“å¡æœ‰æ—¶å€™å®šä½ä¸åˆ°æˆ–è€…å´©æºƒã€‚å› Appç¨‹åºä½¿ç”¨äº†ç™¾åº¦åœ°å›¾sdk,æ‰€ä»¥ç›´æ¥å‡çº§ç™¾åº¦åœ°å›¾sdkå³å¯ã€‚sdkç¼–è¯‘åˆ†xcode11.3 æˆ– xcode 12 ã€‚å…·ä½“çœ‹Eé¡¹ç›®å¦‚æœé‡‡å–xcode11.3 ç¼–è¯‘æ‰“åŒ…ä¸Šçº¿ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°é€‚åº”çš„.aåŒ…æˆ–è€…framework è¿›è¡Œç¼–è¯‘ã€‚ å°†ASIç½‘ç»œæ–‡ä»¶ä¸‹è½½æ”¹æˆAFNetwrokingç½‘ç»œæ–‡ä»¶ä¸‹è½½ï¼Œå°†é•¿è¿›åº¦æ¡æ”¹æˆæ‰‡å½¢è¿›åº¦æ¡ã€‚ASIé‚£å¥—ç½‘ç»œè¯·æ±‚æ¯”è¾ƒè€æ—§ï¼Œå½“æ—¶è¿˜æ˜¯ç”¨NSURLConnnectionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸”éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä¸ªç½‘ç»œçº¿ç¨‹é•¿æœŸè´®å­˜åˆ°å†…å­˜ä¸­ã€‚AFN é‡‡å–NSURLSessionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œçº¿ç¨‹å³ç”¨å³å›æ”¶ã€‚AFNè¯·æ±‚æ—¶è®¾ç½®æ”¯æŒSSLå®‰å…¨ç­–ç•¥ã€‚ 12345AFSecurityPolicy *securityPolicy &#x3D; [[AFSecurityPolicy alloc] init];securityPolicy &#x3D; [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];securityPolicy.allowInvalidCertificates &#x3D; YES;securityPolicy.validatesDomainName &#x3D; NO;[_manager setSecurityPolicy:securityPolicy]; ç„¶åé€šè¿‡NSURLSessionDownloadTask è¿›è¡Œä¸‹è½½request,è¿”å›å¯¹åº”çš„è¿›åº¦ï¼Œé€šè¿‡KVOè¿›è¡Œè¿›åº¦æ¡çš„UIæ˜¾ç¤º,ä¹Ÿå¯é€šè¿‡Blockä¼ é€’åˆ°æ§åˆ¶å™¨è¿›è¡Œæ˜¾ç¤ºã€‚","text":"2020 å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹ tipsèƒŒæ™¯ï¼šç–«æƒ…åŸå› å¯¼è‡´ä¹‹å‰äº‘å–µå·¥ä½œä¸èƒ½å¤Ÿç»§ç»­ï¼Œ2020å¹´6æœˆè¿˜æ˜¯é¢è¯•æ‰¾äº†ä¸€ä»½ç›¸å¯¹ç¨³å®šçš„å·¥ä½œï¼Œå»äº†å—èˆªçš„ä¸€å®¶å¤–åŒ…ä¾›åº”å•†ã€‚ E App æ˜¯ä¸€ä¸ªä¼ä¸šå†…éƒ¨OAå³æ—¶é€šè®¯App. é©»åœºå—èˆªåä¸»è¦æ˜¯é’ˆå¯¹æ­¤é¡¹ç›®è¿›è¡ŒåŠŸèƒ½è¿­ä»£æ•æ·å¼€å‘ã€‚ä¸»è¦è¯´ä¸€ä¸‹å‡ ä¸ªæŠ€æœ¯ä»»åŠ¡ç‚¹ï¼š é¦–è¦ä»»åŠ¡å°±æ˜¯å°†æ—§æœ‰MRCå†…å­˜è¿è¡Œç¯å¢ƒæ”¹æˆARCè¿è¡Œç¯å¢ƒã€‚ ä»»åŠ¡åˆ°ä¸æ˜¯å¤æ‚ï¼Œä¸»è¦ä¿®æ”¹ç‚¹æ˜¯å¤šï¼Œä½“åŠ›åŠ³åŠ¨ã€‚å°†ARCç›¸å…³çš„ä¿®é¥°å…³é”®è¯ï¼Œæ§åˆ¶å™¨çš„dealloc æ–¹æ³•ä»¥åŠè®¾ç½®çš„ä»£ç†delegate, é…ç½®æ–‡ä»¶-fno-objc ç›¸å…³é…ç½®å¹²æ‰ã€‚é‡åˆ°çš„é—®é¢˜ï¼Ÿ æœŸé—´ç”±äºä¹‹å‰æ˜¯MRCæ‰‹åŠ¨å†…å­˜å›æ”¶æœºåˆ¶ï¼Œç”±äºå¼€å‘äººå‘˜ä»£ç æŸäº›å˜é‡æ²¡æœ‰å›æ”¶æˆ–è€…æ³„éœ²è´®å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æ”¹æˆARCä¹‹åä¼šè‡ªåŠ¨é‡Šæ”¾å¯¼è‡´å†æ¬¡ä½¿ç”¨è¯¥å˜é‡çš„æ—¶å€™å‡ºç°nilå€¼å´©æºƒæˆ–è€…ä¸šåŠ¡çš„ä¸­æ–­å¼€ï¼C++ä»£ç å—Clientç±»æŸæ–¹æ³•çš„å˜é‡è¢«é‡Šæ”¾é€ æˆå´©æºƒï¼Ÿ å½“æ—¶é—®é¢˜ç‚¹æŠ›å‘å¦‚ä½•åœæ­¢æŸçº¿ç¨‹çš„è§£å†³æ–¹æ¡ˆä¸Šå»äº†ï¼Œè€Œä¸æ˜¯ç»ˆæ­¢æŸæ¡ä»¶ç„¶åè®©çº¿ç¨‹è‡ªç„¶åœæ­¢ã€‚å½“ç¨‹åºè¿›å…¥åå°applicationWillTerminateçš„æ—¶å€™ï¼Œæ‰‹åŠ¨é€€å‡ºIM.ç„¶åè¿›å…¥é”€æ¯è¿æ¥é˜¶æ®µã€‚ä¸ºäº†ä½¿alive_thread , recv_thread ä¸¤çº¿ç¨‹é€€å‡º,åœ¨CLIENT_Disconnect é”€æ¯é˜¶æ®µï¼Œé€šè¿‡æ”¹å˜alivethreadçš„æ¡ä»¶è®©whileæ¡ä»¶ä¸­æ­¢ï¼Œçº¿ç¨‹å¿…ç„¶é€€å‡ºã€‚ h5ç½‘é¡µæ‰“å¡æœ‰æ—¶å€™å®šä½ä¸åˆ°æˆ–è€…å´©æºƒã€‚å› Appç¨‹åºä½¿ç”¨äº†ç™¾åº¦åœ°å›¾sdk,æ‰€ä»¥ç›´æ¥å‡çº§ç™¾åº¦åœ°å›¾sdkå³å¯ã€‚sdkç¼–è¯‘åˆ†xcode11.3 æˆ– xcode 12 ã€‚å…·ä½“çœ‹Eé¡¹ç›®å¦‚æœé‡‡å–xcode11.3 ç¼–è¯‘æ‰“åŒ…ä¸Šçº¿ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°é€‚åº”çš„.aåŒ…æˆ–è€…framework è¿›è¡Œç¼–è¯‘ã€‚ å°†ASIç½‘ç»œæ–‡ä»¶ä¸‹è½½æ”¹æˆAFNetwrokingç½‘ç»œæ–‡ä»¶ä¸‹è½½ï¼Œå°†é•¿è¿›åº¦æ¡æ”¹æˆæ‰‡å½¢è¿›åº¦æ¡ã€‚ASIé‚£å¥—ç½‘ç»œè¯·æ±‚æ¯”è¾ƒè€æ—§ï¼Œå½“æ—¶è¿˜æ˜¯ç”¨NSURLConnnectionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸”éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä¸ªç½‘ç»œçº¿ç¨‹é•¿æœŸè´®å­˜åˆ°å†…å­˜ä¸­ã€‚AFN é‡‡å–NSURLSessionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œçº¿ç¨‹å³ç”¨å³å›æ”¶ã€‚AFNè¯·æ±‚æ—¶è®¾ç½®æ”¯æŒSSLå®‰å…¨ç­–ç•¥ã€‚ 12345AFSecurityPolicy *securityPolicy &#x3D; [[AFSecurityPolicy alloc] init];securityPolicy &#x3D; [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];securityPolicy.allowInvalidCertificates &#x3D; YES;securityPolicy.validatesDomainName &#x3D; NO;[_manager setSecurityPolicy:securityPolicy]; ç„¶åé€šè¿‡NSURLSessionDownloadTask è¿›è¡Œä¸‹è½½request,è¿”å›å¯¹åº”çš„è¿›åº¦ï¼Œé€šè¿‡KVOè¿›è¡Œè¿›åº¦æ¡çš„UIæ˜¾ç¤º,ä¹Ÿå¯é€šè¿‡Blockä¼ é€’åˆ°æ§åˆ¶å™¨è¿›è¡Œæ˜¾ç¤ºã€‚ 123456789101112131415161718192021222324 NSURLSessionDownloadTask *downloadTask &#x3D; [_manager downloadTaskWithRequest:request progress:^(NSProgress * _Nonnull downloadProgress) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; if(progressBlock)&#123; progressBlock(downloadProgress); &#125; downloadModel.progress &#x3D; downloadProgress.fractionCompleted; &#125;);&#125; destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) &#123; return [NSURL fileURLWithPath:downloadModel.pathName]; &#x2F;&#x2F;è¿™é‡Œç›´æ¥è¿”å›éœ€è¦å­˜å‚¨çš„æœ¬åœ°æ²™ç›’è·¯å¾„&#125; completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) &#123; if (error) &#123; if (failedBlock) &#123; downloadModel.progress &#x3D; 1; failedBlock(error); &#125; &#125;else&#123; if(successBlock)&#123; NSHTTPURLResponse * successRes &#x3D; (NSHTTPURLResponse *)response; successBlock(successRes,downloadModel); &#125; &#125;&#125;];[downloadTask resume];downloadModel.task &#x3D; downloadTask; æ‰‡å½¢è§†å›¾çš„å®šä¹‰ç¼–å†™å‚è€ƒTZImagePickerå›¾ç‰‡é€‰æ‹©å™¨å¼€æºUIæ¡†æ¶ä¸­çš„TZProgressViewï¼ŒåæœŸçš„èŠå¤©å›¾ç‰‡é¢„è§ˆä¹Ÿå¾ˆå¤§å‚è€ƒäº†TZçš„å›¾ç‰‡ã€gifï¼Œè§†é¢‘æ··åˆé¢„è§ˆæ§ä»¶ã€‚åæœŸè¿˜ä¼šè®²åˆ°åŸºäºTZImagePickerçš„å›¾ç‰‡å…¥å£è¿›è¡Œå›¾ç‰‡ç¼–è¾‘ç­‰åŠŸèƒ½æ‰©å±•ã€‚å›åˆ°æ‰‡å½¢è¿›åº¦è§†å›¾ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªPieProgressViewï¼Œ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#define Hollow_Circle_Radius 0 &#x2F;&#x2F;ä¸­é—´ç©ºå¿ƒåœ†åŠå¾„ï¼Œé»˜è®¤ä¸º0å®å¿ƒ#define KOffsetRadius 10 &#x2F;&#x2F;åç§»è·ç¦»#define KMargin 0 &#x2F;&#x2F;è¾¹ç¼˜é—´è·@interface PieProgressView ()&#123; CGFloat _radius; CGPoint _center;&#125;@property (nonatomic, strong) CAShapeLayer *pieLayer;@end@implementation PieProgressView- (instancetype)initWithFrame:(CGRect)frame&#123; self &#x3D; [super initWithFrame:frame]; if (self) &#123; self.backgroundColor &#x3D; UIColor.clearColor; &#x2F;&#x2F;çº¿çš„åŠå¾„ä¸ºæ‰‡å½¢åŠå¾„çš„ä¸€åŠï¼Œçº¿å®½æ˜¯æ‰‡å½¢åŠå¾„-&gt;åŠå¾„+çº¿å®½çš„ä¸€åŠ&#x3D;çœŸå®åŠå¾„ï¼Œè¿™æ ·å°±èƒ½ç”»å‡ºåœ†å½¢äº† _radius &#x3D; (frame.size.width - KMargin*2)&#x2F;4.f; _center &#x3D; CGPointMake(_radius*2 + KMargin, _radius*2 + KMargin); _pieLayer &#x3D; [CAShapeLayer layer]; _pieLayer.strokeStart &#x3D; 0; _pieLayer.lineWidth &#x3D; _radius*2 - Hollow_Circle_Radius; _pieLayer.strokeColor &#x3D; [[UIColor colorWithWhite:0 alpha:0.5] CGColor]; _pieLayer.fillColor &#x3D; [UIColor clearColor].CGColor; _pieLayer.strokeEnd &#x3D; 0.98; &#125; return self;&#125;#pragma mark -- Publish Methods- (void)drawRect:(CGRect)rect &#123; _radius &#x3D; (rect.size.width - KMargin*2)&#x2F;4.f; _center &#x3D; CGPointMake(_radius*2 + KMargin, _radius*2 + KMargin); _pieLayer.frame &#x3D; self.bounds; UIBezierPath *piePath &#x3D; [UIBezierPath bezierPathWithArcCenter:_center radius:_radius + Hollow_Circle_Radius startAngle:M_PI_2*3 endAngle:-M_PI_2 clockwise:false]; _pieLayer.strokeEnd &#x3D; 1.0-_progress; _pieLayer.path &#x3D; piePath.CGPath; [_pieLayer removeFromSuperlayer]; [self.layer addSublayer:_pieLayer];&#125;- (void)setProgress:(float)progress &#123; _progress &#x3D; progress; [self setNeedsDisplay];&#125;@end è®¾ç½®è§†å›¾è¿›åº¦å±æ€§çš„æ—¶å€™ï¼Œé€šè¿‡è°ƒç”¨setNeedsDisplayå‘Šè¯‰ç³»ç»Ÿéœ€è¦è¿›è¡Œè§†å›¾æ¸²æŸ“ï¼Œç³»ç»Ÿè°ƒç”¨drawRectæ–¹æ³•,å¾€self.layeræ·»åŠ ä¸€ä¸ªpieLayer, pieLayerçš„pathé€šè¿‡è´å¡å°”æ›²çº¿è¿›è¡Œè®¾ç½®ï¼ŒpiePathç›¸å½“äºä»ç”»äº†ä¸€ä¸ªåœ†å¼§åº¦ï¼Œé€šè¿‡strokeEndæ§åˆ¶ç»“æŸç‚¹ï¼Œéœ€è¦å’Œclosewiseé…åˆæ§åˆ¶é€†æ—¶é’ˆã€‚pieLayeréœ€è¦æ¯æ¬¡ç§»é™¤å†å¾€é‡Œæ·»åŠ ã€‚åœ¨æ§åˆ¶å™¨åˆ—è¡¨cellForçš„æ—¶å€™, è®¾ç½®progressçš„èµ·åˆå€¼ä¸º0.0001å¾ˆå°ï¼Œå‡ ä¹æ¥è¿‘0ï¼Œè¿™æ ·åœ¨ç‚¹å‡»çš„æ—¶å€™å¦‚æœå»ä¸‹è½½ï¼Œåˆ™ç°è‰²é€æ˜è’™ç‰ˆå€¼è¾¾åˆ°0.999æ¥è¿‘1.0 ï¼Œç»™äººå¾ˆé€¼çœŸçš„æ„Ÿè§‰ã€‚ 12345678910111213if(_convRecord.msg_type &#x3D;&#x3D; type_file)&#123; PieProgressView *pieProgressView &#x3D; (PieProgressView *) [cell.contentView viewWithTag:pic_progress_circle_tag]; pieProgressView.superview.hidden &#x3D; NO; if(pieProgressView) &#123; if(_convRecord.download_flag &#x3D;&#x3D; state_download_success) &#123; pieProgressView.hidden &#x3D; YES; &#125;else &#123; pieProgressView.hidden &#x3D; YES; pieProgressView.alpha &#x3D; 1.0; pieProgressView.progress &#x3D; 0.0001; &#x2F;&#x2F;åˆå§‹åŒ–é…ç½®è¿›åº¦ã€‚ &#125; &#125;&#125; ç”±äºuiéœ€æ±‚éœ€æ˜¾ç¤ºåœ†æ‰‡å½¢è¿›åº¦ï¼Œéœ€è¦å°†pieProgressViewæ·»åŠ åˆ°ä¸€ä¸ªèƒŒæ™¯viewä¸­ï¼Œå†è®¾ç½®å…¶circleBackViewçš„èƒŒæ™¯é¢œè‰²ä¸ºé€æ˜ï¼Œlayerçš„masksToBoundsä¸ºYES,è¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬éœ€è¦çš„åœ†æ‰‡å½¢äº†ã€‚ Xcode12 Runtimeçš„æ–¹æ³•è°ƒç”¨ã€‚ç”±äºä¸»å·¥ç¨‹æ˜¯å¤šä¸ªprojectå·¥ç¨‹ç›¸äº’ä¾èµ–ä¸²è¡Œè€Œæˆçš„å·¥ç¨‹ï¼Œåº•å·¥ç¨‹éœ€è¦ä¾èµ–ä¸»å·¥ç¨‹ç±»æ—¶å€™ï¼Œå¯é€šè¿‡runtime obj_msgSendæ¶ˆæ¯å‘é€æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚ 123id cls &#x3D; ((id (*) (id, SEL)) objc_msgSend)(objc_getClass(&quot;HttpTool&quot;),sel_registerName(&quot;tool&quot;));SEL sel &#x3D; sel_registerName(&quot;POST:paramDic:Success:Failure:&quot;);((void (*)(id,SEL,NSString *,NSDictionary *, id, id))objc_msgSend)(cls, sel, urlStr, dic, finishSuccessBlock,FailureBlock); å´©æºƒé—®é¢˜ï¼š æ•°ç»„è¶Šç•Œã€‚å°¤å…¶åœ¨ä½¿ç”¨tableviewçš„beginUpdate çš„æ—¶å€™ï¼Œå±€éƒ¨åˆ·æ–°æ“ä½œçš„æ•°æ®æºå’Œè¯»å–çš„æ•°æ®æºä¸ªæ•°ä¸ä¸€è‡´å¯¼è‡´ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åœ¨å­çº¿ç¨‹ä¸­æ“ä½œäº†è¯¥æ•°æ®ï¼Œå¯¼è‡´åˆ·æ–°çš„æ—¶å€™å’Œè¯¥æ•°æ®æºä¸ä¸€è‡´å¯¼è‡´å´©æºƒã€‚æˆ–è€…æ˜¯æ•°æ®æºé­åˆ°æ±¡æŸ“ï¼Œå˜ç›¸è¢«æ”¹å˜ã€‚ å­—ç¬¦ä¸²æˆªå–å´©æºƒã€‚ åœ¨ä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•æˆªå–range çš„æ—¶å€™æ²¡æœ‰åˆ¤æ–­é•¿åº¦è¶Šç•Œæƒ…å†µã€‚ åœ¨é›†åˆcopyçš„æ—¶å€™ï¼Œè¦æ³¨æ„æ˜¯å¦å˜åŒ–ä¸ºä¸å¯å˜é›†åˆï¼Œå¦åˆ™è°ƒç”¨ç±»ä¼¼addObjectç­‰æ–¹æ³•æ—¶å€™å®¹æ˜“å´©æºƒã€‚ å¯¹è±¡é‡Šæ”¾ã€‚åœ¨ä½¿ç”¨SDWebImageä¸‹è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœç”¨ä¸€ä¸ªä¸´æ—¶çš„imageViewå»ä¸‹è½½ä¸€ä¸ªå›¾ç‰‡ï¼Œè€Œè¿™ä¸ªimageViewåˆæ²¡æœ‰è¢«ç•Œé¢å¼•ç”¨å°±å‡ºç°å¯¹è±¡è¢«é‡Šæ”¾äº†ã€‚ä»è€Œå¯¼è‡´imageView sd_downloadçš„æ—¶å€™complateBlockä¸€ç›´æ²¡æœ‰å›è°ƒã€‚ å¯¹è±¡å…³é”®å­—çš„ä½¿ç”¨ã€‚æ¯”å¦‚blockæ²¡æœ‰ä½¿ç”¨copy, delegateæ²¡æœ‰ä½¿ç”¨weakç­‰ã€‚ åœ¨å­çº¿ç¨‹ä¸­å‘é€äº†é€šçŸ¥ï¼Œç„¶ååœ¨ä¸»çº¿ç¨‹æ›´æ”¹äº†UIå¯¼è‡´å´©æºƒã€‚ ä¸šåŠ¡å¼‚å¸¸ï¼š åˆ‡æ¢ç™»å½•ç”¨æˆ·ï¼Œå¯¼è‡´å‘é€æ¶ˆæ¯å¤±è´¥æˆ–è€…ä¸¢å¤±ã€‚åŸå› ï¼šåˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œæ•°æ®åº“å¼€å…³ä¸æ­£ç¡®å¯¼è‡´sqläº‹åŠ¡æ²¡æœ‰æäº¤ã€‚ è§£å†³æ–¹æ¡ˆï¼šé¦–å…ˆsqlliteæ¨¡å¼ä¸ºä¸²è¡Œæ¨¡å¼ï¼Œå…¨å±€Appåªæœ‰ä¸€ä¸ªå…±äº«çš„å¥æŸ„handleã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå˜é‡å®šä¹‰åœ¨LCLSqliteä¸­è®¾ç½®ä¸ºåªè¯»ã€‚ å»ºç«‹ä¸€ä¸ªå•ä¾‹dbManagerç±»,åªè´Ÿè´£åˆ›å»ºæ•°æ®åº“å’Œå…³é—­æ•°æ®åº“ä»¥åŠæ•°æ®åº“ç‰ˆæœ¬çš„ç®¡ç†ã€‚ å®šä¹‰BaseSqliteç±».æä¾›å…¬å…±çš„æ“çºµæ•°æ®åº“sqlçš„è¯»å†™æ–¹æ³•ï¼Œå­ç±»ä¸šåŠ¡DAOéƒ½ç»§æ‰¿äºBaseSqliteç±»ï¼Œå­ç±»Daoå¯ä»¥ä½¿ç”¨handle(åªè¯»),ä½†ä¸å¯æ›´æ”¹handle. åœ¨æ•°æ®åº“sqliteå…³é—­çš„æ—¶å€™ï¼Œä¸ºé˜²æ­¢é—ç•™ä¸è¯­å¥æ± statementè¿˜åœ¨ä½¿ç”¨, éœ€å¾ªç¯æ‹¿å‡ºæœªå¤„ç†çš„è¯­å¥æ± è¿›è¡Œå…³é—­ã€‚è¿™æ ·å†æ‰“å¼€æ•°æ®åº“å°±èƒ½æˆåŠŸã€‚ æ­£åœ¨æŸä¼šè¯èŠå¤©çš„æ—¶å€™ï¼Œè¾“å…¥æ–‡å­—å‘é€åã€‚çªç„¶æ€æ‰è¿›ç¨‹ï¼Œå†æ¬¡æ‰“å¼€ä¼šè¯å‘ç°æ¶ˆæ¯æ¶ˆå¤±ã€‚è§£å†³æ–¹æ¡ˆï¼šAppçº¿ç¨‹å¹²æ‰ä¼šèµ°applicationWillTerminateæ–¹æ³•ï¼Œåœ¨æ­¤éœ€è¦å°†æ•°æ®åº“å…³é—­ã€‚ ç”¨æˆ·ç™»å½•åæ”¶åˆ°å¾ˆå¤šç¦»çº¿æ¶ˆæ¯ï¼Œå¦‚æœå¤„ç†æ¶ˆæ¯å…¥åº“çš„çº¿ç¨‹æ± å¼€è¾Ÿæ•°é‡å¤§äº2ï¼Œåˆ™ä¼šå‡ºç°å¤šä¸ªä¸šåŠ¡å…ˆåé¡ºåºçš„é—®é¢˜ï¼ˆé—®é¢˜åœºæ™¯ï¼šæ¶ˆæ¯åœ¨ä¼šè¯é¡µé¢æ’¤é”€äº†ï¼Œä½†æœªåœ¨æ¶ˆæ¯åˆ—è¡¨é¡µé¢æ’¤é”€æ‰ï¼‰ã€‚å¿…é¡»æ§åˆ¶çº¿ç¨‹æ•°ä¸º1ï¼Œä¿è¯Operationä»»åŠ¡ä¾èµ–æœ‰åºæ’å…¥ï¼Œå¦‚æœè¦å¤„ç†å…¥åº“çš„æ•ˆç‡ã€‚å¯å°†æ¶ˆæ¯æ•°æ®è®°å½•è¿›è¡Œæ‰¹é‡äº‹åŠ¡å…¥åº“ã€‚ çº¿ç¨‹é—®é¢˜ï¼š æ¶ˆæ¯æ•°æ®è®°å½•å…¥åº“åï¼Œéƒ½ä¼šå†™ä¸€æ®µä»£ç æ¥å‘é€é€šçŸ¥åˆ°æ§åˆ¶å™¨è¿›è¡Œé¡µé¢çš„åˆ·æ–°æ“ä½œã€‚å½“å¤§é‡æ¶ˆæ¯å…¥åº“åå‘é€é€šçŸ¥æ—¶å€™ï¼Œä¼šé€ æˆä¸»ç•Œé¢ä»£ç å—å¦‚æœå¼€è¾Ÿäº†GCDçº¿ç¨‹ï¼Œä¼šé€ æˆå¤§é‡æµªè´¹å’Œå†…å­˜å¼€è¾Ÿçš„æµªè´¹ã€‚éœ€è¦ä¸¥æ ¼æ§åˆ¶å¥½çº¿ç¨‹çš„æ•°é‡ï¼Œå¯é€šè¿‡çº¿ç¨‹æ± ç­‰æ–¹é¢å»æ§åˆ¶ã€‚ ä¸è¦ä¸€å‘³åœ°æƒ³å½“ç„¶ç”¨å¼‚æ­¥å»å¤„ç†è€—æ—¶é•¿çš„ä»»åŠ¡ç„¶åç›´æ¥ä¸‹ä¸€æ­¥ä¸šåŠ¡æ“ä½œã€‚æ¯”å¦‚å‘é€ä¸€æ®µè¯­éŸ³ï¼Œéœ€è¦å­˜å‚¨åˆ°æ²™ç›’ï¼Œéœ€è¦ä¸Šä¼ ï¼Œéœ€è¦æŠŠæ•°æ®è®°å½•å­˜åˆ°æ•°æ®åº“ã€‚å­˜åˆ°æ•°æ®åº“æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨åç«¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„fileTokenï¼Œçº¿ç¨‹çš„æ‰§è¡Œæœ‰å…ˆåï¼Œæ–‡ä»¶çš„fileTokenå–åˆ°çš„æ˜¯å¦æ­£ç¡®çš„ï¼Ÿå€¼å¾—è€ƒé‡ã€‚æˆ–è€…é‡‡å–Blockæ–¹å¼å½“çœŸæ­£æ‹¿åˆ°fileTokenæ—¶å€™æ‰è¿›è¡Œä¸‹ä¸€æ­¥çš„ä¸šåŠ¡æ“ä½œã€‚ å¦‚ä½•ä¿è¯åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„æ•°æ®æºå®‰å…¨ï¼ŸåŸå­æ€§ï¼ŸåŠ åŒæ­¥é”ï¼Ÿä¿¡å·é‡ï¼Ÿæ …æ å‡½æ•°ï¼Ÿ å€¼å¾—ä½ å»æ¢ç´¢? å½’æ ¹ç»“åº•æ˜¯å¼•ç”¨ç±»å‹é€ æˆçš„é—®é¢˜ï¼ŒSwift Struct å€¼ç±»å‹å€¼å¾—ä½ æ‹¥æœ‰ã€‚ ä¸šåŠ¡æ‡’åŠ è½½ï¼š åœºæ™¯1ï¼šæŸæ¶ˆæ¯ç±»å‹ä¸ºç¾¤å¾…åŠæˆ–è€…ç¾¤å…¬å‘Šã€‚ä»–ä»¬é‡ç”¨çš„æ¶ˆæ¯Cellå¯èƒ½ä¸€ç›´ï¼Œåªæ˜¯å±€éƒ¨UIçš„ä¸åŒã€‚ cellçš„æ˜¾ç¤ºéœ€è¦å®æ—¶æ˜¾ç¤ºæ­£ç¡®çš„æ¶ˆæ¯ç±»å‹å¯¹åº”çš„UI,è¿™ä¸ªæ—¶å€™å¯èƒ½é€šè¿‡æŸ¥æ•°æ®åº“æ‹¿åˆ°å€¼åå†æ›´æ–°UI. ä½†åœ¨è®¡ç®—cellé«˜åº¦çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯ç¾¤å¾…åŠè¿˜æ˜¯ç¾¤å…¬å‘Šï¼Œå®ƒä»¬çš„é«˜åº¦æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥æ— éœ€å¤šä½™çš„æŸ¥è¯¢ï¼Œåªéœ€loadæ•°æ®æºçš„æ—¶å€™æå‰ä¸€æ¬¡æŸ¥è¯¢å³å¯ã€‚ å½“æ¶‰åŠåˆ°å¯¹è±¡çš„copyçš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯å½“å¯¹è±¡é‡ŒæŸå±æ€§é‡å†™äº†getåˆå»æŸ¥è¯¢æ•°æ®åº“çš„æ—¶å€™ï¼Œæ€§èƒ½æŸè€—è¾ƒå¤§ï¼Œåœ¨copyWithZoneçš„æ–¹æ³•é‡Œèµ‹å€¼çš„æ—¶å€™å¯æ ¹æ®æƒ…å†µå°†self.propA æ”¹æˆ_propA è¿™æ ·å°±ä¸ä¼šè§¦å‘è€—æ—¶çš„æŸ¥è¯¢ã€‚ åœ¨æ¶ˆæ¯é¦–é¡µä¸æ–­åœ°æŸ¥è¯¢è®¡ç®—æ€»å¾—æœªè¯»æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶å½“æ¶ˆæ¯æ•°99+çš„æ—¶å€™ï¼Œç»ˆæ­¢æ²¡å¿…è¦çš„æŸ¥è¯¢æœºåˆ¶ã€‚å½“åœ¨æ”¶åˆ°é€šçŸ¥éœ€è¦æŸ¥è¯¢æœªè¯»æ•°ä¸šåŠ¡æ—¶å€™å¯æ§åˆ¶ä¸“é—¨çš„çº¿ç¨‹å»æŸ¥è¯¢è¯¥æœªè¯»æ•°ã€‚ ä¸ºäº†å‡å°‘é€šçŸ¥ä¹‹åçš„åˆ·æ–°ç‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¶ˆæ¯å…¥åº“ä¹‹åå‘å‡ºé€šçŸ¥ä¹‹å‰ï¼Œç”¨ä¸€ä¸ªä¸­è½¬å™¨ç›¸å½“äºä¸€ä¸ªå®šæ—¶æ—¶é—´å†…å»æ£€æŸ¥æœ‰è®°å½•åˆ™å³é€šçŸ¥åˆ·æ–°ä¸€æ¬¡ï¼ˆå¸¦å‚å°†æ¶ˆæ¯æ•°æ®å‘å‡ºå»ï¼‰ã€‚ æ€§èƒ½é—®é¢˜ï¼š å¤§éƒ¨åˆ†æ€§èƒ½æŸè€—å…¶å®è¿˜æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹è¿›è¡ŒIOè¯»å–ä¸Šï¼Œåº”è¯¥å°½é‡å»æ§åˆ¶IOçš„è¯»å–é¢‘æ¬¡ï¼Œä»¥åŠæ ¹æ®ä¸šåŠ¡æƒ…å†µæŒ‰å®é™…éœ€è¦å®ƒæ”¾åœ¨å­çº¿ç¨‹ä¸­å¤„ç†ï¼Œå†é€šè¿‡Blockå½¢å¼å»è¿”å›ã€‚è€Œblockå½¢å¼ä¼šç»™ç¼–å†™çš„ä»£ç é€ æˆblockåµŒå¥—ï¼Œå°¤å…¶æ˜¯å±‚æ¬¡å¤šçš„æ—¶å€™ï¼Œç»™é˜…è¯»ä¸Šé€ æˆä¸€å®šçš„å¹²æ‰°ã€‚æ‰€ä»¥åº”è¯¥æ§åˆ¶åµŒå¥—å±‚æ¬¡æ•°ï¼Œä¸¤è€…ç»“åˆã€‚ä¸šç•Œä¹Ÿæœ‰coobjcåç¨‹è§£å†³æ–¹æ¡ˆã€‚æˆ–è€…å‚è€ƒPromiseKit ç±»ä¼¼å‰ç«¯webçš„promiseæ–¹æ¡ˆã€‚ Sqliteä¸²è¡Œæ¨¡å¼ä¸‹æ•°æ®åº“è¯»å†™åœ¨å¤§é‡ç¦»çº¿æ¶ˆæ¯æ”¶åˆ°æ—¶å€™æ¯”è¾ƒå®¹æ˜“å‡ºç°å¡é¡¿çš„é—®é¢˜ï¼Œå› ä¸ºæ‰€è§¦å‘çš„è¯»å’Œå†™éƒ½æ˜¯ç©¿æ’æ’é˜Ÿã€‚å¹¶ä¸èƒ½å¾ˆå¥½åœ°å®ç°è¯»å†™å¹¶å‘ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥æ§åˆ¶å¤§é‡æ•°æ®å†™çš„æ—¶å€™å°½é‡å‰¥ç¦»å‡ºå†—åˆçš„ä¸šåŠ¡ï¼Œå°†æ•°æ®æ‰¹é‡äº‹åŠ¡å…¥åº“ï¼Œè¿™æ ·åœ¨æ€§èƒ½ä¸Šä¹Ÿä¸è‡³äºé‚£ä¹ˆå¡ã€‚å½“ç„¶æ­¤æ–¹æ¡ˆä¹Ÿéœ€è¦åå°é…åˆï¼Œçœ‹åå°æœåŠ¡å™¨æ˜¯ä¸€æ¡æ¡ä¸‹å‘ç»™å®¢æˆ·ç«¯è¿˜æ˜¯æ‰¹é‡å¤šæ¡ä¸‹å‘ç»™å®¢æˆ·ç«¯ã€‚ å½“åœ¨ç¾¤ä¼šè¯å‘é€ä¸€æ¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œæœ¬åœ°æœ‰ä¸€å¼ æ•°æ®å·²è¯»å›æ‰§è¡¨è®°å½•ç€æ¶ˆæ¯id, ç”¨æˆ·id,é˜…è¯»çŠ¶æ€ï¼Œåˆ›å»ºæ—¶é—´ï¼Œé˜…è¯»æ—¶é—´ç­‰ã€‚é¦–å…ˆéœ€è¦å°†ç¾¤é‡Œæ‰€æœ‰äººæ‰¹é‡å…¥åº“åˆå§‹ä¸ºæœªé˜…è¯»çŠ¶æ€ã€‚å½“æœ‰æ”¶åˆ°å›æ‰§æ¶ˆæ¯æ—¶ï¼Œå³æ›´æ–°å¯¹åº”çš„é˜…è¯»çŠ¶æ€ã€‚è¿™æ ·ç»™æ­¤è¡¨é€ æˆæ•°æ®é‡çš„åºå¤§å’Œè‡ƒè‚¿ã€‚è§£å†³æ–¹æ¡ˆï¼šå¯æ ¹æ®æ—¶é—´æˆ³åˆ é™¤ä¸€ä¸ªæœˆä¹‹å‰çš„åºŸè®°å½•ã€‚åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¯æ ¹æ®ä¸€ä¸ªç¾¤ä¸€ä¸ªå›æ‰§è®°å½•è¡¨ã€‚è¿™æ ·æœ‰åˆ©äºæ¶ˆæ¯çš„å¤šè¡¨è¿æ¥ä¸å¿«é€ŸæŸ¥è¯¢ã€‚ å½“æœ‰å¤§é‡æ•°æ®åœ¨å†…å­˜ä¸­æ’åºçš„æ—¶å€™ï¼Œå¦‚æœèƒ½ä»æ•°æ®åº“ä¸­æ’åºå°½é‡é€šè¿‡sqlæ’åºï¼Œæ•ˆç‡è¿œè¿œå¤§äºå†…å­˜æ’åºã€‚ å¦‚æœæœåŠ¡å™¨æ˜¯ä¸€æ¡æ¡ç¦»çº¿æ¶ˆæ¯ä¸‹å‘ï¼Œå¯æ ¹æ®æ¶ˆæ¯çš„ç±»å‹å±äºèŠå¤©æ¶ˆæ¯ä¸“é—¨é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—æ¥ç»´æŠ¤ï¼Œåå°çº¿ç¨‹getMessageå¾ªç¯å»å–çš„æ—¶å€™ï¼Œä¸€æ¬¡å°±å¯ä»¥æ‹¿å¤šä¸ªè¿›è¡Œæ‰¹é‡å…¥åº“ã€‚ å…³äºIM App æ¶ˆæ¯å­˜å‚¨é—®é¢˜ï¼šç›®å‰æ˜¯æ‰€æœ‰æ¶ˆæ¯éƒ½å­˜å‚¨åœ¨æœ¬åœ°å®¢æˆ·ç«¯ã€‚è™½ç„¶èŠ‚çœäº†æœåŠ¡å™¨èµ„æºï¼Œå¦‚æœä¸æ‰¹é‡ä¸‹å‘ï¼Œå®¢æˆ·ç«¯æ€§èƒ½ä¸Šå¤„ç†å¯èƒ½æœ‰ç‚¹é—®é¢˜ã€‚å¯èƒ½ä¼šæœ‰è½»å¾®å¡é¡¿ï¼Œå¦‚æœé‡å¤§ï¼Œé‚£å°±å¾ˆæ˜æ˜¾äº†ã€‚è™½ç„¶è¿›å…¥ä¼šè¯éƒ½æ˜¯ä»æœ¬åœ°æ‹‰æ•°æ®ï¼ŒæŸ¥è¯¢æ•°æ®ä¹Ÿéƒ½æ˜¯æœ¬åœ°è¿›è¡Œæœç´¢ï¼Œæ¯”è¾ƒå…¨ã€‚ä½†æ˜¯å¦‚æœåæœŸè¦åšå¤šç«¯æ•°æ®åŒæ­¥[æ¼«æ¸¸]ã€‚é‚£å…¶å®æœåŠ¡å™¨è¿˜æ˜¯è¦å­˜å‚¨ä¸€å®šæ—¶é—´æ®µçš„ç”¨æˆ·èŠå¤©æ¶ˆæ¯çš„ã€‚ç½‘ä¸ŠæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œè¿˜æœ‰ä¸€ç§åšæ³•æ˜¯è¿™æ ·ï¼šç”¨æˆ·æ¯æ¬¡ç™»å½•åï¼ŒIMæœåŠ¡ç«¯ä¼šä¸‹å‘æ¯ä¸ªä¼šè¯çš„è¿‘50æ¡æ¶ˆæ¯ï¼Œ10ä¸ªä¼šè¯ä¹Ÿæ‰500æ¡ï¼Œå…¶å®æ•°æ®é‡å¾ˆå°äº†ã€‚å½“ç”¨æˆ·ç‚¹å‡»æŸä¼šè¯æ—¶å€™ï¼Œå…ˆæ˜¾ç¤ºæœ€è¿‘çš„æ¶ˆæ¯ï¼Œå½“å¾€ä¸Šç¿»é¡µçš„æ—¶å€™ï¼Œæœ¬åœ°æ•°æ®åº“å¦‚æœæœ‰åˆ™æœ¬åœ°åŠ è½½å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¯·æ±‚ç½‘ç»œè¿›è¡Œæ‹‰æ•°æ®ã€‚è¿™æ ·æ¨æ‹‰ç»“åˆèƒ½å‡è½»å®¢æˆ·ç«¯å¾ˆå¤šé—®é¢˜ã€‚å®¢æˆ·ç«¯æ ¹æ®éœ€è¦è¿›è¡Œæ¶ˆæ¯å­˜å‚¨ã€‚ æ¥ä¸‹æ¥å°†ä¼šå†™ä¸€äº›åŠŸèƒ½ç‚¹ä¸Šçš„æŠ€æœ¯å¿ƒå¾—ï¼š[å›¾ç‰‡ç¼–è¾‘ï¼šæ¶‚é¸¦ï¼Œè£å‰ªï¼Œæ–‡å­—å¸–ï¼Œé©¬èµ›å…‹][èŠå¤©å›¾ç‰‡æµè§ˆï¼šå›¾ç‰‡ï¼Œgifï¼Œè§†é¢‘][æ¶ˆæ¯æ”¶è—][YYTextViewå¯Œæ–‡æœ¬éƒ¨åˆ†æ–‡å­—å…‰æ ‡é€‰æ‹©][æ­£åˆ™åŒ¹é…è§£å†³ç¾¤å†…é‚€è¯·æ–°æˆå‘˜ç‚¹å‡»é—®é¢˜][å¥‡æ€ªçš„ä¾§è¾¹æ é—®é¢˜][@æŸäººåœ¨æ–‡å­—å‰ä¸­åçš„å¤„ç†è§„åˆ™][ç¾¤æ’ä»¶å¦‚ä½•å¼€å‘ï¼Ÿ][æ•°æ®æºçš„çº¿ç¨‹å®‰å…¨][å›¾ç‰‡çš„è½¬å‘]","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"è¿™ä¸¤ä¸ªæœˆå­¦çš„å‰ç«¯çŸ¥è¯†","slug":"webSummary","date":"2020-04-25T02:25:11.000Z","updated":"2021-06-29T09:59:17.000Z","comments":true,"path":"2020/04/25/webSummary/","link":"","permalink":"https://www.littlewhale.xyz/2020/04/25/webSummary/","excerpt":"","text":"æ¡†æ¶æ–¹é¢ç›®å‰ä¸»è¦æŒæ¡ Vue ã€‚å¯ç‹¬ç«‹å¼€å‘ H5 é¡¹ç›®ï¼ŒPC Web åå°ç³»ç»Ÿ, å°ç¨‹åºå¼€å‘ã€‚ UI æ¡†æ¶ï¼šç”¨è¿‡ element-UI, iView, WeUI, WeUIJs. MiniUI ç¬¬ä¸‰æ–¹æ’ä»¶ï¼šä½¿ç”¨è¿‡ Moment æ—¥æœŸå¤„ç†,Echart å›¾è¡¨ç»Ÿè®¡, VueDraggable æ‹–åŠ¨ã€‚ ç½‘ç»œè¯·æ±‚ï¼šAxios å›¾ç‰‡ä¸Šä¼ : Weui-Uploader, Blob æˆ– base64 ä¸Šä¼ . IM: ä½¿ç”¨è¿‡ç½‘æ˜“äº‘ä¿¡ã€‚ ç§»åŠ¨ App: ç”¨ Swift å¼€å‘è¿‡ iOS é¡¹ç›®,Sass åº”ç”¨ã€‚(äº‘å–µ) ç†Ÿæ‚‰ Webpack, Sass, NodeJs, vue-Cli, Router, VueX. ä¸ªäºº Github Page æ¼”ç¤º","categories":[{"name":"Web","slug":"Web","permalink":"https://www.littlewhale.xyz/categories/Web/"}],"tags":[]},{"title":"å¿«é€Ÿæ­å»ºå‰ç«¯ç½‘ç»œè¯·æ±‚","slug":"webBegain","date":"2020-02-06T06:05:04.000Z","updated":"2020-05-27T00:53:54.000Z","comments":true,"path":"2020/02/06/webBegain/","link":"","permalink":"https://www.littlewhale.xyz/2020/02/06/webBegain/","excerpt":"HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚ 1ã€å®¢æˆ·ç«¯ å‘synè¯¢é—® ç»™ æœåŠ¡å™¨ 2ã€æœåŠ¡å™¨ å›åº”è¯¢é—®syn,å¹¶å‘é€ä¸€ä¸ªæŒ‡ä»¤ack å®¢æˆ·ç«¯ 3ã€å®¢æˆ·ç«¯ å› ack æœåŠ¡å™¨ã€‚ æ­£å¼è¿æ¥æˆåŠŸã€‚ å¼€å§‹å®¢æˆ·ç«¯è¯·æ±‚HttpæŠ¥æ–‡ ï¼ŒæœåŠ¡å™¨å“åº”æŠ¥æ–‡ã€‚","text":"HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚ 1ã€å®¢æˆ·ç«¯ å‘synè¯¢é—® ç»™ æœåŠ¡å™¨ 2ã€æœåŠ¡å™¨ å›åº”è¯¢é—®syn,å¹¶å‘é€ä¸€ä¸ªæŒ‡ä»¤ack å®¢æˆ·ç«¯ 3ã€å®¢æˆ·ç«¯ å› ack æœåŠ¡å™¨ã€‚ æ­£å¼è¿æ¥æˆåŠŸã€‚ å¼€å§‹å®¢æˆ·ç«¯è¯·æ±‚HttpæŠ¥æ–‡ ï¼ŒæœåŠ¡å™¨å“åº”æŠ¥æ–‡ã€‚ å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ å‘é€ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ—¥å¿—è®°å½•è¯·æ±‚123456789101112131415:method: POST:scheme: https:authority: vendor-api-prod.gaoying.com:path: &#x2F;customer&#x2F;logs&#x2F;Accept: application&#x2F;json, text&#x2F;plain, *&#x2F;*Content-Type: application&#x2F;x-www-form-urlencoded &#x2F;&#x2F;è¡¨å•æäº¤æ–¹å¼Origin: http:&#x2F;&#x2F;h5-vendor-dev.gaoying.comContent-Length: 236Accept-Language: zh-cnHost: vendor-api-dev.gaoying.comUser-Agent: Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 13_3 like Mac OS X) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) Mobile&#x2F;15E148Referer: http:&#x2F;&#x2F;h5-vendor-dev.gaoying.com&#x2F;page&#x2F;customerMain.html?customerId&#x3D;172821&amp;userId&#x3D;15243265&amp;token&#x3D;41cadcb70eed35378a92379871a51181Accept-Encoding: gzip, deflate, brConnection: keep-alive å“åº”12345status: 200Access-Control-Allow-Origin: *Content-Type: application&#x2F;json;charset&#x3D;UTF-8 &#x2F;&#x2F;jsonå“åº”æ ¼å¼Date: Fri, 27 Dec 2019 05:58:18 GMTServer: Tengine è¯·æ±‚æ–¹å¼æœ‰å“ªäº›ï¼Ÿ1234567891011121314METHODS: [ 'ACL', 'BIND', 'CHECKOUT', 'CONNECT', 'COPY', 'DELETE', 'GET', 'HEAD', 'LINK', 'LOCK', 'M-SEARCH', 'MERGE', 'MKACTIVITY', 'MKCALENDAR', 'MKCOL', 'MOVE', 'NOTIFY', 'OPTIONS', 'PATCH', 'POST', 'PROPFIND', 'PROPPATCH', 'PURGE', 'PUT', 'REBIND', 'REPORT', 'SEARCH', 'SOURCE', 'SUBSCRIBE', 'TRACE', 'UNBIND', 'UNLINK', 'UNLOCK', 'UNSUBSCRIBE' ] å“åº”ç æœ‰å“ªäº›ï¼Ÿ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465STATUS_CODES: &#123; '100': 'Continue', '101': 'Switching Protocols', '102': 'Processing', '103': 'Early Hints', '200': 'OK', '201': 'Created', '202': 'Accepted', '203': 'Non-Authoritative Information', '204': 'No Content', '205': 'Reset Content', '206': 'Partial Content', '207': 'Multi-Status', '208': 'Already Reported', '226': 'IM Used', '300': 'Multiple Choices', '301': 'Moved Permanently', '302': 'Found', '303': 'See Other', '304': 'Not Modified', '305': 'Use Proxy', '307': 'Temporary Redirect', '308': 'Permanent Redirect', '400': 'Bad Request', '401': 'Unauthorized', '402': 'Payment Required', '403': 'Forbidden', '404': 'Not Found', '405': 'Method Not Allowed', '406': 'Not Acceptable', '407': 'Proxy Authentication Required', '408': 'Request Timeout', '409': 'Conflict', '410': 'Gone', '411': 'Length Required', '412': 'Precondition Failed', '413': 'Payload Too Large', '414': 'URI Too Long', '415': 'Unsupported Media Type', '416': 'Range Not Satisfiable', '417': 'Expectation Failed', '418': \"I'm a Teapot\", '421': 'Misdirected Request', '422': 'Unprocessable Entity', '423': 'Locked', '424': 'Failed Dependency', '425': 'Unordered Collection', '426': 'Upgrade Required', '428': 'Precondition Required', '429': 'Too Many Requests', '431': 'Request Header Fields Too Large', '451': 'Unavailable For Legal Reasons', '500': 'Internal Server Error', '501': 'Not Implemented', '502': 'Bad Gateway', '503': 'Service Unavailable', '504': 'Gateway Timeout', '505': 'HTTP Version Not Supported', '506': 'Variant Also Negotiates', '507': 'Insufficient Storage', '508': 'Loop Detected', '509': 'Bandwidth Limit Exceeded', '510': 'Not Extended', '511': 'Network Authentication Required'&#125; å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡å™¨å“åº”æºå¸¦çš„httpsè¯ä¹¦HTTPS:åœ¨HTTPä¸TCPä¹‹é—´ åŠ å…¥SSLå±‚ï¼Œä¸€ä¸ªåŠ å¯†/èº«ä»½éªŒè¯å±‚ï¼Œç”¨äºå®‰å…¨çš„HTTPæ•°æ®ä¼ è¾“ã€‚ å®ƒæ˜¯ä¸€ä¸ªURI schemeï¼ˆæŠ½è±¡æ ‡è¯†ç¬¦ä½“ç³»ï¼‰ã€‚SSL : å®‰å…¨å¥—æ¥å±‚ ï¼Œ åœ¨ç½‘ç»œä¼ è¾“å±‚åŸºç¡€ä¸Šå¯¹ç½‘ç»œè¿æ¥è¿›è¡Œæ•°æ®åŠ å¯†ï¼› å…·æœ‰æ ¡éªŒæœºåˆ¶ï¼Œé…å¤‡èº«ä»½è¯ä¹¦ã€‚å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥å¯¹æ•°æ®åŠ å¯†ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åŠ å¯†æ•°æ®å å¯¹æ•°æ®è¿›è¡Œè§£å¯†ï¼› Https æœåŠ¡å™¨ç«¯å£æ˜¯443, Https å…¬å…±å¯†é’¥é‡‡ç”¨ RSAç®—æ³•åŠ å¯†ï¼Œ è¯ä¹¦ä¿¡æ¯å°†åœ¨è¯·æ±‚å“åº”ä¹‹å‰å›å¤ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ ¹æ®è¯ä¹¦ä¿¡æ¯ æœ¬åœ°åšä¸€ä¸ªå®‰å…¨æ ¡éªŒï¼Œé€šè¿‡åå†å…è®¸æœåŠ¡ç«¯å“åº”è¿”å›æ•°æ®ï¼Œå¦åˆ™å–æ¶ˆæœ¬æ¬¡è¯·æ±‚å“åº”ã€‚ç­¾åç®—æ³•ï¼šSHA-256 ECDSA å¸¸ç”¨åŠ å¯†ç®—æ³•å¯¹ç§°åŠ å¯† å•å‘æ•£åˆ—å‡½æ•°MD5 æ˜¯ä¸€ç§ ä¸å¯é€†çš„ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œä¸¥æ ¼æ¥è¯´ä¸æ˜¯åŠ å¯†ã€‚å•å‘æ•£åˆ—å‡½æ•°æ˜¯ä¸€ç§ä¸å¯é€†çš„ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œæ— æ³•é€šè¿‡å¯†æ–‡è¿˜åŸæˆæ˜æ–‡ï¼ˆæ³¨æ„ï¼šæ˜¯ç®—æ³•ä¸Šä¸èƒ½å®ç°ï¼‰ï¼Œå¯¹äºç®€å•çš„ MD5 åŠ å¯†ï¼ˆè¿™é‡Œçš„ç®€å•æ˜¯æŒ‡ï¼šæ˜æ–‡é•¿åº¦çŸ­ï¼Œä¸”å­—ç¬¦å•ä¸€ï¼Œå¹¶ä¸”è¿›è¡Œ HASH æ“ä½œçš„æ—¶å€™æ²¡æœ‰è¿›è¡ŒåŠ ç›å¤„ç†ï¼‰ï¼Œæ˜¯å¯ä»¥é€šè¿‡ä¸€äº›åœ¨çº¿å·¥å…·ç½‘ç«™è§£å¯†å‡ºæ¥ï¼Œå®åˆ™æ˜¯åˆ©ç”¨äº†å½©è™¹è¡¨çš„æŠ€æœ¯ã€‚ AES åŠ å¯† åŠ å¯†åŸç†ï¼š å­—èŠ‚ä»£æ¢ï¼Œè¡Œä½ç§»ï¼Œåˆ—æ··åˆï¼šï¼ˆçŸ©é˜µç›¸ä¹˜ï¼šçŠ¶æ€çŸ©é˜µ å’Œ å›ºå®šçŸ©é˜µç›¸ä¹˜ï¼‰ ï¼Œè½®é’¥åŠ å¯†ï¼šè½®é’¥åŠ å¯†æ˜¯å°†128ä½è½®å¯†é’¥KiåŒçŠ¶æ€çŸ©é˜µä¸­çš„æ•°æ®è¿›è¡Œé€ä½å¼‚æˆ–æ“ä½œ DES åŠ å¯† éå¯¹ç§°åŠ å¯† RSA åŠ å¯† å¿«é€Ÿæ­å»ºVue æ™®é€šh5é¡¹ç›®é¡µé¢çš„ç½‘ç»œè¯·æ±‚åœ¨å­¦ä¹ è¯·æ±‚ä¹‹å‰ï¼Œéœ€è¦æŒæ¡å¥½Javascriptè¯­è¨€ã€‚æœ€åŸºç¡€çš„çŸ¥è¯†é¦–å…ˆè¦äº†è§£å’ŒæŒæ¡å˜é‡ä¿®é¥°ç¬¦ï¼ŒFunction å’Œ Objectå¯¹è±¡ã€‚ js å˜é‡ä¿®é¥°ç¬¦let æ˜¯å±€éƒ¨å˜é‡ï¼Œéå¸¸é€‚åˆå¾ªç¯çš„æ—¶å€™ï¼›const æ˜¯åªè¯»å˜é‡ï¼Œ åˆå§‹åŒ–çš„æ—¶å€™å°±è¦èµ‹å€¼ï¼›åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼›var æ˜¯å…¨å±€å˜é‡ï¼Œå…¨å±€éƒ½å¯ä»¥ç”¨ã€‚ å‡½æ•° Function ä»ä¸Šå›¾æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸ªåä¸ºopençš„å‡½æ•°ï¼ŒåŒ…å«å‚æ•°ï¼Œè°ƒç”¨è€…ï¼Œé•¿åº¦ï¼Œåå­—ï¼Œä»¥åŠ Proto å¯¹è±¡ã€‚è¯¥å¯¹è±¡é‡Œé¢æœ‰ apply ,bind, call å‡½æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªcontructoræ„é€ å™¨ã€‚ Functionå±æ€§ï¼š length,name,prototype Functionæ–¹æ³•: Function.prototype.apply(), //è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¹¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ã€‚ å¯ä»¥å°†å‚æ•°ä½œä¸ºArrayå¯¹è±¡ä¼ é€’ Function.prototype.bind(), //åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥æ–°å‡½æ•°åœ¨è°ƒç”¨æ—¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ï¼Œå¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶åœ¨æä¾›çš„ä»»ä½•å‚æ•°ä¹‹å‰æ·»åŠ ç»™å®šçš„å‚æ•°åºåˆ—ã€‚ Function.prototype.call(), //è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¹¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ã€‚ å¯ä»¥æŒ‰åŸæ ·ä¼ é€’å‚æ•°ã€‚ Function.prototype.toString() //è¿”å›è¡¨ç¤ºå‡½æ•°æºä»£ç çš„å­—ç¬¦ä¸²ã€‚ //é¢˜å¤–è¯ï¼Œapply å’Œ bind å¢å¼ºä»£ç çš„æ‰©å±•æ€§ï¼Œç±»ä¼¼iOS çš„category;â‘ åŠ¨æ€æ”¹å˜thisçš„æŒ‡å‘ï¼Œä¹Ÿå°±æ˜¯thisä»callObjectåŠ¨æ€åˆ‡æ¢ä¸ºthisArgã€‚â‘¡callObject.method.apply(thisArg,thisArray)ï¼Œå¯ä»¥å°†thisArrayè½¬åŒ–ä¸ºargumentsï¼Œä¼ å…¥åˆ°callObject.methodå†…éƒ¨ã€‚æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä»£ç æ¥æµ‹è¯•bind çš„ç”¨æ³•ï¼š 12345678910111213//ç¨‹åºå‘˜çš„é»„é‡‘å¹´é¾„ 18 ~ 35var checkProgramerAgeRange = function (value) &#123; if (typeof value !== 'number') return false; else return value &gt;= this.minimum &amp;&amp; value &lt;= this.maximum;&#125;let programmerRange = &#123; minimum: 18, maximum: 35 &#125;;// æŠŠå‡½æ•°å†…éƒ¨çš„thisä¿®æ”¹ä¸ºrangeå¯¹è±¡ï¼Œlet boundCheckProgramerAgeRange = checkProgramerAgeRange.bind(programmerRange);console.log(boundCheckProgramerAgeRange(12)); Object å¯¹è±¡Object ç»§æ‰¿Function, æ‰©å±•äº†è‡ªå·±çš„è®¸å¤šæ–¹æ³•ã€‚ Object çš„å±æ€§æ„é€ å™¨ Object.prototype Object.assign() å°†æ‰€æœ‰å¯æšä¸¾çš„è‡ªèº«å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚ Object.create() ç”¨æŒ‡å®šçš„åŸå‹å¯¹è±¡å’Œå±æ€§åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚ Object.defineProperty() å®šä¹‰ä¸€ä¸ªpropertyç»™æŒ‡å®šå¯¹è±¡ Object.defineProperties() å®šä¹‰ä¸€ä¸ªå±æ€§ ç»™æŒ‡å®šå¯¹è±¡ Object.entries() è¿”å›ä¸€ä¸ªè£…æœ‰mapçš„æ•°ç»„ã€‚ Object.getOwnPropertyNames() å¾—åˆ°è¿™ä¸ªå¯¹è±¡è‡ªå·±çš„å±æ€§å Object.getPrototypeOf() å¾—åˆ°æŒ‡å®šç±»å‹çš„å±æ€§ Object.is() æ¯”è¾ƒå¯¹è±¡ Object.keys() å­—ç¬¦çªœå±æ€§ Object.values() 12345678910111213141516171819202122232425262728293031let stuObj = &#123;room:\"english\"&#125;;Object.defineProperties(stuObj,&#123; stuName:&#123; value:\"qiugaoying\", writable:true /* configurable, enumerable, value, writable, get, set */ &#125;, age: &#123; value:18, writable:true &#125;&#125;)//å¯ç›´æ¥è¦†ç›–æŸå¯¹è±¡çš„å±æ€§ï¼›Object.defineProperty(stuObj,\"stuName\",&#123; value:\"gaogao\", writable: true&#125;)stuObj.age = 20;console.log(stuObj.stuName); //gaogaoconsole.log(stuObj.age); //20console.log(Object.keys(stuObj)); //room å–å¾—å…¬å…±å±æ€§console.log(Object.values(stuObj)); //room å–å¾—å…¬å…±å±æ€§å€¼console.log(Object.getOwnPropertyNames(stuObj)); //room,age,stuName å–å¾—å¯¹è±¡æ‰€æœ‰å±æ€§console.log(Object.getOwnPropertyDescriptors(stuObj)); //è·å–å±æ€§æè¿°å™¨console.log(stuObj[\"stuName\"]); //gaogao å¯¹è±¡çš„å®šä¹‰ä¼ ç»Ÿæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡12345678910function Person(name,age)&#123; this.name = name; this.age = age;&#125;//é€šè¿‡å‡½æ•°çš„prototypeå…¬å…±ç©ºé—´å­˜å‚¨æ–¹æ³•Person.prototype.introduce = function()&#123; console.log(\"hello,my name is \"+this.name);&#125;new Person().introduce(); Classæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡1234567891011class Person&#123; constructor(name,age)&#123; this.name = name; this.age = age; &#125; introduce()&#123; console.log(\"æˆ‘çš„åå­—æ˜¯ï¼š\"+this.name); &#125;&#125; ç±»çš„æœ¬è´¨æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ç»§æ‰¿Function; æ‰€ä»¥introduceæ–¹æ³•è¿˜æ˜¯å­˜å‚¨åœ¨prototype å…¬å…±ç©ºé—´ä¸­ã€‚æ“ä½œç±»å‡½æ•°ä¹Ÿå¯é€šè¿‡Person.prototype å»åŠ¨æ€æ–°å¢æ–°çš„æ–¹æ³•ã€‚å¦å¤–è¦æ³¨æ„ä¸€ç‚¹ç±»çš„æ‰€æœ‰å®åˆ—å…±äº«åŸå‹çš„prototypeã€‚123let student = new Person(\"qiugaoying\",18);let student2 = new Person(\"lihua\",22); console.log(student.__proto__ == student2.__proto__); //ç»“æœä¸ºtrueã€‚ ç±»çš„æ‰€æœ‰å®åˆ—å…±äº«åŸå‹çš„prototype Ajax è¯·æ±‚é€šå¸¸ï¼Œå‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œéœ€è¦ä¼ å…¥åŸºç¡€å‚æ•°ï¼Œä¸šåŠ¡url, ä¸šåŠ¡å‚æ•°ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼Œå’Œå“åº”æ–¹å¼ã€‚ æ¥ç€å¯¹å“åº”æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†ï¼›å‰ç«¯é€šå¸¸çš„è¯·æ±‚æ–¹å¼æœ‰ è¡¨å•æäº¤ï¼ŒAjaxå¼‚æ­¥è¯·æ±‚ï¼ŒJqueryä¹Ÿæä¾›äº†ajaxå°è£…çš„å¿«æ·apiã€‚å¦å¤–ä¹Ÿæœ‰è¾ƒæ–°çš„æ¡†æ¶Axiosã€‚ ajax çš„å‡ºç°æ˜¯è§£å†³å±€éƒ¨æ•°æ®åˆ·æ–°çš„é—®é¢˜ã€‚å¯é€šè¿‡åå°å¼‚æ­¥è°ƒç”¨æ¥å£ å®ç°é¡µé¢å±€éƒ¨åˆ·æ–°ã€‚æµè§ˆå™¨åŸç”Ÿæœ‰ä¸ªXMLHttpRequestå¯¹è±¡ã€‚jQuery å‡ºæ¥ä¹‹åï¼Œajaxçš„è°ƒç”¨ç®€åŒ–äº†å¥½å¤š 1234567891011121314$ajax(&#123; type: 'POST', dataType: 'json', //æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ç±»å‹ contentType: 'application/json' ,//å‚æ•°ç±»å‹ url : \"http://127.0.0.1/log/list/\", headers:&#123;'Content-Type':'application/json'&#125;,//è¯·æ±‚å¤´, å†…å®¹ç¼–ç ç±»å‹ é»˜è®¤ \"application/x-www-form-urlencoded\" data: JSON.stringify(&#123;\"name\":\"qiugaoying\"&#125;), //ä¼ å‚ success: function(result,status,xhr)&#123; console.log(result); //è·å–ç»“æœ &#125;, error: function (xhr,status,error)&#123; console.log(error); &#125;&#125;); Axios æ¡†æ¶Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­. æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹ åœ¨axios çš„api æ–¹æ³•ã€‚ ä»å›¾å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸ªé»˜è®¤å±æ€§ä¸­æœ‰ä¸ªxmlHttpRequetç½‘ç»œé€‚é…å™¨ã€‚ å¯è®¾ç½®åŸºç¡€baseURL , ä»¥åŠè¯·æ±‚å¤´ï¼Œè¯·æ±‚è¶…æ—¶ç­‰ä¸€äº›åŸºç¡€è®¾ç½®ã€‚ è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ï¼Œæ”¯æŒé˜²å¾¡ XSRFã€‚ æä¾›äº†å¸¸ç”¨çš„get,post ç­‰è¯·æ±‚ã€‚è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®ã€‚è¿˜æä¾›è¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªå™¨ã€‚ scriptæ ‡ç­¾å¼•å…¥axios çš„js1234567891011121314&lt;script src=\"https://unpkg.com/axios/dist/axios.min.js\"&gt;&lt;/script&gt;//æ„å»ºä¸€ä¸ªaxioså®åˆ—åªè¯»å˜é‡ï¼Œè®¾ç½®åŸºç¡€urlconst http = axios.create(&#123; baseURL: 'https://vendor-api-prod.qiugaoying.com', timeout: 1000, transformRequest: [function(data) &#123; // Do whatever you want to transform the data let ret = '' for (let it in data) &#123; ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&amp;' &#125; return ret &#125;]&#125;); å°è£…åŸºç¡€å‚æ•°ï¼Œæ’åº åŠ å¯†ç­‰å¯¹è¯·æ±‚çš„åŸºç¡€å‚æ•°åšä¸€ä¸ªå°è£…ã€‚ å¤§éƒ¨åˆ†è¯·æ±‚éƒ½éœ€è¦å¸¦ä¸Šä¸€äº›åŸºç¡€å‚æ•°å’ŒuserId,token ç­‰å­—æ®µã€‚æœ€åå¯¹æ‰€æœ‰å­—æ®µkeyæ’åº,æœ€åè½¬æˆJson å­—ç¬¦ä¸²å†åŠ å¯†ã€‚ä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839const netManager = &#123; getRequestParams: function(params) &#123; let userId = localStorage.getItem(\"userId\"); let token = localStorage.getItem(\"token\"); // var userInfo = JSON.parse(userInfoStr); var obj = Object.assign(params, &#123; api_version: 1, //æ¥å£ç‰ˆæœ¬ platform: 2, //å¹³å°ç±»å‹ terminal: 1, //ç»ˆç«¯ç±»å‹ nonce: (Math.random().toFixed(8) + '').replace('0.', ''), //éšæœºæ•°; timestamp: new Date().getTime(), //å½“å‰æ—¶é—´æˆ³ æ¯«ç§’ user_id:123, //userId token: \"ec29c3af0dd998yjhgd22f9y867ws6512\", //token version_code: 100 //å½“å‰ç‰ˆæœ¬å· &#125;); let sign = MD5(this.strKeySort(obj)).toUpperCase(); //md5åŠ å¯† obj[\"Sign\"] = sign; return obj; &#125;, //keyæ’åº strKeySort: function(obj) &#123; const newkey = Object.keys(obj).sort(); const newArr = []; for (let i = 0; i &lt; newkey.length; i++) &#123; if (obj[newkey[i]] === 'undefined' || obj[newkey[i]] === 'null') &#123; obj[newkey[i]] = ''; &#125; newArr.push(`$&#123;newkey[i]&#125;=$&#123;obj[newkey[i]]&#125;`) &#125; const newStr = newArr.join('&amp;') + '&amp;secret_key=gaoyingAESKey'; return newStr; &#125;, //è·å–url åé¢å¸¦çš„å‚æ•°; getUrlKey: function (name) &#123; return decodeURIComponent((new RegExp('[?|&amp;]' + name + '=' + '([^&amp;;]+?)(&amp;|#|;|$)').exec(location.href) || [, \"\"])[1].replace(/\\+/g, '%20')) || null &#125;&#125; axioså®åˆ—å‘èµ·ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹è¿™é‡Œæ‹¿è¯·æ±‚ç”¨æˆ·ä¸ªäººä¸»é¡µåŸºç¡€ä¿¡æ¯ä¸ºæ ·ä¾‹ï¼ŒæŠŠä¸‹é¢æ–¹æ³•æ”¾å…¥ Vue çš„ methods ä¸­ã€‚ åŠ è½½loadingç”¨åˆ°çš„æ˜¯weiui.js.ä»¥ä¸‹å¯ä»¥å®ç°ä¸€ä¸ªåˆ†é¡µåŠ è½½çš„è¯·æ±‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657var vm = new Vue(&#123; el: '#PageContainer1', data: &#123; //åˆ†é¡µæ•°æ® pageNumber: 1, pageSize: 10, gyPageListStart: 0, hasMoreDataFlag: false, dataSource: [], &#125;, methods: &#123; execBaseCustomerRequest: function(url, listKey) &#123; var loading = null; if (this.pageNumber == 1) &#123; loading = weui.loading('åŠ è½½ä¸­'); &#125; let pageVue = this; //thisåœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æŒ‡å‘çš„å¯¹è±¡ä¸åŒï¼›ä¸´æ—¶å­˜å‚¨vueå¯¹è±¡ if (this.pageNumber == 1) &#123; this.gyPageListStart = 0; &#125; http.post(url, netManager.getRequestParams(&#123; customer_id: this.customerId, start: this.gyPageListStart, size: 10, &#125;)).then(function(response) &#123; if (loading) &#123; loading.hide(); &#125; let dataDic = response.data; if (dataDic.status == 1) &#123; var arr = pageVue.dataSource; if (pageVue.pageNumber == 1) &#123; arr = []; &#125; var dataArr = dataDic.data[listKey]; arr = arr.concat(dataArr); pageVue.gyPageListStart = dataDic.data.start; vm.$data.hasMoreDataFlag = (dataDic.data.more == 1); vm.$data.dataSource = arr; &#125; setTimeout(function() &#123; pageVue.requestLoadingFinished = true; &#125;, 800); //é‡ç½®åŠ è½½å®Œæˆçš„çŠ¶æ€ï¼› &#125;).catch(function(error) &#123; console.log(error); &#125;); &#125; &#125;&#125;);å…¶ä»–ï¼š url é€šå¸¸ä¼šæ”¾åˆ°ä¸€ä¸ªå…¨å±€æ–‡ä»¶ä¸­é…ç½®1234567const gaoyingAPI = &#123; customerList: \"/customer/list/\", customerLogs: \"/customer/logs/\", customerCoupons: \"/customer/coupons/\", customerOrders: \"/customer/orders/\", customerDetail: \"/customer/detail/\"&#125; Promise ç”¨æ³•ç®€è¦è®²è§£ä»ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°httpå‘é€post æ–¹æ³•è¯·æ±‚ä¹‹åï¼Œé€šè¿‡promiseè¯­æ³• thençš„å›è°ƒç›‘å¬å“åº”ç»“æœï¼Œé€šè¿‡catchæ–¹æ³• æ¥æ•æ‰å¼‚å¸¸é”™è¯¯å¤„ç†ã€‚ES6 å°±æ”¯æŒäº†Promiseçš„ç”¨æ³•ã€‚Promiseä¸­æ–‡ä¸ºæ‰¿è¯ºã€‚æœ‰ä¸‰ç§çŠ¶æ€ï¼špending(è¿›è¡Œä¸­)ã€fulfilled(å·²æˆåŠŸ)ã€rejected(å·²å¤±è´¥)ã€‚ å³çŠ¶æ€ä¸€æ—¦æ›´æ”¹å°±ä¸èƒ½å†æ¬¡æ”¹å˜èµ‹å€¼ã€‚è¿™ä¹Ÿæ˜¯æ‰¿è¯ºçš„æ„ä¹‰ã€‚Promiseå®åˆ—é€šè¿‡.thenæ–¹æ³•æˆ–è€….catchæ–¹æ³• è¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹æ¥å®ç°é“¾å¼è°ƒç”¨ã€‚.thenæ–¹æ³•å¯ä»¥è¿”å›æ™®é€šå€¼æˆ–è€…ä¸€ä¸ªæ–°çš„promiseã€‚ä¸è®¾ç½®è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›nullã€‚Promiseæœ‰å¾ˆå¤šç”¨æ³•ï¼Œä½†ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç”¨åˆ°Promiseå‘¢ï¼Ÿ åœ¨éœ€è¦å¤„ç†å¼‚æ­¥è€—æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ç”¨PromiseåŒ…è£…åè¿›è¡Œè¿”å›ã€‚Promiseç”¨çš„æ—¶å€™ä¼šé‡åˆ°å¾ˆå¤šç§æƒ…å†µï¼ŒPromiseä¹Ÿæä¾›äº†å¯¹åº”çš„è§£å†³æ–¹æ³•ã€‚ å½“Promise.thenæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseæ—¶å€™ï¼Œä¸‹ä¸€çº§çš„then å°†åœ¨ æ–°çš„Promise then æ‰§è¡Œ ä¹‹åæ‰§è¡Œã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970//Promise then åµŒå¥— æ–¹å¼ä¸€new Promise(resolve =&gt; &#123; console.log(\"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡\"); setTimeout(() =&gt; &#123; resolve(\"qiu\"); &#125;, 1000);&#125;).then(value =&gt; &#123; //ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu console.log(\"step1-result:\" + value); return new Promise(resolve =&gt; &#123; console.log(\"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡2\"); setTimeout(() =&gt; &#123; resolve(\"qiugao\"); &#125;, 1000); //è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚ &#125;).then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚ console.log(\"step2-1-result-event1:\" + value); return \"qiugaoying\"; &#125;).then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚ console.log(\"step2-1-result-event2:\" + value); return \"hello, my name is qiugaoying\"; &#125;);&#125;).then(value =&gt; &#123; //æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚ console.log(\"step1-result:\" + value);&#125;);/*consoleè¾“å‡ºç»“æœ:step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡step1-result:qiustep2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡2step2-1-result-event1:qiugaostep2-1-result-event2:qiugaoyingstep1-result:hello, my name is qiugaoying*///Promise then åµŒå¥—ï¼Œæ–¹å¼äºŒï¼š æŠŠthenç§»åˆ°åŒä¸€çº§å±•å¼€ã€‚æ‰§è¡Œæ‰“å°ç»“æœæ˜¯ä¸€æ ·çš„ã€‚new Promise(resolve =&gt; &#123; console.log(\"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡\"); setTimeout(() =&gt; &#123; resolve(\"qiu\"); &#125;, 1000);&#125;).then(value =&gt; &#123; //ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu console.log(\"step1-result:\" + value); return new Promise(resolve =&gt; &#123; console.log(\"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡\"); setTimeout(() =&gt; &#123; resolve(\"qiugao\"); &#125;, 1000); //è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚ &#125;);&#125;).then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚ console.log(\"step2-1-result-event1:\" + value); return \"qiugaoying\";&#125;).then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚ console.log(\"step2-1-result-event2:\" + value); return \"hello, my name is qiugaoying\";&#125;).then(value =&gt; &#123; //æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚ console.log(\"step1-result:\" + value);&#125;); then æ–¹æ³•æä¾›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯é€‰ã€‚ä¸€ä¸ªæ˜¯åä¸ºresolveçš„æˆåŠŸå›è°ƒ å’Œ å¦ä¸€ä¸ªåä¸ºreject çš„å¤±è´¥å›è°ƒã€‚é€šå¸¸å¤„ç†ä¸€ä¸ªå¤±è´¥å›è°ƒæˆ‘ä»¬ä¼šç”¨catchæ–¹æ³•å»æ•æ‰å¼‚å¸¸å’Œå¤±è´¥ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041new Promise(resolve =&gt; &#123; console.log(\"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡\"); setTimeout(() =&gt; &#123; resolve(\"qiu\"); &#125;, 1000);&#125;).then(value =&gt; &#123; //ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu console.log(\"step1-result:\" + value); return new Promise(resolve =&gt; &#123; console.log(\"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡\"); setTimeout(() =&gt; &#123; resolve(\"qiugao\"); &#125;, 1000); //è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚ &#125;);&#125;).then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚ let hasError = true if (hasError) &#123; throw new Error(\"step2-1-result-event1-erroræŠ¥å¼‚å¸¸\"); //æŠ›å‡ºå¼‚å¸¸ å°†ä¸å†ç»§ç»­æ‰§è¡Œthen, ç›´æ¥åˆ°catchå¼‚å¸¸ï¼›ä¸­é€”å¦‚æœæ²¡æœ‰é‡åˆ°catch å°†ç›´æ¥åˆ°æœ€åçš„catch. &#125; else &#123; console.log(\"step2-1-result-event1:\" + value); return \"qiugaoying\"; &#125;&#125;)/*.catch(err =&gt; &#123; console.log(\"ä¸­é€”catchErrorä¼šç»§ç»­å¾€ä¸‹èµ°:\" + err); return \"qiugaoying\" //ä¹Ÿä¼šè¿”å›ä¸€ä¸ªpromiseå®ä¾‹ï¼Œå¹¶ä¸”æ˜¯resolvedçŠ¶æ€ï¼Œä¸ä¼šè¢«æœ€åä¸€ä¸ªcatch æ•æ‰&#125;)*/.then(value =&gt; &#123; //ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚ console.log(\"step2-1-result-event2:\" + value); return \"hello, my name is \"+value;&#125;).then(value =&gt; &#123; //æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚ console.log(\"step1-result:\" + value);&#125;).catch(error =&gt; &#123; console.log(\"end error:\" + error);&#125;); finally æ–¹æ³•æ˜¯æœ€ç»ˆæ‰§è¡Œçš„æ–¹æ³•ï¼ˆæ— å‚ï¼‰ ï¼Œæ— è®ºçŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒæˆåŠŸ or å¤±è´¥ éƒ½ä¼šæ‰§è¡Œæ”¶å°¾ã€‚ Promise è¿˜æä¾›all æ–¹æ³•(æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢å€¼å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ï¼Œæˆ–è€…Promiseå¯¹è±¡)ï¼Œå¯ç”¨æ¥åšä¸€ä¸ªç±»ä¼¼æ‰¹é‡å¤„ç†ä¹‹åæ±‡æ€»çš„ä¸šåŠ¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970 testPromiseAll() &#123; function washFood()&#123; console.log('åšé¥­ç¬¬ä¸€æ­¥ï¼šæ´—èœ'); let hasError = false; if(hasError)&#123; return \"å‘ç°äº†ä¸€åªè™«å­ï¼æ´—æ‰å®ƒã€‚\"; &#125;else&#123; return 'èœæ´—å¹²å‡€äº†ã€‚'; &#125; &#125; function cutFood() &#123; console.log('åšé¥­ç¬¬äºŒæ­¥ï¼šåˆ‡èœ'); var p = new Promise(function (resolve, reject) &#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function () &#123; let cutFoodHasError = true; //æ§åˆ¶é»˜å¥‘åˆ‡èœæ—¶ æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ if(cutFoodHasError)&#123; reject(\"å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼\") &#125;else&#123; resolve('åˆ‡å¥½äº†èœã€‚'); &#125; &#125;, 1000); &#125;) /* è¯•è¯•æ‰“å¼€è¿™é‡Œçš„æ³¨é‡Š .catch(error=&gt;&#123; console.log(\"åˆ‡èœå¼‚å¸¸:\"+error); //å¼‚å¸¸æœ¬èº«å°±æ˜¯è¿”å›resolveçŠ¶æ€ï¼Œå€¼æ˜¯null console.log(\"ç”¨åˆ›å£è´´æ­¢è¡€ï¼Œç»§ç»­åšèœã€‚\"); &#125;); */ return p; &#125; function cooking() &#123; console.log('åšé¥­ç¬¬ä¸‰æ­¥ï¼šç‚’èœ'); var p = new Promise(function (resolve, reject) &#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function () &#123; resolve('èœå·²åšå¥½!'); &#125;, 2000); &#125;); return p; &#125; //æ•°ç»„é‡Œï¼Œå¦‚æœæ”¾Promise ä¸€å®šè¦è¿”å›çŠ¶æ€ã€‚ Promise.all([washFood(), cutFood(),cooking()]) .then((result) =&gt; &#123; console.log('ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼š'+result); console.log(result); &#125;).catch(error=&gt;&#123; console.log(\"èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:\"+error); &#125;) /* ç»“æœï¼š 1. å½“cutFoodHasError = trueï¼›æ‰“å°å¦‚ä¸‹ç»“æœï¼š èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼ 2. å½“cutFoodHasError = true ä¸” cutFoodæ–¹æ³•é‡Œçš„Promiseæœ‰å¼‚å¸¸æ•æ‰æ—¶ï¼š åˆ‡èœå¼‚å¸¸:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼ ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¹²å‡€äº†ï¼,,èœå·²åšå¥½ 3. å½“cutFoodHasError = false ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¥½äº†ã€‚åˆ‡å¥½äº†èœã€‚èœå·²åšå¥½ï¼ */ /* Promise.allä½¿ç”¨æ€»ç»“ï¼š æ•°ç»„é‡Œå¯ä»¥æ˜¯Promiseå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„å€¼ï¼Œåªæœ‰Promiseä¼šç­‰å¾…çŠ¶æ€æ”¹å˜ å½“æ‰€æœ‰çš„å­Promiseéƒ½å®Œæˆï¼Œè¯¥Promiseå®Œæˆï¼Œè¿”å›å€¼æ˜¯å…¨éƒ¨å€¼å¾—æ•°ç»„ æœ‰ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œè¯¥Promiseå¤±è´¥ï¼Œè¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ˆå¤±è´¥çš„å­Promiseç»“æœ */&#125;, Promise å¦å¤–ä¸€ä¸ªrace æ–¹æ³•ä¸all ä¸åŒçš„æ˜¯ï¼Œrace ç±»ä¼¼ç«èµ›ï¼Œå‚æ•°ä¸­çš„Promiseå®ä¾‹åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€å°±ä¼šè§¦å‘ç»“æœã€‚ 123456789101112131415161718192021222324252627282930//æ‰“å°ç»“æœï¼š å…”å­èµ¢äº†testPromiseRace() &#123; function rabbit() &#123; console.log('å…”å­é€‰æ‰‹'); var p = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; resolve('å…”å­èµ¢äº†'); &#125;, 1000); &#125;) .catch(error=&gt;&#123; console.log(\"å…”å­è·‘æ­¥ä¸­å‡ºç°å¼‚å¸¸:\"+error); &#125;); return p; &#125; function tortoise() &#123; console.log('ä¹Œé¾Ÿé€‰æ‰‹'); var p = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; resolve('ä¹Œé¾Ÿèµ¢äº†'); &#125;, 3000); &#125;); return p; &#125; Promise.race([rabbit(),tortoise()]) .then((result) =&gt; &#123; console.log(\"æ¯”èµ›ç»“æœ:\"+result); &#125;)&#125; Vue Cli è„šæ‰‹æ¶é¡¹ç›®è¯·æ±‚æ¨¡å—çš„æ­å»ºåœ¨vueçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡vue cliæ¥ç®¡ç†æˆ‘ä»¬çš„é¡¹ç›®ã€‚vue cli æ–¹å¼çš„ä¼˜åŠ¿åœ¨äºæ¨¡å—ä¹‹é—´å¯ä»¥å¾ˆå¥½åœ°ç›¸äº’å¼•ç”¨ï¼Œé€šè¿‡package åŒ…æ¥ç®¡ç†é…ç½®ç›¸å…³çš„æ¡†æ¶ä¾èµ–ã€‚ç”Ÿæ€éå¸¸ä¸°å¯Œï¼Œå¯è½»æ¾è¿ç”¨vue-router æ¥è§£å†³è·¯ç”±è·³è½¬ç­‰é—®é¢˜ã€‚é¦–å…ˆç¬¬ä¸€æ­¥æ˜¯è¦åˆ›å»ºä¸€ä¸ª vue clié¡¹ç›®ã€‚ åŸºç¡€å®‰è£…ç¯å¢ƒ123npm install -g @vue&#x2F;clivue create helloworld æ–¹å¼åˆ›å»ºé¡¹ç›®ä¹Ÿå¯ä»¥ ä½¿ç”¨GUI vue ui æ¥é€šè¿‡ç½‘é¡µ æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®æ“ä½œ æ¥åˆ›å»ºé¡¹ç›® package.json é…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445&#123; \"name\": \"gaoying-cli\", \"version\": \"0.1.0\", \"private\": true, \"scripts\": &#123; \"serve\": \"vue-cli-service serve\", \"build\": \"vue-cli-service build\", \"lint\": \"vue-cli-service lint\" &#125;, \"dependencies\": &#123; \"animate.css\": \"^3.7.2\", \"core-js\": \"^3.4.3\", \"vue\": \"^2.6.10\", \"vue-axios\": \"^2.1.5\", \"vue-router\": \"^3.1.3\", \"vuex\": \"^3.1.2\", \"weui.js\": \"^1.2.1\" &#125;, \"devDependencies\": &#123; \"@vue/cli-plugin-babel\": \"^4.1.0\", \"@vue/cli-plugin-router\": \"^4.1.1\", \"@vue/cli-plugin-vuex\": \"^4.1.1\", \"@vue/cli-service\": \"^4.1.0\", \"axios\": \"^0.19.0\", \"vue-template-compiler\": \"^2.6.10\", \"weui\": \"^2.1.3\" &#125;, \"eslintConfig\": &#123; \"root\": true, \"env\": &#123; \"node\": true &#125;, \"extends\": [ \"plugin:vue/essential\", \"eslint:recommended\" ], \"parserOptions\": &#123; \"parser\": \"babel-eslint\" &#125; &#125;, \"browserslist\": [ \"&gt; 1%\", \"last 2 versions\" ]&#125; é…ç½®main.js1234567891011121314151617181920212223242526272829303132333435363738394041import Vue from 'vue'import App from './App.vue'import router from './router'import store from './store'import axios from 'axios' //è¯·æ±‚ç½‘ç»œimport VueAxios from 'vue-axios' import weui from 'weui.js' //weuiJsimport 'weui' //weuiæ ·å¼import ymAPI from '@/assets/js/urlConfig.js' //Apiimport netManager from '@/assets/js/netManager.js' //è¯·æ±‚åŸºç¡€å‚æ•°æ‹¼æ¥import ymNativeBridge from '@/assets/js/ymNativeBridge.js' //åŸç”Ÿäº‹ä»¶äº¤äº’import animate from 'animate.css' const ymHttp = axios.create(&#123; baseURL: 'https://vendor-api-prod.gaoying.com', timeout: 1000, transformRequest: [function(data) &#123; // Do whatever you want to transform the data let ret = '' for (let it in data) &#123; ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&amp;' &#125; return ret &#125;]&#125;);Vue.config.productionTip = falseVue.prototype.$weui = weuiVue.prototype.$ymAPI = ymAPIVue.prototype.$netManager = netManagerVue.prototype.$ymNativeBridge = ymNativeBridgeVue.use(VueAxios, ymHttp,animate)new Vue(&#123; router, store, render: h =&gt; h(App)&#125;).$mount('#app'); è¯·æ±‚Demoç¤ºä¾‹//å’Œæ™®é€šh5 è¯·æ±‚ç½‘ç»œç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯é€šè¿‡æŒ‚è½½åˆ°Vueä¸Šçš„axios ï¼Œå¯ä»¥é€šè¿‡this.$http å–å¾—ã€‚this.$netManager ä¹Ÿç±»ä¼¼ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344execBaseCustomerRequest: function(url, listKey) &#123; var loading = null; if (this.pageNumber == 1) &#123; loading = this.$weui.loading('åŠ è½½ä¸­'); this.gyPageListStart = 0; &#125; let pageVue = this; //thisåœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æŒ‡å‘çš„å¯¹è±¡ä¸åŒï¼›ä¸´æ—¶å­˜å‚¨vueå¯¹è±¡ this.$http.post(url, this.$netManager.getRequestParams(&#123; customer_id: this.customerId, start: this.gyPageListStart, size: 10, &#125;)).then(function(response) &#123; if (loading) &#123; loading.hide(); &#125; let dataDic = response.data; if (dataDic.status == 1) &#123; var arr = pageVue.dataSource; if (pageVue.pageNumber == 1) &#123; arr = []; &#125; var dataArr = dataDic.data[listKey]; arr = arr.concat(dataArr); pageVue.gyPageListStart = dataDic.data.start; pageVue.hasMoreDataFlag = (dataDic.data.more == 1); pageVue.dataSource = arr; &#125;else&#123; pageVue.$weui.topTips(dataDic.errorMsg); &#125; setTimeout(function() &#123; pageVue.requestLoadingFinished = true; &#125;, 800); //é‡ç½®åŠ è½½å®Œæˆçš„çŠ¶æ€ï¼› &#125;).catch(function(error) &#123; console.log(error); &#125;);&#125; æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œå¯¼å‡º1234567891011121314151617181920212223242526import MD5 from './md5.js'export default &#123; getRequestParams: function(params) &#123; let userId = localStorage.getItem(\"userId\"); let token = localStorage.getItem(\"token\"); ...... &#125;&#125;//md5.js æ–‡ä»¶ä¸­ var MD5 = function (string) &#123; ......&#125;module.exports = MD5//æ¥å£é…ç½®urlConfig.js æ–‡ä»¶ä¸­const ymAPI = &#123; //å®¢æˆ·ä¿¡æ¯ customerList: \"/customer/list/\", customerLogs: \"/customer/logs/\", customerCoupons: \"/customer/coupons/\", customerOrders: \"/customer/orders/\", customerDetail: \"/customer/detail/\"&#125;module.exports = ymAPI export åœ¨jsæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ª.12345678//testExport.jsexport const person = &#123; name: \"qiugaoying\",sex:1, job:\"software Programmer\"&#125;export const addressInfo = &#123;province:\"å¹¿ä¸œçœ\", city:\"guangzhou\"&#125;export const introduct = function()&#123; console.log(\"my name is qiugaoying\");&#125;export æœ‰å¤šä¸ªçš„æ—¶å€™ ï¼Œå¯¼å…¥å¿…é¡»ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥.12import &#123;person,addressInfo&#125; from \"../../utils/testExport.js\"import * as allExp from \"../../utils/testExport.js\" //åŠ è½½å…¨éƒ¨export,å–ä¸ªåˆ«å æ€»ç»“ export default åªèƒ½å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ã€‚import å’Œ export åŒä¸€jsæ–‡ä»¶ä¸­å¯ä»¥å¯¼å…¥æˆ–å¯¼å‡ºå¤šæ¬¡ã€‚ module.exports å’Œ exports éƒ½æ˜¯ node ç«¯åœ¨ç”¨ï¼Œä¸¤è€…æŒ‡å‘åŒä¸€å†…å­˜å—ï¼Œå¯ä»¥å¯¼å‡ºå˜é‡ æˆ– å‡½æ•°ï¼Œå¯¹è±¡ã€‚ exports å˜é‡æ˜¯åœ¨æ¨¡å—çš„æ–‡ä»¶çº§ä½œç”¨åŸŸå†…å¯ç”¨çš„ï¼Œä¸”åœ¨æ¨¡å—æ‰§è¡Œä¹‹å‰èµ‹å€¼ç»™ module.exportsã€‚ H5 å’Œ App åŸç”Ÿäº¤äº’1234567891011121314151617181920212223242526272829303132333435363738394041//åŸç”Ÿè°ƒç”¨appexport default &#123; callApp:function(handlerMethod, parameters) &#123; if (!window.WeixinJSBridge || !WeixinJSBridge.invoke) &#123; var handlerInterface = 'YunMiaoNative'; var dic = &#123; 'handlerInterface': handlerInterface, 'function': handlerMethod, //è°ƒç”¨åŸç”Ÿçš„æŒ‡ä»¤ 'parameters': parameters //ä¼ é€’çš„å‚æ•°ï¼› &#125;; if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) &#123; window.webkit.messageHandlers[handlerInterface].postMessage(dic); &#125; else &#123; //å®‰å“ app.ymAppWebClick(); //dic &#125; &#125; else &#123; //åŒ…å«å¾®ä¿¡åŠŸèƒ½ï¼Œæ¯”å¦‚å¯å”¤èµ·å°ç¨‹åºã€‚ &#125; &#125;, //åŸç”Ÿè°ƒç”¨app å¹¶ä¼ é€’å‚æ•°ç»™H5 callbackH5: function(handlerMethod, parameters, callbackMethod) &#123; if (!window.WeixinJSBridge || !WeixinJSBridge.invoke) &#123; var handlerInterface = 'YunMiaoH5'; var dic = &#123; 'handlerInterface': handlerInterface, 'function': handlerMethod, //è°ƒç”¨åŸç”Ÿçš„æŒ‡ä»¤ 'parameters': parameters, //ä¼ é€’çš„å‚æ•°ï¼› 'callbackMethod': callbackMethod //å›è°ƒçš„å‡½æ•° &#125;; if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) &#123; window.webkit.messageHandlers[handlerInterface].postMessage(dic); &#125; else &#123; //å®‰å“ app.ymAppWebClick(JSON.stringify(dic)); &#125; &#125; else &#123; //åŒ…å«å¾®ä¿¡åŠŸèƒ½ï¼Œæ¯”å¦‚å¯å”¤èµ·å°ç¨‹åºã€‚ &#125; &#125;&#125;","categories":[{"name":"Web","slug":"Web","permalink":"https://www.littlewhale.xyz/categories/Web/"}],"tags":[]},{"title":"é€’å½’ï¼Œåˆ†æ²»ï¼Œæ ‡è®°","slug":"algorithmExercises","date":"2020-02-02T02:11:19.000Z","updated":"2020-05-27T00:57:27.000Z","comments":true,"path":"2020/02/02/algorithmExercises/","link":"","permalink":"https://www.littlewhale.xyz/2020/02/02/algorithmExercises/","excerpt":"ç›®å½• æ‰“å°å›¾æ¡ˆ ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±• ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€ï¼šä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥ ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼šå¯¹è§’çº¿ç›¸ç­‰ æ¨è¾‰ä¸‰è§’ èºæ—‹çŸ©é˜µ è›‡å½¢çŸ©é˜µ 1 è›‡å½¢çŸ©é˜µ 2 è¶£å‘³ä¹ é¢˜ æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ æ‰¾å‡ºæœ€é•¿çš„å•è¯ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬ ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•° ç»Ÿè®¡ç­çº§æˆç»©æ’å Java ç‰ˆæœ¬ ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬ æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬ æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬ æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„ åŸºç¡€æ’åº æ’å…¥æ’åº é€‰æ‹©æ’åº å†’æ³¡æ’åº å¿«é€Ÿæ’åº äºŒåˆ†æ³•æŸ¥æ‰¾ Json æ ¼å¼çš„æ ¡éªŒ","text":"ç›®å½• æ‰“å°å›¾æ¡ˆ ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±• ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€ï¼šä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥ ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼šå¯¹è§’çº¿ç›¸ç­‰ æ¨è¾‰ä¸‰è§’ èºæ—‹çŸ©é˜µ è›‡å½¢çŸ©é˜µ 1 è›‡å½¢çŸ©é˜µ 2 è¶£å‘³ä¹ é¢˜ æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ æ‰¾å‡ºæœ€é•¿çš„å•è¯ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬ ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•° ç»Ÿè®¡ç­çº§æˆç»©æ’å Java ç‰ˆæœ¬ ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬ æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬ æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬ æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„ åŸºç¡€æ’åº æ’å…¥æ’åº é€‰æ‹©æ’åº å†’æ³¡æ’åº å¿«é€Ÿæ’åº äºŒåˆ†æ³•æŸ¥æ‰¾ Json æ ¼å¼çš„æ ¡éªŒ æ‰“å°å›¾æ¡ˆç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•123456789101112131415161718192021222324252627282930313233343536373839//ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•void printThreeCornerRect1()&#123; int i,j,row; printf(\"è¾“å…¥è¡Œï¼š\"); scanf(\"%d\",&amp;row); int col=2*row-1; char words[27]=\" ABCDEFGHIJKLMNOPQRSTUVWXYZ\"; int center = col/2 + 1; printf(\"center:%d\\n\",center); for(i=1;i&lt;=row;i++)&#123; for(j=1;j&lt;=col;j++)&#123; if(j&lt;=row-i||j&gt;col-(row-i)) printf(\" \"); else&#123; if(j==center &amp;&amp; i &gt;1)&#123; printf(\"%c\",words[i+1]); &#125;else&#123; printf(\"%c\",words[i]); &#125; &#125; &#125; printf(\"\\n\"); &#125;&#125;æ‰“å°ç»“æœï¼šè¾“å…¥è¡Œï¼š9 A BCB CCDCC DDDEDDD EEEEFEEEE FFFFFGFFFFF GGGGGGHGGGGGG HHHHHHHIHHHHHHH IIIIIIIIJIIIIIIII æ€è·¯åˆ†æï¼š æ ¹æ®è¾“å…¥è¡Œæ•°ï¼Œå…ˆè¾“å‡ºä¸€ä¸ªçŸ©å½¢å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç¡®å®šæ¯ä¸€è¡Œå­—æ¯çš„ä¸ªæ•°ä¸º 2 n - 1ã€‚ æ¯è¡Œæ˜¾ç¤ºçš„æ—¶å€™æ ¹æ®æ¡ä»¶å¯¹æ˜¾ç¤ºå­—æ¯é™¤å¤–çš„åœ°æ–¹æŒ–ç©ºï¼Œç”¨ * è¡¨ç¤º æ‰“å°å­—æ¯å–æ•°ç»„å¯¹åº”ä¸‹æ ‡è¡Œæ•°çš„å­—æ¯ã€‚æ­£ä¸­é—´çš„ä½ç½®ä¸ºä¸‹æ ‡åŠ  1 è¾“å‡ºä¸‹ä¸€ä¸ªå­—æ¯ã€‚123456789********A***************BCB*************CCDCC***********DDDEDDD*********EEEEFEEEE*******FFFFFGFFFFF*****GGGGGGHGGGGGG***HHHHHHHIHHHHHHH*IIIIIIIIJIIIIIIII ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€: ä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥1234567891011121314151617181920212223242526272829303132333435363738394041//ç©ºå¿ƒè±å½¢void printLingxingRect()&#123; int i,j,e,f; int c; char word[10] = \"*\"; printf(\"è¯·è¾“ä»£è¡¨å›¾æ¡ˆ:\"); scanf(\"%s\",&amp;word); printf(\"è¯·è¾“å…¥è¡Œ:\"); scanf(\"%d\",&amp;c); printf(\"\\n\"); for(i=1;i&lt;=c;i++) //æ‰“å°ä¸ŠåŠéƒ¨åˆ† &#123; for(j=1;j&lt;=c+1-i;j++) &#123; printf(\" \"); //å·¦è¾¹æŒ–ç©º &#125; for(j=1;j&lt;=(2*i-1);j++) &#123; if(j&gt;1&amp;&amp;j&lt;(2*i-1)) printf(\" \"); //ä¸­é—´æŒ–ç©º else printf(\"%s\", word); &#125; printf(\"\\n\"); &#125; for(e=2;e&lt;=c;e++) //æ‰“å°ä¸‹åŠéƒ¨åˆ† &#123; for(f=1;f&lt;=e;f++) &#123; printf(\" \"); &#125; for(f=1;f&lt;=2*c+1-2*e;f++) &#123; if(f&gt;1&amp;&amp;f&lt;2*c+1-2*e) printf(\" \"); else printf(\"%s\",word); &#125; printf(\"\\n\"); &#125;&#125; æ•ˆæœå¦‚ä¸‹ï¼š1234567891011121314151617181920è¯·è¾“ä»£è¡¨å›¾æ¡ˆ:*è¯·è¾“å…¥è¡Œ:9 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * æ€è·¯åˆ†æï¼š ç”±ä¸€ä¸ªæ­£ç­‰è…°ä¸‰è§’å½¢å’Œå€’ç­‰è…°ä¸‰è§’å½¢ç»„æˆã€‚ å¯¹ä¸ŠåŠéƒ¨åˆ†ç­‰è…°ä¸‰è§’å½¢å·¦è¾¹æŒ–ç©ºï¼Œä¸­é—´æŒ–ç©ºã€‚ å¯¹ä¸‹åŠéƒ¨åˆ†å€’ç­‰è…°ä¸‰è§’å½¢å·¦è¾¹æŒ–ç©ºï¼Œä¸­é—´æŒ–ç©ºã€‚ä¸‹å›¾ä¸ºæ•°å­— 0 æ›¿ä»£æŒ–ç©ºä½ç½®çš„åˆ†ææ€è·¯ã€‚1234567891011121314151617000000000*00000000*0*0000000*000*000000*00000*00000*0000000*0000*000000000*000*00000000000*00*0000000000000*0*000000000000000*00*0000000000000*000*00000000000*0000*000000000*00000*0000000*000000*00000*0000000*000*00000000*0*000000000* ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼š å¯¹è§’çº¿ç›¸ç­‰12345678910111213141516171819void printLingxingRect2()&#123; int r,c,row; printf(\"è¯·è¾“å…¥è±å½¢çš„å¯¹è§’çº¿çš„é•¿åº¦:\"); scanf(\"%d\",&amp;row); for(r=1;r&lt;=row*2-1;r++) &#123; for(c=1;c&lt;=row*2-1;c++) &#123; if((r&lt;=row &amp;&amp; (c==row+1-r)) || c==row-1+r) printf(\"*\"); else if((r&gt;=row &amp;&amp; (c==r-row+1)) || (c==row+row*2-1-r)) printf(\"*\"); else printf(\" \"); &#125; printf(\"\\n\"); &#125;&#125; æ€è·¯åˆ†æï¼š æ ¹æ®è±å½¢çš„å¯¹è§’çº¿ç›¸ç­‰çš„æ•°æ®çŸ¥è¯†ï¼Œé¦–å…ˆç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªçŸ©å½¢å›¾æ¡ˆå¦‚å›¾æ‰€ç¤º: æ•°å­— 0 ä¸ºæŒ–ç©ºé¡¹ã€‚ ç¬¬ä¸€ä¸ªæ¡ä»¶å…ˆåˆ¤æ–­ä¸ŠåŠéƒ¨åˆ†å·¦è¾¹å’Œå³è¾¹æ˜Ÿæ˜Ÿä½ç½®ã€‚ ç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­ä¸‹åŠéƒ¨åˆ†å·¦è¾¹å’Œå³è¾¹æ˜Ÿæ˜Ÿçš„ä½ç½®ã€‚ ä»¥ä¸ŠåŠéƒ¨åˆ†ä¸ºåˆ— â€œc == row-1+râ€ å’Œ å·¦è¾¹ â€œrow+1-râ€ å¯¹ç§°ã€‚ 123456789101112131415161718è¯·è¾“å…¥è±å½¢çš„å¯¹è§’çº¿çš„é•¿åº¦:900000000*000000000000000*0*0000000000000*000*00000000000*00000*000000000*0000000*0000000*000000000*00000*00000000000*000*0000000000000*0*000000000000000*0*0000000000000*000*00000000000*00000*000000000*0000000*0000000*000000000*00000*00000000000*000*0000000000000*0*000000000000000*00000000 æ¨è¾‰ä¸‰è§’1234567891011121314151617181920212223242526//æ¨è¾‰ä¸‰è§’void yanghui_Corner()&#123; int arr[15][15]; int i,j; for(i=0;i&lt;10;i++)&#123; arr[i][0]=1; arr[i][i]=1; &#125; //ä»ç¬¬ä¸‰è¡Œå¼€å§‹å‡ºç°è§„å¾‹ for(i=2;i&lt;10;i++)&#123; for(j=1;j&lt;i;j++)&#123; arr[i][j]=arr[i-1][j]+arr[i-1][j-1]; &#125; &#125; //è¾“å‡º for(i=0;i&lt;10;i++)&#123; for(j=0;j&lt;=i;j++)&#123; printf(\"%d\\t\",arr[i][j]); &#125; printf(\"\\n\"); &#125;&#125; 123456789101 1 1 1 2 1 1 3 3 1 1 4 6 4 1 1 5 10 10 5 1 1 6 15 20 15 6 1 1 7 21 35 35 21 7 1 1 8 28 56 70 56 28 8 1 1 9 36 84 126 126 84 36 9 1 æ€è·¯åˆ†æï¼š ä»å›¾ä¸­è§‚å¯Ÿåˆ°è§„å¾‹ï¼Œç¬¬äºŒè¡Œå¼€å§‹ï¼Œæ•°å­— 2 æ˜¯å‰ä¸€è¡Œçš„å¯¹åº”åˆ—å’Œå‰ä¸€ä¸ªä½ç½®ç›¸åŠ æ‰€å¾—ç»“æœã€‚ æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªä½ç½®éƒ½æ˜¯ 1ï¼Œæ¯ä¸€è¡Œçš„æœ€åä¸€ä¸ªä½ç½®éƒ½æ˜¯ 1ã€‚ ç¬¬ä¸€æ­¥ï¼š å»ºç«‹äºŒç»´æ•°ç»„ã€‚å…ˆç»™æ¯ä¸€è¡Œçš„çš„ç¬¬ä¸€ä¸ªä½ç½®å’Œ n è¡Œçš„ç¬¬ n ä¸ªä½ç½®èµ‹å€¼1ã€‚ ç¬¬äºŒæ­¥ï¼šä»ç¬¬ 3 è¡Œå¼€å§‹å‡ºç°è§„å¾‹å¯å¾—å‡º â€œarr[i][j]=arr[i-1][j]+arr[i-1][j-1]â€ è¡¨è¾¾å¼ã€‚èºæ—‹çŸ©é˜µ12345678910111213141516171819202122232425262728293031323334353637383940414243444546#define len 9void luoxuan()&#123; int arr[len][len]; //å¼€å§‹åˆå§‹åŒ–ï¼Œç»™æ•°ç»„èµ‹å€¼0 for(int i=0;i&lt;len;i++)&#123; for(int j=0;j&lt;len;j++)&#123; arr[i][j] = 0; &#125; &#125; arr[0][0] = 1; //é¡¶è§’ç¡®å®šäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºç¬¬ä¸€è¡Œå³è¾¹çš„æ•°å­— int circleTimes = len/2 + 1; int circelIndex = 0; //åœˆçš„æ•°é‡ //èµ‹å€¼è¿‡ç¨‹ while(circleTimes&gt;0)&#123; //æµ‹è¯•æ—¶å€™ï¼Œæ¯ä¸€åœˆç»“æŸå¯ä»¥æ‰“å°å‡ºçœ‹ä¸€ä¸‹ï¼š&amp;&amp; circelIndex &lt;1 circelIndex ++; printf(\"ç¬¬%dåœˆ\\n\",circelIndex); for(int column = 1;column &lt;= len-circelIndex; column++)&#123; //å¾€å³æ’åˆ— if(column &gt;= circelIndex-1)&#123; arr[circelIndex-1][column] = arr[circelIndex -1][column-1] + 1; &#125; &#125; for(int row = circelIndex; row&lt;= len-circelIndex; row++)&#123; //å¾€ä¸‹æ’åˆ—ï¼Œä»ç¬¬äºŒè¡Œï¼Œç¬¬X-i åˆ—å¼€å§‹ arr[row][len-circelIndex] = arr[row-1][len-circelIndex] + 1; &#125; for(int column = len-circelIndex-1; column &gt;= circelIndex-1; column--)&#123; //å¾€å·¦æ’ï¼Œä¸‹æ ‡é€’å‡1ï¼Œå€¼ä¸ºåä¸€ä¸ª + 1 arr[len-circelIndex][column] = arr[len-circelIndex][column+1] + 1; &#125; for(int row =len-circelIndex-1; row &gt; circelIndex-1; row--)&#123; //å¾€ä¸Šæ’åˆ— arr[row][circelIndex-1] = arr[row+1][circelIndex-1] + 1; &#125; circleTimes--; &#125; //è¾“å‡ºäºŒç»´æ•°ç»„ for(int i=0;i&lt;len;i++)&#123; for(int j=0;j&lt;len;j++)&#123; printf(\"%d\\t\",arr[i][j]); &#125; printf(\"\\n\\n\"); &#125;&#125; æ€è·¯åˆ†æï¼šç”±ä¸Šå›¾ï¼Œå½“æˆ‘ä»¬æ‰“å° 9 è¡Œçš„æ—¶å€™ï¼Œåˆ—ä¹Ÿæ˜¯ 9 åˆ—ã€‚ç¡®å®šäºŒç»´æ•°ç»„çš„é•¿åº¦ã€‚ä¸ºäº†æ–¹ä¾¿è§†è§‰ä¸Šå¯ä»¥è§‚å¯Ÿå‡ºæ¯ä¸€æ¬¡ç»•åœˆèµ‹å€¼çš„æ•ˆæœï¼Œå¯å°†äºŒç»´æ•°ç»„æ¯ä¸€ä¸ªä½ç½®åˆå§‹åŒ–èµ‹å€¼ä¸º 0ã€‚æ ¹æ® 9 è¡Œï¼Œæˆ‘ä»¬ç¡®å®šç»•åœˆæ•°ä¸º circleTimes = 5ã€‚ç¡®å®šå¾ªç¯æ¡ä»¶ä¹‹åï¼Œä¸ºæ¯ä¸€æ¬¡ç»•åœˆçš„äºŒç»´æ•°ç»„æŸäº›ä½ç½®èµ‹å€¼ã€‚ä¾æ¬¡ä»å‘å³ã€å‘ä¸‹ã€å‘å·¦ã€å‘ä¸Šè¿›è¡Œèµ‹å€¼ã€‚circleTimes åœˆæ•°ç›¸å¯¹åº”å‡ 1ã€‚ å¾€å³æ’åˆ—ï¼šåˆ—çš„èµ·å§‹ä½ç½®ä¸º1ï¼Œæ¡ä»¶ä¸º len - circleIndexï¼Œå€¼ä¸ºç›¸åŒè¡Œçš„å‰ä¸€åˆ—çš„å€¼åŠ  1ã€‚èµ‹å€¼çš„æ—¶å€™è¿˜éœ€æ§åˆ¶åˆ—å¤§äºç­‰äº circleIndex å‡ 1ã€‚å¦‚å›¾æ‰€ç¤ºæ§åˆ¶ 32ï¼Œ56ï¼Œ72ï¼Œ80ï¼Œ81 çš„åˆ—èµ·å§‹ä½ç½®ã€‚ å¾€ä¸‹æ’åˆ—ï¼šè¡Œçš„èµ·å§‹ä½ç½®ä¸ºç¬¬å‡ åœˆçš„ç´¢å¼•ï¼Œ å€¼ä¸ºå‰ä¸€è¡Œçš„ç›¸åŒåˆ—çš„å€¼åŠ  1ã€‚ å¾€å·¦æ’åˆ—ï¼šåˆ—èµ·å§‹ä½ç½®ä¸º len - ç¬¬å‡ åœˆ - 1ï¼Œå€¼ä¸ºåŒè¡Œçš„åä¸€åˆ—å€¼åŠ  1ã€‚ å¾€ä¸Šæ’åˆ—ï¼šè¡Œçš„èµ·å§‹ä½ç½®ä¸º len - ç¬¬å‡ åœˆ -1ï¼Œå€¼ä¸ºç›¸åŒåˆ—çš„åä¸€è¡Œå€¼åŠ  1ã€‚ è›‡å½¢çŸ©é˜µ112345678910111213141516171819202122232425262728293031323334353637/* 1 3 6 10 15 2 5 9 14 4 8 13 7 12 11*/ public static void main(String[] args) &#123; Test3 t=new Test3(); t.test(5); &#125; public void test(int n) &#123; int arr[][]=new int[n][n]; arr[0][0]=1; int column=n; for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; column; j++) &#123; if(j==0)&#123; if(i&gt;0) arr[i][j]=arr[i-1][j]+i; &#125;else&#123; arr[i][j]=arr[i][j-1]+(i+1+j); &#125; &#125; column-=1; &#125; for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; if(arr[i][j]!=0) System.out.print(arr[i][j]+\" \"); &#125; System.out.println(); &#125; &#125; æ€è·¯åˆ†æï¼š ç¬¬nè¡Œç¬¬ä¸€åˆ—å€¼ä¸ºå‰ä¸€è¡Œçš„ç¬¬ä¸€åˆ—å€¼åŠ  nã€‚ å…¶ä»–åˆ—èµ‹å€¼ä¸ºå‰ä¸€åˆ—å€¼åŠ è¡Œ i å’Œåˆ— j å†åŠ  1ã€‚ æ§åˆ¶ç¬¬äºŒå±‚å¾ªç¯åˆ—çš„èŒƒå›´ï¼Œåˆ—éšè¡Œå˜åŒ–é€’å‡ã€‚ è›‡å½¢çŸ©é˜µ2123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960æ‰“å°ç»“æœï¼š1 2 6 7 15 16 28 29 3 5 8 14 17 27 30 4 9 13 18 26 31 10 12 19 25 32 11 20 24 33 21 23 34 22 35 36 public static void main(String[] args) &#123; Test4 t=new Test4(); t.printData(t.test2(8)); &#125; public int[][] test2(int n)&#123; int arr[][]=new int[n][n]; for (int i = 0; i &lt; n; i++) &#123; for (int j=0,c=i;j&lt;=i&amp;&amp;c&gt;=0;j++,c--) &#123; if(i%2==0)&#123; if(c==i)&#123; if(c==0) arr[c][j]=1; //arr[0][0] = 1 else arr[c][j]=arr[c-1][j]+1; //å‰ä¸€è¡ŒåŠ 1 &#125; else arr[c][j]=arr[c+1][j-1]+1; //åä¸€è¡Œå‰ä¸€åˆ—åŠ 1 &#125;else&#123; if(c==i) arr[j][c]=arr[j][c-1]+1; //å‰ä¸€åˆ—åŠ 1 else arr[j][c]=arr[j-1][c+1]+1;//å‰ä¸€è¡Œåä¸€åˆ—åŠ 1 &#125; &#125; &#125; return arr; &#125; public void printData(int arr[][])&#123; int n=arr.length; for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; n; j++) &#123; if(arr[i][j]&gt;=10) System.out.print(arr[i][j]+\" \"); else if(arr[i][j]!=0) System.out.print(\"0\"+arr[i][j]+\" \"); &#125; System.out.println(); &#125; &#125; æ€è·¯åˆ†æï¼šæ ¹æ®è§„å¾‹ï¼Œæ ¹æ®è¡Œä¸‹æ ‡å¥‡å¶æ•°æ‹†åˆ†èµ‹å€¼ã€‚ æ•°å­— {02,07,16,29} ä¸ºåœ¨å‰ä¸€åˆ—åŠ  1ã€‚æ•°å­— {03,08,17,30} ä¸ºå‰ä¸€è¡Œçš„åä¸€åˆ—åŠ  1ã€‚ æ•°å­— {05,06,15,28} ä¸ºåä¸€è¡Œçš„å‰ä¸€åˆ—åŠ  1ã€‚æ•°å­— 4 ä¸ºå‰ä¸€è¡ŒåŠ  1ã€‚ è›‡å½¢çŸ©é˜µ2123456789101112131415161718192021222324252627282930313233/* 1 5 2 8 6 3 10 9 7 4 è§‚å¯Ÿ arr[1][0] arr[3][3] arr[2][0] arr[3][2] */ public static void main(String[] args) &#123; Test5 t=new Test5(); t2.printData(t.test(10)); &#125; public int[][] test(int n)&#123; int arr[][]=new int[n][n]; for (int i = 0; i &lt; n; i++) &#123; for (int j = 0,c=i;j&lt;n&amp;&amp;c&lt;n; j++,c++) &#123; if(c==i)&#123; if(c==0) arr[c][j]=1; //arr[0][0] = 1 else arr[c][0]=arr[n-1][n-c]+1; &#125; else&#123; arr[c][j]=arr[c-1][j-1]+1; &#125; &#125; &#125; return arr; &#125;&#125; è¶£å‘³ä¹ é¢˜æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849void showDateBookDetail()&#123; int year, month; int sumYearDays = 0; //è¯¥å˜é‡æ˜¯ç»Ÿè®¡åˆ°ç°åœ¨çš„æ€»å¹´æ•°å¤©æ•° int sumMonthDays = 0; //æœˆä»½æ€»å¤©æ•° int sumDays = 0;//æ€»å¤©æ•° int week; //æ˜ŸæœŸ int y, i; int monthArr[] = &#123;31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31&#125;; //12ä¸ªæœˆçš„å¤©æ•° printf(\"è¯·è¾“å…¥ä¸€ä¸ªæ—¥æœŸ(åˆ—å¦‚ 2019-10):\"); scanf(\"%d-%d\", &amp;year, &amp;month); //å¹´-æœˆ-æ—¥ //æ€è·¯: 1900å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸä¸€ for(y = 1900; y &lt; year; y++) &#123; if(y % 400 == 0 || (y % 4 == 0 &amp;&amp; y % 100 != 0))&#123; sumYearDays += 366; //é—°å¹´ åŠ 366å¤© &#125; else sumYearDays += 365; //å¹³å¹´ åŠ 365å¤© &#125; //é—°å¹´çš„äºŒæœˆä»½ if(year % 400 == 0 || (year % 4 == 0 &amp;&amp; year % 100 != 0) )&#123; monthArr[1] = 29; &#125; //ç´¯åŠ ä»Šå¹´çš„æœˆä»½å¤©æ•° for(i=0; i &lt; month-1; i++)&#123; sumMonthDays += monthArr[i]; &#125; sumDays = sumYearDays + sumMonthDays + 1; //æ€»å¤©æ•°= å¹´å¾—æ€»å¤©æ•°+æœˆã€å·å¾—æ€»å¤©æ•° //æ±‚æœ¬æœˆçš„ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡  ä½™æ•° week = sumDays % 7; printf(\"æ—¥\\tä¸€\\täºŒ\\tä¸‰\\tå››\\täº”\\tå…­\\n\\n\"); for(i = 0; i &lt; week; i++) &#123; printf(\"\\t\"); &#125; for(i = 1; i &lt;= monthArr[month - 1]; i++) &#123; printf(\"%d\\t\" , i); if((i + week) % 7 == 0) printf(\"\\n\\n\"); &#125;&#125; 1234567891011121314è¯·è¾“å…¥ä¸€ä¸ªæ—¥æœŸ(åˆ—å¦‚ 2020-01):2020-01æ—¥ ä¸€ äºŒ ä¸‰ å›› äº” å…­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 Program ended with exit code: 0 æ€è·¯åˆ†æï¼š æ‰“å°æ—¥å†é¦–å…ˆè¦ç¡®å®šæŸä¸ªæœˆçš„ 1 å·æ˜¯æ˜ŸæœŸå‡ ã€‚ æ ¹æ® 1900 å¹´ 1 æœˆ 1 æ—¥è‡³æŸæœˆ 1 æ—¥çš„æ€»å¤©æ•° %7 æ‰€å¾—ä½™æ•°å°±å¾—çŸ¥æŸæœˆ 1 å·æ˜¯æ˜ŸæœŸå‡ ã€‚ å¾ªç¯å½“æœˆæ€»å¤©æ•° %7 è¿›è¡Œæ¢è¡Œï¼Œä¾æ¬¡æ‰“å°æ¯ä¸€å¤©çš„æ’ç‰ˆã€‚ æ‰¾å‡ºæœ€é•¿çš„å•è¯123456789101112131415161718192021222324252627282930313233#include &lt;string.h&gt;void countWords()&#123; char str[100] = \"hello, my name is gaogaoProgramer, welcome to come here!\"; int index; long len = strlen(str); int spaceIndex = 0; //ä»ç¬¬ä¸€ä¸ªä¸‹æ ‡å¼€å§‹ç®— int recordMax = 0; //å•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®å³ä¸ºæœ€é•¿å•è¯ int beforeIndex = 0,afterIndex = 0; //å®šä¹‰æœ€é•¿å•è¯çš„å‰ç©ºæ ¼ï¼Œåç©ºæ ¼ for(index = 0; index &lt; len; index++)&#123; if(str[index] == 32)&#123; //åˆ¤æ–­ç©ºæ ¼ if(index - spaceIndex &gt; recordMax)&#123; recordMax = index - spaceIndex; //è®°å½•å‰ä¸‹æ ‡å’Œåä¸‹æ ‡ã€‚ beforeIndex = spaceIndex; afterIndex = index; &#125; spaceIndex = index; &#125; &#125; printf(\"åŸå§‹å•è¯ä¸ºï¼š%s\",str); printf(\"\\nå•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®:%d å‰ä¸‹æ ‡:%d,åä¸‹æ ‡:%d\",recordMax,beforeIndex,afterIndex); //è¾“å‡ºæ‰¾åˆ°çš„å•è¯ï¼› printf(\"\\n\\næ‰¾åˆ°çš„æœ€é•¿åº¦å•è¯ä¸ºï¼š\"); int charIndex; for(charIndex = beforeIndex; charIndex&lt; afterIndex ; charIndex++)&#123; printf(\"%c\",str[charIndex]); &#125;&#125; æ€è·¯åˆ†æï¼šé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯ä¸ªå•è¯çš„åˆ’åˆ†ç®€å•è§„å®šè®¤ä¸ºæ˜¯ç©ºæ ¼åˆ†éš”å³ä¸ºä¸€ä¸ªå•è¯ã€‚æ‰€ä»¥æˆ‘ä»¬ç»Ÿè®¡æ¯ä¸€ä¸ªç©ºæ ¼çš„ä¸‹æ ‡ï¼Œè®°å½•ç©ºæ ¼ä¸‹æ ‡çš„æœ€å¤§å·®å€¼ã€‚è®°å½•èµ·å§‹ä¸‹æ ‡å’Œç»ˆæ­¢ä¸‹æ ‡ã€‚è¿™æ ·å°±æ‰¾åˆ°äº†ä¸€ä¸ªæœ€é•¿çš„å•è¯ã€‚ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­1234567891011121314151617181920212223242526272829303132333435363738394041424344454647void revertString()&#123; int i,start=0; char str[4096] = \"I am a SoftWare Programer\"; char min1 = str[0]; char t; printf(\"ç»“æœï¼š%d \\n\",min1); int len = strlen(str); int end = len-1; while(start&lt;=end) //é¢ å€’æ•´ä¸ªå­—ç¬¦ä¸² &#123; t=str[start]; str[start]=str[end]; str[end]=t; start++; end--; &#125; printf(\"é¢ å€’åçš„å­—ç¬¦ä¸²æ˜¯ï¼š%s\",str); start=0; for(i=0;i&lt;len;i++) //é¢ å€’ä¸€ä¸ªå•è¯ &#123; if(str[i]==32||str[i+1]==0) //å¦‚æœæ˜¯ç©ºæ ¼ æˆ–æ˜¯ç»“å°¾ &#123; if(i==len-1) //åˆ¤æ–­æ˜¯å¦æœ€åä¸€ä¸ª end=i; else end=i-1; while(start&lt;=end) //è°ƒæ¢ç©ºæ ¼ä¸ç©ºæ ¼ä¹‹é—´ &#123; t=str[start]; str[start]=str[end]; str[end]=t; start++; end--; &#125; start=i+1; //èµ·å§‹ä½ç½® &#125; &#125; printf(\"\\nè¾“å‡ºï¼š\"); for(i=0;i&lt;len;i++) &#123; printf(\"%c\",str[i]); &#125;&#125; æ€è·¯åˆ†æï¼šC è¯­è¨€ç‰ˆæœ¬é¦–å…ˆæˆ‘ä»¬æƒ³åˆ°çš„æ˜¯å€’è½¬æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åå†æ ¹æ®ç©ºæ ¼åˆ†å‰²å¾ªç¯ä¾æ¬¡å†å€’è½¬æ¯ä¸€ä¸ªå•è¯ï¼Œè¿™æ ·å°±å®ç°äº†å€’è½¬æ•´ä¸ªå¥å­ã€‚ é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬123456789101112131415161718192021222324252627282930313233import java.util.Scanner;public class reverseString &#123; /** * æ—‹è½¬å­—ç¬¦ä¸² å¦‚ï¼š I am a student * ç»“æœä¸ºï¼š student a am I * @param arr */ public static void reverse(String arr[]) &#123; int start = 0; for (int end = arr.length - 1; start &lt; end; end--) &#123; String temp = arr[start]; arr[start] = arr[end]; arr[end] = temp; start++; &#125; System.out.println(\"\\né¢ å€’åçš„ç»“æœä¸ºï¼š\"); for (int i = 0; i &lt; arr.length; i++) System.out.print((new StringBuilder(String.valueOf(arr[i]))).append(\" \").toString()); &#125; public static void main(String[] args) &#123; System.out.println(\"è¯·è¾“å…¥ä¸€ä¸²å­—ç¬¦\"); Scanner input=new Scanner(System.in); String str=input.nextLine(); String arr[]=str.split(\" \"); reverse(arr); &#125;&#125; æ€è·¯åˆ†æï¼šJava ç‰ˆæœ¬çš„å€’è½¬æ€è·¯æ¯”è¾ƒç®€å•ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨å­—ç¬¦çªœæ–¹æ³•æ ¹æ®ç©ºæ ¼åˆ†å‰²æˆä¸€ä¸ªå­—ç¬¦çªœæ•°ç»„ã€‚ç„¶åå†é’ˆå¯¹æ•°ç»„å…ƒç´ è¿›è¡Œå€’è½¬è°ƒæ¢ä½ç½®ã€‚ ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°12345678910111213141516171819202122//æ ‡è®°æ³•public void randomTest2()&#123; Random random = new Random(); long[] arr =new long[15]; boolean flag[] = new boolean[15]; flag[0] = true; for(int index=1; index&lt;flag.length; index++)&#123; flag[index] = false; &#125; for(int i=0; i&lt;arr.length; i++)&#123; int num = r.nextInt(15); if(!flag[num])&#123; //åªéœ€åˆ¤æ–­æ ‡è®°æ•°ç»„ä¸­å¯¹åº”çš„æ•°å­—ä½ç½®å­˜å‚¨çš„çŠ¶æ€å°±å¯ä»¥çŸ¥é“æ˜¯å¦äº§ç”Ÿè¿‡è¯¥éšæœºæ•° arr[i] = num; flag[num] = true; &#125;else&#123; i--; &#125; &#125; //è¾“å‡º15ä¸ªæ•°&#125; æ€è·¯åˆ†æï¼š ç”Ÿæˆä¸é‡å¤çš„å°èŒƒå›´æ•°å­—ï¼Œæˆ‘æƒ³åˆ°æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ ç¬¬ä¸€ç§æ˜¯æ¯ä¸€æ¬¡ç”Ÿæˆï¼Œè¦å¾ªç¯å»æ£€éªŒå·²ç”Ÿæˆçš„éšæœºæ•°æ•°ç»„ä¸­æ˜¯å¦åŒ…å«è¯¥æ•°å­—ã€‚ ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯ç”¨å¦å¤–ä¸€ä¸ªæ•°ç»„å¸ƒå°”å€¼æ¥å­˜å‚¨ï¼Œå½“å·²ç”ŸæˆéšæœºæŸæ•°æ—¶ï¼Œå°±æŠŠå¯¹åº”çš„å¸ƒå°”å€¼æ•°ç»„è®¾ç½®éšæœºä¸‹æ ‡æ•°å€¼ä¸º trueã€‚å½“ä¸‹æ¬¡å†ç”Ÿæˆçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥å‘½ä¸­æ— éœ€æŸ¥æ‰¾æ•°ç»„å…ƒç´ ã€‚ è¿™ä¹Ÿæ˜¯å€Ÿé‰´ map å­˜å–æ•°æ®çš„æ–¹å¼ï¼Œç›´æ¥æ ¹æ® key å‘½ä¸­æ•°æ®ã€‚key åˆ™ç›¸å½“äºé‚£ä¸ªéšæœºæ•°ã€‚ ç»Ÿè®¡ç­çº§æˆç»©æ’å javaç‰ˆæœ¬123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import java.util.Arrays;import java.util.Scanner;public class SameSCore &#123; /** * ç»Ÿè®¡åŒæˆç»©çš„äººæ•° * æ¨æ–­è¿‡ç¨‹ï¼š ç¬¬ä¸€åæ‰¾å‡ºå ï¼Œç»Ÿè®¡å’Œç¬¬ä¸€åç›¸ç­‰çš„åˆ†æ•°æœ‰å‡ ä¸ª * @param args */ public static void main(String[] args) &#123; int arr[] = &#123; 65, 70, 80, 50, 70, 80 &#125;; Arrays.sort(arr); // å‡åºæ’åˆ— int len = arr.length - 1; System.out.println(\"è¯·è¾“å…¥å‰å¤šå°‘å?\"); Scanner input=new Scanner(System.in); int num=input.nextInt(); int count[] = new int[num+1]; //ç”±äºç¬¬1ä¸ªä¸å–ï¼Œæ‰€ä»¥é•¿åº¦æ¯”å®é™…çš„åŠ 1 ï¼Œå­˜å‚¨ç¬¬å¤šå°‘åçš„ æ•°æ® int score[]=new int[len+1]; //æˆç»© //ç¬¬å‡ å å¤šå°‘ä¸ªåŒå­¦ for (int k = 1; k &lt;= count.length-1; k++) &#123; int hasCount=0; for(int j=1;j&lt;=k;j++)&#123; hasCount+=count[j]; //å·²ç»ç»Ÿè®¡çš„ä¸ªæ•° &#125; for (int i = len - hasCount; i &gt;= 0; i--) &#123; //ç»Ÿè®¡ç¬¬å‡ åé‡å¤äº†å‡ ä¸ª if (arr[i] == arr[len - hasCount]) &#123; score[k]=arr[len - hasCount]; //ç¬¬å‡ åçš„åˆ†æ•° count[k]++; //ç¬¬å‡ åçš„ä¸ªæ•° &#125; &#125; &#125; // ç»“æœï¼š for (int i = 1; i &lt;count.length; i++) &#123; try&#123; System.out.println(\"ç¬¬\" + i + \"å,æˆç»©ä¸º\"+score[i]+\"ï¼š\" + count[i]); &#125;catch(ArrayIndexOutOfBoundsException e)&#123; System.out.println(\"ç¬¬\"+i+\"åè¶…å‡ºèŒƒå›´å“¦!\"); &#125; &#125; &#125;&#125; ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬1234567891011121314151617181920212223242526272829303132333435363738394041424344void statisticsScoreDescCount ()&#123; int arr[10]=&#123;20,30,50,60,60,76,85,85,96,96&#125;; //å·²ç»å‡åºçš„æ•°ç»„ char names[10][20]=&#123;\"jack\",\"running\",\"lucy\",\"mary\",\"hong\",\"liu\",\"wike\",\"smith\",\"boss\",\"younth\"&#125;; int hasCount=0; //å·²ç»ç»Ÿè®¡äº†çš„ä¸ªæ•° int count[ScoreSystemArrLen+1]=&#123;0&#125;; //ç¬¬ä¸€ä¸ªnum[0]ä¸è¦ï¼Œè®°å½•ç¬¬å‡ åçš„ä¸ªæ•°ã€‚ int score[10]=&#123;0&#125;; //ç»Ÿè®¡æˆç»© score[1]=96 score[2]=85 è®°å½•ç¬¬å‡ åçš„æˆç»© int k,j,i,c=0; for(k=1;k&lt;=ScoreSystemArrLen;k++) //å¤„ç†è¿‡ç¨‹ &#123; hasCount=0; for(j=1;j&lt;=k;j++) &#123; hasCount+=count[j]; // ç»Ÿè®¡å‰é¢å‡ºç°çš„æ€»ä¸ªæ•° &#125; for (i = 9-hasCount; i &gt;= 0; i--) &#123; if (arr[i] == arr[9 - hasCount]) &#123; score[k]=arr[9 - hasCount]; //è®°å½•å…·ä½“ç¬¬å‡ åçš„åˆ†æ•° count[k]++; //è®°å½•å…·ä½“ç¬¬å‡ åçš„ä¸ªæ•° &#125; &#125; &#125; //è¾“å‡º for (i = 1; i &lt;ScoreSystemArrLen+1; i++) &#123; hasCount=0; for(j=1;j&lt;=i;j++)// ç»Ÿè®¡å‰é¢å‡ºç°çš„æ€»ä¸ªæ•° &#123; hasCount+=count[j]; &#125; if(count[i] ==0)&#123; break; &#125; printf(\"\\nç¬¬ %d å,ä¸ªæ•°%d,æˆç»©ä¸º:%d\\n\",i,count[i],score[i]); for(c=1,k=10-hasCount;c&lt;=count[i];k++,c++) //count[i] æ˜¯ å½“å‰ç¬¬å‡ åçš„ä¸ªæ•° &#123; printf(\"åå­—ï¼š%s\\n\",names[k]); &#125; &#125;&#125; 123456789101112131415161718192021222324ç¬¬ 1 å,ä¸ªæ•°2,æˆç»©ä¸º:96åå­—ï¼šbossåå­—ï¼šyounthç¬¬ 2 å,ä¸ªæ•°2,æˆç»©ä¸º:85åå­—ï¼šwikeåå­—ï¼šsmithç¬¬ 3 å,ä¸ªæ•°1,æˆç»©ä¸º:76åå­—ï¼šliuç¬¬ 4 å,ä¸ªæ•°2,æˆç»©ä¸º:60åå­—ï¼šmaryåå­—ï¼šhongç¬¬ 5 å,ä¸ªæ•°1,æˆç»©ä¸º:50åå­—ï¼šlucyç¬¬ 6 å,ä¸ªæ•°1,æˆç»©ä¸º:30åå­—ï¼šrunningç¬¬ 7 å,ä¸ªæ•°1,æˆç»©ä¸º:20åå­—ï¼šjack æ€è·¯åˆ†æï¼šå‡è®¾æœ‰ 10 ä¸ªåŒå­¦ï¼Œåˆ™å¤§å¾ªç¯ 10 æ¬¡ã€‚æ¯æ¬¡æ£€æŸ¥ï¼Œåˆ†åˆ«å°†å·²ç»Ÿè®¡çš„å­¦ç”Ÿä¸ªæ•° hasCount è®¡ç®—å‡ºæ¥ï¼Œç„¶åä»å‰©ä¸‹çš„åŒå­¦ä¸­å–å¾—å…¶æˆç»©æ ‡è®°ä¸ºä¸‹ä¸€åçš„åˆ†æ•°ã€‚å†…å¾ªç¯ä¾æ¬¡åˆ¤æ–­å‰©ä¸‹åŒå­¦çš„åˆ†æ•°æ˜¯å¦å’Œæœ¬æ¬¡åæ•°çš„åˆ†ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™ä¸ºé‡å¤åˆ†æ•°ï¼Œè®°å½•é‡å¤åˆ†æ•°çš„ä¸ªæ•° count[k]++ , k å˜é‡ä¸ºæ’åã€‚ æŠ¥æ•°123ï¼ŒæŠ¥æ•°3çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬123456789101112131415161718192021222324252627282930313233343536373839import java.util.*;public class TheLastPerson&#123; public static void main(String args[]) &#123; System.out.println(\"æŠ¥æ•°123ï¼ŒæŠ¥3çš„åŒå­¦é€€å‡ºï¼Œæœ€åä¸€ä¸ªç•™ä¸‹çš„åŒå­¦\"); System.out.println(\"è¯·è¾“å…¥æ€»å…±æœ‰å‡ ä¸ªåŒå­¦\"); Scanner input = new Scanner(System.in); int num = input.nextInt(); boolean bl[] = new boolean[num]; for (int i = 0; i &lt; bl.length; i++)&#123; bl[i] = true; &#125; int index = 0; int lastnum = num; int countNum = 0; while (lastnum &gt; 1) //æœ€åç•™ä¸‹æ¥çš„äºº &#123; if (bl[index] &amp;&amp; ++countNum == 3) &#123; countNum = 0; //æŠ¥æ•°3åéœ€å›å½’ bl[index] = false; //å°†æŠ¥æ•°ä¸º3çš„äººçŠ¶æ€æ ‡è®°ä¸ºfalse lastnum--; //æŠŠé˜Ÿåˆ—äººæ•°å‡1 &#125; if (++index == num) //å½“æŠ¥æ•°åˆ°æ’åœ¨æœ€åä¸€ä¸ªä½ç½®çš„äººï¼Œç¬¬ä¸€ä¸ªæ¥ç€æœ€åä¸€ä¸ªæŠ¥æ•° index = 0; &#125; for (int i = 0; i &lt; num; i++)&#123; if (bl[i]) System.out.println((new StringBuilder(\"æœ€åç•™ä¸‹çš„æ˜¯ç¬¬\")).append(i + 1).append(\"ä¸ªåŒå­¦\").toString()); &#125; &#125; &#125; æ€è·¯åˆ†æï¼š æ ¹æ®å…¨é˜Ÿå‘˜äººæ•°å®šä¹‰ä¸€ä¸ªæ ‡è®°å¸ƒå°”ç±»å‹çš„æ•°ç»„ã€‚æ ‡è®°æ‰€æœ‰äººä¸º true éƒ½åœ¨é˜Ÿåˆ—çš„æ„æ€ã€‚ å½“æŠ¥æ•° 3 çš„äººæ ‡è®°ä¸º false. äººæ•°å‡ºé˜Ÿï¼Œå‰©ä½™äººæ•°å‡ 1ã€‚æ¥ç€ç´§é‚»ä¸‹ä¸€ä¸ªé˜Ÿå‘˜æŠ¥æ•° 1ã€‚ æ¯ä¸€æ¬¡æŠ¥æ•°åˆ°æœ€åå½“å‰é˜Ÿå‰©ä½™äººæ•°çš„æœ€åä¸€ä¸ªäººçš„æ—¶å€™ï¼Œæ¥ç€å†ä»ä¸‹æ ‡ä¸º 0 çš„é˜Ÿå‘˜æŠ¥æ•°ã€‚ç›´åˆ°æœ€åé˜Ÿåˆ—å‰©ä½™äººæ•°ä¸º 1ã€‚ æœ€åå†ä»å¸ƒå°”ç±»å‹çš„æ•°ç»„ä¸­æ‰¾å‡ºæ ‡è®°ä¸º true çš„ä½ç½®ï¼Œå³å¯æ‰¾åˆ°æ˜¯å“ªä¸€ä¸ªåŒå­¦ã€‚ æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#define N 28#define ScoreSystemArrLen 10#define MaxLen 50void findStudentWhichAskNumber()&#123; char S1S8[N][15]=&#123; \"å»–åŒå­¦\", \"å´åŒå­¦\", \"é™ˆèªåŒå­¦\", \"é¢œåŒå­¦\", \"æ¢…åŒå­¦\", \"æ˜ŒåŒå­¦\", \"åˆ˜åŒå­¦\", \"é’ŸåŒå­¦\", \"é»„åŒå­¦\", \"ç”ŸåŒå­¦\", \"ä¼ŸåŒå­¦\", \"å¹³åŒå­¦\", \"ä½™å¹¿åŒå­¦\", \"æœ±å®åŒå­¦\", \"é™ˆé¸¿åŒå­¦\", \"ç‹åŒå­¦\", \"ä¸œåŒå­¦\", \"é›„åŒå­¦\", \"å¼ åŒå­¦\", \"æ—åŒå­¦\", \"æ¢åŒå­¦\", \"å©·åŒå­¦\", \"ç»´åŒå­¦\", \"è‹±åŒå­¦\", \"é»„åŒå­¦1\", \"æ–ŒåŒå­¦\", \"å…¨åŒå­¦\", \"æˆ´åŒå­¦\"&#125;; printf(\"ã€æŠ¥æ•°æ¸¸æˆã€‘è§„åˆ™ï¼šä¸€ç¾¤åŒå­¦æ’é˜Ÿï¼Œä»è§„å®šçš„ç¬¬å‡ ä¸ªåŒå­¦å¼€å§‹æŠ¥æ•°1ï¼Œä¾æ¬¡2ï¼Œ3ã€‚æŠ¥æ•°3çš„åŒå­¦å‡ºé˜Ÿã€‚æ±‚æœ€åå‰©ä¸‹çš„äººæ˜¯è°ï¼Ÿ\\n\\n\"); char bl[N]; int i,n; int index; //ç´¢å¼•ï¼Œè½®åˆ°ç¬¬å‡ ä¸ªäººäº† int lastnum=N; //å‰©ä½™äººæ•° int countNum=0; //æŠ¥çš„æ•°å­— //è¾“å‡º for(i=0;i&lt;N;i++) &#123; printf(\"%s\\t\",S1S8[i]); &#125; for(i=0;i&lt;N;i++) &#123; bl[i]=1; &#125; //28ä¸ªäººéƒ½å‚ä¸æŠ¥æ•° printf(\"\\r\\rè¯·è¾“å…¥ä»ç¬¬å‡ ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼š\"); scanf(\"%d\",&amp;n); printf(\"\\nä»%så¼€å§‹æŠ¥æ•°,\",S1S8[n-1]); index=n-1; while(lastnum&gt;1) //å¦‚æœå‰©ä½™äººæ•°å¤§äº1 è¯´æ˜è¿˜è¦ç»§ç»­æŠ¥æ•° &#123; if(bl[index]) //è¡¨ç¤ºè¿˜æ²¡æŠ¥3çš„äººã€‚ &#123; countNum++; if(countNum==3) &#123; countNum=0; bl[index]=0; //æ ‡è®°æŠ¥äº†3 lastnum--; //å‰©ä½™äººæ•°-1 &#125; &#125; index++; //ä¸‹ä¸€ä¸ªäºº if(index==N) //æŠ¥åˆ°æœ€åï¼Œå›æ¥ç»§ç»­æŠ¥æ•° index=0; &#125; //è¾“å‡º for(i=0;i&lt;N;i++) &#123; if(bl[i]) printf(\"æœ€åç•™ä¸‹æ¥çš„æ˜¯ï¼š%s\",S1S8[i]); &#125;&#125; 123456789ã€æŠ¥æ•°æ¸¸æˆã€‘è§„åˆ™ï¼šä¸€ç¾¤åŒå­¦æ’é˜Ÿï¼Œä»è§„å®šçš„ç¬¬å‡ ä¸ªåŒå­¦å¼€å§‹æŠ¥æ•°1ï¼Œä¾æ¬¡2ï¼Œ3ã€‚æŠ¥æ•°3çš„åŒå­¦å‡ºé˜Ÿã€‚æ±‚æœ€åå‰©ä¸‹çš„äººæ˜¯è°ï¼Ÿå»–åŒå­¦ å´åŒå­¦ é™ˆèªåŒå­¦ é¢œåŒå­¦ æ¢…åŒå­¦ æ˜ŒåŒå­¦ åˆ˜åŒå­¦ é’ŸåŒå­¦ é»„åŒå­¦ ç”ŸåŒå­¦ ä¼ŸåŒå­¦ å¹³åŒå­¦ ä½™å¹¿åŒå­¦ æœ±å®åŒå­¦ é™ˆé¸¿åŒå­¦ ç‹åŒå­¦ ä¸œåŒå­¦ é›„åŒå­¦ å¼ åŒå­¦ æ—åŒå­¦ æ¢åŒå­¦ å©·åŒå­¦ ç»´åŒå­¦ è‹±åŒå­¦ é»„åŒå­¦1 æ–ŒåŒå­¦ å…¨åŒå­¦ æˆ´åŒå­¦ è¯·è¾“å…¥ä»ç¬¬å‡ ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼š6ä»æ˜ŒåŒå­¦å¼€å§‹æŠ¥æ•°,æœ€åç•™ä¸‹æ¥çš„æ˜¯ï¼šæˆ´åŒå­¦Program ended with exit code: 0 æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677import java.util.*;/* * æŸ¥æ‰¾æ ‘èŠ‚ç‚¹ */public class LookWord &#123; private ArrayList&lt;TreeBean&gt; treeList = new ArrayList&lt;TreeBean&gt;(); public static void main(String[] args) &#123; LookWord lw = new LookWord(); lw.init();// lw.findAll(lw.treeList); //æŸ¥æ‰¾æ‰€æœ‰ lw.findWho(\"111\",lw.treeList); //æŸ¥æ‰¾æŸä¸€ä¸ªæ ‘èŠ‚ç‚¹ &#125; public void findWho(String id,ArrayList&lt;TreeBean&gt; ts) &#123; for (TreeBean t : ts) &#123; if(t.getId().equals(id)&amp;&amp;t.getChildren()!=null)&#123; findAll(t.getChildren()); &#125;else&#123; if(t.getChildren()!=null)&#123; findWho(id,t.getChildren()); &#125; &#125; &#125; &#125; public void findAll(ArrayList&lt;TreeBean&gt; findList) &#123; for (int i = 0; i &lt; findList.size(); i++) &#123; TreeBean tb = findList.get(i); System.out.println(tb.toString()); if (tb.getChildren() != null) &#123; findAll(tb.getChildren()); &#125; &#125; &#125; // åˆå§‹æ•°æ® private void init() &#123; ArrayList&lt;TreeBean&gt; children111 = new ArrayList&lt;TreeBean&gt;(); TreeBean tb111 = new TreeBean(\"1111\", \"one1111\", \"111\"); TreeBean tb112 = new TreeBean(\"1112\", \"one1112\", \"111\"); children111.add(tb111); children111.add(tb112); TreeBean tb11 = new TreeBean(\"111\", \"one111\", \"11\"); tb11.setChildren(children111); TreeBean tb12 = new TreeBean(\"112\", \"one112\", \"11\"); TreeBean tb13 = new TreeBean(\"113\", \"one113\", \"11\"); ArrayList&lt;TreeBean&gt; children11 = new ArrayList&lt;TreeBean&gt;(); children11.add(tb11); children11.add(tb12); children11.add(tb13); TreeBean tp11 = new TreeBean(\"11\", \"one1\", \"1\"); tp11.setChildren(children11); TreeBean tp12 = new TreeBean(\"12\", \"one2\", \"1\"); ArrayList&lt;TreeBean&gt; children1 = new ArrayList&lt;TreeBean&gt;(); children1.add(tp11); children1.add(tp12); TreeBean tb1 = new TreeBean(\"1\", \"one\", \"0\"); tb1.setChildren(children1); ArrayList&lt;TreeBean&gt; children2 = new ArrayList&lt;TreeBean&gt;(); children2.add(new TreeBean(\"21\", \"two1\", \"2\")); children2.add(new TreeBean(\"22\", \"two2\", \"2\")); TreeBean tb2 = new TreeBean(\"2\", \"two\", \"0\"); tb2.setChildren(children2); treeList.add(tb1); treeList.add(tb2); &#125;&#125; 12345678//TreeBean çš„æ ‘ç»“æ„æ¨¡å‹public class TreeBean &#123; private String id; private String text; private String pid; private ArrayList&lt;TreeBean&gt; children=new ArrayList&lt;TreeBean&gt;();&#125; æ€è·¯åˆ†æï¼š æ ‘ç»“æ„æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯é€’å½’æ€æƒ³ã€‚æ— è®ºæŸ¥æ‰¾å…¨éƒ¨è¿˜æ˜¯æŸ¥æ‰¾å•ç‹¬æŸä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œéƒ½éœ€å¾—åˆ°ä»–çš„å­èŠ‚ç‚¹ã€‚éå†å­èŠ‚ç‚¹æ—¶å€™æ ¹æ® children å¯å¾—åˆ°æ˜¯å¦è¿˜æœ‰ä¸‰çº§å­èŠ‚ç‚¹ æœ‰åˆ™é€’å½’è°ƒç”¨ã€‚æ³¨æ„çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹çš„ç»‘å®šå…³ç³»å³å¯ã€‚ åŸºç¡€æ’åºæ’å…¥æ’åº12345678910111213141516171819202122232425/* æ’å…¥æ’åºï¼Œæ•ˆç‡å¤§äºé€‰æ‹©æ’åºã€‚* æ–¹æ³•ï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²æ’å¥½åºçš„æœ‰åºè¡¨ï¼ˆæœ‰å¯èƒ½æ˜¯ç©ºè¡¨ï¼‰ä¸­* æ¯æ¬¡å’Œæœ€åä¸€ä¸ªæ¯”è¾ƒï¼Œè‹¥æ¯”å‰é¢å°åˆ™å†æ¢ä½ç½®ï¼Œç›´åˆ°ä¸æ¯”å‰é¢å°ã€‚*/public static void insert(int arr[])&#123; int count=0; int pos ; for ( int i = 1; i &lt; arr.length; i++) &#123; pos=count; //ä¸€å¼€å§‹è¿›æ¥å°±æ˜¯å’Œæœ€åä¸€ä¸ªæ•°æ¯” int index=i; while( arr[index]&lt;arr[pos ]&amp;&amp;pos&gt;=0)&#123; //æ’åºæ•° å¦‚æœæ¯”å·²ç»æ’å¥½çš„æœ€åä¸€ä¸ªæ•°å°åˆ™ï¼Œå’Œå‰ä¸€ä¸ªæ¯”è¾ƒ int t=arr [pos]; arr[pos ]=arr[index]; arr[index]=t; index-=1; //æ³¨æ„ï¼šè¿™æ˜¯ä¸ªæ¢äº†ä½ç½®çš„æ•° pos--; //å‡†å¤‡å’Œå‰ä¸€ä¸ªæ¯”è¾ƒ &#125; count++; &#125;&#125; æ€è·¯åˆ†æï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²æ’å¥½åºçš„æœ‰åºè¡¨ï¼ˆæœ‰å¯èƒ½æ˜¯ç©ºè¡¨ï¼‰ä¸­æ¯æ¬¡å’Œæœ€åä¸€ä¸ªæ¯”è¾ƒï¼Œè‹¥æ¯”å‰é¢å°åˆ™å†æ¢ä½ç½®ï¼Œç›´åˆ°ä¸æ¯”å‰é¢å°ã€‚ é€‰æ‹©æ’åº1234567891011121314151617181920/** ç›´æ¥é€‰æ‹©æ’åº* æ–¹æ³•ï¼šæ¯ä¸€è¶Ÿä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œ* é¡ºåºæ”¾åœ¨å·²æ’å¥½åºçš„æ•°åˆ—çš„æœ€åï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚*/public static void directChoose(int[] arr) &#123; int index; int temp; for(int i=1;i&lt;arr.length;i++)&#123; index=0; for(int j=1;j&lt;=arr.length-i;j++)&#123; if(arr[j]&lt;arr[index])&#123; index=j; &#125; &#125; temp=arr[arr.length-i]; arr[arr.length-i]=arr[index]; arr[index]=temp; &#125;&#125; æ€è·¯åˆ†æï¼šæ¯ä¸€è¶Ÿä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œé¡ºåºæ”¾åœ¨å·²æ’å¥½åºçš„æ•°åˆ—çš„æœ€åï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚ å†’æ³¡æ’åº12345678910111213141516//æ¯ä¸€è¶Ÿæ’åº éƒ½å¯ä»¥æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°å€¼ï¼Œä¸‹ä¸€è¶Ÿæ’åºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æ’é™¤æœ€åå·²ç­›é€‰å‡ºçš„æ•°ï¼Œå’Œå‰©ä¸‹çš„æ•°æ¯”è¾ƒã€‚å†’æ³¡æ’åºæ¯ä¸€è½®éƒ½æ˜¯ç›¸é‚»çš„ä¸¤æ•°åœ¨æ¯”è¾ƒã€‚public static void maopao(int arr[])&#123; int temp = 0; for (int i = 0; i &lt; arr.length - 1; i++) &#123; for (int j = i + 1; j &lt; arr.length; j++) //nä¸ªæ•° æ¯”è¾ƒn-1è½® ç¬¬nè½® æ¯”è¾ƒn-1æ¬¡ï¼Œ ç¬¬ä¸€è½®å¯æ‰¾å‡ºæœ€å¤§å€¼ã€‚ if (arr[i] &lt; arr[j]) &#123; temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; &#125;&#125; æ€è·¯åˆ†æï¼šæ¯ä¸€è¶Ÿæ’åº éƒ½å¯ä»¥æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°å€¼ï¼Œä¸‹ä¸€è¶Ÿæ’åºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æ’é™¤æœ€åå·²ç­›é€‰å‡ºçš„æ•°ï¼Œå’Œå‰©ä¸‹çš„æ•°æ¯”è¾ƒã€‚å†’æ³¡æ’åºæ¯ä¸€è½®éƒ½æ˜¯ç›¸é‚»çš„ä¸¤æ•°åœ¨æ¯”è¾ƒã€‚ å¿«é€Ÿæ’åº12345678910111213141516171819202122232425262728293031323334353637383940public class QuickSort &#123; public static void main(String[] args) &#123; long start=System.currentTimeMillis(); int arr[] =&#123;12,34,11,99,54,21,9,5,101&#125;; QuickSort t=new QuickSort(); t.quicksort(arr,0,arr.length-1); t.print(arr); System.out.println(\"å¿«é€Ÿæ’åº:\"+(System.currentTimeMillis()-start)); &#125; public void quicksort(int arr[], int left, int right)&#123; if(left &lt; right)&#123; int key = arr[left]; int low = left; int high = right; while(low &lt; high)&#123; while(low &lt; high &amp;&amp; arr[high] &gt; key)&#123; high--; &#125; arr[low] = arr[high]; while(low &lt; high &amp;&amp; arr[low] &lt; key)&#123; low++; &#125; arr[high] = arr[low]; &#125; arr[low] = key; quicksort(arr,left,low-1); quicksort(arr,low+1,right); &#125; &#125; public void print(int arr[]) &#123; for (int i = 0; i &lt; arr.length; i++) &#123; System.out.print(arr[i]+\" \"); &#125; &#125;&#125; æ€è·¯åˆ†æï¼šæ¯æ¬¡æ’åºçš„æ—¶å€™è®¾ç½®ä¸€ä¸ªåŸºå‡†ç‚¹ï¼Œå°†å°äºç­‰äºåŸºå‡†ç‚¹çš„æ•°å…¨éƒ¨æ”¾åˆ°åŸºå‡†ç‚¹çš„å·¦è¾¹ï¼Œå°†å¤§äºç­‰äºåŸºå‡†ç‚¹çš„æ•°å…¨éƒ¨æ”¾åˆ°åŸºå‡†ç‚¹çš„å³è¾¹ã€‚å·§å¦™è¿ç”¨åˆ†æ²»æ€æƒ³ã€‚ äºŒåˆ†æ³•æŸ¥æ‰¾123456789101112131415161718192021222324252627282930313233343536373839404142434445import java.util.Scanner;public class HalfSelect &#123; /** * äºŒåˆ†æ³•æŸ¥æ‰¾ * * @param arr * æ•°ç»„ * @param num * è¦æŸ¥æ‰¾çš„æ•°å­— * @return è¿”å›ä½ç½® */ private static int halfLook(int[] arr, int num) &#123;// äºŒåˆ†æ³•æŸ¥æ‰¾ int middle; int start = 0, last = arr.length - 1; if (num &lt; arr[start] || num &gt; arr[last]) return -1; while (true) &#123; middle = (last + start) / 2; // æ±‚ä¸­é—´ä½ç½® if (start &gt; last) &#123; break; &#125; if (num &gt; arr[middle]) &#123; start = middle + 1; &#125; else if (num &lt; arr[middle]) &#123; last = middle - 1; &#125; else return middle; // ç›¸ç­‰åˆ™è¿”å› &#125; return -1; &#125; public static void halfShow(int arr[]) &#123; Scanner input = new Scanner(System.in); System.out.println(\"è¯·è¾“å…¥ä½ è¦æŸ¥æ‰¾çš„æ•°:\"); int n = input.nextInt(); int w = halfLook(arr, n); if (w &gt;= 0) System.out.println((new StringBuilder(\"ä½ç½®ï¼š\")).append(w).toString()); else System.out.println(\"æ²¡æœ‰è¯¥æ•°ï¼\"); &#125; &#125; æ€è·¯åˆ†æï¼šäºŒåˆ†æ³•æŸ¥æ‰¾å‰ææ˜¯æ•°æ®è¦å…ˆæ’å¥½åºï¼Œç„¶åæ‰èƒ½æŠ˜åŠæŸ¥æ‰¾ã€‚ä¸æ–­å–å¾—ä¸­é—´ä½ç½®çš„æ•°å­—è¿›è¡Œæ¯”è¾ƒæŸ¥è¯¢å‡ºç›®æ ‡æ•°ã€‚ Json æ ¼å¼çš„æ ¡éªŒåœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†Ÿæ‚‰ä¸€ä¸‹ Promise.all()æ–¹æ³•çš„ç”¨æ³•ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970 testPromiseAll() &#123; function washFood()&#123; console.log('åšé¥­ç¬¬ä¸€æ­¥ï¼šæ´—èœ'); let hasError = false; if(hasError)&#123; return \"å‘ç°äº†ä¸€åªè™«å­ï¼æ´—æ‰å®ƒã€‚\"; &#125;else&#123; return 'èœæ´—å¹²å‡€äº†ã€‚'; &#125; &#125; function cutFood() &#123; console.log('åšé¥­ç¬¬äºŒæ­¥ï¼šåˆ‡èœ'); var p = new Promise(function (resolve, reject) &#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function () &#123; let cutFoodHasError = true; //æ§åˆ¶é»˜å¥‘åˆ‡èœæ—¶ æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ if(cutFoodHasError)&#123; reject(\"å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼\") &#125;else&#123; resolve('åˆ‡å¥½äº†èœã€‚'); &#125; &#125;, 1000); &#125;) /* è¯•è¯•æ‰“å¼€è¿™é‡Œçš„æ³¨é‡Š .catch(error=&gt;&#123; console.log(\"åˆ‡èœå¼‚å¸¸:\"+error); //å¼‚å¸¸æœ¬èº«å°±æ˜¯è¿”å›resolveçŠ¶æ€ï¼Œå€¼æ˜¯null console.log(\"ç”¨åˆ›å£è´´æ­¢è¡€ï¼Œç»§ç»­åšèœã€‚\"); &#125;); */ return p; &#125; function cooking() &#123; console.log('åšé¥­ç¬¬ä¸‰æ­¥ï¼šç‚’èœ'); var p = new Promise(function (resolve, reject) &#123; //åšä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(function () &#123; resolve('èœå·²åšå¥½!'); &#125;, 2000); &#125;); return p; &#125; //æ•°ç»„é‡Œï¼Œå¦‚æœæ”¾Promise ä¸€å®šè¦è¿”å›çŠ¶æ€ã€‚ Promise.all([washFood(), cutFood(),cooking()]) .then((result) =&gt; &#123; console.log('ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼š'+result); console.log(result); &#125;).catch(error=&gt;&#123; console.log(\"èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:\"+error); &#125;) /* ç»“æœï¼š 1. å½“cutFoodHasError = trueï¼›æ‰“å°å¦‚ä¸‹ç»“æœï¼š èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼ 2. å½“cutFoodHasError = true ä¸” cutFoodæ–¹æ³•é‡Œçš„Promiseæœ‰å¼‚å¸¸æ•æ‰æ—¶ï¼š åˆ‡èœå¼‚å¸¸:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼ ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¹²å‡€äº†ï¼,,èœå·²åšå¥½ 3. å½“cutFoodHasError = false ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¥½äº†ã€‚åˆ‡å¥½äº†èœã€‚èœå·²åšå¥½ï¼ */ /* Promise.allä½¿ç”¨æ€»ç»“ï¼š æ•°ç»„é‡Œå¯ä»¥æ˜¯Promiseå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„å€¼ï¼Œåªæœ‰Promiseä¼šç­‰å¾…çŠ¶æ€æ”¹å˜ å½“æ‰€æœ‰çš„å­Promiseéƒ½å®Œæˆï¼Œè¯¥Promiseå®Œæˆï¼Œè¿”å›å€¼æ˜¯å…¨éƒ¨å€¼å¾—æ•°ç»„ æœ‰ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œè¯¥Promiseå¤±è´¥ï¼Œè¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ˆå¤±è´¥çš„å­Promiseç»“æœ */&#125; æœåŠ¡è¿”å› json å­—ç¬¦ä¸² result 12345//ä»¥ä¸‹æ³¨é‡Šå¾ˆé‡è¦ï¼šé‡‡ç”¨åˆ†æ²»å’Œé€’å½’çš„æ€æƒ³ã€‚å¦å¤–ç»“åˆPromise.allæ–¹æ³• åšä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—æ§åˆ¶ã€‚boolean isJsonFlag = checkJsonObject(result);function checkJsonObject(obj)&#123; return jsonFlag;&#125;æ€è·¯åˆ†æï¼š è·å–æ¯ä¸€ä¸ª key, å’Œå¯¹åº” value ã€‚ å¯¹ value è¿›è¡Œç±»å‹åˆ¤æ–­,å¦‚æœæ˜¯ [ ] æ•°ç»„ç±»å‹ï¼Œforeach æ¯ä¸€é¡¹åˆ¤æ–­æ˜¯å¦ä¸º { } å¯¹è±¡ ï¼Œå¦‚æœæ˜¯ é€’å½’è°ƒç”¨ checkObject(itemObject) æ–¹æ³•ï¼›å¯¹äº value ä¸ºæ™®é€šç±»å‹æ—¶ï¼Œåªéœ€æ›´å…·æ­£åˆ™æˆ–ç®—æ³•åŒ¹é…æ˜¯å¦ç¬¦åˆ key: value æ ¼å¼ã€‚ æ ¹æ®æœåŠ¡ç«¯è¿”å›çš„ result å­—ç¬¦çªœåˆ†å‰²åä¾æ® ç¬¬ä¸€å±‚çº§çš„ valueç±»å‹ä¸º [] æ•°ç»„ç±»å‹çš„ä¸ªæ•°çš„å¤šå°‘ï¼Œåˆ†æ‰¹ç”¨ç±»ä¼¼ Promise.all æ–¹æ³• å¼‚æ­¥æ‰§è¡Œå¤šä¸ª Promiseï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªæ ¡éªŒè¿”å› rejectï¼Œåˆ™ç«‹å³æ˜¯è¿”å› falseã€‚åˆ¤æ–­ä¸åŒ¹é…ã€‚æ— éœ€ç­‰å¾…æ‰€æœ‰çš„ Promise ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚è€Œå…¨éƒ¨ Promise æ ¡éªŒæ­£ç¡®æ‰ä¼šè¿”å› true; æ€»ç»“ï¼šé€šè¿‡æœ¬ chat çš„å­¦ä¹ å’Œæ‰‹åŠ¨æ•²ç å®è·µï¼Œä½ å°†æ”¶è·åˆ°å¯¹åˆ†æ²»å’Œé€’å½’çš„æ€æƒ³çš„ç†è§£ã€‚å¯¹çŠ¶æ€çš„æ ‡è®°æ€æƒ³ï¼Œä»¥åŠå¯¹å›¾å½¢çš„è§‚å¯Ÿåˆ†ææ€è·¯ã€‚é‡ç‚¹æ˜¯ä½ çš„æ€ç»´é€»è¾‘å¾—åˆ°äº†æå‡ï¼ å¦‚æœæœ¬ chat å¯¹ä½ æœ‰ç”¨ï¼Œé‚£æˆ‘å°±å¤ªé«˜å…´äº†ã€‚æœ€åï¼Œæ„Ÿè°¢å¤§ä¼™çš„æ”¯æŒï¼","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.littlewhale.xyz/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼","slug":"iOSRuntime","date":"2020-01-07T03:31:19.000Z","updated":"2020-05-27T00:37:41.000Z","comments":true,"path":"2020/01/07/iOSRuntime/","link":"","permalink":"https://www.littlewhale.xyz/2020/01/07/iOSRuntime/","excerpt":"Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼ŸRuntimeæ˜¯Objective-Cä¸­åº•å±‚çš„ä¸€å¥—Cè¯­è¨€APIï¼Œæ˜¯ä¸€ä¸ªå°†Cè¯­è¨€è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡è¯­è¨€çš„æ‹“å±•ã€‚Runtimeçš„ä¸€åˆ‡éƒ½å›´ç»•ä¸¤ä¸ªä¸­å¿ƒï¼šç±»çš„åŠ¨æ€é…ç½® å’Œ æ¶ˆæ¯ä¼ é€’ èƒ½å¹²å•¥ï¼Ÿ åŠ¨æ€çš„åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªç±» ç»™ç±»å¢åŠ ä¸€ä¸ªå±æ€§ ç»™ç±»å¢åŠ ä¸€ä¸ªåè®®å®ç° ç»™ç±»å¢åŠ ä¸€ä¸ªæ–¹æ³•å®ç°IMP éå†ä¸€ä¸ªç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ã€å±æ€§å’Œæ–¹æ³•ç­‰ æ‹¦æˆªç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•è°ƒç”¨ï¼ˆMethod Swizzlingé»‘é­”æ³•ï¼‰ å°†æŸäº›OCä»£ç è½¬åŒ–ä¸ºRuntimeä»£ç ï¼Œæ¢ç©¶åº•å±‚ã€‚å¦‚blockçš„å®ç°åŸç† å®ç°ç»™åˆ†ç±»å¢åŠ å±æ€§ å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œæ¥æ¡£ å®ç°å­—å…¸çš„æ¨¡å‹å’Œè‡ªåŠ¨è½¬æ¢","text":"Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼ŸRuntimeæ˜¯Objective-Cä¸­åº•å±‚çš„ä¸€å¥—Cè¯­è¨€APIï¼Œæ˜¯ä¸€ä¸ªå°†Cè¯­è¨€è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡è¯­è¨€çš„æ‹“å±•ã€‚Runtimeçš„ä¸€åˆ‡éƒ½å›´ç»•ä¸¤ä¸ªä¸­å¿ƒï¼šç±»çš„åŠ¨æ€é…ç½® å’Œ æ¶ˆæ¯ä¼ é€’ èƒ½å¹²å•¥ï¼Ÿ åŠ¨æ€çš„åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªç±» ç»™ç±»å¢åŠ ä¸€ä¸ªå±æ€§ ç»™ç±»å¢åŠ ä¸€ä¸ªåè®®å®ç° ç»™ç±»å¢åŠ ä¸€ä¸ªæ–¹æ³•å®ç°IMP éå†ä¸€ä¸ªç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ã€å±æ€§å’Œæ–¹æ³•ç­‰ æ‹¦æˆªç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•è°ƒç”¨ï¼ˆMethod Swizzlingé»‘é­”æ³•ï¼‰ å°†æŸäº›OCä»£ç è½¬åŒ–ä¸ºRuntimeä»£ç ï¼Œæ¢ç©¶åº•å±‚ã€‚å¦‚blockçš„å®ç°åŸç† å®ç°ç»™åˆ†ç±»å¢åŠ å±æ€§ å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œæ¥æ¡£ å®ç°å­—å…¸çš„æ¨¡å‹å’Œè‡ªåŠ¨è½¬æ¢ åŸºæœ¬å…ƒç´ çš„è®¤è¯† class å’Œ id éƒ½è¢«ç§°ä¸ºç±»å¯¹è±¡ã€‚ selector å¯ä»¥ç†è§£ä¸ºæ–¹æ³•çš„ID, é€šè¿‡ @selector å¯ä»¥æ‰¾åˆ°æ–¹æ³•çš„åœ°å€ã€‚ IMPæ˜¯implementation è¢«ç§°ä¸º å‡½æ•°æŒ‡é’ˆã€‚ Method ä»£è¡¨ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ç±»å‹ã€‚ lvar ä»£è¡¨ å®ä¾‹å˜é‡ç±»å‹ã€‚ objc_property_t æ˜¯å±æ€§ã€‚ å®šä¹‰ä¸€ä¸ªå±æ€§ï¼štypedef struct objc_property *objc_property_t; Category åˆ†ç±»ã€‚ å¯åŠ¨æ€ä¸ºå·²çŸ¥ç±»æ·»åŠ æ–°çš„æ–¹æ³•ã€‚ æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹è°ƒç”¨å®ä¾‹æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé¦–å…ˆåœ¨è‡ªèº«isaæŒ‡é’ˆæŒ‡å‘çš„ç±»ï¼ˆclassï¼‰methodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¼šé€šè¿‡classçš„super_classæŒ‡é’ˆæ‰¾åˆ°çˆ¶ç±»çš„ç±»å¯¹è±¡ç»“æ„ä½“ï¼Œç„¶åä»methodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æœä»æ‰¾ä¸åˆ°åˆ™ç»§ç»­é€šè¿‡super_classå‘ä¸ŠæŸ¥æ‰¾çŸ¥é“metaclass å®ç°ä¾‹å­1234567891011121314&#x2F;&#x2F; éå†ç±»ä¸­æ‰€æœ‰çš„å˜é‡-(void) getALLVariable&#123; unsigned int count &#x3D; 0; Ivar *allVariables &#x3D; class_copyIvarList([Student class], &amp;count); for (int i &#x3D; 0 ; i&lt; count; i++) &#123; &#x2F;&#x2F;éå†æ¯ä¸€ä¸ªå˜é‡,åŒ…æ‹¬åç§°å’Œç±»å‹ Ivar ivar &#x3D; allVariables[i]; const char *VariableName &#x3D; ivar_getName(ivar); const char *VariableType &#x3D; ivar_getTypeEncoding(ivar); NSLog(@&quot;(Name:%s)-------(Type:%s)&quot;,VariableName,VariableType); &#125;&#125; è‹¥æ˜¯æƒ³éå†å±æ€§åˆ—è¡¨å¯ä»¥å°†class_copyIvarListæ›¿æ¢ä¸ºclass_copyPropertyListã€‚ 12345678910111213141516&#x2F;&#x2F;éå†ç±»çš„æ–¹æ³•-(void) getAllMethod&#123; unsigned int count &#x3D; 0; Method *AllMethods &#x3D; class_copyMethodList([Student class], &amp;count); for (int i &#x3D; 0 ; i&lt;count; i++) &#123; Method method &#x3D; AllMethods[i]; &#x2F;&#x2F;è·å–SELï¼šSELç±»å‹,å³è·å–æ–¹æ³•é€‰æ‹©å™¨@selector() SEL sel &#x3D; method_getName(method); &#x2F;&#x2F;å¾—åˆ°selçš„æ–¹æ³•åï¼šä»¥å­—ç¬¦ä¸²æ ¼å¼è·å–selçš„nameï¼Œä¹Ÿå³@selector()ä¸­çš„æ–¹æ³•åç§° const char *methodName &#x3D; sel_getName(sel); NSLog(@&quot;-------the method :%s&quot;,methodName); &#125;&#125; åŠ¨æ€æ”¹å˜ä¸€ä¸ªç±»å˜é‡çš„æ•°å€¼123456789101112131415161718&#x2F;&#x2F;æ”¹å˜Personå˜é‡çš„æ•°å€¼-(void) changeVariable&#123; NSLog(@&quot;before change person : %@ -------&quot;,_person); unsigned int count &#x3D; 0; Ivar *allList &#x3D; class_copyIvarList([Person class], &amp;count); for (int i &#x3D; 0; i&lt; count; i++) &#123; Ivar var &#x3D; allList[i]; const char *varName &#x3D; ivar_getName(var); NSString *name &#x3D; [NSString stringWithUTF8String:varName]; if ([name isEqualToString:@&quot;_name&quot;]) &#123; object_setIvar(_person, var, @&quot;lannis&quot;); &#125; &#125; NSLog(@&quot;after change person : %@ -------&quot;,_person);&#125; åŠ¨æ€æ·»åŠ æ–¹æ³•12345678910111213-(void) addMethod&#123; class_addMethod([self class], @selector(addfunc3), (IMP)func3, &quot;v@:&quot;); if ([self respondsToSelector:@selector(addfunc3)]) &#123; [self performSelector:@selector(addfunc3)]; &#125;else&#123; NSLog(@&quot;add method error&quot;); &#125;&#125;void func3(id self,SEL _cmd)&#123; NSLog(@&quot;%s&quot;,__func__);&#125; è°ƒç”¨class_addMethod(__unsafe_unretained Class cls, SEL name, IMP imp, const char *types)æ–¹æ³•ç»™æŒ‡å®šç±»æ·»åŠ æ–¹æ³•ã€‚impå‚æ•°ï¼šå®ç°è¢«æ·»åŠ æ–¹æ³•çš„å‡½æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­func3æ˜¯æŒ‡func3çš„åœ°å€æŒ‡é’ˆï¼›typeså‚æ•°ï¼šä¸€ä¸ªå®šä¹‰è¯¥å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå‚æ•°ç±»å‹çš„å­—ç¬¦ä¸²ã€‚æœ¬ä¾‹ä¸­â€v@:â€æ„æ€æ˜¯vä»£è¡¨æ— è¿”å›å€¼voidï¼Œ@ä»£è¡¨id selï¼›ï¼šä»£è¡¨SEL _cmdï¼›è¦æ³¨æ„çš„æ˜¯ï¼šfunc3æ–¹æ³•å‰çš„voidä¸åŠ +ã€-å·ï¼Œå› ä¸ºè¿™æ˜¯Cçš„ä»£ç ï¼›å¿…é¡»æœ‰æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼ˆid selfï¼ŒSEL _cmdï¼‰ï¼› åŠ¨æ€äº¤æ¢æ–¹æ³•å°†å­˜åœ¨çš„ä¸¤ä¸ªæ–¹æ³•çš„å®ç°è¿›è¡Œäº¤æ¢ 123456-(void) exchangeImplementations&#123; Method m1 &#x3D; class_getInstanceMethod([Person class], @selector(func1)); Method m2 &#x3D; class_getInstanceMethod([Person class], @selector(func2)); method_exchangeImplementations(m1, m2);&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"TextViewå¯Œæ–‡æœ¬æ’å…¥å›¾ç‰‡","slug":"textViewPicture","date":"2020-01-07T03:26:39.000Z","updated":"2020-05-27T00:36:02.000Z","comments":true,"path":"2020/01/07/textViewPicture/","link":"","permalink":"https://www.littlewhale.xyz/2020/01/07/textViewPicture/","excerpt":"welcome look this NoteTextView Small Demo l., you can use NoteTextView insertPicture that you can process the data to your server. also, it will not be hide TextView â€˜s point position by keyboard . ok , just try . you can find it on my github.com/gaoyingqiu.","text":"welcome look this NoteTextView Small Demo l., you can use NoteTextView insertPicture that you can process the data to your server. also, it will not be hide TextView â€˜s point position by keyboard . ok , just try . you can find it on my github.com/gaoyingqiu. Quick Startå›¾ç‰‡æ’å…¥textViewä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ã€‚è§£å†³textViewåœ¨tableView ä¸­é”®ç›˜é®æŒ¡é—®é¢˜ã€‚ show you screen photos .","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"å¯Œæ–‡æœ¬","slug":"å¯Œæ–‡æœ¬","permalink":"https://www.littlewhale.xyz/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/"}]},{"title":"iOSä¸­é«˜çº§é˜¶æ®µè·¯çº¿å›¾","slug":"iOSAdvancedRoute","date":"2020-01-07T03:25:46.000Z","updated":"2020-05-27T00:39:36.000Z","comments":true,"path":"2020/01/07/iOSAdvancedRoute/","link":"","permalink":"https://www.littlewhale.xyz/2020/01/07/iOSAdvancedRoute/","excerpt":"1ã€iOS 11ä¹‹å‰çš„å¯¼èˆªæ çš„é«˜åº¦æ˜¯64pxï¼ˆçŠ¶æ€æ¡+å¯¼èˆªæ ï¼‰ï¼ŒiOS11ä¹‹åå¦‚æœè®¾ç½®äº†prefersLargeTitles = YESï¼ˆé»˜è®¤NOï¼‰åˆ™ä¸º96ptã€‚æ‰€ä»¥ä¸€èˆ¬ä¸ç”¨ç®¡ã€‚ 2ã€åœ¨iOS 11ä¸Šè¿è¡ŒtableViewå‘ä¸‹åç§»64pxæˆ–è€…20pxï¼Œå› ä¸ºiOS 11åºŸå¼ƒäº†automaticallyAdjustsScrollViewInsetsï¼Œè€Œæ˜¯ç»™UIScrollViewå¢åŠ äº†contentInsetAdjustmentBehaviorå±æ€§ã€‚é¿å…è¿™ä¸ªå‘çš„æ–¹æ³•æ˜¯è¦åˆ¤æ–­ 3ã€tableViewçš„sectionHeaderã€sectionFooteré«˜åº¦ä¸è®¾ç½®ä¸ç¬¦ï¼Œå› ä¸ºtableViewçš„estimatedRowHeightã€estimatedSectionHeaderHeightã€ estimatedSectionFooterHeightä¸‰ä¸ªé«˜åº¦ä¼°ç®—å±æ€§ç”±é»˜è®¤çš„0å˜æˆäº†UITableViewAutomaticDimensionã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è®¾ç½®ä¸º0ã€‚ 4ã€iPhone XçŠ¶æ€æ¡ç”±20pxå˜æˆäº†44pxï¼ŒUITabBarç”±49pxå˜æˆäº†83pxã€‚è®¾ç½®å¸ƒå±€æ—¶yç›´æ¥å†™æˆ64çš„å°±è¦æ ¹æ®æœºå‹è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å® #define Device_Is_iPhoneX ([UIScreen instancesRespondToSelector:@selector(currentMode)] ? CGSizeEqualToSize(CGSizeMake(1125, 2436), [[UIScreen mainScreen] currentMode].size) : NO)ï¼Œ æ¨é€æ¨¡å—ï¼Œæ¨é€æ¶ˆæ¯å­˜å‚¨ H5 çš„webView è·³è½¬ ä¸åŸç”Ÿäº¤äº’ã€‚ å›¾ç‰‡å‹ç¼©ç¼“å­˜ã€‚ å‘è¡¨è¯é¢˜ã€‚","text":"1ã€iOS 11ä¹‹å‰çš„å¯¼èˆªæ çš„é«˜åº¦æ˜¯64pxï¼ˆçŠ¶æ€æ¡+å¯¼èˆªæ ï¼‰ï¼ŒiOS11ä¹‹åå¦‚æœè®¾ç½®äº†prefersLargeTitles = YESï¼ˆé»˜è®¤NOï¼‰åˆ™ä¸º96ptã€‚æ‰€ä»¥ä¸€èˆ¬ä¸ç”¨ç®¡ã€‚ 2ã€åœ¨iOS 11ä¸Šè¿è¡ŒtableViewå‘ä¸‹åç§»64pxæˆ–è€…20pxï¼Œå› ä¸ºiOS 11åºŸå¼ƒäº†automaticallyAdjustsScrollViewInsetsï¼Œè€Œæ˜¯ç»™UIScrollViewå¢åŠ äº†contentInsetAdjustmentBehaviorå±æ€§ã€‚é¿å…è¿™ä¸ªå‘çš„æ–¹æ³•æ˜¯è¦åˆ¤æ–­ 3ã€tableViewçš„sectionHeaderã€sectionFooteré«˜åº¦ä¸è®¾ç½®ä¸ç¬¦ï¼Œå› ä¸ºtableViewçš„estimatedRowHeightã€estimatedSectionHeaderHeightã€ estimatedSectionFooterHeightä¸‰ä¸ªé«˜åº¦ä¼°ç®—å±æ€§ç”±é»˜è®¤çš„0å˜æˆäº†UITableViewAutomaticDimensionã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è®¾ç½®ä¸º0ã€‚ 4ã€iPhone XçŠ¶æ€æ¡ç”±20pxå˜æˆäº†44pxï¼ŒUITabBarç”±49pxå˜æˆäº†83pxã€‚è®¾ç½®å¸ƒå±€æ—¶yç›´æ¥å†™æˆ64çš„å°±è¦æ ¹æ®æœºå‹è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å® #define Device_Is_iPhoneX ([UIScreen instancesRespondToSelector:@selector(currentMode)] ? CGSizeEqualToSize(CGSizeMake(1125, 2436), [[UIScreen mainScreen] currentMode].size) : NO)ï¼Œ æ¨é€æ¨¡å—ï¼Œæ¨é€æ¶ˆæ¯å­˜å‚¨ H5 çš„webView è·³è½¬ ä¸åŸç”Ÿäº¤äº’ã€‚ å›¾ç‰‡å‹ç¼©ç¼“å­˜ã€‚ å‘è¡¨è¯é¢˜ã€‚ ï¼ˆè‡ªå®šä¹‰æ§ä»¶ï¼‰ 1ï¼‰å›¾ç‰‡ç¼–è¾‘ï¼Œ å¯Œæ–‡æœ¬æ“ä½œ 3ï¼‰è¯é¢˜å¤„ç†ï¼› (æ­£åˆ™è¡¨è¾¾å¼) ï¼ˆåª’ä½“åº“æ“ä½œï¼‰ 2ï¼‰éŸ³é¢‘ï¼Œç›´æ’­ ,ç›¸æœºç¾é¢œç­‰æŠ€æœ¯ 3) è“ç‰™ æ“ä½œ 4ï¼‰è®¾è®¡æ¨¡å¼ é˜…è¯»CYLTabBarController YYCache ä¸­çº§çŸ¥è¯†ç‚¹ è®¾è®¡æ¨¡å¼ UIScrollView/UITableView/UICollectionView çš„åµŒå¥— åŠ¨æ€è¡Œé«˜ é€šçŸ¥/ä»£ç†/block ç¨‹åºå¯åŠ¨åŸç† è§¦æ‘¸äº‹ä»¶/æ‰‹åŠ¿ å›¾æ–‡æ··ç¼– Runtime NSRunLoop GCD ReactiveCocoaå¼€å‘ 3DTouch ç•Œé¢æ¸²æŸ“ CharlesèŠ±ç“¶æŠ“åŒ… åŒºåˆ†æ¨¡æ‹Ÿå™¨/çœŸæœºé¡¹ç›® å¸¸ç”¨çŸ¥è¯† å¤šçº¿ç¨‹ ï¼Œç½‘ç»œè¯·æ±‚ï¼›ï¼›æ¨é€/è¿œç¨‹æ¨é€ æºä»£ç ç®¡ç†Git è‹¹æœå†…è´­/å¹¿å‘Š éŸ³é¢‘/è§†é¢‘/äºŒç»´ç  è“ç‰™/ä¼ æ„Ÿå™¨ ç‰©ç†ä»¿çœŸå™¨UIDynamic iOSé«˜çº§çŸ¥è¯†ç‚¹ iOSé«˜çº§çŸ¥è¯†ç‚¹ Socket XMPP åŠ å¯† MD5è¯¦è§£ Base64åŠ å¯†è§£å¯† RSAéå¯¹ç§°åŠ å¯† AESå¯¹ç§°åŠ å¯† éŸ³é¢‘ åŸºç¡€ Core Audio Audio Toolbox OpenAL AVFoundation Speexè¯­éŸ³èŠå¤© AudioQueue/AudioSession Speexç®€ä»‹ è§†é¢‘ AACè§†é¢‘.H264æ¨æµ P2Pä¼ è¾“ ç›´æ’­ ç›´æ’­çš„æŠ€æœ¯åˆ†æä¸å®ç° RTMPåè®® RTMPç›´æ’­åº”ç”¨ä¸å»¶æ—¶åˆ†æ å¦‚æœåšä¸€æ¬¾inkeç‰ˆçš„App æ¨æµå‘å¸ƒå’Œæ’­æ”¾RTMP FFmpeg åŸºäºFFmpegçš„æ¨æµå™¨ HLSæµåª’ä½“ä¼ è¾“åè®®(HTTP Live Streaming) FFmpeg ijkPlayer ç®—æ³• ç®€ä»‹ å†’æ³¡æ’åº å¿«é€Ÿæ’åº æ’å…¥æ’åº å½’å¹¶æ’åº äºŒåˆ†æŸ¥æ‰¾ å¸Œå°”æ’åº åŠ¨æ€è§„åˆ’ å †æ’åº","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"HTTPåè®®è¯¦è§£","slug":"http","date":"2020-01-07T03:25:30.000Z","updated":"2020-05-27T00:41:56.000Z","comments":true,"path":"2020/01/07/http/","link":"","permalink":"https://www.littlewhale.xyz/2020/01/07/http/","excerpt":"","text":"è¯·æ±‚å¤´ è¯·æ±‚å¤´éƒ¨ï¼Œç´§æ¥ç€è¯·æ±‚è¡Œï¼ˆå³ç¬¬ä¸€è¡Œï¼‰ä¹‹åçš„éƒ¨åˆ†ï¼Œç”¨æ¥è¯´æ˜æœåŠ¡å™¨è¦ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ï¼Œå¦‚Host: ä¸»æœºåï¼Œ Use-Agent: æµè§ˆå™¨åŸºæœ¬èµ„æ–™ï¼Œ Accept: æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„å“åº”ç±»å‹ï¼Œ Accept-Language: æµè§ˆå™¨é»˜è®¤è¯­è¨€ï¼Œ Accept-Encoding: æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„å‹ç¼©æ–¹å¼ï¼Œ Referer: æ¥è·¯é¡µé¢ï¼Œ Connectonï¼šæ˜¯å¦ä¿æŒè¿æ¥ã€‚ GET GETæäº¤ï¼Œè¯·æ±‚çš„æ•°æ®ä¼šé™„åœ¨URLä¹‹åï¼ˆå°±æ˜¯æŠŠæ•°æ®æ”¾ç½®åœ¨HTTPåè®®å¤´ä¸­ï¼‰ï¼Œå¦‚æœæ•°æ®æ˜¯è‹±æ–‡å­—æ¯/æ•°å­—ï¼ŒåŸæ ·å‘é€ï¼›å¦‚æœæ˜¯ç©ºæ ¼ï¼Œè½¬æ¢ä¸º+ï¼›å¦‚æœæ˜¯ä¸­æ–‡/å…¶ä»–å­—ç¬¦ï¼Œåˆ™ç›´æ¥æŠŠå­—ç¬¦ä¸²ç”¨BASE64åŠ å¯†ï¼Œå¾—å‡ºå¦‚ï¼š %E4%BD%A0%E5%A5%BDï¼Œå…¶ä¸­ï¼…XXä¸­çš„XXä¸ºè¯¥ç¬¦å·ä»¥16è¿›åˆ¶è¡¨ç¤ºçš„ASCIIã€‚ é™åˆ¶GET:ç‰¹å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹URLé•¿åº¦æœ‰é™åˆ¶. POST:ç”±äºä¸æ˜¯é€šè¿‡URLä¼ å€¼ï¼Œç†è®ºä¸Šæ•°æ®ä¸å— é™ã€‚ä½†å®é™…å„ä¸ªWEBæœåŠ¡å™¨ä¼šè§„å®šå¯¹postæäº¤æ•°æ®å¤§å°è¿›è¡Œé™åˆ¶ï¼ŒApacheã€IIS6éƒ½æœ‰å„è‡ªçš„é…ç½® httpè¯·æ±‚content-Typeapplication/x-www-form-urlencodedï¼šæ•°æ®è¢«ç¼–ç ä¸ºåç§°/å€¼å¯¹ã€‚è¿™æ˜¯æ ‡å‡†çš„ç¼–ç æ ¼å¼ã€‚è¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå¤šã€‚ multipart/form-dataï¼š æ•°æ®è¢«ç¼–ç ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œé¡µä¸Šçš„æ¯ä¸ªæ§ä»¶å¯¹åº”æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚ä¸€èˆ¬ä¸Šä¼ æ–‡ä»¶æ‰ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ text/plainï¼š æ•°æ®ä»¥çº¯æ–‡æœ¬å½¢å¼(text/json/xml/html)è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­ä¸å«ä»»ä½•æ§ä»¶æˆ–æ ¼å¼å­—ç¬¦ã€‚ä¸€èˆ¬å‘æœåŠ¡ç«¯å‘é€jsonæ•°æ®ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ HTTPSæ•°æ®åŠ å¯† HTTPåè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨HTTPåè®®ä¼ è¾“éšç§ä¿¡æ¯éå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼Œäºæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†SSLï¼ˆSecure Sockets Layerï¼‰åè®®ç”¨äºå¯¹HTTPåè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œå°±è¯ç”Ÿäº†HTTPS","categories":[],"tags":[{"name":"HTTP","slug":"HTTP","permalink":"https://www.littlewhale.xyz/tags/HTTP/"}]},{"title":"iOSåˆçº§é˜¶æ®µ","slug":"iOSPrimaryRoute","date":"2020-01-07T03:24:45.000Z","updated":"2020-05-27T00:40:51.000Z","comments":true,"path":"2020/01/07/iOSPrimaryRoute/","link":"","permalink":"https://www.littlewhale.xyz/2020/01/07/iOSPrimaryRoute/","excerpt":"è‹¹æœè‡ªå¸¦æ¡†æ¶ ç¬¬ä¸‰æ–¹æ¡†æ¶ AFNetworking SDAutoLayout YYKit SDWebImage MJRefresh MJExtension Bugly Qiniu Masonry TZImagePickerController Hyphenate_CN","text":"è‹¹æœè‡ªå¸¦æ¡†æ¶ ç¬¬ä¸‰æ–¹æ¡†æ¶ AFNetworking SDAutoLayout YYKit SDWebImage MJRefresh MJExtension Bugly Qiniu Masonry TZImagePickerController Hyphenate_CN åŸºç¡€UIæ§ä»¶ UILabel æ ‡é¢˜æ  UIButton æŒ‰é’® UIImageView å›¾ç‰‡è§†å›¾ UITextField æ–‡æœ¬è¾“å…¥æ¡† UITextView æ–‡æœ¬å±•ç¤ºè§†å›¾ UIProgressView è¿›åº¦æ¡ UISlider æ»‘åŠ¨å¼€å…³ UIGesture æ‰‹åŠ¿ UIActivityIndicator èŠèŠ±æ§ä»¶ UIAlertView(iOS8åºŸé™¤) è­¦å‘Šæ¡† UIActionSheet(iOS8åºŸé™¤) æ“ä½œè¡¨å• UIAlertController(iOS8å‡ºç°) è­¦å‘Šè§†å›¾æ§åˆ¶å™¨ UIScrollView æ»šåŠ¨è§†å›¾ UIPageControl é¡µé¢æ§åˆ¶å™¨ UISearchBar æœç´¢æ¡† UITableView è¡¨è§†å›¾ UICollectionViewé›†åˆè§†å›¾ UIWebViewç½‘é¡µæµè§ˆå™¨ UISwitchå¼€å…³ UISegmentControlé€‰æ‹©æŒ‰é’® UIPickerViewé€‰æ‹©å™¨ UIDatePickeræ—¥æœŸé€‰æ‹©å™¨ UIToolbarå·¥å…·æ  UINavigationBaré€šçŸ¥æ  UINavigationControlleré€šçŸ¥è§†å›¾æ§åˆ¶å™¨ UITabbarControlleré€‰æ‹©è§†å›¾æ§åˆ¶å™¨ UIImagePickerControllerç›¸å†Œ UIImageå›¾ç‰‡ Xcodeçš„ä½¿ç”¨ åŸºç¡€æ“ä½œ çŠ¶æ€æ  åå¥½è®¾ç½® Xcode Source Control æºä»£ç ç®¡ç†å™¨ Xcode workSpaceå·¥ä½œç»„ Xcode Scheme è®¡åˆ’ Xcode AutoLayout çº¦æŸ Xcode CoreDataæ•°æ®åº“ LLDB æ–­ç‚¹è°ƒè¯• StoryBoard ç•Œé¢é¢„è§ˆ ç•Œé¢é€‚é… å†…å­˜ç›‘æµ‹ å…¨å±€æ–­ç‚¹ å…¨å±€æœç´¢æ›¿æ¢ æ•°æ®å­˜å‚¨ plist NSKeyedArchiver SQLite FMDB CoreData NSUserDefault æ²™ç›’å­˜å‚¨ NSDictionaryå½’æ¡£ Appç”Ÿå‘½å‘¨æœŸ åº”ç”¨ç”Ÿå‘½å‘¨æœŸ æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ alloc init åˆ›å»ºView ViewDidLoad ViewWillAppear ViewDidAppear ViewWillDisappear è§†å›¾å°†è¦æ¶ˆå¤± (åšä¸€äº›è§†å›¾å°†è¦æ¶ˆå¤±æ—¶çš„UIçš„å¤„ç†) ViewDidDisappear è§†å›¾å·²ç»æ¶ˆå¤± (åšä¸€äº›è§†å›¾æ¶ˆå¤±ä¹‹åæ•°æ®çš„å¤„ç†) viewDidDisappearé”€æ¯å®šæ—¶å™¨ dealloc didReceiveMemoryWarning é€šä¿¡ NSç³»åˆ— å®å®šä¹‰ è§†å›¾å±‚æ¬¡ åˆ‡æ¢è§†å›¾ æ·±æµ…æ‹·è´ å¯¹è±¡åºåˆ—åŒ– å†™å…¥æ–‡ä»¶ è·å–æ²™ç›’è·¯å¾„ ç¿»è½¬è§†å›¾ å»¶ä¼¸è§†å›¾ ä¹å¤§åŸºæœ¬æ•°æ®ç±»å‹ ä¹å®«æ ¼ åæ ‡æ¯”è¾ƒ UIColor ã€CIColorå’ŒCGColor ä¹‹é—´çš„å…³ç³» ç”»å›¾ é™æ€å˜é‡ tagå€¼ å»¶æ—¶æ‰§è¡Œæ–¹æ³• ç•Œé¢æ—‹è½¬+çŠ¶æ€æ éšè— plistæ–‡ä»¶ KVC/KVO è°“è¯NSPredicate å¸§åŠ¨ç”» AutoLayout isKindOfClass ä¸ isMemberOfClass Return/Break/Continue Core Animation CALayer Quartz2D çœŸæœºè°ƒè¯• é™æ€åº“ å†…å­˜ç®¡ç† iPadä¸iPhoneçš„åŒºåˆ« å“åº”é“¾ å¼‚å¸¸æ•æ‰ å›½é™…åŒ– ä»£ç æ¨¡å—åŒ– ç±»åˆ«/æ‰©å±•","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"æ‰¾å‡ºå­—ç¬¦ä¸²æœ€é•¿å•è¯","slug":"longWord","date":"2019-12-10T10:52:26.000Z","updated":"2020-05-27T00:46:56.000Z","comments":true,"path":"2019/12/10/longWord/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/10/longWord/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233#include &lt;string.h&gt;void countWords()&#123; char str[100] = \"hello, my name is gaogaoProgramer, welcome to come here!\"; int index; long len = strlen(str); int spaceIndex = 0; //ä»ç¬¬ä¸€ä¸ªä¸‹æ ‡å¼€å§‹ç®— int recordMax = 0; //å•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®å³ä¸ºæœ€é•¿å•è¯ int beforeIndex = 0,afterIndex = 0; //å®šä¹‰æœ€é•¿å•è¯çš„å‰ç©ºæ ¼ï¼Œåç©ºæ ¼ for(index = 0; index &lt; len; index++)&#123; if(str[index] == 32)&#123; //åˆ¤æ–­ç©ºæ ¼ if(index - spaceIndex &gt; recordMax)&#123; recordMax = index - spaceIndex; //è®°å½•å‰ä¸‹æ ‡å’Œåä¸‹æ ‡ã€‚ beforeIndex = spaceIndex; afterIndex = index; &#125; spaceIndex = index; &#125; &#125; printf(\"åŸå§‹å•è¯ä¸ºï¼š%s\",str); printf(\"\\nå•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®:%d å‰ä¸‹æ ‡:%d,åä¸‹æ ‡:%d\",recordMax,beforeIndex,afterIndex); //è¾“å‡ºæ‰¾åˆ°çš„å•è¯ï¼› printf(\"\\n\\næ‰¾åˆ°çš„æœ€é•¿åº¦å•è¯ä¸ºï¼š\"); int charIndex; for(charIndex = beforeIndex; charIndex&lt; afterIndex ; charIndex++)&#123; printf(\"%c\",str[charIndex]); &#125;&#125;","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.littlewhale.xyz/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"ä¿ƒé”€æ–¹å¼","slug":"promotionMethod","date":"2019-12-10T10:36:56.000Z","updated":"2020-05-27T00:58:06.000Z","comments":true,"path":"2019/12/10/promotionMethod/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/10/promotionMethod/","excerpt":"","text":"","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"èŒåœºç¡¬æ ¸ä¸è½¯å®åŠ›","slug":"softPower","date":"2019-12-09T10:45:07.000Z","updated":"2020-05-27T00:46:14.000Z","comments":true,"path":"2019/12/09/softPower/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/09/softPower/","excerpt":"æˆ‘ä»¬çš„ä»äº‹çš„å¤§å¤šæ•°éƒ½æ˜¯å¹³å‡¡å·¥ä½œã€‚æ²¡æœ‰ç§‘å­¦å®¶åœ¨å®éªŒå®¤ç§‘ç ”çš„é«˜ç§‘æŠ€åˆ›æ–°ï¼Œæ²¡æœ‰å®‡å®™èˆªå¤©ç§‘æŠ€æ¢ç´¢çš„å¥¥ç§˜ã€‚æˆ–è®¸æ¯å¤©éƒ½åšç€é‡å¤å•ä¸€çš„å·¥ä½œï¼Œæˆ–è®¸å¾ˆå¤šå²—ä½éƒ½è¢«æ™ºèƒ½è‡ªåŠ¨åŒ–æœºå™¨ç»™æ›¿ä»£ã€‚14å¹´ä¹‹åï¼Œå¾ˆå¤šä¼ä¸šéƒ½è½¬å‹æˆç§»åŠ¨äº’è”ç½‘ä¼ä¸šï¼Œå¾ˆå¤šçº¿ä¸‹åº—é“ºéƒ½å®ç°äº†çº¿ä¸Šæ”¯ä»˜åŠŸèƒ½ã€‚æˆ‘ä»¬ä¸æ–­æ¥è§¦ç€æ–°äº‹ç‰©å’Œè¢«æ–°äº‹ç‰©æ´—ç¤¼ã€‚ é‚£äº›ä¸æ„¿æ„æ”¹å˜ï¼Œä¸æ„¿æ„å­¦ä¹ æ–°äº‹ç‰©çš„ä¼ä¸šå’Œä¸ªäºº éƒ½æ…¢æ…¢é€€å‡ºäº†å†å²èˆå°ã€‚","text":"æˆ‘ä»¬çš„ä»äº‹çš„å¤§å¤šæ•°éƒ½æ˜¯å¹³å‡¡å·¥ä½œã€‚æ²¡æœ‰ç§‘å­¦å®¶åœ¨å®éªŒå®¤ç§‘ç ”çš„é«˜ç§‘æŠ€åˆ›æ–°ï¼Œæ²¡æœ‰å®‡å®™èˆªå¤©ç§‘æŠ€æ¢ç´¢çš„å¥¥ç§˜ã€‚æˆ–è®¸æ¯å¤©éƒ½åšç€é‡å¤å•ä¸€çš„å·¥ä½œï¼Œæˆ–è®¸å¾ˆå¤šå²—ä½éƒ½è¢«æ™ºèƒ½è‡ªåŠ¨åŒ–æœºå™¨ç»™æ›¿ä»£ã€‚14å¹´ä¹‹åï¼Œå¾ˆå¤šä¼ä¸šéƒ½è½¬å‹æˆç§»åŠ¨äº’è”ç½‘ä¼ä¸šï¼Œå¾ˆå¤šçº¿ä¸‹åº—é“ºéƒ½å®ç°äº†çº¿ä¸Šæ”¯ä»˜åŠŸèƒ½ã€‚æˆ‘ä»¬ä¸æ–­æ¥è§¦ç€æ–°äº‹ç‰©å’Œè¢«æ–°äº‹ç‰©æ´—ç¤¼ã€‚ é‚£äº›ä¸æ„¿æ„æ”¹å˜ï¼Œä¸æ„¿æ„å­¦ä¹ æ–°äº‹ç‰©çš„ä¼ä¸šå’Œä¸ªäºº éƒ½æ…¢æ…¢é€€å‡ºäº†å†å²èˆå°ã€‚ å°¤å…¶æ˜¯ITè¡Œä¸šä»ä¸šäººå‘˜ï¼ŒåŸºæœ¬æ¯å¹´éƒ½æœ‰ä¸€æ¬¡æŠ€æœ¯é©æ–°ã€‚æ–°äº§ç‰©ï¼Œæ–°å·¥ç§ä¹Ÿé€æ¸ç”Ÿå­˜åœ¨è¿™ä¸ªå¸‚åœºä¸­ã€‚æˆ‘ä»¬æ¯å¤©éƒ½è¦ä¸æ–­åœ°å­¦ä¹ æ–°çŸ¥è¯†ï¼Œä¸ºæå‡æŠ€æœ¯ï¼Œä¸ºå‡èŒåŠ è–ªå«å®šåŸºç¡€ï¼›å¦‚æœä¸å­¦ä¹ ï¼Œæˆ‘ä»¬å°†å’Œæ–°æ—¶ä»£æŠ€æœ¯æ‹–è½¨ï¼Œè¢«æ—¶ä»£æŠ›å¼ƒã€‚ é™¤äº†åœ¨ä¸“ä¸šæŠ€æœ¯è¿‡ç¡¬ä»¥å¤–ï¼Œåœ¨è½¯æŠ€èƒ½æ–¹é¢æˆ‘ä»¬é€šè¿‡è¿™èŠ‚Chatè°ˆä¸€è°ˆã€‚ ä¿¡èµ–åº¦ä¾æ®ï¼šè¦æ±‚ä»»ä½•äººåšäº‹ï¼Œä¸è®ºå¯¹ä¸Š/å¯¹ä¸‹è¿˜æ˜¯å¹³è¡Œï¼Œåœ¨æ²¡æœ‰å“è¶Šçš„è¡¨ç°å¯ä»¥é¢„æœŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±åªèƒ½å¸Œæœ›ä»–/å¥¹â€œå¯é â€ 1ã€å¯ä»¥ä¸¥æ ¼è¦æ±‚è‡ªå·±æŒ‰ç…§æŒ‡ä»¤æˆ–éœ€æ±‚ï¼Œå®Œæˆä»–äººäº¤ä»˜çš„ä»»åŠ¡æˆ–å·¥ä½œã€‚ç”¨å¿ƒæŠŠäº‹æƒ…åšåˆ°å®Œç¾ã€‚2ã€åœ¨æ‰§è¡Œä»»åŠ¡æˆ–å·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¤šæ³¨æ„ç»†èŠ‚ï¼Œèƒ½ä¸»åŠ¨å‘ç°å¹¶æŠ¥å‘Šâ€œåå·®â€ã€‚3ã€åœ¨ä»»åŠ¡æˆ–å·¥ä½œæ²¡æœ‰å®Œå…¨ç»“æŸä»¥å‰ï¼Œèƒ½å§‹ç»ˆä¿æŒæ³¨æ„åŠ›ï¼Œä¸ä¼šæ¾æ‡ˆã€‚4ã€ä»»åŠ¡æˆ–å·¥ä½œç»“æŸæ—¶ï¼Œå°½å¿«å‘ŠçŸ¥å¯¹æ–¹å¹¶å¾è¯¢æ„è§ï¼Œå¦‚æœæœ‰ç–å¿½æˆ–å·®é”™ï¼Œå…ˆé“æ­‰ï¼Œå¹¶è¯´æ˜ä»¥åçš„é˜²èŒƒæ–¹æ³•ã€‚5ã€å¯¹æ‰€æœ‰ä¸è¶³æˆ–ä¸æ‡‚çš„åœ°æ–¹ï¼Œä¼šä¸æ–­åœ°é—®ï¼Œä¸æ–­åœ°å­¦ã€‚ æ´å‡€åº¦ç¾å’Œæ•´æ´ç¡®å®å¯ä»¥ç»™è‡ªå·±ä¸ªäººå½¢è±¡åŠ åˆ†ã€‚ä½†æˆ‘ä»¬åœ¨å·¥ä½œçš„æ´å‡€åº¦ä¸Šä¹Ÿå¯ä»¥ç»™è‡ªå·±å¸¦æ¥åŠ åˆ†ã€‚ 1ã€äº¤ä»˜å‡ºå»çš„æ–‡ä»¶/æ¡£æ¡ˆ/ç‰©å“/å·¥ä½œå†…å®¹ï¼Œä¸€å®šè¦æ¸…æ¸…æ¥šæ¥šï¼Œä¸€å®šè¦æœ‰æ¡ç†ï¼Œä¸€å®šè¦ä»”ç»†ã€‚2ã€ä¸è®ºä»»ä½•ä¸œè¥¿ï¼Œåªè¦ä»æˆ‘æ‰‹ä¸­å‡ºå»ï¼Œè‡ªå·±å…ˆæ£€æŸ¥ï¼Œå…ˆæ ¡å¯¹ï¼Œå…ˆç¡®è®¤ã€‚3ã€æ¯æœˆï¼Œæ¯å‘¨ï¼Œæ¯å¤©åšäº†ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç»“æœï¼Œè‡ªå·±æ€ä¹ˆæƒ³çš„ï¼Œä»»ä½•å·¥ä½œé¡¹è‡ªå·±éƒ½è¦æœ‰æ•°æ®è®°å½•ã€‚ è¯šä¿¡åº¦ä¸“ä¸šå’Œé«˜æ•ˆå¯ä»¥æå‡æˆ‘ä»¬çš„ä¸šç»©ã€‚çœŸè¯šä¿¡ä»»å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥æ›´å¤šçš„ç”¨æˆ·å’Œä¼™ä¼´ã€‚é€šè¿‡ä¿¡ä»»çš„ç»´æŒï¼Œæˆ‘ä»¬å¯ä»¥æŠŠäº§å“åšå¾—æ›´å¥½ã€‚ç®¡ç†å±‚äººå‘˜çš„ç­›é€‰åŸºæœ¬ä¹Ÿæ˜¯ä»æœ€äº²ä¸´çš„ä¸‹å±æ¥è¿›è¡Œææ‹”ã€‚å› ä¸ºåŸºäºä¿¡ä»»ï¼ŒåŸºäºäº†è§£ã€‚ 1ã€éšæ—¶æ³¨æ„è‡ªå·±åº”è¯¥è´Ÿè´£çš„å·¥ä½œï¼Œå®šæœŸè®©éƒ¨é—¨ä¸»ç®¡çŸ¥é“ã€‚2ã€å¯¹ä¸è‡ªå·±æœ‰å…³çš„ä¸€åˆ‡å·¥ä½œï¼Œç»å¸¸æ€è€ƒå¦‚ä½•èƒ½æŠŠå®ƒåšå¾—æ›´å¥½ã€‚3ã€ä¸è¦å…»æˆä¸å¥½çš„å·¥ä½œä¹ æƒ¯ï¼Œä»¥å…ä»–äººæ€€ç–‘ä½ çš„ä¸“ä¸šæ€§ã€‚4ã€ä¸è¦æ€»åœ¨èƒŒåè®®è®ºï¼Œæœ‰è¯å¿ƒå¹³æ°”å’Œå¹¶å¤§èƒ†çš„è¯´ï¼Œçœ¼ç›æ²¡æœ‰çœ‹åˆ°çš„ä¸œè¥¿è®®è®ºä¹…äº†æŠŠè‡ªå·±å®¹æ˜“æŠŠè‡ªå·±éƒ½éª—äº†ã€‚ å¤šé¢æ‰‹1ã€é™¤äº†åº”æœ‰çš„ä¸“ä¸šçŸ¥è¯†ï¼Œè¿˜è¦å¹¿æ³›åœ°æ¶‰çŒä¸€äº›å’Œå·¥ä½œã€æœ‰å…³çš„å„ç§ä¿¡æ¯ï¼Œå¹¶å»ºç«‹è‡ªå·±çš„çŸ¥è¯†åº“ã€‚2ã€åœ¨é€‚å½“çš„æ—¶æœºï¼Œå¯¹å·¥ä½œç›¸å…³çš„å¸‚åœºï¼Œäº§å“ã€æŠ€æœ¯ç­‰é—®é¢˜ï¼Œæå‡ºå¤šå…ƒåŒ–çš„åæ€ã€‚3ã€å·¥ä½œä¹‹ä½™åŸ¹å…»å…¶ä»–çš„å…´è¶£å’Œèƒ½åŠ›ï¼Œæ¯”å¦‚å½±è§†ï¼ŒåŠ¨æ¼«ï¼Œè¿è¡Œï¼Œå·¥è‰ºï¼Œå†™ä½œç­‰ã€‚å®Œå…¨æ²¡æœ‰çˆ±å¥½çš„äººï¼Œå¾ˆéš¾æœ‰çªç ´æ€§çš„åˆ›é€ åŠ›ã€‚4ã€å°½é‡è®©äººè§‰å¾—ä¸åº¸ä¿—ï¼Œä¸å¸‚ä¾©ï¼Œä¸çŸ­è§†ï¼Œä¸è‚¤æµ…ï¼ˆä¸è¦éšéšä¾¿ä¾¿çš„æé—®ï¼Œéšéšä¾¿ä¾¿çš„è®¨è®ºï¼Œå¤šåšåŠŸè¯¾ï¼Œå¤šäº†è§£æ¸…æ¥šï¼‰ã€‚ èº«è¾¹å…¸èŒƒå°‘çœ‹æˆåŠŸå­¦ï¼Œå¤šå»äº†è§£ä½ èº«è¾¹æˆåŠŸçš„äººæˆåŠŸçš„äº‹æ˜¯æ€ä¹ˆä¸€ç‚¹ä¸€ç‚¹èµ·æ¥çš„ã€‚ä»–ä»¬éƒ½ä¸æ˜¯å•çº¯é è¿æ°”ï¼Œä»”ç»†çš„æ‰¾æ€»ä¼šæ‰¾åˆ°ä¸€ä¸¤ä¸ªç‰¹è´¨ï¼Œæ˜¯ä½ æ²¡æœ‰çš„ã€‚æœ‰ä¸€äº›ä½ ä¸å»çœ‹ï¼Œä¸å»æ‰¾ï¼Œæ˜¯æ— çŸ¥ã€‚æœ‰ä¸€äº›ä½ æ‰¾åˆ°äº†ï¼Œä½ åšä¸åˆ°ï¼Œæ˜¯æ— èƒ½ã€‚ä½ ä¸åšï¼Œæ°¸è¿œæ˜¯0ï¼Œä½ åšäº†è‡³å°‘èƒ½æˆä¸º1ï¼Œæ²¡æœ‰å¾ˆå¤šçš„1ï¼Œæ°¸è¿œä¸å¯èƒ½åˆ°10ã€‚ äººæ‰æ˜¯ä»€ä¹ˆï¼Ÿä½ ç»™ä»–ä¸€ä»¶äº‹ï¼Œä»–æŠŠå®ƒå¹²å¥½äº†ï¼›ä½ åˆç»™ä»–ä¸€ä»¶äº‹ä»–åˆæŠŠä»–å¹²å¥½äº†â€¦â€¦ å­¦ä¼šæ‰¿æ‹…ä¸ªäººè´£ä»»ä¸ºäº‹æƒ…çš„ç»“æœè´Ÿè´£ï¼Œå±äºè‡ªå·±ç®¡è¾–åŒºåŸŸçš„å·¥ä½œä»»åŠ¡è¦èƒ½å¤Ÿæ•°æ®è¿½è¸ªï¼Œå¯¹æˆåŠŸçš„ç»“æœè¦æ€»ç»“ï¼Œå¯¹å¤±è´¥çš„ç»“æœè¦åæ€ã€‚åœ¨èŒåœºä¸è¦â€åŠªåŠ›åœ°è¡¨ç°â€ï¼Œå‡è£…å¾ˆåŠªåŠ›ï¼›ä¸è¦å»è¾©è§£æˆ–ç”©é”…ã€‚è¦è®¤è¯†åˆ°è‡ªå·±çš„é”™è¯¯ï¼Œå¤šè§‚å¯Ÿåˆ«äººçš„ä¼˜ç‚¹ã€‚ è®©è‡ªå·±æˆé•¿æ€»æ˜¯è¯´è‡ªå·±æ²¡æœ‰ æ¡ä»¶(æ—¶é—´\\ç¯å¢ƒ\\æœºä¼š)å»æé«˜ã€‚è¿™äº›éƒ½æ˜¯ç»™è‡ªå·±æ‡’æƒ°æ‰¾çš„å€Ÿå£ã€‚ä¸æ–­æŒ¤å‡ºæ—¶é—´å»å­¦ä¹ ã€‚â€œåŠªåŠ›åœ°è¯·æ•™â€ï¼Œä¸æ–­çš„é€¼è‡ªå·±å»ä¸äººäº¤æµå­¦ä¹ ã€‚ç»“æ„åŒ–è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œç¦»ç›®æ ‡è¿˜å·®å¤šå°‘ã€‚é‡åŒ–åˆ°æ¯ä¸€å¤©ï¼Œæ¯ä¸€å‘¨ï¼Œæ¯ä¸€æœˆçš„è®¡åˆ’ä¸­å»ã€‚é”»ç‚¼è‡ªå·±å„æ–¹é¢çš„èƒ½åŠ›ï¼šåŒ…æ‹¬å­¦ä¹ èƒ½åŠ›ï¼Œäº¤æµèƒ½åŠ›ï¼Œç»„ç»‡èƒ½åŠ›ï¼Œæ‰§è¡Œèƒ½åŠ›ã€‚ æ³¨é‡è¿‡ç¨‹ï¼Œå…³æ³¨ç»“æœå¹³åº¸æ··æ—¥å­çš„äººæ€»è®¤ä¸ºè‡ªå·±ç‰›é€¼ï¼Œæƒ³è¦é«˜æ”¶å…¥ï¼Œæƒ³è¦é«˜èŒä½ï¼Œæƒ³è¦é«˜åœ°ä½ã€‚å®å¹²çš„äººæ€»æ˜¯åœ¨ä¸æ–­æ€è€ƒï¼Œä¸æ–­æ”¶é›†æƒ…æŠ¥ï¼Œä¸æ–­çš„å­¦ä¹ ï¼Œä¸æ–­è®¡åˆ’ï¼Œä¸æ–­å®è·µï¼Œä¸æ–­ç”¨ç»“æœå‘æ‰€æœ‰äººè¯æ˜è‡ªå·±çš„èƒ½åŠ›ã€‚ä½ çš„æƒ³æ³•å†³å®šäº†ä½ çš„è¡ŒåŠ¨ï¼›ä½ çš„è¡ŒåŠ¨ å–å†³äºä½ çš„ä¹ æƒ¯ï¼›ä½ çš„ä¹ æƒ¯æ¥æºäºä½ çš„æ€§æ ¼ï¼› å­¦ç€ç”¨ä¸åŒçš„æ–¹æ³•å»å¤„ç†äº‹æƒ…ï¼šå¯¹äº‹ä¸å¯¹äºº æˆ–è®¸80% éƒ½æ˜¯å¯¹çš„ï¼Œä½†æœ‰æ—¶å€™çš„ç¡®éœ€è¦å¯¹äººå¯¹äº‹å»å¤„ç†ï¼›å½“ä½ æ˜¯èŒåœºç®¡ç†è€…æ—¶ï¼Œç®¡ç†ä¸åŒæ€§æ ¼çš„äººå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ²Ÿé€šæ–¹æ³•ã€‚æœ‰çš„äººå¿ƒç†æ¯”è¾ƒè„†å¼±ï¼Œå¤šæ¬¡æ‰¹è¯„ç”šè‡³éƒ½ä¼šç¦»èŒèµ°äººã€‚ æ¯ä»¶äº‹ï¼ˆäººï¼‰éƒ½ä¸ä¸€æ ·ï¼Œä¸è¦ç”¨åŒä¸€ç§æ–¹å¼å»å¤„ç†æ‰€æœ‰çš„äº‹ï¼ˆäººï¼‰ åˆ›é€ ä»·å€¼ä¸ä»¥å·¥ä½œæ—¶é•¿ä¸ºä»·å€¼è®¡ç®—ï¼Œä»¥äº§å‡ºç»“æœä¸ºä»·å€¼è®¡ç®—ã€‚å½¢æˆè‡ªæˆ‘ç®¡ç†ï¼Œä¸»åŠ¨å­¦ä¹ ï¼Œè®©ä¹‹å‰çš„åšäº‹æ–¹æ³•æ›´åŠ é«˜æ•ˆï¼Œåˆ›é€ æ›´å¤šçš„ä»·å€¼ã€‚ä¸è¦æ€»è®¤ä¸ºè‡ªå·±åªèƒ½å¹²ä¸€ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªæ—¶ä»£è¦çš„æ˜¯å¤šå…ƒåŒ–å¤åˆå‹äººæ‰ã€‚è¦å¥½å¥½å­¦ä¹ ï¼ŒåšæŒå……ç”µè¡¥å……è‡ªå·±çš„çŸ­æ¿ã€‚ ç´§çœ‹ç›®æ ‡ï¼Œè§£å†³é—®é¢˜ä¸è¦æ€»æè¿°å›°éš¾ï¼Œç„¶åæœ€åè¢«å›°éš¾ç»™å“è¶´äº†è€Œæ”¾å¼ƒè‡ªå·±çš„ç›®æ ‡ã€‚è¦å»å…‹æœå›°éš¾ï¼Œç„¶åæŠŠäº‹æƒ…å¹²å¥½ã€‚å‹¿å¿˜è‡ªå·±çŸ­ã€ä¸­ã€é•¿æœŸç›®æ ‡ï¼Œå¹¶æ—¶åˆ»è¯¢é—®è‡ªå·±ã€‚ï¼ˆä½ çš„é•¿æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä¸­æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼ŸçŸ­æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿï¼‰åä¸ºåœ¨ä¸­ç¾è´¸æ˜“æˆ˜çš„æ—¶å€™æ²¡æœ‰å¤©å¤©å¼ºè°ƒå›°éš¾ï¼Œè€Œæ˜¯è‡ªå·±åˆ¶é€ èŠ¯ç‰‡ã€‚åˆ©ç”¨è¿™æ¬¡æœºä¼šæ‰­è½¬å…¨çƒç«äº‰çš„æ ¼å±€å¹¶çœŸçš„å–å¾—æˆåŠŸã€‚å¦‚æœæ²¡æœ‰è¿™æ¬¡è´¸æ˜“æˆ˜ï¼Œå¯èƒ½è¿˜è¦è½åä¸šç•Œå¤§è…•æ›´å¤šå¹´ä»½ã€‚ ç«‹åœºé²œæ˜ ç«‹åœºé²œæ˜ï¼Œä»¥äº‹å®ç»“æœä¸ºå¯¼å‘ã€‚ åœ¨å·¥ä½œä¸Šè¦æœ‰ç«‹åœºï¼Œå·¥ä½œä¸ç”Ÿæ´»è¦åˆ†å¼€ï¼Œå¦åˆ™è°ä¸ºç›®æ ‡è´Ÿè´£ï¼Ÿå·¥ä½œçš„æ—¶å€™å±•ç°å‡ºä½ çš„ä¸“ä¸šåº¦ï¼Œå¯¹å·¥ä½œè´Ÿè´£ï¼Œå¯¹å®¢æˆ·è´Ÿè´£ã€‚ ä¸è¦çºµå®¹è‡ªå·±èƒ½åŠ›ä¸è¶³ä¸æ˜¯è¦å»æ¯”è°æœ€å—æ¬¢è¿ï¼Œè°èµ„å†è€ï¼Œæ˜¯è¦æ¯”è°èƒ½åˆ›é€ æ›´å¤§çš„ä»·å€¼ã€‚æ‹’ç»å­¦ä¹ çš„äººç«™åœ¨é‡è¦çš„ä½ç½®ä¸Šï¼Œå¯¹ç»„ç»‡æœ‰æ¬ å…¬å¹³ã€‚å¯¹è‡ªå·±è¦æ±‚ä½ï¼Œç¤¾ä¼šå¯¹ä½ çš„å›é¦ˆä¼šä½“ç°åˆ°ä½ çš„æ”¶å…¥ä½ï¼Œåœ°ä½ä½ï¼ŒèŒä½ä½ã€‚å°±ç®—ä½ èµ°äº†ç‹—å±è¿ï¼Œä¹Ÿéš¾ä»¥æœä¼—ã€‚ ä»€ä¹ˆæ—¶å€™æ±‚åŠ©å¤§ç¥ï¼Ÿé‡åˆ°éš¾ä¸€ç‚¹çš„å·¥ä½œä»»åŠ¡ï¼Œå¦‚æœæ€»æ˜¯ç­‰å¾…ä¸Šå¸æ¥æŒ‡å¯¼ã€‚é‚£å°±ç›¸å½“äºæ”¾å¼ƒäº†æˆé•¿ã€‚å¦‚æœä¸æƒ³è®©åˆ«äººçš„æ€æƒ³ä¸»åŠ¨ä½ çš„æ€ç»´ï¼Œé‚£ä½ åªæœ‰ä¸æ–­åŠªåŠ›è®­ç»ƒè‡ªå·±çš„æ€ç»´ï¼Œç”¨ç»“æœå»è¯æ˜è‡ªå·±ã€‚ æ€è€ƒçš„è¿‡ç¨‹ï¼š1 ã€è‡ªå·±æ€è€ƒï¼Œåˆ†æ¨¡å— è¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚2ã€ ä¸æ‡‚çš„é—®é¢˜æŸ¥æ‰¾èµ„æ–™ï¼Œå†æ‰‹åŠ¨å®è·µã€‚3ã€æŸ¥æ‰¾ç½‘ä¸Šåˆ«äººåšè¿‡çš„ï¼Œå‚è€ƒã€‚4ã€æ€»ç»“ã€‚ å½’ç±»ï¼Œæ•´ç†ã€‚ è®°å½•ï¼ˆç¬”è®°ï¼Œå¤§è„‘ï¼‰ï¼Œè¾“å‡ºï¼ˆæ–‡ç« ï¼Œåšå®¢ï¼‰ã€‚ åªè¦ä½ ä¸æ–­çš„åŠªåŠ›çš„æ€è€ƒï¼ŒåŠªåŠ›çš„å­¦ä¹ ï¼ŒåŠªåŠ›çš„åˆ›é€ ä»·å€¼ï¼Œç»ˆæœ‰ä¸€å¤©ä½ ä¼šæŠŠæ‰€æœ‰äººç”©å‡ºå‡ æ¡è¡—ï¼Œä½ è‡ªç„¶æˆäº†ä¼ä¸šçš„ä¼˜ç§€äººæ‰ã€‚ æˆåŠŸæ˜¯ä¸æ–­çš„åŠªåŠ›åŠ ä¸Šæœºä¼šï¼Œæœºä¼šæ¥äº†ä½ æ˜¯ä¸æ˜¯æŠŠæ¡å¾—ä½ã€‚è€ŒæŠŠæ¡æœºä¼šçš„å®åŠ›ä½ æ˜¯å¦å‚¨å­˜è¶³å¤Ÿï¼Ÿä½ æ„¿æ„åŠªåŠ›å¤šä¹…ï¼Œ3å¹´ï¼Ÿ5å¹´ï¼Ÿ10å¹´ï¼Ÿä¸€è¾ˆå­ï¼Ÿ","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"è½¯å®åŠ›","slug":"è½¯å®åŠ›","permalink":"https://www.littlewhale.xyz/tags/%E8%BD%AF%E5%AE%9E%E5%8A%9B/"}]},{"title":"èºæ—‹çŸ©é˜µ","slug":"spiralMatrix","date":"2019-12-08T01:09:04.000Z","updated":"2020-05-27T00:52:08.000Z","comments":true,"path":"2019/12/08/spiralMatrix/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/08/spiralMatrix/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546#define len 9void luoxuan()&#123; int arr[len][len]; //å¼€å§‹åˆå§‹åŒ–ï¼Œç»™æ•°ç»„èµ‹å€¼0 for(int i=0;i&lt;len;i++)&#123; for(int j=0;j&lt;len;j++)&#123; arr[i][j] = 0; &#125; &#125; arr[0][0] = 1; //é¡¶è§’ç¡®å®šäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºç¬¬ä¸€è¡Œå³è¾¹çš„æ•°å­— int circleTimes = len/2 + 1; int circelIndex = 0; //åœˆçš„æ•°é‡ //èµ‹å€¼è¿‡ç¨‹ while(circleTimes&gt;0)&#123; //æµ‹è¯•æ—¶å€™ï¼Œæ¯ä¸€åœˆç»“æŸå¯ä»¥æ‰“å°å‡ºçœ‹ä¸€ä¸‹ï¼š&amp;&amp; circelIndex &lt;1 circelIndex ++; printf(\"ç¬¬%dåœˆ\\n\",circelIndex); for(int column = 1;column &lt;= len-circelIndex; column++)&#123; //å¾€å³æ’åˆ— if(column &gt;= circelIndex-1)&#123; arr[circelIndex-1][column] = arr[circelIndex -1][column-1] + 1; &#125; &#125; for(int row = circelIndex; row&lt;= len-circelIndex; row++)&#123; //å¾€ä¸‹æ’åˆ—ï¼Œä»ç¬¬äºŒè¡Œï¼Œç¬¬X-i åˆ—å¼€å§‹ arr[row][len-circelIndex] = arr[row-1][len-circelIndex] + 1; &#125; for(int column = len-circelIndex-1; column &gt;= circelIndex-1; column--)&#123; //å¾€å·¦æ’ï¼Œä¸‹æ ‡é€’å‡1ï¼Œå€¼ä¸ºåä¸€ä¸ª + 1 arr[len-circelIndex][column] = arr[len-circelIndex][column+1] + 1; &#125; for(int row =len-circelIndex-1; row &gt; circelIndex-1; row--)&#123; //å¾€ä¸Šæ’åˆ— arr[row][circelIndex-1] = arr[row+1][circelIndex-1] + 1; &#125; circleTimes--; &#125; //è¾“å‡ºäºŒç»´æ•°ç»„ for(int i=0;i&lt;len;i++)&#123; for(int j=0;j&lt;len;j++)&#123; printf(\"%d\\t\",arr[i][j]); &#125; printf(\"\\n\\n\"); &#125;&#125;","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.littlewhale.xyz/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"æ²ªæ±Ÿ-Cè¯­è¨€è¯¾ç¨‹ç²¾é€‰32è®²","slug":"hujiang_classC","date":"2019-12-06T02:41:30.000Z","updated":"2020-05-27T00:56:15.000Z","comments":true,"path":"2019/12/06/hujiang_classC/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/06/hujiang_classC/","excerpt":"","text":"ç¼–ç¨‹é€»è¾‘ç²¾é€‰32è®²æ²ªæ±Ÿè¯¾ç¨‹ï¼š æ‰“å¡é¸­ï¼š å…¬ä¼—å·ï¼š é«˜é«˜ç¼–ç¨‹å°å±‹","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.littlewhale.xyz/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"iOSå¼€å‘å•†å“è§„æ ¼è®¾ç½®æ¨¡å—","slug":"iOSSku","date":"2019-12-06T01:55:20.000Z","updated":"2020-05-27T01:14:35.000Z","comments":true,"path":"2019/12/06/iOSSku/","link":"","permalink":"https://www.littlewhale.xyz/2019/12/06/iOSSku/","excerpt":"å‰è¨€SKUç™¾åº¦ç™¾ç§‘ä¸º åº“å­˜ä¿æœ‰å•ä½ ï¼ˆStock keeping Unit æˆ–è€…SKUï¼‰æ˜¯å¯¹æ¯ä¸€ä¸ªäº§å“å’ŒæœåŠ¡çš„å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚ ä¹Ÿå°±æ˜¯è¯´sku ä¸ºå•†å“å¯¹åº”çš„å¾ˆå¤šç§ç±»è§„æ ¼æƒ…å†µä¸‹çš„ åº“å­˜ï¼Œä»·æ ¼ å„æœ‰ä¸åŒã€‚éœ€è¦é€šè¿‡sku è¿™æ ·ä¸€ç§ç»„åˆç»“æ„å­˜å‚¨è¿™äº›è®¡é‡å€¼ã€‚åœ¨ç§»åŠ¨ç”µå•†æ—¶ä»£ï¼Œç½‘è´­å·²ç„¶æˆä¸ºæ½®æµã€‚æ›´æ˜¯å…¨æ°‘å‚ä¸ã€‚æ¯ä¸€å¹´éƒ½æœ‰è´­ç‰©èŠ‚ ï¼š äº¬ä¸œ618 , æ·˜å®å¤©çŒ«åŒ11, åŒ12 ã€‚ ä¸€ä¸ªæ·˜å®åº—å®¶æœˆé”€å”®é¢30ä¸‡èƒŒå ï¼Œä»–çš„å•†å“skuæœ‰ä¸Šåƒç§ã€‚ ä¸€ä¸ªå–æ©±æŸœçš„ï¼Œå°åˆ°æŠ½å±‰ï¼Œæ‹‰ç¯®ï¼Œäº”é‡‘ ï¼ŒæŠŠæ‰‹ï¼Œèºä¸é’‰ éƒ½å¯ä»¥ç»†åˆ†æˆå¾ˆå°çš„SKUã€‚ç§»åŠ¨ç”µå•†å•†å“èƒŒåçš„SKUç§ç±»çš„å¤æ‚æ€§ã€‚å¯æ­£æ˜¯å› ä¸ºå•†å“SKUçš„å¤šæ ·åŒ–ï¼Œæ‰èƒ½å•†å®¶å¸¦æ¥å·¨é‡çš„é”€å”®é¢ã€‚ ä»è¯¦æƒ…é¡µè®¤è¯†SKU123456789101112131415161718192021è¿™ä¸ªå•†å“åŒ…å«çš„SKUä¿¡æ¯:&#123; è§„æ ¼ç±»å‹:[&#123; å°ºå¯¸:[XS, Sï¼Œ M, Lï¼ŒXLï¼Œ XXL] &#125;,&#123; é¢œè‰²: [ç™½è‰²ï¼ŒçŠç‘šç²‰ï¼Œè‰æœ¨ç»¿] &#125;], è§„æ ¼æ˜ç»†ç»„åˆæè¿°: &#123; XS-ç™½è‰²:&#123; å›¾ç‰‡: å›¾ç‰‡url, ä»·æ ¼: ï¿¥328, åº“å­˜: 188ä»¶, æ‰©å±•..å­—æ®µ: å€¼ &#125;, å…¶ä»–è§„æ ¼ç»„åˆ:&#123; å›¾ç‰‡: å›¾ç‰‡url, ä»·æ ¼: ä»·æ ¼.., åº“å­˜: åº“å­˜æ•°é‡.., æ‰©å±•..å­—æ®µ: å€¼ &#125; &#125;&#125;","text":"å‰è¨€SKUç™¾åº¦ç™¾ç§‘ä¸º åº“å­˜ä¿æœ‰å•ä½ ï¼ˆStock keeping Unit æˆ–è€…SKUï¼‰æ˜¯å¯¹æ¯ä¸€ä¸ªäº§å“å’ŒæœåŠ¡çš„å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚ ä¹Ÿå°±æ˜¯è¯´sku ä¸ºå•†å“å¯¹åº”çš„å¾ˆå¤šç§ç±»è§„æ ¼æƒ…å†µä¸‹çš„ åº“å­˜ï¼Œä»·æ ¼ å„æœ‰ä¸åŒã€‚éœ€è¦é€šè¿‡sku è¿™æ ·ä¸€ç§ç»„åˆç»“æ„å­˜å‚¨è¿™äº›è®¡é‡å€¼ã€‚åœ¨ç§»åŠ¨ç”µå•†æ—¶ä»£ï¼Œç½‘è´­å·²ç„¶æˆä¸ºæ½®æµã€‚æ›´æ˜¯å…¨æ°‘å‚ä¸ã€‚æ¯ä¸€å¹´éƒ½æœ‰è´­ç‰©èŠ‚ ï¼š äº¬ä¸œ618 , æ·˜å®å¤©çŒ«åŒ11, åŒ12 ã€‚ ä¸€ä¸ªæ·˜å®åº—å®¶æœˆé”€å”®é¢30ä¸‡èƒŒå ï¼Œä»–çš„å•†å“skuæœ‰ä¸Šåƒç§ã€‚ ä¸€ä¸ªå–æ©±æŸœçš„ï¼Œå°åˆ°æŠ½å±‰ï¼Œæ‹‰ç¯®ï¼Œäº”é‡‘ ï¼ŒæŠŠæ‰‹ï¼Œèºä¸é’‰ éƒ½å¯ä»¥ç»†åˆ†æˆå¾ˆå°çš„SKUã€‚ç§»åŠ¨ç”µå•†å•†å“èƒŒåçš„SKUç§ç±»çš„å¤æ‚æ€§ã€‚å¯æ­£æ˜¯å› ä¸ºå•†å“SKUçš„å¤šæ ·åŒ–ï¼Œæ‰èƒ½å•†å®¶å¸¦æ¥å·¨é‡çš„é”€å”®é¢ã€‚ ä»è¯¦æƒ…é¡µè®¤è¯†SKU123456789101112131415161718192021è¿™ä¸ªå•†å“åŒ…å«çš„SKUä¿¡æ¯:&#123; è§„æ ¼ç±»å‹:[&#123; å°ºå¯¸:[XS, Sï¼Œ M, Lï¼ŒXLï¼Œ XXL] &#125;,&#123; é¢œè‰²: [ç™½è‰²ï¼ŒçŠç‘šç²‰ï¼Œè‰æœ¨ç»¿] &#125;], è§„æ ¼æ˜ç»†ç»„åˆæè¿°: &#123; XS-ç™½è‰²:&#123; å›¾ç‰‡: å›¾ç‰‡url, ä»·æ ¼: ï¿¥328, åº“å­˜: 188ä»¶, æ‰©å±•..å­—æ®µ: å€¼ &#125;, å…¶ä»–è§„æ ¼ç»„åˆ:&#123; å›¾ç‰‡: å›¾ç‰‡url, ä»·æ ¼: ä»·æ ¼.., åº“å­˜: åº“å­˜æ•°é‡.., æ‰©å±•..å­—æ®µ: å€¼ &#125; &#125;&#125; SKUåŠŸèƒ½æ“ä½œæµç¨‹å›¾è¯´æ˜ æ–°å¢å•†å“SKU1) ä»è§„æ ¼å®¹å™¨ä¸­é€‰æ‹©éœ€è¦çš„è§„æ ¼ã€‚å·²é€‰æ‹©çš„è§„æ ¼ç±»å‹ä¹Ÿå¯ç§»é™¤ã€‚2) åœ¨å·²é€‰è§„æ ¼ç±»å‹ä¸‹ å¯æ–°å¢è§„æ ¼å±æ€§ã€‚å·²æ–°å¢çš„è§„æ ¼å±æ€§å¯é€‰ä¸­æˆ–å–æ¶ˆã€‚3) è§„æ ¼å±æ€§çš„é€‰æ‹©æˆ–å–æ¶ˆ è§¦å‘è‡ªæœ‰ç»„åˆæ’åˆ—ã€‚ç”Ÿæˆè§„æ ¼æ˜ç»†çš„è¡¨å•ã€‚4) å¡«å†™è§„æ ¼æ˜ç»† å•é¡¹å¡«å†™ï¼š æŒ¨ä¸ªå¡«å†™ï¼Œè¿‡æ»¤æ¡ä»¶å¡«å†™ã€‚ æ‰¹é‡å¡«å†™ã€‚5) æäº¤skuæ˜ç»†é¡¹æ•°æ®ã€‚ ä¿®æ”¹å•†å“SKU1) åŠ è½½å·²é€‰æ‹©çš„è§„æ ¼ç±»å‹å±æ€§ï¼› æ³¨æ„ï¼šæ ¹æ®ä¸šåŠ¡æ§åˆ¶å·²é€‰è§„æ ¼ç±»å‹ æ˜¯å¦å¯æ–°å¢ ï¼Œæ˜¯å¦å¯åˆ é™¤çš„æ¡ä»¶ï¼Œå› ä¸ºç›´æ¥æ¶‰åŠåˆ°è§„æ ¼æ˜ç»†çš„æ’åˆ—ç»„åˆç»“æ„ã€‚ å½“å•†å“åº“çš„æŸå•†å“å·²ç»åœ¨åº—é“ºä¸Šçº¿äº†ï¼Œå¦‚æœå†æ–°å¢è§„æ ¼ç±»å‹çš„è¯ï¼Œæ’åˆ—ç»„åˆå°†æ”¹å˜ï¼Œä¹‹å‰è®¾ç½®çš„ä»·æ ¼å’Œåº“å­˜éƒ½ä¼šè·Ÿç€æ”¹å˜ã€‚æ‰€ä»¥ä¸å¯ä»¥å†æ–°å¢æˆ–åˆ å‡è§„æ ¼ç±»å‹ã€‚ 2) è‡ªç”±æ’åˆ—ç»„åˆ ï¼ŒæŠŠå„é¡¹å€¼ èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­ã€‚3) ä¿®æ”¹æ•°æ®åï¼Œé‡æ–°æäº¤SKU çš„æ˜ç»†è¡¨å•ã€‚ ä¿®æ”¹SKUçš„åœºæ™¯1) ä»¥è¡£æœä¸ºä¾‹ï¼šç™½è‰² + M å–å®Œçš„æ—¶å€™ï¼Œåœ¨è§„æ ¼sku ä¿®æ”¹çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå·²é€‰çš„é¢œè‰²ä¸ºç™½è‰²å»æ‰ã€‚2) ä»¥æ‰‹æœº ä¸ºä¾‹ï¼šç”±äºçƒ­é”€ï¼Œå‚å®¶åˆä¸Šäº† å‡çº§ç‰ˆæœ¬ç«ç‘°é‡‘è‰²ã€‚å¯æ–°å¢ä¸€ä¸ªç«ç‘°é‡‘è‰²å†è®¾ç½®ç›¸åº”çš„ä»·æ ¼ã€‚ 1ã€æŠ€æœ¯è®²è§£1.1 æœåŠ¡å™¨ä¸‹å‘çš„Jsonæ•°æ®ç»“æ„123456789101112131415161718//æ³¨é‡Šï¼š æœåŠ¡å™¨è¿”å›çš„å•†å“è§„æ ¼ç±»å‹å±æ€§ã€‚ç”¨äºé¡µé¢å¤´éƒ¨æ˜¾ç¤ºå·²é€‰çš„è§„æ ¼ç±»å‹ï¼Œå’Œå…¶å±æ€§ã€‚&#123; type : 101, //è§„æ ¼ç±»å‹idå€¼ã€‚ name : é¢œè‰², types : [ &#123; propertyId : 123255, //å±æ€§å€¼å”¯ä¸€Idå€¼ propertyCatId : 101, state : 1, //è®°å½•æ˜¯å¦è¢«é€‰ä¸­è¯¥é¢œè‰² name : ç»¿è‰² &#125;, &#123; propertyId : 123254, propertyCatId : 101, state : 1, name : ç™½è‰² &#125;]&#125; 1234567891011121314151617181920//è§„æ ¼æ˜ç»†æè¿° ç»“æ„,ç”¨äºSKU ç¼–è¾‘çš„æ—¶å€™ï¼ŒæŠŠè§„æ ¼æ˜ç»†å„é¡¹ç»„åˆæ•°æ® å¡«å……åˆ°è¡¨å•ã€‚skuDesc : [&#123; skuId : 167977, //skué¡¹ id productId : 166224, //å•†å“id price : 334, //æ™®é€šå”®ä»· groupPrice :300, //æ‹¼å›¢å”®ä»· image : https://cdn.gaogao.com/image/e0ecd00c2sw2f23f29df6d504987d60d.png, //å›¾ç‰‡ properties : 101:123253-102:123257 //è§„æ ¼å±æ€§ è‡ªç”±ç»„åˆæ’åˆ—å€¼&#125;,&#123; skuId : 167971, productId : 166224, price : 200, groupPrice : 188, image : https://cdn.gaogao.com/image/e0ecd00c2d5f442c49df6d504987d60d.png, properties : 101:123253-102:123258&#125;] 123456789//å‘æœåŠ¡å™¨æäº¤æŸå•†å“çš„SKU è§„æ ¼æ˜ç»†æ•°æ®:product_id : 176294; //å•†å“idproperties : [ //è§„æ ¼å±æ€§æ’åˆ—ç»„åˆé¡¹&#123;\"price\":100,\"groupPrice\":88,\"properties\":\"11:167918-101:123253-102:123259\"&#125;,&#123;\"price\":100,\"groupPrice\":88,\"properties\":\"11:172957-101:123253-102:123259\"&#125;,&#123;\"price\":100,\"groupPrice\":88,\"properties\":\"11:167918-101:123253-102:123258\"&#125;]; è¯´æ˜:å…ˆæ ¹æ®å·²é€‰çš„ è§„æ ¼å¤§ç±»å‹propertyCatId å€¼æ’åºã€‚ è¿™æ ·åšçš„åŸå› æ˜¯ï¼šæ— è®º A+B+C ï¼ŒB+A+C æˆ– C+A+B éƒ½æ˜¯è¡¨ç¤ºåŒä¸€ç§SKUç»„åˆã€‚ä»¥ â€œ11:167918-101:123253-102:123259â€ ä¸ºåˆ—ï¼Œæ ¹æ®è§„æ ¼å¤§ç±»å‹idå€¼æ’åºã€‚ æœ€ç»ˆéƒ½ä»¥ Aï¼šaa+B:bb+C:cc ç»„åˆæäº¤ç»™æœåŠ¡å™¨, ä»¥æ­¤æ¥ç»´æŠ¤è¯¥ç»„åˆå¯¹åº”çš„ä»·æ ¼å’Œåº“å­˜ï¼› 2ã€é¡µé¢ç»„æˆ2.1 é¡µé¢å…¨å±€å˜é‡NSMutableArray datas; //è§„æ ¼æ˜ç»†åˆ—è¡¨ï¼šæ’åˆ—ç»„åˆçš„æ•°æ®æºNSMutableArray sectionMenuArr; //è®°å½•é€‰ä¸­çš„å¤§ç±»å‹ï¼›NSMutableDictionary itemArrDic; //map å­˜æ”¾key:ä¸ºid , å€¼ä¸ºå·²é€‰çš„è§„æ ¼ç±»å‹å¯¹è±¡NSMutableDictionary itemSelectedArrDic; //å·²é€‰çš„è§„æ ¼ç±»å‹ä¸‹çš„è§„æ ¼å±æ€§æ•°ç»„ã€‚ 2.2 æ„å»ºä¸€ä¸ªæ ‘ç»“æ„æ ¹æ®æäº¤ç»™æœåŠ¡å™¨çš„ç»„åˆå­—ç¬¦çªœå¦‚ â€œ11:167918-101:123253-102:123258â€, è¿™ä¸ªæ˜¯ä¸€ä¸ªæœ‰ä¸‰ä¸ªå±‚çº§è¡¨ç¤ºçš„SKU ç»„åˆã€‚ä¸¾ä¾‹ï¼šå¤©çŒ«è´­ä¹°æ‰‹æœºï¼ŒåŠ å…¥è´­ç‰©è½¦çš„æ—¶å€™é€‰æ‹© å†…å­˜ï¼š64g + é¢œè‰²ï¼šç™½è‰² + å¥—é¤ç±»å‹ï¼š å®˜æ–¹æ ‡é…å…¶ä¸­åŒ…å«å†…å®¹ï¼š1ï¼‰è§„æ ¼å¤§ç±»å‹è¦å…ˆæ’å¥½åº ï¼Œå±æ€§è¦ä¸€ä¸€å¯¹åº”ç±»å‹ã€‚ ä¸‰ä¸ªå±‚çº§çš„SKUç»„åˆåº”è¯¥æ¯”è¾ƒå¸¸è§ã€‚é€šè¿‡è¿™é‡Œï¼Œæˆ‘ä»¬æ„ä»¶ä¸€ä¸ªmodelå®ä½“ã€‚ç»“æ„å¦‚ä¸‹ï¼š1234567891011121314151617@interface ConditionFilter : NSObject&lt;NSCopying,NSMutableCopying&gt;@property(nonatomic,assign) NSInteger value; // idå€¼@property(nonatomic,strong) NSString *name; //åç§°@property(nonatomic,copy) NSArray&lt;ConditionFilter&gt; *statusItem; //å­çº§@property(nonatomic,assign) NSInteger state; //é€‰ä¸­çŠ¶æ€ï¼š 1å·²é€‰æ‹© 0æœªé€‰æ‹©@property(nonatomic,strong) NSString * propertyCatId; //è§„æ ¼ç±»å‹ï¼š ä¸€çº§åˆ†ç±»çš„id@property(nonatomic,strong) NSString * propertyId; //è§„æ ¼å±æ€§ï¼š äºŒçº§åˆ†ç±»id@property(nonatomic,strong) NSString * pid; //çˆ¶èŠ‚ç‚¹ç¼–å·(éšæœºç”Ÿæˆ)@property(nonatomic,strong) NSString * nodeId; //èŠ‚ç‚¹ç¼–å·(éšæœºç”Ÿæˆ)@property(nonatomic,strong) ConditionFilter *parent; //çˆ¶èŠ‚ç‚¹ï¼ˆçˆ¶åªæœ‰ä¸€ä¸ªï¼‰@property(nonatomic,assign) BOOL extend; //æ˜¯å¦å±•å¼€@property(nonatomic,assign) NSInteger level;//å½“å‰å±‚çº§@end 2.3 æ ¹æ®å·²é€‰çš„è§„æ ¼ç±»å‹ è‡ªç”±æ’åˆ—ç»„åˆ å‡ºæ˜ç»†åˆ—è¡¨å„é¡¹ç»„åˆæ•°æ®12345678910111213141516171819202122232425262728293031323334353637383940#pragma mark - ä»æœ€åä¸€ä¸ªå±‚çº§ç®—èµ·ï¼›å¾€çˆ¶ç±»èµ‹å€¼ï¼›(æ ¸å¿ƒ: ç»™statusItemèµ‹å€¼)-(void)configDataSectionReload&#123; //å…ˆæŠŠå·²é€‰æ‹©çš„å¤§ç±»ï¼Œè¿‡æ»¤å‡ºå·²é€‰æ‹©çš„å±æ€§é¡¹çš„å¤§ç±» NSMutableArray *hasChooseSectionMenuArr = [[NSMutableArray alloc] init]; for(ConditionFilter *sectionMenu in self.sectionMenuArr)&#123; NSArray * itemChooseArr = [self.itemSelectedArrDic objectForKey:@(sectionMenu.value)]; if(itemChooseArr.count)&#123; [hasChooseSectionMenuArr addObject:@(sectionMenu.value)]; &#125; &#125; //ç¡®å®šæ ‘çš„å±‚çº§ï¼šä¸ºé€‰æ‹©çš„å·²é€‰å¤§ç±»å‹ä¸ªæ•°ã€‚å¹¶ç»‘å®šå­èŠ‚ç‚¹é›†åˆstatusItem NSMutableArray *childArr = nil; for (NSInteger level = hasChooseSectionMenuArr.count; level&gt;0; level -- ) &#123; NSNumber *cellSectionTag = [hasChooseSectionMenuArr objectAtIndex:level-1]; //å¯å˜é›†åˆçš„copy å’Œ mutableCopy æ˜¯ä¸€æ ·ï¼›æ·±æ‹·è´ï¼Œåœ°å€ä¸ä¸€æ ·ï¼›å¦‚æœä¸ç”¨copyä¼šé€ æˆå¤šä¸ªåœ°æ–¹å¼•ç”¨åœ°å€å¯¹è±¡ï¼›å€¼ä¼šéšç€å…³è”ï¼› NSMutableArray *itemSelectArr = [[self.itemSelectedArrDic objectForKey:cellSectionTag] mutableCopy]; for(NSInteger i=0; i&lt; itemSelectArr.count; i++)&#123; ConditionFilter *item = [itemSelectArr objectAtIndex:i]; item.level = level; //æ ‡è®°ç­‰çº§ item.extend = NO; item.nodeId = nil; item.pid = nil; //ï¼ˆè¿™é‡Œä½¿ç”¨æ‹·è´ï¼‰ï¼Œä¸ºå­èŠ‚ç‚¹èµ‹å€¼ã€‚ item.statusItem = [[NSMutableArray alloc] initWithArray:childArr copyItems:YES]; &#125; childArr = [itemSelectArr mutableCopy]; //ï¼ˆé˜²æ­¢å¯¹childArrçš„æ¥æºæ•°æ®æºæ±¡æŸ“,è¿™é‡Œä½¿ç”¨æ‹·è´ï¼‰ï¼ˆfillParentNodeId ä¼šå¯¹æ•°æ®æºchildArr è¿›è¡Œæ±¡æŸ“ï¼›å¦‚æ”¹å˜å¯¹è±¡çš„nameç­‰è®¾ç½®ï¼‰ &#125; //æ¸…ç©º [self.datas removeAllObjects]; //å¡«å……å­èŠ‚ç‚¹ç»‘å®šçˆ¶èŠ‚ç‚¹pid; childArræ˜¯å½¢æˆçš„ä¸€é¢—æ ‘ç»“æ„ã€‚ [self fillParentNodeId:childArr parentNode:nil];&#125; 12345678910111213141516171819202122232425262728293031323334353637#pragma mark - ä»å‰å¾€åèµ‹å€¼ï¼ˆ ç»™å­èŠ‚ç‚¹ç»‘å®šæ ‡è¯†çˆ¶ç±»parentï¼‰,ç”¨äºæ‹¼è£…properties ç»„åˆçš„idå­—ç¬¦çªœ-(void)fillParentNodeId:(NSArray *)itemArr parentNode:(ConditionFilter *)parent&#123; for(NSInteger i =0 ;i &lt; itemArr.count; i++)&#123; ConditionFilter *filter = [itemArr objectAtIndex:i]; filter.pid = parent.nodeId; filter.parent = parent; //ç»‘å®šçˆ¶çº§èŠ‚ç‚¹ NSString *nodeStr = [NSString uniqueStringForMessage]; filter.nodeId = nodeStr; filter.extend = filter.statusItem.count; if(self.dataShowLayoutStyle == LayoutComposeStyle)&#123; //æ’åˆ—ç»„åˆæ ·å¼ï¼› if(filter.statusItem.count == 0)&#123; //æ ¹æ®statusItemç­‰äº0 è®¾ç½®å±‚çº§ä¸º1çº§çš„æ—¶å€™nameå€¼ ç»„åˆæˆ: ç™½è‰²+XL , ç™½è‰²+L æ ¼å¼ï¼›èµ‹å€¼ç»™æœ€åä¸€ä¸ªå±‚çº§modelsçš„nameå±æ€§ NSMutableArray *allJoinNamesArr = [[NSMutableArray alloc] init]; [allJoinNamesArr addObject:filter.name]; ConditionFilter *parent = filter.parent; while (parent) &#123; [allJoinNamesArr insertObject:parent.name atIndex:0]; parent = parent.parent; &#125; NSString *allJoinName = [allJoinNamesArr componentsJoinedByString:@\"+\"]; filter.name = allJoinName; //æ‹¼æ¥UIæ˜¾ç¤ºçš„name filter.level = 1; //æ’åˆ—ç»„åˆæ ·å¼éƒ½ä¸º1çº§UIæ˜¾ç¤ºçš„é—´è·.ï¼ˆlabelæ˜¾ç¤ºæ—¶å€™çš„å·¦è¾¹è·ï¼‰ [self.datas addObject:filter]; //åªæ·»åŠ æœ€åä¸€ä¸ªå±‚çº§ï¼› &#125; &#125;else&#123; //æ ‘å±‚çº§ æ ·å¼ï¼ˆå…¨éƒ¨æ·»åŠ ï¼‰ [self.datas addObject:filter]; &#125; //é€’å½’ [self fillParentNodeId:filter.statusItem parentNode:filter]; &#125;&#125; 2.4 è‡ªç”±æ’åˆ—ç»„åˆ ï¼ŒæŠŠå„é¡¹å€¼ èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­å…ˆæŠŠå„é¡¹å€¼èµ‹å€¼ç»™SKUModel ï¼Œå­˜åˆ°æ ¹æ®æ’åˆ—ç»„åˆå­—ç¬¦çªœä¸ºkey ï¼Œå­˜æ”¾åˆ°mapä¸­ã€‚12345678910111213141516171819202122//è®¾ç½®SKUå€¼NSArray *skuArr = [response.responseObject objectForKey:@\"sku\"];for(NSInteger i=0 ;i &lt;self.datas.count; i++)&#123; ConditionFilter *filter = [self.datas objectAtIndex:i]; NSString *storeCellKey = filter.name; NSString *properties = [self processPropertiesByFilter:filter]; //æ‰¾åˆ°sku è®¾ç½®ä¿¡æ¯ï¼› for(SkuDetailModel *sku in skuArr)&#123; if([sku.properties isEqualToString:properties])&#123; SKUModel *writeSku = [[SKUModel alloc] init]; writeSku.properties = sku.properties; writeSku.groupPrice = sku.groupPrice; writeSku.price = sku.price; writeSku.image = sku.image; [self.writeFieldBoxDic setObject:writeSku forKey:storeCellKey]; break; &#125; &#125;&#125; 2.5 propertiesçš„è‡ªç”±ç»„åˆidå€¼æ‹¼æ¥å¾ªç¯å–å‡ºå…¶çˆ¶èŠ‚ç‚¹. è®°å½•å¤§ç±»å‹ï¼šå±æ€§ æ ¼å¼ã€‚ æ ¹æ®key æ’åºï¼Œæ‹¼æ¥æˆ A:aa - B:bb - C:cc æ ¼å¼1234567891011121314151617181920212223242526272829#pragma mark - å¤„ç†æ¯è¡Œè§„æ ¼å¡«å†™çš„ æ™®é€šä»·å’Œæ‹¼å›¢ä»· è¿”å› skuçš„ç»„åˆpropertieså€¼-(NSString *)processPropertiesByFilter:(ConditionFilter *)filter&#123; NSMutableDictionary *mDic = [[NSMutableDictionary alloc] init]; [mDic setObject:filter.propertyId forKey:filter.propertyCatId]; ConditionFilter *parent = filter.parent; while (parent) &#123; [mDic setObject:parent.propertyId forKey:parent.propertyCatId]; parent = parent.parent; &#125; //æ’åº NSArray *keyArr = [mDic.allKeys sortedArrayUsingComparator:^NSComparisonResult(id _Nonnull obj1, id _Nonnull obj2) &#123; NSNumber *num1 = [NSNumber numberWithInteger:[obj1 integerValue]]; NSNumber *num2 = [NSNumber numberWithInteger:[obj2 integerValue]]; NSComparisonResult result = [num1 compare:num2]; return result == NSOrderedDescending; // å‡åº &#125;]; NSMutableArray *joinStrArr = [[NSMutableArray alloc] init]; for(NSString *key in keyArr)&#123; NSString *str = [NSString stringWithFormat:@\"%@:%@\",key,[mDic objectForKey:key]]; [joinStrArr addObject:str]; &#125; NSString *properties = [joinStrArr componentsJoinedByString:@\"-\"]; return properties;&#125; 2.6 åˆ—è¡¨çš„UIæ˜¾ç¤ºï¼š tableViewç›¸å…³å§”æ‰˜1234567891011121314151617181920212223242526272829//å…±ä¸¤ä¸ªåˆ†ç»„ã€‚ç¬¬ä¸€ä¸ªåˆ†ç»„å±•ç¤ºé€‰æ‹©çš„è§„æ ¼ç±»å‹ã€‚ ç¬¬äºŒä¸ªåˆ†ç»„æ˜¯è§„æ ¼æ˜ç»†è¡¨å•é¡¹-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView&#123; return self.sectionMenuArr.count + 1;&#125;//å½“ä¸ºç¬¬äºŒä¸ªåˆ†ç»„æ—¶,æ˜¾ç¤ºçš„è¡Œæ•°ä¸ºæ’åˆ—ç»„åˆæ•°-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; if(section == self.sectionMenuArr.count)&#123; return self.datas.count; &#125; return 1;&#125;-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; if(indexPath.section == self.sectionMenuArr.count)&#123; //æ’åˆ—ç»„åˆçš„Cellæ˜¾ç¤º //æ’åˆ—ç»„åˆçš„åå­— ConditionFilter *filter = [self.datas objectAtIndex:indexPath.row]; cell.nameLabel.text = filter.name; //æŸä¸€æ’åˆ—ç»„åˆåç§°å¯¹åº”çš„ skuModel è®°å½•çš„è¡¨å•å€¼å’Œpropertieså€¼ SKUModel *sku = [self.writeFieldBoxDic objectForKey:filter.name]; &#125;&#125; 2.7 ä¿®æ”¹è§„æ ¼æ˜ç»† çš„è¡¨å•å€¼ä¿®æ”¹æ¯ä¸€ä¸ªæ˜ç»†é¡¹çš„æ—¶å€™ï¼Œå¯å¯¹åº”æ ¹æ®TextFieldValueChange äº‹ä»¶å˜åŒ–ï¼ŒæŠŠå€¼èµ‹å€¼ç»™æ¯ä¸€é¡¹æ’åˆ—ç»„åˆçš„keyå¯¹åº”çš„skuModelä¸­ã€‚skuModelå¯¹è±¡: {â€œpriceâ€:100,â€groupPriceâ€:88,â€propertiesâ€:â€11:167918-101:123253-102:123259â€}å‡†å¤‡ä¸€ä¸ªå­—å…¸æˆ–mapï¼šwriteFieldBoxDic æ ¹æ®æ’åˆ—ç»„åˆçš„å­—ç¬¦çªœ â€œA+B+Câ€ä½œä¸ºkey, skuModelä½œä¸ºvalue å­˜å‚¨ï¼›writeFieldBoxDic {â€œA+B+Câ€: skuModelâ€¦}cell å–å€¼æ˜¾ç¤ºçš„æ—¶å€™ï¼Œæ ¹æ®key å–å¾— skuModel çš„å€¼ï¼›fieldå€¼æ”¹å˜å¾—æ—¶å€™ï¼Œæ ¹æ®keyå–å¾—skuModel. å­˜åœ¨ç›´æ¥ä¿®æ”¹modelçš„å±æ€§ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„skuModel å­˜åˆ°writeFieldBoxDicä¸­ï¼› 2.8 æäº¤çš„è¡¨å•æ¡ä»¶åˆ¤æ–­123456789101112131415161718192021222324-(void)submitAction&#123; BOOL needReturnFlag = NO; //æ˜¯å¦éœ€è¦é˜»æ­¢æé†’ï¼› NSMutableArray *skuArr = [[NSMutableArray alloc] init]; for(NSInteger i=0; i&lt;self.datas.count; i++)&#123; ConditionFilter *filter = [self.datas objectAtIndex:i]; SKUModel *sku = [self.writeFieldBoxDic objectForKey:filter.name]; if(sku)&#123; [skuArr addObject:[sku mj_JSONObject]]; if(sku.price == nil || sku.groupPrice == nil)&#123; needReturnFlag = YES; break; &#125; &#125;else&#123; needReturnFlag = YES; &#125; &#125; if(needReturnFlag || skuArr.count == 0)&#123; [MBProgressHUD showMessage:@\"æ‰€æœ‰è§„æ ¼æ™®é€šä»·éœ€å¡«å†™å®Œæ•´ï¼\"]; return ; &#125; //...ä¿å­˜åˆ°æœåŠ¡å™¨&#125; 3ã€ä¸šåŠ¡ï¼šåº—é“ºå•†å“å’Œäº§å“åº“å…³ç³»å›¾ è¯´æ˜äº§å“åº“ï¼šåªè´Ÿè´£ç®¡ç†äº§å“çš„ä»·æ ¼ï¼šæ— è®ºæ‹¼å›¢ä»· è¿˜ æ˜¯ç§’æ€ä»·ï¼Œæ´»åŠ¨ä»· æˆ–æ™®é€šä»· éƒ½å¯ç»Ÿä¸€åœ¨åº“ä¸­ç®¡ç†è¯¥è§„æ ¼æ˜ç»†ä¿¡æ¯ã€‚ è¿™æ ·åšçš„ç›®çš„æ˜¯æä¾›å•†å“ä¿¡æ¯çš„å¤ç”¨ã€‚å½“åœ¨åº—é“ºä¸Šæ¶ä¸€ä¸ªå•†å“æ—¶ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å»åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å•†å“ï¼Œå¯é€šè¿‡äº§å“åº“è¿›è¡Œé€‰æ‹©æ·»åŠ ã€‚ä»å•†æˆ·è§’è‰²è¿›è¡ŒåŒºåˆ†ï¼š ä¸ªäººå¼€æ·˜å®åº—æ¨¡å¼ï¼šåº—é“ºéœ€å•ç‹¬ç®¡ç†å•†å“çš„åº“å­˜, è¿è´¹çš„è®¾ç½® æ˜¯å¦åŒ…é‚®ç­‰ä¿¡æ¯ã€‚ å‚å®¶å’Œè¿é”åº—æ¨¡å¼ï¼šè¿é”åº—å»åº“å­˜åªè´Ÿè´£ä»£é”€ï¼Œæ— éœ€ç®¡ç†åº“å­˜å’Œå‘è´§ã€‚å½“ç”¨æˆ·ä¸‹å•ï¼Œç»Ÿä¸€æŒ‡å‘å‚å®¶æ¥å‘è´§ã€‚ å‚å®¶ç»Ÿè®¡è®¾ç½®äº§å“ä¿¡æ¯ ï¼Œ ä»·æ ¼ï¼Œ åº“å­˜ã€‚ è”ç›Ÿçš„æ¦‚å¿µï¼š è”ç›Ÿè®¾ç½®å¥½äº†å•†å“ã€‚å·²åŠ å…¥è”ç›Ÿçš„å•†å®¶å¯ç›´æ¥ä»£é”€è”ç›Ÿæ€»åº—çš„å•†å“è¿›è¡Œå”®å–ï¼Œå–å¾—åˆ†ä½£ã€‚ç±»ä¼¼å¤šå¤šè¿›å®ï¼Œå¯å”®å–å¹³å°å·²å­˜åœ¨çš„å¯åˆ†æˆçš„å•†å“ã€‚ 4ã€ æŠ€æœ¯æ€»ç»“ æ‰€æœ‰çš„é‡ç‚¹åœ¨äºå»ºç«‹æ ‘å±‚çº§ç»“æ„ï¼Œæ ¹æ®å·²é€‰çš„è§„æ ¼å¤§ç±»å‹å¾ªç¯å…¶å·²é€‰æ‹©çš„è§„æ ¼å±æ€§æ•°ç»„ã€‚é€šè¿‡ConditionFilterå®ä½“çš„å±æ€§statusItem å¯ä»¥å–åˆ°å­èŠ‚ç‚¹ConditionFilter çš„æ•°ç»„ã€‚ ä»æœ€åä¸€ä¸ªå±‚çº§ä¸€æ¬¡å¾€ä¸Šä¸€å±‚çº§çš„èŠ‚ç‚¹èµ‹å€¼å­èŠ‚ç‚¹æ•°ç»„statusItemã€‚ä¸ºé˜²æ­¢å¯¹æ•°æ®æ¥æºçš„æ±¡æŸ“ï¼Œä¸€å®šè¦ä½¿ç”¨æ·±æ‹·è´ã€‚æ·±æ‹·è´model è¦å®ç°NSCopying,NSMutableCopying ç›¸å…³åè®®æ–¹æ³•ã€‚ ä»å‘æœåŠ¡å™¨æäº¤æ¯ä¸€é¡¹è§„æ ¼æ˜ç»†çš„ç»„åˆé¡¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯¹ConditionFilter çš„å±æ€§parent è¿›è¡Œéå†ï¼Œä¾æ¬¡å–å¾—ä¸Šä¸€èŠ‚ç‚¹çš„ç›¸å…³å±æ€§ï¼Œç›´åˆ°æœ€ä¸Šä¸€çº§èŠ‚ç‚¹çš„parent å±æ€§ä¸ºnull çš„æ—¶å€™ä¾¿åœæ­¢æ‹¼æ¥ã€‚propertiesçš„æ‹¼æ¥å°±å®Œæˆäº†ã€‚ åœ¨è¡¨å•å¡«å†™çš„æ—¶å€™ï¼Œé‡‡å–å¯¹å­˜å‚¨çš„æ¨¡å‹skuModelå±æ€§ä½œæ›´æ”¹ã€‚è€Œæ¯ä¸€é¡¹skuModel æ‰€å­˜å‚¨çš„map å­—å…¸çš„key æ˜¯ç”±æ’åˆ—ç»„åˆå¾—åˆ°çš„UIæ˜¾ç¤ºçš„æ‹¼æ¥å­—ç¬¦çªœã€‚å¦‚å•†å“æ‰‹æœºï¼š 64G+é»‘è‰²+æ ‡å‡†ç‰ˆã€‚ æ–¹ä¾¿åœ¨cellæ˜¾ç¤ºçš„æ—¶å€™ç›´æ¥è¯»å–ã€‚ UIäº¤äº’ä¸Šæä¾›æ‰¹é‡å’Œæ¡ä»¶è¿‡æ»¤å¿«é€Ÿç­›é€‰ è¿›è¡Œå¡«å†™æ¯ä¸€é¡¹æ˜ç»†çš„è¡¨å•å€¼ã€‚æœ‰åˆ©äºå•†æˆ·é«˜æ•ˆå¡«å†™è®¾ç½®sku ç»„åˆã€‚ ä»¥ä¸‹å‡ ä¸ªUIé¡µé¢ï¼Œä»…ä¾›å‚è€ƒç™¾åº¦è„‘å›¾ï¼šåº—é“ºå•†å“ ä¸ äº§å“åº“ åŠŸèƒ½æ“ä½œå…³ç³»å›¾ æ–‡ç« ä»£ç ç‰‡æ®µè¾ƒå¤šï¼Œä½†ä¹Ÿéƒ½æ˜¯æŠ€æœ¯æ ¸å¿ƒéƒ¨åˆ†ã€‚é‡Œé¢é€»è¾‘æ€§è¾ƒå¼ºï¼Œéœ€è¦æ…¢æ…¢ç†è§£é€å½»ã€‚å¸Œæœ›èƒ½å¯¹å†çœ‹çš„ä½ æœ‰æ‰€å¸®åŠ©ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"SKU","slug":"SKU","permalink":"https://www.littlewhale.xyz/tags/SKU/"}]},{"title":"SKUå•†å“å±æ€§å¤šçº§åŠ¨æ€æ ‘","slug":"skuTree","date":"2019-04-25T07:56:01.000Z","updated":"2020-05-27T00:36:50.000Z","comments":true,"path":"2019/04/25/skuTree/","link":"","permalink":"https://www.littlewhale.xyz/2019/04/25/skuTree/","excerpt":"","text":"GYLevelTreeSKU å•†å“å±æ€§ ä»·æ ¼æˆ–åº“å­˜ è®¾ç½®ï¼› åŠ¨æ€å¤šå±‚çº§æ ‘ï¼Œè‡ªç”±æ’åˆ—ç»„åˆï¼Œé€’å½’ï¼Œæ·±æ‹·è´,æµ…æ‹·è´; æºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[{"name":"SKU","slug":"SKU","permalink":"https://www.littlewhale.xyz/tags/SKU/"}]},{"title":"è‡ªå®šä¹‰åŒå‘Slideré€‰èŒƒå›´","slug":"doubleSliderRange","date":"2019-04-20T07:50:22.000Z","updated":"2020-05-27T00:44:49.000Z","comments":true,"path":"2019/04/20/doubleSliderRange/","link":"","permalink":"https://www.littlewhale.xyz/2019/04/20/doubleSliderRange/","excerpt":"","text":"GYSliderBaråŒå‘Slider, é€‰æ‹©èŒƒå›´æ§ä»¶ï¼›æ”¯æŒé˜¶æ¢¯å€¼æ»‘åŠ¨ï¼› å¯ç”¨äºç­›é€‰ç•Œé¢ï¼Œç­›é€‰ä»·æ ¼ï¼Œå…¶ä»–ä¸šåŠ¡ç­‰ï¼› æºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[{"name":"Slider","slug":"Slider","permalink":"https://www.littlewhale.xyz/tags/Slider/"}]},{"title":"2019å¹´å››æœˆ","slug":"2019_April","date":"2019-04-16T06:52:58.000Z","updated":"2020-05-27T00:59:37.000Z","comments":true,"path":"2019/04/16/2019_April/","link":"","permalink":"https://www.littlewhale.xyz/2019/04/16/2019_April/","excerpt":"","text":"æ—¶é—´åœ¨å¿«é©¬åŠ é­åœ°å‰è¡Œï¼Œèº«è¾¹çš„äººï¼Œåœ¨åšçš„äº‹ï¼Œä¹Ÿéƒ½å‘ç”Ÿäº†å˜åŒ–ï¼›å›é¡¾è¿‡å»ä¸€å¹´ï¼Œåšè¿‡çš„é¡¹ç›®ä¸å°‘ï¼Œä¹Ÿç»å†äº†ç”Ÿå‘½å‘¨æœŸé”€æ¯çš„ä¼ä¸šï¼›é‚£äº›ç›²ç›®è¿­ä»£æ²¡æœ‰æ€è€ƒåŠ›åœ°å †ç ŒåŠŸèƒ½å¯¹äºç”¨æˆ·æ¥è¯´æ˜¯å¤šä½™æ— ç”¨çš„ï¼Œå¯¹äºæ•´ä¸ªäº§å“æˆ˜ç•¥æ¥è¯´ä¼¼ä¹æ¸æ¸æ­¥å…¥æ·±æ¸Šï¼›è¿‡å»ä¸€å¹´çš„å¼€å‘ä¸­ï¼Œè‡ªå·±ä¹Ÿå˜å¾—è¢«åŠ¨ï¼Œæ•´ä¸ªæ€è€ƒåŠ›å’Œè¡Œä¸ºéƒ½è¢«ç‰µç€èµ°ï¼› â€œå®‰åˆ†å®ˆå·±â€ä¸€è¯ å½¢å®¹è‡ªå·±æˆäº†ä¸€ä¸ªâ€æ ‡å‡†â€œçš„èŒä¸šç å†œï¼Œæ—¶é—´ä¹‹æ²³ä¸Šï¼Œæœ‰ä¸€åˆ» ä¼¼ä¹æ„è¯†åˆ°è„‘æ´é½¿è½®å·²ç»ç”Ÿé”ˆ è½¬åŠ¨ç¼“æ…¢ï¼Œå¯¹ï¼Œéœ€è¦ç€æ‰‹åŠ¨èµ·æ¥äº†ï¼Œèµ·èº«ï¼Œå»åšï¼","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"https://www.littlewhale.xyz/categories/%E6%9D%82%E8%B0%88/"}],"tags":[]},{"title":"è§£å†³ScrollViewåµŒå¥—å¤šæ‰‹åŠ¿å†²çªé—®é¢˜","slug":"scrollViewNested","date":"2019-02-14T15:05:34.000Z","updated":"2020-05-27T00:54:37.000Z","comments":true,"path":"2019/02/14/scrollViewNested/","link":"","permalink":"https://www.littlewhale.xyz/2019/02/14/scrollViewNested/","excerpt":"","text":"åµŒå¥—ScrollView, ScrollViewåµŒå¥—CollectView, Tabéšå†…å®¹å›ºå®šæ»‘åŠ¨åˆ°é¡¶éƒ¨ï¼Œè§£å†³UIScrollView å¤šæ‰‹åŠ¿å†²çªï¼› ScrollView åµŒå¥—ScrollView ScrollView åµŒå¥—CollectionView Demo æºç Demoæºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾","slug":"customerDatePicker","date":"2019-02-11T10:06:24.000Z","updated":"2020-05-27T00:45:07.000Z","comments":true,"path":"2019/02/11/customerDatePicker/","link":"","permalink":"https://www.littlewhale.xyz/2019/02/11/customerDatePicker/","excerpt":"","text":"è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾ Demo æºç Demoæºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[{"name":"DatePicker","slug":"DatePicker","permalink":"https://www.littlewhale.xyz/tags/DatePicker/"}]},{"title":"è½¬ç›˜æŠ½å¥–å°åŠŸèƒ½","slug":"sweepstakes","date":"2019-02-09T13:02:48.000Z","updated":"2020-05-27T00:45:29.000Z","comments":true,"path":"2019/02/09/sweepstakes/","link":"","permalink":"https://www.littlewhale.xyz/2019/02/09/sweepstakes/","excerpt":"æŠ½å¥–åŠŸèƒ½æ¨¡å—æºç äº§å“å‡ºå‘ç‚¹1ã€é€šè¿‡åŠ¨æ€æŠ½å¥–æ•°æ®å’Œæ’è¡Œæ¿€å‘ç”¨æˆ·æŠ½å¥–æ¶ˆè´¹ï¼›2ã€é€šè¿‡æŠ€èƒ½å’Œå®çŸ³ç­‰ä»¥åŠè½¬ç›˜çš„ç‡ƒçˆ†å€¼ï¼Œä¸­å¥–ç‡ç¿»å€ç­‰ç­‰å¸å¼•ç”¨æˆ·ï¼›3ã€æ ¹æœ¬ä¸Šæ˜¯ä¸ºäº†æ¿€å‘ç”¨æˆ·æ´»è·ƒæ€§ä»¥åŠåˆºæ¿€æ¶ˆè´¹ æŠ€æœ¯éš¾ç‚¹1ã€æŠ½å¥–è½¬ç›˜åˆ†ä¸ºä¸¤ç§è½¬ç›˜ï¼Œä¸šåŠ¡é€»è¾‘åˆ†ä¸€ä¸ªparentVC ç®¡ç†ä¸¤ä¸ª å­ VCï¼›2ã€æŠ½å¥–å¥–å“æœåŠ¡ç«¯è¿”å›ï¼Œæ˜¾ç¤ºåœ¨æ¯ä¸€ä¸ªæ‰‡å½¢åŒºåŸŸçš„ä¸­é—´ï¼Œé‡‘é¢åŒä¼¼ï¼›3ã€ç‚¹å‡»æŠ½å¥–ï¼Œæ‹¿åˆ°å¥–å“id, æ‰¾å‡ºæ˜¯åœ¨è½¬ç›˜ä¸­çš„å“ªä¸ªåŒºåŸŸï¼Œè®©è½¬ç›˜æŒ‡é’ˆåœæ­¢åœ¨é‚£ä¸€åŒºåŸŸï¼›4ã€æŠ½å¥–åŠ¨æ€å¼¹å¹•ï¼›5ã€ç‡ƒçƒ§å€¼ å’Œ å€’è®¡æ—¶çš„æ§åˆ¶ï¼› ä¸šåŠ¡æ“ä½œè¯´æ˜1ã€ä¸¤ä¸ªè½¬ç›˜ï¼ŒæŸä¸ªè½¬ç›˜ç‚¹å‡»å¼€å§‹æŠ½å¥– äº’ä¸å½±å“ï¼› é»„é‡‘è½¬ç›˜å…·æœ‰å®ç®±å’ŒæŠ€èƒ½ï¼›2ã€æ¯æŠ½å–ä¸€æ¬¡ï¼Œæ‰£é™¤ç›¸åº”çš„é‡‘é¢ï¼Œå¦‚æœ‰ä¸­å¥–ï¼Œåˆ™å¼¹å‡ºä¸­å¥–å¥–å“ï¼›æŠ½å¥–åˆ†ä¸ºå•æ¬¡ï¼Œåè¿æŠ½ï¼Œä¸‰åè¿æŠ½ç­‰ï¼›3ã€æŠ½å¥–åäº§ç”Ÿè®°å½•ï¼›åœ¨è®°å½•ä¸­å¯çœ‹åˆ°æ¯æ¬¡æŠ½å¥–æ¶ˆè´¹æƒ…å†µï¼›4ã€è½¬ç›˜æœ‰ç‡ƒçƒ§å€¼ï¼Œå½“æ»¡æ—¶å€™ï¼Œè§¦å‘å€’è®¡æ—¶3åˆ†é’Ÿï¼Œå€’è®¡æ—¶å†… ä¸­å¥–ç‡å°†ç¿»å€ï¼›5ã€ç‡ƒçƒ§å€¼æ¯3ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œå½“ä¸­é€”ç¦»å¼€å†æ¬¡æ‰“å¼€ï¼Œåˆ™æ‹¿åˆ°æœ€æ–°å€’è®¡æ—¶æ˜¾ç¤ºï¼›6ã€å¼¹å¹•ä»æœ€æ–°100æ¡è®°å½• æ¯éš”2ç§’éšæœºç”Ÿæˆä¸€æ¡è®°å½•ï¼› æ¨¡å—è®¾è®¡1ã€æ•´ä¸ªæ¡†æ¶å¸ƒå±€åœ¨ä¸€ä¸ª MainVCä¸­æ§åˆ¶è½¬ç›˜ç±»å‹ï¼Œè¯·æ±‚ä½™é¢ï¼Œé€šçŸ¥ç­‰åˆ·æ–°é‡‘é¢ï¼› ç®¡ç†childVC ï¼›2ã€childVC ä¸­ å¤„ç†æŠ½å¥–ä¸šåŠ¡é€»è¾‘ï¼›UI å¸ƒå±€ï¼ŒæŠ½å¥–è¯·æ±‚ï¼Œ ç‡ƒçƒ§å€¼å¤„ç†ï¼Œå¼¹å¹•å¤„ç†ï¼›3ã€å…¶ä»–åŠŸèƒ½æ€§å­View å•ç‹¬è‡ªå®šä¹‰è§†å›¾ï¼› è½¬ç›˜è§†å›¾ï¼Œç‡ƒçƒ§å€¼è¿›åº¦è§†å›¾ï¼Œå€’è®¡æ—¶è¿›åº¦è§†å›¾ï¼Œ å¼¹çª—ç±»è§†å›¾ï¼›å¼¹å¹•è§†å›¾ï¼›4ã€å¼¹çª—ç±»è§†å›¾ ä»¥ä¸€ä¸ªParentViewå…¬å…±è§†å›¾å®¹å™¨ ï¼Œå…¶ä¸­å­è§†å›¾ç”±æšä¸¾å‚æ•°å€¼æ§åˆ¶è‡ªå®šä¹‰ï¼›æœ‰ç©æ³•è§†å›¾ï¼Œè®°å½•è§†å›¾ï¼Œä¿é™©è§†å›¾ï¼ŒæŠ€èƒ½è§†å›¾ï¼Œæ’è¡Œæ¦œè§†å›¾ï¼›","text":"æŠ½å¥–åŠŸèƒ½æ¨¡å—æºç äº§å“å‡ºå‘ç‚¹1ã€é€šè¿‡åŠ¨æ€æŠ½å¥–æ•°æ®å’Œæ’è¡Œæ¿€å‘ç”¨æˆ·æŠ½å¥–æ¶ˆè´¹ï¼›2ã€é€šè¿‡æŠ€èƒ½å’Œå®çŸ³ç­‰ä»¥åŠè½¬ç›˜çš„ç‡ƒçˆ†å€¼ï¼Œä¸­å¥–ç‡ç¿»å€ç­‰ç­‰å¸å¼•ç”¨æˆ·ï¼›3ã€æ ¹æœ¬ä¸Šæ˜¯ä¸ºäº†æ¿€å‘ç”¨æˆ·æ´»è·ƒæ€§ä»¥åŠåˆºæ¿€æ¶ˆè´¹ æŠ€æœ¯éš¾ç‚¹1ã€æŠ½å¥–è½¬ç›˜åˆ†ä¸ºä¸¤ç§è½¬ç›˜ï¼Œä¸šåŠ¡é€»è¾‘åˆ†ä¸€ä¸ªparentVC ç®¡ç†ä¸¤ä¸ª å­ VCï¼›2ã€æŠ½å¥–å¥–å“æœåŠ¡ç«¯è¿”å›ï¼Œæ˜¾ç¤ºåœ¨æ¯ä¸€ä¸ªæ‰‡å½¢åŒºåŸŸçš„ä¸­é—´ï¼Œé‡‘é¢åŒä¼¼ï¼›3ã€ç‚¹å‡»æŠ½å¥–ï¼Œæ‹¿åˆ°å¥–å“id, æ‰¾å‡ºæ˜¯åœ¨è½¬ç›˜ä¸­çš„å“ªä¸ªåŒºåŸŸï¼Œè®©è½¬ç›˜æŒ‡é’ˆåœæ­¢åœ¨é‚£ä¸€åŒºåŸŸï¼›4ã€æŠ½å¥–åŠ¨æ€å¼¹å¹•ï¼›5ã€ç‡ƒçƒ§å€¼ å’Œ å€’è®¡æ—¶çš„æ§åˆ¶ï¼› ä¸šåŠ¡æ“ä½œè¯´æ˜1ã€ä¸¤ä¸ªè½¬ç›˜ï¼ŒæŸä¸ªè½¬ç›˜ç‚¹å‡»å¼€å§‹æŠ½å¥– äº’ä¸å½±å“ï¼› é»„é‡‘è½¬ç›˜å…·æœ‰å®ç®±å’ŒæŠ€èƒ½ï¼›2ã€æ¯æŠ½å–ä¸€æ¬¡ï¼Œæ‰£é™¤ç›¸åº”çš„é‡‘é¢ï¼Œå¦‚æœ‰ä¸­å¥–ï¼Œåˆ™å¼¹å‡ºä¸­å¥–å¥–å“ï¼›æŠ½å¥–åˆ†ä¸ºå•æ¬¡ï¼Œåè¿æŠ½ï¼Œä¸‰åè¿æŠ½ç­‰ï¼›3ã€æŠ½å¥–åäº§ç”Ÿè®°å½•ï¼›åœ¨è®°å½•ä¸­å¯çœ‹åˆ°æ¯æ¬¡æŠ½å¥–æ¶ˆè´¹æƒ…å†µï¼›4ã€è½¬ç›˜æœ‰ç‡ƒçƒ§å€¼ï¼Œå½“æ»¡æ—¶å€™ï¼Œè§¦å‘å€’è®¡æ—¶3åˆ†é’Ÿï¼Œå€’è®¡æ—¶å†… ä¸­å¥–ç‡å°†ç¿»å€ï¼›5ã€ç‡ƒçƒ§å€¼æ¯3ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œå½“ä¸­é€”ç¦»å¼€å†æ¬¡æ‰“å¼€ï¼Œåˆ™æ‹¿åˆ°æœ€æ–°å€’è®¡æ—¶æ˜¾ç¤ºï¼›6ã€å¼¹å¹•ä»æœ€æ–°100æ¡è®°å½• æ¯éš”2ç§’éšæœºç”Ÿæˆä¸€æ¡è®°å½•ï¼› æ¨¡å—è®¾è®¡1ã€æ•´ä¸ªæ¡†æ¶å¸ƒå±€åœ¨ä¸€ä¸ª MainVCä¸­æ§åˆ¶è½¬ç›˜ç±»å‹ï¼Œè¯·æ±‚ä½™é¢ï¼Œé€šçŸ¥ç­‰åˆ·æ–°é‡‘é¢ï¼› ç®¡ç†childVC ï¼›2ã€childVC ä¸­ å¤„ç†æŠ½å¥–ä¸šåŠ¡é€»è¾‘ï¼›UI å¸ƒå±€ï¼ŒæŠ½å¥–è¯·æ±‚ï¼Œ ç‡ƒçƒ§å€¼å¤„ç†ï¼Œå¼¹å¹•å¤„ç†ï¼›3ã€å…¶ä»–åŠŸèƒ½æ€§å­View å•ç‹¬è‡ªå®šä¹‰è§†å›¾ï¼› è½¬ç›˜è§†å›¾ï¼Œç‡ƒçƒ§å€¼è¿›åº¦è§†å›¾ï¼Œå€’è®¡æ—¶è¿›åº¦è§†å›¾ï¼Œ å¼¹çª—ç±»è§†å›¾ï¼›å¼¹å¹•è§†å›¾ï¼›4ã€å¼¹çª—ç±»è§†å›¾ ä»¥ä¸€ä¸ªParentViewå…¬å…±è§†å›¾å®¹å™¨ ï¼Œå…¶ä¸­å­è§†å›¾ç”±æšä¸¾å‚æ•°å€¼æ§åˆ¶è‡ªå®šä¹‰ï¼›æœ‰ç©æ³•è§†å›¾ï¼Œè®°å½•è§†å›¾ï¼Œä¿é™©è§†å›¾ï¼ŒæŠ€èƒ½è§†å›¾ï¼Œæ’è¡Œæ¦œè§†å›¾ï¼› å¼¹å¹•å¤„ç†NSTimer æ¯2ç§’ä¸­å¾€å¼¹å¹•çˆ¶è§†å›¾ä¸­æ·»åŠ ä¸€æ¡å¼¹å¹•view;CADisplayLink è°ƒåŠ¨ setNeedsDisplay æ–¹æ³• è§¦å‘ ç³»ç»ŸdrawRect æ–¹æ³•ï¼›drawRect æ–¹æ³•ä¸­ ï¼ŒæŠŠå¼¹å¹•çˆ¶è§†å›¾æ‰€æœ‰çš„å¼¹å¹•éƒ½æ¯æ¬¡ç§»åŠ¨xå€¼ï¼Œå† ç§»é™¤å±å¹•ä¸­çš„å¼¹å¹• xå€¼ å°äº0 çš„å¼¹å¹•ï¼ˆåˆ¤æ–­ æ¯æ¡å¼¹å¹•view æœ‰è‡ªå·±çš„ä½ç½®ï¼‰ï¼› å€’è®¡æ—¶å¤„ç†åœ¨è‡ªå®šä¹‰è§†å›¾ä¸­ ï¼ŒdrawRect æ–¹æ³•ä¸­ è´å¡å°”æ›²çº¿ ç»˜åˆ¶ ä¸¤ä¸ªæ›²çº¿å›­ï¼›clockwise é€†æ–¹å‘ï¼› æ¯æ¬¡é€šè¿‡è®¾ç½®å‰©ä½™æ—¶é—´ è°ƒç”¨setNeedLayout ä¼šè§¦å‘drawRect ; å€’è®¡æ—¶å¯åŠ¨timerï¼Œæ¯0.05ç§’ é‡å¤ä¸€æ¬¡ï¼Œæ”¹å˜å‰©ä½™æ—¶é—´ï¼›å‰©ä½™æ—¶é—´ å°äº æˆ– ä¸º0 æ—¶å€™ï¼Œåˆ™å€’è®¡æ—¶èµ°å®Œï¼Œåœæ­¢timer; è½¬ç›˜å¤„ç†ä¸€ä¸ªç‚¹å›´ç»• æŸä¸ªèµ·ç‚¹ æ—‹è½¬ n åº¦ å çš„è½¬æ ‡ é€šè¿‡è¿™ä¸ªå…¬å¼è®¡ç®— ï¼š #define pointRotatedAroundAnchorPoint(point,anchorPoint,angle) CGPointMake((point.x-anchorPoint.x)cos(angle) - (point.y-anchorPoint.y)sin(angle) + anchorPoint.x, (point.x-anchorPoint.x)sin(angle) + (point.y-anchorPoint.y)cos(angle)+anchorPoint.y) æ‹¿åˆ°å¥–å“åï¼Œæ ¹æ®æ‰‡å½¢ä¸ªæ•° è®¡ç®—æ¯ä¸ªæ‰‡å½¢çš„è§’åº¦ï¼Œæ­£èµ·ç‚¹æ–¹å‘ ä¸ºåŸç‚¹ æ—‹è½¬è§’åº¦ä»¥ä¾¿è®¾ç½®æ¯ä¸ªå¥–å“çš„ä¸­å¿ƒä½ç½®point ï¼› å’Œtransform; è½¬ç›˜æŒ‡é’ˆåœåœ¨çš„ä½ç½®ï¼š æŒ‡é’ˆä¸åŠ¨ï¼Œå®é™…æ˜¯è½¬åŠ¨åº•ç›˜ï¼› éœ€å°†åº•ç›˜è§†å›¾ æ—‹è½¬åˆ°å›ºå®šè§’åº¦å³å¯ï¼›é¡ºæ—¶é’ˆæ˜¯ 360åº¦ - å›ºå®šè§’åº¦ï¼› æ¯æ¬¡è½¬åŠ¨å‰ï¼Œéœ€å°†ä¸Šä¸€æ¬¡è½¬åŠ¨è§’åº¦å½’ä½ï¼›1234567891011CABasicAnimation *layer &#x3D; [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation&quot;];&#x2F;&#x2F; é¡ºæ—¶é’ˆ(æ‰€æœ‰è¿™é‡Œéœ€è¦ç”¨360-å¯¹åº”çš„è§’åº¦) é€†æ—¶é’ˆä¸éœ€è¦layer.toValue &#x3D; @((M_PI*2 - (_perSection*index +_perSection*0.5)) + M_PI*2*4); &#x2F;&#x2F;å…ˆè½¬4åœˆlayer.duration &#x3D; 4;layer.removedOnCompletion &#x3D; NO;layer.fillMode &#x3D; kCAFillModeForwards;layer.timingFunction &#x3D; [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];layer.delegate &#x3D; self;[self.gameBgView.layer addAnimation:layer forKey:nil];123456789-(void)backToStartPosition&#123; &#x2F;&#x2F;å½’ä½ CABasicAnimation *layer &#x3D; [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation&quot;]; layer.toValue &#x3D; @(0); layer.duration &#x3D; 0.001; layer.removedOnCompletion &#x3D; NO; layer.fillMode &#x3D; kCAFillModeForwards; [self.gameBgView.layer addAnimation:layer forKey:nil];&#125;å¼¹å‡ºè§†å›¾12345678910111213141516171819202122232425262728293031#import &lt;UIKit&#x2F;UIKit.h&gt;#import &quot;PrizeRecord.h&quot;typedef void(^GYActionDateDoneBlock)(id selectedDate);typedef enum : NSInteger &#123;Prize_Ranking, &#x2F;&#x2F;æŠ½å¥–Prize_Gift, &#x2F;&#x2F;å¥–å“Prize_SkillDesc, &#x2F;&#x2F;æè¿°Prize_PlayDesc, &#x2F;&#x2F;æè¿°Prize_Record, &#x2F;&#x2F;ä¸­å¥–è®°å½•Prize_RecordDetail &#x2F;&#x2F;ä¸­å¥–è¯¦æƒ…&#125; PrizeStyle;@interface GYPrizeContairView : UIView- (instancetype)initSheetStyle:(PrizeStyle)prizeStyle actionBlock:(GYActionDateDoneBlock)actionDateDoneBlock;-(void)showInView;&#x2F;&#x2F;ä¸­å¥–å¥–å“ï¼›-(void)fetch_Prize_Gift:(NSArray *)datas;&#x2F;&#x2F;é»˜è®¤é€‰ä¸­æŸ¥è¯¢çš„è½¬ç›˜-(void)fetch_Record_DefaultChooseSelect:(DrawPrizeType)drawType;-(void)fetch_Record_Detail:(PrizeRecord *)record;&#x2F;&#x2F;æ’è¡Œæ¦œ-(void)fetch_Ranking_DrawType:(DrawPrizeType)drawType;@end 12345678910111213141516171819if(_sheetCellStyle &#x3D;&#x3D; Prize_Ranking)&#123; [self createRankingView]; &#x2F;&#x2F;æ’è¡Œæ¦œï¼› titleLabel.text &#x3D; @&quot;æ’è¡Œæ¦œ&quot;;&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_Gift)&#123; [self createPrizeGiftView]; &#x2F;&#x2F;å¥–å“ titleLabel.text &#x3D; @&quot;æ­å–œæ‚¨è·å¾—ä»¥ä¸‹å¥–å“&quot;;&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_SkillDesc)&#123; [self createSkillDescView]; &#x2F;&#x2F;æŠ€èƒ½æè¿° titleLabel.text &#x3D; @&quot;æŠ€èƒ½&quot;;&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_PlayDesc)&#123; [self createPlayPrizeDescView]; &#x2F;&#x2F;æŠ€èƒ½æè¿° titleLabel.text &#x3D; @&quot;ç©æ³•è¯´æ˜&quot;;&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_Record)&#123; [self createPlayPrizeRecordView]; &#x2F;&#x2F;æŠ€èƒ½è®°å½•æè¿° titleLabel.text &#x3D; @&quot;æŠ½å¥–è®°å½•&quot;;&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_RecordDetail)&#123; [self createPlayPrizeDetailRecordView]; &#x2F;&#x2F;å¥–å“è®°å½•è¯¦æƒ… titleLabel.text &#x3D; @&quot;æŠ½å¥–è¯¦æƒ…&quot;;&#125; å¦‚å›¾ï¼š æŠ½å¥–åŠŸèƒ½æ¨¡å—æºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[{"name":"æŠ½å¥–","slug":"æŠ½å¥–","permalink":"https://www.littlewhale.xyz/tags/%E6%8A%BD%E5%A5%96/"}]},{"title":"åœ°å›¾å¤šæ‰‹åŠ¿çš„åº”ç”¨","slug":"mapGesture","date":"2018-09-28T07:45:56.000Z","updated":"2020-05-27T00:57:45.000Z","comments":true,"path":"2018/09/28/mapGesture/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/28/mapGesture/","excerpt":"å½“éœ€è¦åœ¨åœ°å›¾ä¸Šå±‚è¦†ç›–ä¸€ä¸ªåˆ—è¡¨æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³çœ‹åˆ°æ›´å¤šçš„å†…å®¹ï¼Œåˆ—è¡¨è¢«æ‹‰å‡ºæ¥åç¿»çœ‹æ•°æ®ï¼›å½“æƒ³æ”¶èµ·æ—¶å€™ï¼Œå¯ç”¨ä¸‹æ‹‰ï¼Œæˆ–è€…éšç€æ‰‹åŠ¿æ»‘è½ä¸‹æ¥ï¼› éœ€è§£å†³çš„é—®é¢˜ï¼š1ã€æ»‘åŠ¨è¡¨æ ¼ï¼Œåœ°å›¾ä¸ç§»åŠ¨ï¼›æ‰‹åŠ¿æ¥å›æ»‘æ—¶å€™ï¼Œåˆ—è¡¨è¦è·Ÿç€é«˜åº¦å˜åŒ–ï¼›2ã€å½“æ»‘åˆ°æœ€é«˜æ—¶å€™ï¼Œä¸å†å¾€ä¸Šæ»‘åŠ¨ï¼›ç›¸åï¼Œæ»‘åˆ°æœ€ä½é«˜åº¦æ—¶å€™ä¸å†ç»§ç»­å‘ä¸‹ï¼›3ã€æ»‘ä¸Šå»ä¹‹åï¼Œå†å¾€ä¸‹æ»‘åŠ¨ ä¸å½±å“åˆ—è¡¨æ•°æ®çš„æŸ¥çœ‹ä¸æµè§ˆï¼› æ€è€ƒ æ‰‹åŠ¿å¼€å§‹ï¼šè®°å½• å¼€å§‹ç‚¹startYï¼Œ æ‰‹åŠ¿ç§»åŠ¨ï¼šæ ¹æ®èµ·å§‹ä½ç½®ç§»åŠ¨å·® ç¡®å®šä¸Šæ»‘åŠ¨ ï¼Œ ä¸‹æ»‘åŠ¨ï¼› èµ·ç‚¹B ç‚¹ è®°å½•æ–¹å‘ 0ï¼›B-A æ­£å‘ï¼Œ è®°å½•æ–¹å‘ç¬¦å· 1ï¼›B-C åå‘ ï¼Œè®°å½•æ–¹å‘ -1ï¼› åç§»å€¼ å¤§äº0 ï¼Œ ä¸Šæ»‘åŠ¨ï¼›å½“B-A-C åï¼Œç«‹é©¬è®°å½• 1 å˜æˆ -1ï¼› è®°å½•æ ‡è®°çŠ¶æ€å‰ï¼Œ æ­£å‘å¦‚ï¼šB-A çš„è¿‡ç¨‹ ï¼Œéœ€åˆ¤æ–­æ˜¯å¦ä¸º ä¸º -1 åˆ°1 è¿˜æ˜¯ 0-1 ï¼Œ å¦‚æœæ˜¯-1 åˆ™æ˜¯æ¥å›æ‹–åŠ¨ï¼›å¦åˆ™ä¸ºæ­£å‘æ‹–åŠ¨ï¼› code :ä»¥ä¸‹æ˜¯é‡ç‚¹é€»è¾‘ä»£ç ï¼›","text":"å½“éœ€è¦åœ¨åœ°å›¾ä¸Šå±‚è¦†ç›–ä¸€ä¸ªåˆ—è¡¨æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³çœ‹åˆ°æ›´å¤šçš„å†…å®¹ï¼Œåˆ—è¡¨è¢«æ‹‰å‡ºæ¥åç¿»çœ‹æ•°æ®ï¼›å½“æƒ³æ”¶èµ·æ—¶å€™ï¼Œå¯ç”¨ä¸‹æ‹‰ï¼Œæˆ–è€…éšç€æ‰‹åŠ¿æ»‘è½ä¸‹æ¥ï¼› éœ€è§£å†³çš„é—®é¢˜ï¼š1ã€æ»‘åŠ¨è¡¨æ ¼ï¼Œåœ°å›¾ä¸ç§»åŠ¨ï¼›æ‰‹åŠ¿æ¥å›æ»‘æ—¶å€™ï¼Œåˆ—è¡¨è¦è·Ÿç€é«˜åº¦å˜åŒ–ï¼›2ã€å½“æ»‘åˆ°æœ€é«˜æ—¶å€™ï¼Œä¸å†å¾€ä¸Šæ»‘åŠ¨ï¼›ç›¸åï¼Œæ»‘åˆ°æœ€ä½é«˜åº¦æ—¶å€™ä¸å†ç»§ç»­å‘ä¸‹ï¼›3ã€æ»‘ä¸Šå»ä¹‹åï¼Œå†å¾€ä¸‹æ»‘åŠ¨ ä¸å½±å“åˆ—è¡¨æ•°æ®çš„æŸ¥çœ‹ä¸æµè§ˆï¼› æ€è€ƒ æ‰‹åŠ¿å¼€å§‹ï¼šè®°å½• å¼€å§‹ç‚¹startYï¼Œ æ‰‹åŠ¿ç§»åŠ¨ï¼šæ ¹æ®èµ·å§‹ä½ç½®ç§»åŠ¨å·® ç¡®å®šä¸Šæ»‘åŠ¨ ï¼Œ ä¸‹æ»‘åŠ¨ï¼› èµ·ç‚¹B ç‚¹ è®°å½•æ–¹å‘ 0ï¼›B-A æ­£å‘ï¼Œ è®°å½•æ–¹å‘ç¬¦å· 1ï¼›B-C åå‘ ï¼Œè®°å½•æ–¹å‘ -1ï¼› åç§»å€¼ å¤§äº0 ï¼Œ ä¸Šæ»‘åŠ¨ï¼›å½“B-A-C åï¼Œç«‹é©¬è®°å½• 1 å˜æˆ -1ï¼› è®°å½•æ ‡è®°çŠ¶æ€å‰ï¼Œ æ­£å‘å¦‚ï¼šB-A çš„è¿‡ç¨‹ ï¼Œéœ€åˆ¤æ–­æ˜¯å¦ä¸º ä¸º -1 åˆ°1 è¿˜æ˜¯ 0-1 ï¼Œ å¦‚æœæ˜¯-1 åˆ™æ˜¯æ¥å›æ‹–åŠ¨ï¼›å¦åˆ™ä¸ºæ­£å‘æ‹–åŠ¨ï¼› code :ä»¥ä¸‹æ˜¯é‡ç‚¹é€»è¾‘ä»£ç ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758if(gestureRecognizer.state &#x3D;&#x3D; UIGestureRecognizerStateChanged)&#123; CGPoint point &#x3D; [gestureRecognizer locationInView:self.view]; CGFloat topDistance &#x3D; startSpanPoint.y - point.y; if(topDistance &gt;0)&#123; &#x2F;&#x2F;&gt;100 å°±æ˜¯å‘ä¸Šæ»‘ï¼Œä½†æ˜¯è¦æ§åˆ¶æ»‘åŠ¨çš„è·ç¦»é™åˆ¶ï¼› if(pointB1_Y &#x3D;&#x3D; -1)&#123; blChange &#x3D; YES; &#x2F;&#x2F;è®°å½•ä»å¾€ä¸‹å˜æˆå¾€ä¸Šï¼› &#125;else if(pointB1_Y &#x3D;&#x3D; 0)&#123; blChange &#x3D; NO; &#x2F;&#x2F;æ–¹å‘æ²¡æœ‰å˜æ›´ï¼› &#125; pointB1_Y &#x3D; 1; &#x2F;&#x2F;è®°å½•å½“å‰æ˜¯å¾€ä¸Šæ¨ï¼› &#x2F;&#x2F;å¾€ä¸Šæ¨ï¼› if(self.tableView.top &#x3D;&#x3D; self.listViewMinTop)&#123; self.tableView.scrollEnabled &#x3D; YES; &#125;else&#123; if(self.datas.count &gt; 0)&#123; &#x2F;&#x2F;æ— æ•°æ®æ—¶å€™ ä¸ç»™å¾€ä¸Šæ¨ &#x2F;&#x2F;å‘ä¸Šï¼›ä¸Šå‰©å¤šå°‘ç•™å¤šå°‘ ; if(bBottom_Top_Flag &#x3D;&#x3D; NO)&#123; if(!blChange &amp;&amp; self.mapViewHeight - topDistance &gt;&#x3D; self.listViewMinTop)&#123; self.tableView.top &#x3D; self.mapViewHeight - topDistance; &#125; &#125;else&#123; if(self.mapViewHeight - topDistance &gt;&#x3D; self.listViewMinTop)&#123; self.tableView.top &#x3D; self.mapViewHeight - topDistance; &#125; &#125; &#125; &#125; &#125;else if(topDistance&lt;0)&#123; if(pointB1_Y &#x3D;&#x3D; 1)&#123; blChange &#x3D; YES; &#x2F;&#x2F;è®°å½•ä»å¾€ä¸Šå˜æˆå¾€ä¸‹ï¼› &#125;else if(pointB1_Y &#x3D;&#x3D; 0)&#123; blChange &#x3D; NO; &#x2F;&#x2F;æ–¹å‘æ²¡æœ‰å˜æ›´ï¼› &#125; pointB1_Y &#x3D; -1; &#x2F;&#x2F;è®°å½•å½“å‰æ˜¯å¾€ä¸‹æ‹‰ï¼› if(self.tableView.contentOffset.y&lt;&#x3D;0 &amp;&amp; self.tableView.top &lt; self.mapViewHeight)&#123; &#x2F;&#x2F;å¹¶ä¸”æ˜¯åœ¨é¡¶éƒ¨å°äº0æ—¶å€™ self.tableView.contentOffset &#x3D; CGPointMake(0, 0); &#x2F;&#x2F;å¯å†™å¯ä¸å†™ï¼› self.tableView.scrollEnabled &#x3D; NO; if(bBottom_Top_Flag &#x3D;&#x3D; YES)&#123; if(!blChange &amp;&amp; self.listViewMinTop - topDistance &lt;&#x3D; self.mapViewHeight)&#123; self.tableView.top &#x3D; self.listViewMinTop - topDistance; &#125; &#125;else&#123; if(self.listViewMinTop - topDistance &lt;&#x3D; self.mapViewHeight)&#123; self.tableView.top &#x3D; self.listViewMinTop - topDistance; &#125; &#125; &#125; &#125;&#125; å•ç‹¬å†™äº†ä¸ªdemo ï¼Œä»¿boss ç›´è˜ æŸ¥çœ‹æ›´å¤šèŒä½ï¼Œä»¿å“ˆå–½å‡ºç° app æ‰«ç åº•éƒ¨æŒ‰é’® æŸ¥çœ‹æ›´å¤šæ´»åŠ¨Demo æºç ","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"MVCè®¾è®¡æ¨¡å¼è§è§£","slug":"mvc","date":"2018-09-28T06:34:52.000Z","updated":"2020-05-27T00:38:33.000Z","comments":true,"path":"2018/09/28/mvc/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/28/mvc/","excerpt":"","text":"ï¼ˆæ§åˆ¶å™¨Controllerï¼‰- è´Ÿè´£è½¬å‘è¯·æ±‚ï¼Œç½‘ç»œå¤„ç†ï¼Œæ§åˆ¶ä¸šåŠ¡é€»è¾‘ã€‚ ï¼ˆè§†å›¾Viewï¼‰ - é¡µé¢è§†å›¾UIäº¤äº’ï¼› æ¨¡å‹ä¸è§†å›¾ä¸èƒ½é€šä¿¡ï¼Œéœ€é€šè¿‡æ§åˆ¶å™¨controlleræ¥å®ç°ï¼› ï¼ˆæ¨¡å‹Modelï¼‰ - æ•°æ®ä¸šåŠ¡æ¨¡å‹çš„å‘ˆç°ï¼› æ¶‰åŠåˆ°çš„UI æ”¹åŠ¨ï¼Œ æ•°æ®é©±åŠ¨UIï¼Œæ”¹åŠ¨æ•°æ®çŠ¶æ€å³å¯å®ç°UIçš„å˜æ›´ï¼› æ¼”è¿›ï¼ˆViewModelæ¨¡å‹ï¼‰ - åœ¨åŸæœ‰MVC åŸºç¡€ä¸Šå¤šäº†ä¸€å±‚ï¼ŒControllerä¸ç›´æ¥æ§åˆ¶Model, ç›´æ¥æ“ä½œViewModel æ¥é—´æ¥ç®¡ç†ï¼› ViewModel ï¼ˆNSObjectï¼‰çš„èŒè´£ï¼šæ•°æ®é€»è¾‘å¤„ç†,æ§åˆ¶ï¼Œç®—æ³•ï¼Œè§£æï¼Œç½‘ç»œå¤„ç†ç­‰ç­‰ï¼› ä¸ç›´æ¥ç®¡ç†View;ä¸‰å±‚æ¨¡å¼å¯æœ‰æ•ˆé™ä½é¡¹ç›®å¶å°”åº¦ï¼Œæœ‰æ•ˆä¸šåŠ¡è§„æ•´ï¼Œåˆ†ç±»ï¼› å¤§å¤§æé«˜é¡¹ç›®å¼€å‘æ•ˆç‡ï¼›","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://www.littlewhale.xyz/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"MVC","slug":"MVC","permalink":"https://www.littlewhale.xyz/tags/MVC/"}]},{"title":"å‡ ç§å…¸å‹çš„è®¾è®¡æ¨¡å¼","slug":"designPatterns","date":"2018-09-28T06:07:37.000Z","updated":"2020-05-27T00:55:04.000Z","comments":true,"path":"2018/09/28/designPatterns/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/28/designPatterns/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253---------- ç®€å•å·¥å‚æ¨¡å¼ï¼š---------- å®šä¹‰ä¸€ä¸ªè®¡ç®—æ¥å£ã€‚ å®šä¹‰å››ä¸ªåŠ å‡ä¹˜é™¤ çš„å…·æœ‰è¯¥æ¥å£åŠŸèƒ½ çš„ç±»ã€‚å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ã€‚ ç”¨æ¥åˆ›å»º ä¸åŒçš„ æ¥å£åŠŸèƒ½ç±»ã€‚ æ ¹æ®ä¸åŒçš„éœ€è¦ï¼Œé€šè¿‡ æ¥å£ æ¥æ”¶å¯¹è±¡ï¼Œ è°ƒç”¨ä¸åŒçš„åŠŸèƒ½æ“ä½œç±»çš„å®ç°æ–¹æ³•ã€‚---------- æ¨¡æ¿æ¨¡å¼ï¼š---------- çˆ¶ç±»è¿è¡Œçš„æ—¶å€™ï¼Œè°ƒç”¨å­ç±» é‡å†™çš„æ–¹æ³•ã€‚---------- å·¥å‚æ¨¡å¼ï¼š---------- å®šä¹‰ä¸€ä¸ªæ¥å£åŠŸèƒ½ã€‚ ä¸¤ä¸ªæ•°å˜é‡ ï¼Œæœ‰è®¡ç®—åŠŸèƒ½ã€‚ å®šä¹‰ ä¸åŒçš„ åŠŸèƒ½æ¥å£å®ç°ç±»ã€‚ ä½¿ç”¨å˜é‡æ—¶å€™ ç”¨ @synthesize numberA &#x3D; _numberA;å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®šä¹‰åˆ›å»ºå·¥å‚æ–¹æ³•ï¼Œä¸å®ç°ã€‚æ”¹æŠ½è±¡å·¥å‚ å…·æœ‰è®¡ç®—æ¥å£åŠŸèƒ½ã€‚å®šä¹‰ä¸åŒçš„å·¥å‚å­ç±»ï¼Œå®ç°åˆ›å»ºå·¥å‚å¯¹è±¡ã€‚ è°ƒç”¨çš„æ—¶å€™ï¼Œé€šè¿‡ ä¸åŒçš„è®¡ç®—æ–¹æ³•ã€‚---------- è´£ä»»æ¨¡å¼ï¼š---------- è¯·å‡ï¼šå®šä¹‰ä¸€ä¸ª é¢†å¯¼ã€‚ Manager é¢†å¯¼ å…·æœ‰æ‰¹å‡†è¯·å‡åŠŸèƒ½ã€‚ å†…åŒ…å«ç›´å±é¢†å¯¼ã€‚é¢†å¯¼æœ‰ä¸‰çº§å±‚æ¬¡çš„é¢†å¯¼ã€‚ï¼ˆå†…åŒ…å«ç›´å±é¢†å¯¼ã€‚å¦‚æœè‡ªå·±å®¡æ‰¹æ—¶å€™å‘ç° éœ€è¦ç›´å±é¢†å¯¼å®¡æ‰¹ åˆ™ç›´æ¥è®©ç›´å±é¢†å¯¼æ“ä½œï¼‰æ™®é€šè¯·å‡ æ™®é€šé¢†å¯¼æ‰¹å‡†ï¼Œè¯·å‡å¤©æ•°è¶…è¿‡ä¸€å®šæ•°éœ€è¦æ›´é«˜çº§é¢†å¯¼ æ‰¹å‡†ã€‚ æ™®é€šé¢†å¯¼ æœ‰ç›´å± é¢†å¯¼ ã€‚ æ™®é€šé¢†å¯¼å¤„ç†æ—¶å€™ ä¸€çº§ä¸€çº§ å¤„ç†ä¸Šå» ã€‚---------- å‘½ä»¤æ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ï¼š---------- å®šä¹‰ä¸€ä¸ªèœå•ã€‚Order . èœå•æœ‰å¾ˆå¤šç§èœå•ã€‚ å­ç±» order . èœå•ä¸­ å¨å¸ˆ cook æ‰§è¡Œè¿™ä¸ªèœå•ã€‚å¤šä¸ªå®¢æˆ·ä¸‹å• ã€‚ waiter ç»Ÿä¸€æ¥å— èœå•ã€‚ï¼ˆä¸ç®¡ç‚¹çš„ä»€ä¹ˆèœï¼‰ã€‚watier å»ä¼ è¾¾ç»™ cook å» åšä¸åŒçš„èœç³»ã€‚è°ƒç”¨ä¸åŒçš„å­ç±»èœå• è®©å¨å¸ˆå» åšèœã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://www.littlewhale.xyz/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[]},{"title":"HTTPSè¿æ¥è¿‡ç¨‹","slug":"https","date":"2018-09-25T06:03:27.000Z","updated":"2020-05-27T00:41:20.000Z","comments":true,"path":"2018/09/25/https/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/25/https/","excerpt":"","text":"ã€HTTPSè¿æ¥è¿‡ç¨‹ã€‘httpsåè®®å°±æ˜¯http+sslåè®®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºå…¶è¿æ¥è¿‡ç¨‹ï¼šï¿¼ 1.httpsè¯·æ±‚å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€httpsè¯·æ±‚ï¼›2.ç”Ÿæˆå…¬é’¥å’Œç§é’¥æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œç”Ÿæˆå…¬é’¥å’Œç§é’¥ã€‚å…¬é’¥ç›¸å½“äºæ˜¯é”ï¼Œç§é’¥ç›¸å½“äºæ˜¯é’¥åŒ™ï¼Œåªæœ‰ç§é’¥æ‰èƒ½å¤Ÿæ‰“å¼€å…¬é’¥é”ä½çš„å†…å®¹ï¼›3.è¿”å›å…¬é’¥æœåŠ¡ç«¯å°†å…¬é’¥ï¼ˆè¯ä¹¦ï¼‰è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå…¬é’¥é‡Œé¢åŒ…å«æœ‰å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚è¯ä¹¦çš„é¢å‘æœºæ„ã€è¿‡æœŸæ—¶é—´ç­‰ç­‰ï¼›4.å®¢æˆ·ç«¯éªŒè¯å…¬é’¥å®¢æˆ·ç«¯æ”¶åˆ°å…¬é’¥ä¹‹åï¼Œé¦–å…ˆä¼šéªŒè¯å…¶æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚é¢å‘æœºæ„æˆ–è€…è¿‡æœŸæ—¶é—´ç­‰ï¼Œå¦‚æœå‘ç°æœ‰é—®é¢˜å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæç¤ºè¯ä¹¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå°±ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œä½œä¸ºå®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œç„¶åç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†ï¼›5.å‘é€å®¢æˆ·ç«¯å¯†é’¥å®¢æˆ·ç«¯ç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†å¯†é’¥ï¼Œç„¶åå‘é€ç»™æœåŠ¡ç«¯ã€‚6.æœåŠ¡ç«¯æ”¶å–å¯†é’¥ï¼Œå¯¹ç§°åŠ å¯†å†…å®¹æœåŠ¡ç«¯æ”¶åˆ°ç»è¿‡åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åç”¨ç§é’¥å°†å…¶è§£å¯†ï¼Œå¾—åˆ°å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œç„¶åæœåŠ¡ç«¯æŠŠè¦ä¼ è¾“çš„å†…å®¹å’Œå®¢æˆ·ç«¯çš„å¯†é’¥è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œè¿™æ ·é™¤éçŸ¥é“å¯†é’¥ï¼Œå¦åˆ™æ— æ³•çŸ¥é“ä¼ è¾“çš„å†…å®¹ã€‚7.åŠ å¯†ä¼ è¾“æœåŠ¡ç«¯å°†ç»è¿‡åŠ å¯†çš„å†…å®¹ä¼ è¾“ç»™å®¢æˆ·ç«¯ã€‚8.è·å–åŠ å¯†å†…å®¹ï¼Œè§£å¯†å®¢æˆ·ç«¯è·å–åŠ å¯†å†…å®¹åï¼Œç”¨ä¹‹å‰ç”Ÿæˆçš„å¯†é’¥å¯¹å…¶è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°å†…å®¹ã€‚ä¸­é—´äººåŠ«æŒæ”»å‡»httpsä¹Ÿä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºä¸­é—´äººåŠ«æŒæ”»å‡»ï¼Œä¸­é—´äººå¯ä»¥è·å–åˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´æ‰€æœ‰çš„é€šä¿¡å†…å®¹ã€‚ï¿¼ï¿¼ ä¸­é—´äººæˆªå–å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œç„¶åä¼ªè£…æˆå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼›å°†æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¼ªè£…æˆæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚é€šè¿‡è¿™æ ·çš„æ‰‹æ®µï¼Œä¾¿å¯ä»¥è·å–å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡çš„æ‰€æœ‰å†…å®¹ã€‚ä½¿ç”¨ä¸­é—´äººæ”»å‡»æ‰‹æ®µï¼Œå¿…é¡»è¦è®©å®¢æˆ·ç«¯ä¿¡ä»»ä¸­é—´äººçš„è¯ä¹¦ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸ä¿¡ä»»ï¼Œåˆ™è¿™ç§æ”»å‡»æ‰‹æ®µä¹Ÿæ— æ³•å‘æŒ¥ä½œç”¨ã€‚","categories":[],"tags":[{"name":"HTTPS","slug":"HTTPS","permalink":"https://www.littlewhale.xyz/tags/HTTPS/"}]},{"title":"æ–°æµªå¾®åš æ¨å’Œæ‹‰","slug":"sinaPullPush","date":"2018-09-25T04:25:06.000Z","updated":"2020-05-27T00:49:08.000Z","comments":true,"path":"2018/09/25/sinaPullPush/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/25/sinaPullPush/","excerpt":"","text":"æ¯ä¸ªäººçš„feedå°±æ˜¯ä¸€ä¸ªlistï¼Œå­˜å‚¨åˆ°redis;ç”¨æˆ·å‰ç«¯äº§ç”Ÿçš„æ‰€æœ‰äº‹ä»¶ å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ— RabbitMQ,Server æ ¹æ® ä¸šåŠ¡é€»è¾‘å°†æ–°çš„itemæ’å…¥åˆ°ä¸‹æ¸¸ç”¨æˆ·çš„feedé‡Œé¢ï¼› åœ¨çº¿æ¨ï¼Œæ¨ç»™æ´»è·ƒåœ¨çº¿ç”¨æˆ·ï¼Œç¦»çº¿æ‹‰ï¼› ä»»åŠ¡è°ƒåº¦ ï¼šé€‰ç”¨äº†Celeryï¼› æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªæ”¶ä»¶ç®± å’Œ å‘ä»¶ç®±ï¼›ä¿å­˜è‡ªå·±å‘è¿‡çš„åŠ¨æ€ä»¥åŠFeedåŠ¨æ€ï¼› ç”¨æˆ·Aå…³æ³¨äº†ç”¨æˆ·B ï¼Œ ç”¨æˆ·Bå‘å¸ƒåŠ¨æ€åˆ™å°†åŠ¨æ€æ¨è¿›ç”¨æˆ·Açš„feedï¼Œè¿™é‡Œä½¿ç”¨redisçš„zsetå®ç°ï¼Œsortä¸ºtimeï¼ˆè®°å¾—ä»¥æ¯«ç§’ä¸ºæ—¶é—´æˆ³ï¼Œç§’çº§åœ¨æ•°æ®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¼šæœ‰è¯»å–ä¸åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä»¥æ—¶é—´æˆ³ä¸ºåˆ†é¡µé¡µç ï¼‰ï¼Œvalueä¸ºå…·ä½“çš„åŠ¨æ€ IDï¼ˆä¸ºä»€ä¹ˆæ˜¯åŠ¨æ€IDï¼Œ å…¶å®å¾ˆç®€å•ï¼Œ å°±æ˜¯å› ä¸ºåŠ¨æ€çš„å†…å®¹å¯ä»¥è¿›è¡Œç¼“å­˜ï¼Œåœ¨redisé‡Œé¢å…¨éƒ¨èµ°IDï¼Œä¿®æ”¹åŠ¨æ€å†…å®¹ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€å¤„ï¼ŒåŠ¨æ€å†…å®¹å¯ä»¥ä¿å­˜åœ¨hashç»“æ„é‡Œï¼‰ï¼Œ æ¯ä¸ªç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªzsetä¿å­˜æˆ‘å‘å¸ƒçš„åŠ¨æ€ï¼Œä¸€ä¸ªzsetä¿å­˜æˆ‘çš„feedåŠ¨æ€ï¼Œè¿‡æœŸæ—¶é—´3~7å¤©çœ‹æƒ…å†µè€Œå®šã€‚ å…¨å±€ç»´æŠ¤ä¸€ä¸ªåœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼Œæ€ä¹ˆè®¾è®¡è¿™ä¸ªå°±è‡ªå·±ç¢ç£¨äº†ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·æŒ‚åå°å¯¼è‡´ä¸æœåŠ¡ç«¯ä¸ºç¦»çº¿çŠ¶æ€ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯1~3å°æ—¶æœªæ“ä½œæˆ–è€…ç¦»çº¿æ—¶é—´ä¸å¤§äº3å°æ—¶çš„ï¼Œéƒ½å½“åšåœ¨çº¿å¤„ç†ï¼Œ é‚£ä¹ˆï¼Œå½“ç”¨æˆ·å‘äº†ä¸€æ¡åŠ¨æ€åï¼Œåå°ä¼šæœ‰ä»¥ä¸‹è¿™äº›æ“ä½œï¼š åœ¨çº¿æ¨ï¼š å¼‚æ­¥éå†åœ¨çº¿çš„ç²‰ä¸ï¼Œå°†åŠ¨æ€IDï¼Œæ·»åŠ åˆ°ç²‰ä¸çš„Feedä¸­ã€‚ ç¦»çº¿æ‹‰ï¼š ç¦»çº¿ç”¨æˆ·æ‰“å¼€APPåï¼Œæˆ‘ä»¬æ˜¯ä¼šè¯·æ±‚ä¸€ä¸ªå…¬å…±çš„å…¥å£æ¥å£ï¼Œä¸»åšç»Ÿè®¡ä»¥åŠå…¶ä»–åˆå§‹åŒ–æ“ä½œï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¼€äº†ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œå¯¹ç”¨æˆ·è¿›è¡ŒFeedæ›´æ–°æ“ä½œï¼Œé˜²æ­¢ç”¨æˆ·è¿›å…¥APPåç­‰å¾…æ‹‰å–æ—¶é—´è¿‡é•¿ï¼Œæ¯•ç«Ÿå…³æ³¨æˆåƒä¸Šä¸‡çš„äººè‚¯å®šæœ‰ï¼ˆå…¶å®ä¸‡å•ä½ä»¥ä¸‹éå†éƒ½å¾ˆå¿«ï¼‰ã€‚æ‹‰å–è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠè‡ªå·±æœ€åä¸€æ¡Feedçš„æ—¶é—´æˆ³å–å‡ºï¼Œå»éå†å…³æ³¨çš„äººçš„feedï¼Œå°†å¤§äºè¯¥æ—¶é—´çš„IDå…¨éƒ¨æ‹‰å–å›æ¥ã€‚ç”¨æˆ·è¿›å…¥APPåï¼Œåˆ·æ–°å³å¯çœ‹åˆ°æœ€æ–°æ“ä½œã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[]},{"title":"èŠèŠåŠ¨æ€å¤šç±»å‹cellçš„è®¾è®¡","slug":"typeCells","date":"2018-09-25T03:41:47.000Z","updated":"2020-05-27T01:08:36.000Z","comments":true,"path":"2018/09/25/typeCells/","link":"","permalink":"https://www.littlewhale.xyz/2018/09/25/typeCells/","excerpt":"","text":"çº¢åŒ…å®ä½“ï¼Œæ–‡ç« å®ä½“ éƒ½å±äºåŠ¨æ€ ï¼Œå®šä¹‰æ—¶å€™å®ç°è¯¥åè®®DynamicPro,ç›¸å½“äºjavaä¸­çš„æ¥å£ã€‚dataList æ•°ç»„ä¸­ å­˜æ”¾çš„æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚æ‹¿åˆ°çš„ DynamicPro ç±»å‹çš„åŠ¨æ€åˆ—è¡¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142 @protocol DynamicPro &lt;NSObject&gt; @end çº¢åŒ…å®ä½“ï¼Œæ–‡ç« å®ä½“ éƒ½å±äºåŠ¨æ€ ï¼Œå®šä¹‰æ—¶å€™å®ç°è¯¥åè®®DynamicProã€‚ dataList æ•°ç»„ä¸­ å­˜æ”¾çš„æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚æ‹¿åˆ°çš„ DynamicPro ç±»å‹çš„åŠ¨æ€åˆ—è¡¨ã€‚ DynamicCell: UITableViewCell &#123; å±æ€§ Id&lt;DynamicPro&gt; dynamic; //æ–‡ç« åŠ¨æ€ï¼Œæ™®é€šåŠ¨æ€ï¼Œç›´æ’­åŠ¨æ€ï¼Œçº¢åŒ…ç±»å‹åŠ¨æ€ &#125; @implementation DynamicCell -(void)setDynamic:(id&lt;DynamicPro&gt;)dynamic&#123; _dynamic = dynamic; //DynamicCell æœ‰å¾ˆå¤šå­ç±»cell: çº¢åŒ…cell ,æ–‡ç« cell,ç›´æ’­cell ç­‰ //åœ¨å­ç±»cell æ¸²æŸ“å…·ä½“UIæ•°æ®ç»‘å®š &#125; @end è¡¨æ ¼ cellFor æ¸²æŸ“çš„æ—¶å€™ï¼š&#123; DynamicPro *dynamic = self.dataList[indexPath.row]; DynamicCell * cell = [çº¢åŒ…cell new]; //æ ¹æ®dynamicç±»å‹ åˆ›å»º ä¸åŒçš„ åŠ¨æ€cell //æœ€ç»ˆç»Ÿä¸€è®¾ç½®åŠ¨æ€æ•°æ® [cell setDynamic: dynamic]; &#125; è¡¨æ ¼é«˜åº¦ heightFor æ¸²æŸ“çš„æ—¶å€™ï¼š&#123; DynamicPro *dynamic = self.dataList[indexPath.row]; if(dynamic é«˜åº¦ä¸å˜çš„)&#123; return 44; &#125;else&#123; //é«˜åº¦å˜åŠ¨çš„ç”¨è‡ªåŠ¨å¸ƒå±€ return UITableViewAutomaticDimension; &#125; &#125; è¡¨æ ¼ estimatedHeightForRowAtIndexPath è¿›è¡Œè‡ªåŠ¨å¸ƒå±€çš„ä¼°ç®— &#123; return 100; &#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"å…³äºèŠå¤©é¡µé¢çš„å¤šç±»å‹æ¶ˆæ¯çš„å°è£…","slug":"messageUIDesign","date":"2018-07-21T01:25:29.000Z","updated":"2020-05-27T00:57:02.000Z","comments":true,"path":"2018/07/21/messageUIDesign/","link":"","permalink":"https://www.littlewhale.xyz/2018/07/21/messageUIDesign/","excerpt":"","text":"æ¶ˆæ¯å¸ƒå±€è§‚å¯Ÿï¼šå‘¨è¾¹å¤´åƒï¼Œæ˜µç§°ï¼Œé—´è· ï¼Œæ°”æ³¡ åŠå…¶ä»–ç»Ÿä¸€ï¼Œå†…å®¹è§†å›¾æŒ–ç©ºï¼› é‡‡å–è‡ªå®šä¹‰æ³¨å…¥è§†å›¾é…ç½®ï¼› ä»CellFor æ–¹æ³•è¯´èµ·ï¼›èŠå¤©æ¶ˆæ¯é¡µé¢ï¼Œæˆ‘ä»¬çœ‹åˆ° æœ‰ èŠå¤©æ¶ˆæ¯ è¿˜æœ‰æ—¶é—´æˆ³ï¼›æ ¹æ® ModelItemé¡¹ çš„ classç±»å‹ åˆ†åˆ«å»åˆ›å»º ä¸¤ç§cell ; åªé‡Œåªè®² èŠå¤©æ¶ˆæ¯cell; æµç¨‹ï¼šå½“ä¸ºèŠå¤©æ¶ˆæ¯Model æ—¶å€™ï¼Œå messageModelï¼ˆmessageModel é‡Œé¢ å¤§è‡´æœ‰ä»¥ä¸‹å±æ€§: è®°å½•æ¶ˆæ¯æ¨¡å‹ï¼Œæ¶ˆæ¯å¸ƒå±€ï¼Œå¤´åƒï¼Œæ˜µç§° æ˜¾ç¤ºæ§åˆ¶ï¼Œæ¶ˆæ¯å†…å®¹size; ï¼ˆä¸è¶³ åè¡¥ï¼‰ï¼‰ï¼› å–å¾—æ¶ˆæ¯å¸ƒå±€ï¼› ç›¸å¯¹åº”çš„contentç±»å­—ç¬¦ä¸²ï¼›æ ¹æ® identify = content å»é‡ç”¨cell (ä¸åŒæ¶ˆæ¯ç±»å‹é‡ç”¨æ ‡è¯†ä¸åŒ ); åˆ›å»ºMessageCell æ ¹æ® content å»åˆ›å»º å¯¹åº”çš„å†…å®¹è§†å›¾ å³å¯ï¼›å†åˆ·æ–°è§†å›¾æ•°æ® èµ‹å€¼ï¼› å¸ƒå±€æ¥æºï¼šå®šä¹‰ ä¸€ä¸ª layoutconfigInterface;layoutconfig é…ç½®åŒ…å«ï¼š{1ï¼‰messageçš„å†…å®¹å¤§å°ï¼›2ï¼‰éœ€è¦åˆ›å»ºæ˜¾ç¤ºçš„CellContent ç±»å3ï¼‰æ°”æ³¡çš„é…ç½®é—´è·ç­‰4ï¼‰æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¤´åƒ5ï¼‰æ§åˆ¶æ˜¯å¦ æ˜¾ç¤ºæ˜µç§°6ï¼‰æ§åˆ¶æ¶ˆæ¯æ˜¾ç¤ºåœ¨å·¦è¾¹è¿˜æ˜¯åœ¨å³è¾¹ ï¼ˆæ˜¯å¦æ˜¯è‡ªå·±å‘çš„ï¼‰} Contentæ¥æº1ã€contentConfigInterface æ¥å£ï¼šè€ƒè™‘åˆ°messageçš„å†…å®¹å¤§å° å’Œ cellContent ç±»å æ˜¯ å±äº CellContent é…ç½®ï¼› äºæ˜¯ è€ƒè™‘ç”¨ä¸€ä¸ª cellConentConfigFactory çš„å·¥å‚æ¥ç”Ÿäº§è¿™äº›é…ç½® ï¼› 2ã€contentConfigInterface å®åˆ—messageçš„å†…å®¹å¤§å° å’Œ cellContent ç±»å æŠ½å‡ºæ¥ å®šä¹‰ä¸€ä¸ªæ¥å£ ContentConfigInterfaceï¼›ï¼ˆè€ƒè™‘åˆ°æœ‰æ–‡æœ¬é…ç½®ï¼Œå›¾ç‰‡é…ç½®ï¼Œä»¥åŠå›¾æ–‡é…ç½®ï¼ŒåæœŸ çš„æ‰©å±• å£°éŸ³é…ç½®ï¼Œçº¢åŒ…é…ç½® ï¼Œ å¥½å‹åˆ†äº«é…ç½®ï¼‰ å‡†å¤‡ä¸€ä¸ªè¶…çº§çˆ¶ç±»BaseContentConfig ï¼ˆå…·æœ‰messageå±æ€§ï¼Œæ–¹ä¾¿è®¡ç®—messageå†…å®¹çš„å¤§å°ï¼‰ï¼› åæœŸé…ç½®åªéœ€ç»§æ‰¿ BaseContentConfigã€å®ç°ContentConfigInterface æ¥å£ æ–¹æ³•å³å¯ï¼› 3ã€æœ€ç»ˆè¦æŠŠé…ç½®contentConfigInterface è¿™æ ·çš„å®åˆ— åé¦ˆç»™ å¸ƒå±€ç®¡ç†å™¨; ä¸ºäº†ä¸æš´éœ²å¤ªå¤šçš„è¯¦ç»†contentConfig ç»†èŠ‚ ä»¥åŠ ä½è€¦åˆï¼›ç”¨ä¸€ä¸ªConentConfigFactory å·¥å‚ç”Ÿäº§è¿™äº›é…ç½®ç©æ„ ï¼Œæ ¹æ®æ¶ˆæ¯ç±»å‹ è¿”å› æ¶ˆæ¯å†…å®¹é…ç½® contentConfig ï¼ˆå·¥å‚å•åˆ—ï¼Œå®åˆ—åŒ–çš„æ—¶å€™ åˆ›å»ºäº†ä¸€ä¸ªMapæˆ–è€…å­—å…¸ï¼Œ è®°å½•äº†æ¶ˆæ¯ç±»å‹ å¯¹åº”çš„ æ¶ˆæ¯contentConfig;ï¼‰","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[]},{"title":"iOSå®¢æˆ·ç«¯è¯·æ±‚æ¨¡å—","slug":"iOSNetworkDesign","date":"2018-07-20T01:28:50.000Z","updated":"2020-05-27T00:58:38.000Z","comments":true,"path":"2018/07/20/iOSNetworkDesign/","link":"","permalink":"https://www.littlewhale.xyz/2018/07/20/iOSNetworkDesign/","excerpt":"","text":"æ¢ç©¶åŸç”Ÿç½‘ç»œè¯·æ±‚ä¸šåŠ¡æ¥å£APIè®¾è®¡ä¸ç½‘ç»œè¯·æ±‚Swift ç‰ˆ Alnofire æ¡†æ¶ä½¿ç”¨Swift ä¸­çš„Jsonè§£æVC å‘èµ·è¯·æ±‚ï¼Œ ä¸€ä¸ªä¸“é—¨å‘è¯·æ±‚çš„å‘å°„å™¨ï¼›æˆ‘ç»™å®ƒå–åå­— å« NetManager , æ˜¾ç„¶ ï¼Œä¸º äº†ä¸é‡å¤åˆ›å»ºhttp è¯·æ±‚åŸºç¡€é…ç½®ï¼ˆè¯·æ±‚å¤´ï¼ŒHttpsè¯ä¹¦é…ç½®ç­‰ï¼‰ï¼Œè¿™æ˜¯ä¸ªå•ä¾‹ï¼› å‘å°„å™¨ å‘çš„æ˜¯è¯·æ±‚ï¼› è€ƒè™‘åˆ°æ¯ä¸ªä¸šåŠ¡ éƒ½æœ‰ä¸åŒçš„è¯·æ±‚ï¼›æˆ‘å‡†å¤‡äº† ä¸€ä¸ª è¶…çº§çˆ¶ç±»è¯·æ±‚ ï¼›å–å DataRequest; å…·ä½“çš„è¯·æ±‚ï¼Œåªéœ€ä¼  å…·ä½“çš„å­ç±»requestï¼› ä¸€ä¸ªAPP è¯·æ±‚æœ‰å¾ˆå¤šï¼Œä¸ºäº†åŒºåˆ† åŠ ç»´æŠ¤æ–¹ä¾¿ ï¼Œäºæ˜¯æˆ‘å®šä¹‰äº†ä¸€ä¸ªæšä¸¾ï¼›æ¯ä¸ªä¸šåŠ¡è¯·æ±‚ï¼Œåªéœ€ç»™å®ƒè¡¨æ˜ä¸€ä¸ªæ ‡è¯†ï¼› è¯·æ±‚å…·æœ‰ä»€ä¹ˆç‰¹æ€§å‘¢ï¼Ÿ 1ï¼‰æœ‰è¯·æ±‚çš„API urlåœ°å€ï¼Œ2ï¼‰è¯·æ±‚çš„å‚æ•°ï¼Œè¯·æ±‚çš„æ ‡è¯†ï¼ˆè¯·æ±‚çš„æšä¸¾å€¼ï¼‰ï¼Œ 3ï¼‰å¯¹è¯·æ±‚å›æ¥çš„æ•°æ®è§£æå¥½å°è£…ï¼ˆä¸šåŠ¡æ•°æ®å°è£…ç­‰å¤„ç†ï¼‰ï¼› äºæ˜¯æˆ‘å®šä¹‰äº†ä¸€ä¸ªåå«APIInterface çš„æ¥å£åè®®ï¼› çˆ¶ç±»è¯·æ±‚å»å®ç°è¿™ä¸ªAPInterfaceæ¥å£åè®®ï¼› å­ç±»å»Override è¿™å‡ ä¸ªæ–¹æ³•å³å¯ï¼› å‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå¿…ç„¶æœ‰ å›ç­”ï¼›è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ ï¼ˆæœ‰çš„å¤±è´¥æ˜¯ä¸šåŠ¡ç å¤±è´¥ï¼‰ï¼› äºæ˜¯ ï¼Œæˆ‘å®šä¹‰äº†å·²ä¸€ä¸ªè¯·æ±‚å›è°ƒçš„æ¥å£ï¼›RequestCallBackInterface ï¼› ï¼ˆå…·æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š ä¸šåŠ¡æˆåŠŸï¼Œä¸šåŠ¡å¤±è´¥ï¼Œç½‘ç»œå…¶ä»–åŸå› å¤±è´¥ï¼‰ æˆ‘ä»VC å‘å‡ºå»çš„è¯·æ±‚ï¼Œç›¸å½“äºAndroid çš„Activity; ç†Ÿç§°è§†å›¾æ§åˆ¶å™¨ï¼›å½“ç„¶æ˜¯å¸Œæœ›è¯·æ±‚å›è°ƒ å›åˆ° è§†å›¾æ§åˆ¶å™¨ï¼›äºæ˜¯æˆ‘ åœ¨ åŸºç±»è§†å›¾æ§åˆ¶å™¨ BaseViewController æˆ–è€…BaseActivity(Android) å®ç° è¯·æ±‚å›è°ƒ æ¥å£åè®®ï¼›å®ç°å…¶ä¸­çš„æ–¹æ³•ã€‚å…·ä½“è§†å›¾æ§åˆ¶å™¨ ç»§æ‰¿åŸºç±»ï¼Œ åªéœ€è¦†ç›–Override è¿™ä¸‰ä¸ªæ–¹æ³• ï¼ˆå…·ä½“VC å®ç°å›è°ƒåçš„ä¸šåŠ¡ï¼‰ æœ€åï¼›é¡µé¢é€»è¾‘å°±æ˜¾ç¤ºå¾—æ¯”è¾ƒç®€å•äº†ï¼Œä¸€ä¸ªå•ä¾‹ NetManager æ‰§è¡Œä¸€ä¸ª DataRequest (ä¼ å…·ä½“è¯·æ±‚å­ç±») ï¼› è§†å›¾æ§åˆ¶å™¨åœ¨å…·ä½“RequestCallBackInterface çš„å›è°ƒæ–¹æ³• ä¸­å¤„ç† æˆåŠŸ ï¼Œå¤±è´¥åçš„æ•°æ®ï¼› 12345678910111213141516171819202122232425262728293031//ç™»å½•è¯·æ±‚self.loginRequest.userLogin = self.userName;self.loginRequest.userPass = self.userPwd;[[GYNetworkingManager shareInstance] executeRequest:self.loginRequest];//æœ‹å‹åœˆåˆ—è¡¨è¯·æ±‚self.dynamicListRequest.pageIndex = 1;self.dynamicListRequest.pageSize = 20;[[GYNetworkingManager shareInstance] executeRequest:self.dynamicListRequest];-(void) onRequestSuccess:(BaseResponse *)response&#123;switch (response.requestAPICode ) &#123; //è¯·æ±‚çš„æšä¸¾case Http_Login:&#123;//è¿”å›çš„ç™»å½•å¯¹è±¡// LoginData *data = response.responseObject;break;&#125;case Http_DynamicList:&#123;//å¦‚æœæ˜¯åˆ—è¡¨,åˆ™ä»å–æ•°ç»„NSArray *dataList = response.tableList.dataList;[self allLoadingCompleted:dataList];break;&#125;default:break;&#125;&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"ä¸€ä¸ªæ¯å­çš„8ä¸­è¥é”€æ–¹å¼","slug":"marketingMethods","date":"2017-09-04T03:53:54.000Z","updated":"2020-05-27T00:48:42.000Z","comments":true,"path":"2017/09/04/marketingMethods/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/marketingMethods/","excerpt":"","text":"ä¸€ä¸ªæ¯å­çš„8ç§è¥é”€æ–¹æ¡ˆï¼š å–äº§å“çš„æœ¬èº«ä½¿ç”¨ä»·å€¼ï¼Œåªèƒ½å–3å…ƒ/ä¸ªã€‚ å–äº§å“çš„æ–‡åŒ–ä»·å€¼ï¼Œå¯ä»¥å–5å…ƒ/ä¸ªã€‚ å–äº§å“çš„å“ç‰Œä»·å€¼ï¼Œå¯ä»¥å–7å…ƒ/ä¸ªã€‚ ï¼ˆå“ç‰Œæ ‡ç­¾ï¼‰ å–äº§å“çš„ç»„åˆä»·å€¼ï¼Œå–15å…ƒ/ä¸ªã€‚ï¼ˆæƒ…ä¾£ï¼Œäº²æƒ…å¥—è£…ï¼‰ å–äº§å“çš„å»¶ä¼¸ä»·å€¼ã€‚ï¼ˆå¯¹äººä½“æœ‰ä»€ä¹ˆå¥½å¤„ä¹‹ç±»çš„ï¼‰ å–äº§å“çš„ç»†åˆ†å¸‚åœºä»·å€¼ ï¼ˆæƒ…ä¾£å¥—è£…ï¼Œ12ç”Ÿè‚–ï¼Œå¡é€šåŠ¨æ¼« ä¹‹ç±»çš„ï¼Œç²¾è£…ç¤¼ç›’ï¼‰ å–äº§å“çš„åŒ…è£…ä»·å€¼ã€‚ ä¹°äº§å“çš„çºªå¿µä»·å€¼ã€‚ è¥é”€è§£ç ï¼šæ¶ˆè´¹è€…å¾€å¾€è´­ä¹°å•†å“æ—¶ï¼Œé™¤äº†äº§å“æœ¬èº«çš„ä½¿ç”¨ä»·å€¼å¤–ï¼Œæ›´å¤šçš„æ˜¯è´­ä¹°ä¸€ç§æ„Ÿè§‰ï¼Œæ–‡åŒ–ï¼ŒæœŸæœ›ï¼Œé¢å­ï¼Œåœˆå­ï¼Œå°Šä¸¥ï¼Œå°Šé‡ï¼Œç†è§£ï¼Œåœ°ä½ç­‰è±¡å¾æ€§çš„æ„ä¹‰ã€‚åŒæ ·ä¸€ä¸ªæ¯å­ï¼Œæ¯å­é‡Œé¢çš„ä¸–ç•Œï¼Œå®ƒçš„åŠŸèƒ½ï¼Œç»“æ„ï¼Œä½œç”¨ï¼Œä¾ç„¶å¦‚æ•…ï¼Œéšç€å¤–é¢çš„åŒ…è£…ï¼Œå®ƒçš„ä»·å€¼å°±åœ¨æå‡ã€‚é‡‡ç”¨ä¸åŒçš„ä»·å€¼åˆ›æ–°ç­–ç•¥ï¼Œç²¾ç¾çš„ç­–åˆ’ï¼Œå°±ä¼šè®©ä½ çš„äº§å“ä»·å€¼å¤§å¤§æå‡ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"åˆ›ä¸šå‰çš„å‡ ç‚¹","slug":"beforeEntrepreneurship","date":"2017-09-04T03:37:44.000Z","updated":"2020-05-27T00:59:00.000Z","comments":true,"path":"2017/09/04/beforeEntrepreneurship/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/beforeEntrepreneurship/","excerpt":"","text":"åˆ›ä¸šå»ºè®®åœ¨åˆä½œæ–¹é¢ä¸ä¸€å®šè¦æ‰¾å’Œè‡ªå·±ç›¸å·®ä¸å¤šçš„ï¼Œå› ä¸ºè¿™æ ·å½¼æ­¤çš„çœ¼å…‰æˆ–è€…è§†é‡éƒ½æ¯”è¾ƒçŸ­æµ…ï¼Œåˆä¼™æœ¬æ¥å°±æ˜¯ä¸€ç§äº’åŠ©å’Œå­¦ä¹ çš„æœºä¼šï¼æˆ‘è®¤ä¸ºæ‰¾åˆé€‚çš„æ˜¯å¿…é¡»çš„ï¼ŒåŒæ—¶å…ˆè¦äº†è§£å¯¹æ–¹çš„ä¸ºäººï¼Œå› ä¸ºåˆä¼™å¾ˆå®¹æ˜“å‡ºçº çº·çš„ï¼ è‡³äºçœŸæ­£çš„åˆä¼™åˆ›ä¸šï¼Œæˆ‘å»ºè®®ä½ æ…é‡ï¼Œè‡³äºç½‘ç»œå·¥ä½œå®¤çš„æƒ³æ³•æ˜¯å¥½çš„ï¼Œä¸€æ¥ä½ æ²¡æœ‰æŠ€æœ¯ã€æ²¡æœ‰å¤ªå¤šçš„èµ„é‡‘éƒ½ä¸æ˜¯æœ€ä¸»è¦çš„é—®é¢˜ï¼Œå…³é”®æ˜¯ï¼Œèƒ½å¦æ‰¾åˆ°åˆé€‚çš„äººé€‰ï¼æ¯”å¦‚æŠ€æœ¯ä¸åˆ°ä½ä¸‹é¢çš„å·¥ä½œæ˜¯æ— æ³•ç»§ç»­çš„ï¼ŒåŒæ—¶æŠ€æœ¯éœ€è¦ä¸“ä¸šï¼Œä¸ç„¶è°ˆåˆ¤çš„è¿‡ç¨‹ä¸­æ²¡æœ‰è¯´æœåŠ›ï¼ è‡³äºèµ„é‡‘ï¼Œç½‘ç»œå·¥ä½œå®¤çš„èµ·æ­¥èµ„é‡‘ä¸éœ€è¦å¤ªé«˜ï¼Œå†åŠ ä¸Šåˆä¼™åˆ›ä¸šè¦ç»™å¯¹æ–¹å¸Œæœ›ï¼Œå¤§å®¶æœ‰å…±åŒå…´è¶£å’Œç›®æ ‡è¿™æ ·æ‰è¡Œï¼Œä¸ç„¶ä¸€åˆ‡éƒ½æ˜¯ç©ºè°ˆï¼ç”Ÿæ„å¦‚æ­¤ï¼Œåˆä½œä¹Ÿæ˜¯å¦‚æ­¤ï¼ ä¸ªäººè®¤ä¸ºï¼Œä¸€ä¸ªç½‘ç«™çš„å‘å±•å¥½åï¼Œæ›´å¤šçš„å–å†³äºæ¨å¹¿å’Œç®¡ç†è¿è¥ï¼Œå†å¥½çš„å•†ä¸šæ¨¡å¼ï¼Œæ²¡æœ‰å¼ºæœ‰åŠ›çš„æ‰§è¡ŒåŠ›ä¹Ÿåªä¸è¿‡æ˜¯æ³¡å½±è€Œå·²ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿè®¤è¯†ä¸å°‘åšæŠ€æœ¯çš„æœ‹å‹ï¼Œå¼€å‘äº†ä¸å°‘åœ¨æŠ€æœ¯ä¸Šéå¸¸è¿‡ç¡¬çš„äº§å“å‡ºæ¥ï¼Œåšå‡ºä¸å°‘æœ‰æ–°æ¦‚å¿µçš„ç½‘ç«™æˆ–è€…äº§å“å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“ä»–ä»¬åœ¨åšçš„æ—¶å€™æœ‰æ²¡æœ‰è€ƒè™‘è¿‡å¸‚åœºçš„éœ€æ±‚ï¼Œæˆ–è€…æœ‰æ²¡æœ‰æƒ³è¿‡ä¸œè¥¿åšå‡ºæ¥è°ä¼šèŠ±é’±ä¹°ï¼Ÿ ä¸€ä¸ªä¸æ‡‚æŠ€æœ¯çš„äººï¼Œä¸ä¸€å®šå°±ä¸€å®šä¸æ‡‚äº’è”ç½‘ï¼Œè¯•é—®å½“ä»Šçš„äº’è”ç½‘åˆ›ä¸šçš„å¤§äº¨ä»¬ï¼Œæœ‰å‡ ä¸ªæ˜¯æ­£ç»Ÿç§‘ç­å‡ºèº«çš„ï¼Ÿé©¬äº‘ã€æœ±ä¿Šã€å²ç‰æŸ±ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä»–ä»¬æ‡‚å¾—æ›´å¤šçš„æ˜¯ä»€ä¹ˆä¸œè¥¿èµšé’±ï¼Œæ€ä¹ˆå»åšèƒ½èµšé’±ã€‚æ¯”èµ·è¿½æ±‚ç†æƒ³å’Œå¢ƒç•Œçš„æŠ€æœ¯å¤§å¸ˆä»¬ï¼Œæ˜¾å¾—æ›´ç°å®äº†ä¸€äº›ï¼Œæ›´é“œè‡­å‘³äº†ä¸€äº›ã€‚ åˆ›ä¸šå‡†å¤‡æ˜“çŠ¯çš„é”™è¯¯ å‡†å¤‡ä¸è¶³ã€‚ï¼ˆè®¤çœŸæ€è€ƒå’Œå¯¹å¾…è‡ªå·±çš„åˆ›ä¸šï¼Œæ˜¯ä¸æ˜¯èƒ½èšåˆåšè¿™ä»¶äº‹éœ€è¦çš„è¦ç´ ï¼ŒåŒ…æ‹¬ç»éªŒç§¯ç´¯ï¼Œå›¢é˜Ÿï¼Œå¯åŠ¨èµ„é‡‘ï¼Œèµ„è´¨ç‰Œç…§ï¼Œå•†åŠ¡æ¸ é“ç­‰ï¼Œæœ€åŸºæœ¬çš„æ˜¯ç»éªŒå’Œå›¢é˜Ÿï¼Œå¦å¤–æœ€èµ·ç è¦æœ‰å›¢é˜Ÿé¢†å¯¼åŠ›ç­‰ï¼‰ è¿‡äºé‡è§†ç‚¹å­ï¼Œå¿½è§†æ‰§è¡Œã€‚ï¼ˆåˆ›ä¸šçš„æ ¸å¿ƒåœ¨æ‰§è¡Œã€‚è¿‡äºè¿½æ±‚ç‚¹å­ï¼Œä¸€å‘³æ±‚æ–°æ±‚å˜ï¼Œè¿½æ±‚ä¸åŒï¼Œåè€Œå¯¼è‡´ä¸€å †æ²¡æœ‰å¯æ‰§è¡Œæ€§çš„è®¡åˆ’ã€‚ï¼‰ é€‰æ‹©è¿‡äºå¤æ‚ï¼Œè¶…å‡ºåˆ›ä¸šå…¬å¸èƒ½åŠ›çš„é¡¹ç›®ã€‚ é•¿æ—¶é—´å…¼èŒåˆ›ä¸šã€‚ï¼ˆåˆ›ä¸šå‡†å¤‡ï¼Œå’Œç ”ç©¶æ—¶é—´ä¸è¾èŒæ˜¯å¯ä»¥çš„ï¼Œä½†é•¿æ—¶é—´å…¼èŒåˆ›ä¸šæ˜¯ä¸å¯å–çš„ã€‚å…¼èŒå¾€å¾€å¯¼è‡´æ‰§è¡ŒåŠ›ä½ä¸‹ï¼Œæ€è€ƒä¸æ·±å…¥ï¼Œå›¢é˜Ÿæ— æ³•æ­£çœŸç»„å»ºï¼Œä¸èƒ½å¸å¼•å¥½çš„äººåŠ å…¥ã€‚æ— æ³•èèµ„ï¼Œæœ€é‡è¦çš„æ˜¯è½»æ˜“æ”¾å¼ƒäº†å¸‚åœºæœºä¼šã€‚ï¼‰ å¤šçº¿å¼€å‘ï¼ŒåŒæ—¶æƒ³åšå¤ªå¤šçš„äº‹æƒ…ã€‚å¸Œæœ›äº§å“åŠŸèƒ½ä¸°å¯Œï¼Œå †ç ŒåŠŸèƒ½ï¼Œæ²¡æœ‰æŠ“ä½æ ¸å¿ƒéœ€æ±‚å’Œæ ¸å¿ƒä»·å€¼ã€‚ä¸æ³¨æ„æ”¿ç­–å’Œé™åˆ¶ï¼Œé€‰æ‹©å¤ªç‹­çª„çš„æ–¹å‘ï¼Œä¸å»è€ƒè™‘æ¨å¹¿çš„æ¸ é“ï¼Œç›ˆåˆ©æ¨¡å¼ç­‰ã€‚ ä»€ä¹ˆæ˜¯åˆ›ä¸šè€… åœ¨åšæ¯ä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªäº‹æƒ…çš„æ¯ä¸€ä¸ªé˜¶æ®µçš„æ­¥éª¤ï¼Œç„¶åæ¯ä¸ªé˜¶æ®µé‡Œé¢çš„é‡è¦æ€§ï¼Œéƒ½æƒ³å¾—éå¸¸æ¸…æ¥šã€‚ èƒ½å¤Ÿç¬¼ç»œéå¸¸å¥½çš„ä¼˜ç§€å›¢é˜Ÿã€‚è¦æœ‰ä¼˜ç§€çš„èƒ½äººã€‚å¯¹äº§å“çš„ç»†èŠ‚å’Œæ“ä½œæµç¨‹è¦å¾ˆæ•æ„Ÿã€‚åŠæ—¶å‘ç°è‡ªå·±çš„åŠ£åŠ¿ï¼Œæ‰¾åˆ°ä¼˜åŠ¿äº’è¡¥çš„åˆä¼™äººã€‚ æ•é”çš„æ´å¯ŸåŠ›ï¼Œå–„äºæŠŠæ¡ä¸€äº›åˆ›ä¸šæœºä¼šã€‚ åˆ›ä¸šçš„æ¿€æƒ…ã€‚åˆ›ä¸šè€…æœ€é‡è¦çš„æ˜¯é—®è‡ªå·±ï¼Œè§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œç¬¬äºŒï¼Œä¸ºä»€ä¹ˆåªæœ‰ä½ èƒ½è§£å†³ï¼Œç¬¬äºŒå°±æ˜¯ä½ çš„æ‰§è¡ŒåŠ›ï¼Œæˆ–è€…ä½ çš„åˆ¤æ–­åŠ›ã€‚ åˆ›ä¸šè€…æ˜¯å¦åŒæ—¶å…·æœ‰æ ¼å±€çš„é«˜åº¦ï¼Œåˆèƒ½å¤Ÿæœ‰æ‰§è¡ŒåŠ›ï¼Œæ—¢æœ‰ç‹¬ç‰¹çš„è§‚ç‚¹ï¼Œåˆèƒ½å¤Ÿæœ‰ç©ºæ¯çš„å¿ƒæ€å»å¬å–åˆ«äººçš„æ„è§ï¼Œå­¦ä¹ åˆ«äººçš„é•¿å¤„ã€‚æ—¢æœ‰ä¹è§‚çš„ç²¾ç¥ï¼Œåˆèƒ½å¤Ÿæœ‰è¿™ç§å±æœºçš„æ„è¯†(å¯èƒ½æ¥è‡ªå·¨å¤´çš„æ‰“å‹å’ŒåŒè¡Œçš„ç«äº‰ï¼Œæ‰€ä»¥è¦æœ‰å±æœºæ½œæ„è¯†)ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"å¦‚ä½•æ‰“é€ ç†æƒ³ä¸­çš„å›¢é˜Ÿ","slug":"goodTeam","date":"2017-09-04T03:26:20.000Z","updated":"2020-05-27T00:50:44.000Z","comments":true,"path":"2017/09/04/goodTeam/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/goodTeam/","excerpt":"","text":"ä¸€.è¯šå®æ­£ç›´ å¯¹è‡ªå·±è¯šå®ï¼Œæ–¹èƒ½çœ‹æ¸…æ¥šçœŸå®çš„æƒ…å†µï¼Œè¿›è€Œèƒ½å‘ç°é—®é¢˜çš„æ‰€åœ¨ï¼Œå¹¶æ‰¾åˆ°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ äºŒ.å‹å–„ å‹å–„æ˜¯ä¸€ç§æ€åº¦ï¼Œè¿™æ„å‘³ç€åœ¨ä½ ä¸äººç›¸å¤„æ—¶é™¤äº†è¿‡äºæ®·åˆ‡å’Œæ•Œè§†ä¹‹é—´ï¼Œæœ‰ç€å¹¿é˜”çš„ç©ºé—´ã€‚ ä¸‰.ç‹¬ç«‹è´£ä»»æ„Ÿ ä½ åº”è¯¥ä¸ºä½ çš„æ‰€æœ‰é€‰æ‹©è´Ÿè´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„å·¥ä½œæ•ˆç‡è´Ÿè´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„æ—¶é—´è§„åˆ’è´Ÿä¸»è¦è´£ä»»ã€‚ä½ åº”è¯¥ä¸ºä½ çš„è–ªé…¬å’Œæ‰€å¾—è´Ÿä¸»è¦è´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„èŒä¸šæˆé•¿è´Ÿä¸»è¦è´£ä»»ã€‚ å››.æ²Ÿé€šèƒ½åŠ› åœ¨é«˜åº¦ç«äº‰çš„å¸‚åœºä¸‹ï¼Œå•å…µä½œæˆ˜èƒ½å–èƒœçš„ä¾‹å­è¶Šæ¥è¶Šå°‘äº†ï¼Œç›¸ä¿¡æ‹¥æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›çš„å¤©æ‰æ‰€å¾—çš„æˆå°±è¿œé«˜äºé‚£äº›å­¤ç‹¬çš„å¤©æ‰ã€‚ äº”.çµæ´»åº¦ è®°å¾—éšæ—¶é€€åä¸‰æ­¥å®¡è§†è‡ªå·±ï¼ŒåŒ…æ‹¬å›¢é˜Ÿåœ¨åšçš„äº‹ï¼Œå¹¶åšå¥½éšæ—¶æ¨ç¿»æ˜¨å¤©è‡ªå·±çš„å‡†å¤‡ã€‚ èƒ½å¦åœ¨å¿…è¦æ—¶å€™é«˜æ•ˆåœ°å¦å®šè‡ªå·±ï¼ŒåŠæ—¶æ‰¿è®¤è‡ªå·±è€ƒè™‘çš„é”™è¯¯å’Œç–æ¼ï¼Œå¹¶å¿«é€Ÿåœ°åˆ‡æ¢åˆ°â€œå¦‚ä½•ä¿®æ­£é”™è¯¯å’Œè°ƒæ•´ç­–ç•¥â€ä¸Šã€‚ å…­.æœ‰æ•ˆä¸”å° å°å›¢é˜Ÿéœ€è¦å¤šé¢æ‰‹ï¼Œå•å…µç´ è´¨è¿œé«˜äºå¤šé¢æ‰‹ï¼Œä¸ä»…ä»…æ„å‘³ç€æ•ˆç‡ï¼Œè¿˜æ„å‘³ç€è·¨é¢†åŸŸè·¨æŠ€æœ¯çš„æ€ç»´äº¤å‰ã€‚ å°å›¢é˜Ÿç”¨è¾ƒå°‘æˆæœ¬å®ç°å¤§å›¢é˜Ÿçš„ç”¨æˆ·è§„æ¨¡ï¼Œèµ„é‡‘ä½¿ç”¨æ•ˆç‡é«˜ã€‚ åŒæ ·èµ„æºæƒ…å†µä¸‹ï¼Œå°å›¢çš„çš„ç”Ÿå­˜æœŸæ›´é•¿ã€‚ å°å›¢çš„å†…éƒ¨æ²Ÿé€šæˆæœ¬è¿œä½äºå¤§å›¢é˜Ÿã€‚æ„å‘³ç€ä¼šè®®ã€äººäº‹ã€è¡Œæ”¿ç­‰è¾¹ç¼˜æ´»åŠ¨è€—æ—¶æ›´ä½ã€‚ ä¸ƒ.é”‹åˆ©çš„ä¸€è‡´æ€§ å½“å›¢é˜Ÿä»·å€¼è§‚å»ºç«‹èµ·æ¥äº†åï¼Œå›¢é˜Ÿæœ¬èº«å…·æœ‰äº†æ„è¯†ï¼Œå…¶æ€è€ƒå¾ˆè¡Œä¸ºéƒ½ä¼šæœ‰ä¸€å®šçš„è‡ªä¸»æ€§ã€‚è¿™æ ·æ›´å®¹æ˜“æé«˜æ•ˆç‡ã€‚ å®¡ç¾è¶£å‘³ä¸€è‡´æ€§è¶Šæ—©å»ºç«‹èµ·æ¥ï¼Œäº§å“å’Œç”¨æˆ·ä½“éªŒçš„è®¾è®¡å¸ˆå’Œå¼€å‘è¿‡ç¨‹è¶Šé«˜æ ¡ã€‚ å…«.å›¢é˜Ÿä¸­çš„é‚£äº›äº‹å„¿ æ­£ç¡®çœ‹å¾…Ta çš„çŸ¥è¯†ç©ºç¼ºã€‚ ä¿è¯è‰¯å¥½çš„åˆä½œå…³ç³»ï¼Œå¿ƒå¹³æ°”å’Œåœ°æ²Ÿé€šï¼Œæ”¾ä½èº«æ®µï¼Œè€å¿ƒå€¾å¬å’Œæ€è€ƒï¼Œä¸è¾ƒçœŸï¼Œèæ´½åä½œæ‰æ˜¯ç‹è€…é£èŒƒã€‚ å¼•å¯¼ä»–ä»¬ä¹‹é—´æ²Ÿé€šã€‚ å¦è¯šã€‚ ä¸äººäº¤æµï¼Œå°¤å…¶æ˜¯è¯·æ•™é—®é¢˜çš„æ—¶å€™ï¼Œå¦è¯šä¸€ç‚¹ï¼Œé”™äº†å°±é”™äº†ï¼Œæ²¡æœ‰æƒ³åˆ°å°±æ˜¯æ²¡æœ‰æƒ³åˆ°ï¼Œæ²¡æœ‰å¿…è¦æ˜‚ç€å¤´é—®é—®é¢˜ã€‚è°¦è™šä¸ä¼šé™ä½äººçš„åœ°ä½ï¼Œé™ä½èº«ä»·çš„ï¼Œå¾€å¾€æ˜¯å¾’æœ‰çš„é«˜è°ƒã€‚ ä¹äºåˆ†äº«æœå®ã€‚æ¯å‘¨åšä¸€æ¬¡æŠ€æœ¯äº¤æµï¼Œå­¦ä¹ å‡ ä¸ªäººçš„çŸ¥è¯†ã€‚ å……åˆ†ä¿¡ä»»è‡ªå·±çš„ä¼™ä¼´ï¼Œ æ”¾æƒè®©Taå»åšã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"äº’è”ç½‘æ€ç»´åˆ°åº•è¯´å•¥ï¼Ÿ","slug":"InternetThinking","date":"2017-09-04T03:19:20.000Z","updated":"2020-05-27T00:56:37.000Z","comments":true,"path":"2017/09/04/InternetThinking/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/InternetThinking/","excerpt":"","text":"äº’è”ç½‘æ€ç»´æŒ‡çš„æ˜¯ä»€ä¹ˆæ€ç»´ï¼Ÿå¿«é€Ÿè¿­ä»£ï¼Œç”¨æˆ·å‚ä¸ã€‚é€šè¿‡ä¸æ–­åœ°è¿­ä»£ä½¿äº§å“æ—¥è‡»å®Œå–„ï¼Œè€Œä¸æ˜¯è¿½æ±‚ä¸€æ¬¡æ€§åšå‡ºå®Œç¾çš„äº§å“ã€‚å¹¶ä¸”ï¼Œç”¨æˆ·çš„åé¦ˆä¼šä½œä¸ºè®¾è®¡å†³ç­–çš„éƒ¨åˆ†ä¾æ®ã€‚åŸºäºæµ·é‡æ•°æ®åˆ†æè¿›è¡Œå†³ç­–ã€‚äº’è”ç½‘äº§å“çš„ä¸€å¤§ä¾¿åˆ©æ˜¯å¯ä»¥å®æ—¶è·å–å¤§é‡ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®ï¼ŒåŸºäºè¿™äº›æ•°æ®å¯è¿›è¡Œäº§å“å†³ç­–ã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨ABæµ‹è¯•ç­‰æ–¹æ³•ä¸»åŠ¨æ¯”è¾ƒä¸åŒçš„è®¾è®¡æ–¹æ¡ˆã€‚ç—…æ¯’å¼è¥é”€ï¼Œæ˜Ÿç«ç‡åŸã€‚ åˆ©ç”¨äº’è”ç½‘çš„ä¼ æ’­ç‰¹ç‚¹ï¼Œä¿ƒæˆäº§å“åœ¨ç¤¾äº¤ç½‘ç»œï¼Œç¤¾ä¼šåŒ–åª’ä½“çš„æ¸—é€ï¼Œå¹¶é€šè¿‡åˆ¶é€ è½°åŠ¨æ€§äº‹ä»¶ï¼Œäº‰è®®æ€§è¯é¢˜ï¼Œå®ç°å¤§èŒƒå›´ç—…æ¯’ä¼ æ’­ï¼Œè¿™æ˜¯ä¸€ç§æ— æœ¬ä¸‡åˆ©çš„è¥é”€æ‰‹æ®µã€‚å°è€Œç¾ï¼Œå°‘å³å¤šã€‚äº’è”ç½‘äº§å“é€šå¸¸ä¸è¿½æ±‚å¤§è€Œå…¨ï¼Œè€Œæ˜¯æŠ“ä½ç”¨æˆ·çš„æŸä¸ªç—›ç‚¹æˆ–ä»·å€¼ç‚¹ï¼Œé’ˆå¯¹æ€§åœ°åšå‡ºå®šä½æ˜ç¡®çš„äº§å“ã€‚åœ¨åŠŸèƒ½ä¸Šå°½é‡ç®€å•æ˜ç¡®ï¼Œå³ä¾¿è¦åšå¤§åšå¤æ‚ä¹Ÿæ˜¯æ…¢æ…¢åŠ ä¸Šå»çš„ã€‚ä½“éªŒä¸Šå°½é‡åšåˆ°ç®€å•æ˜“ä¸Šæ‰‹ã€‚ å…è´¹ç­–ç•¥ï¼Œå¹³å°æˆ˜äº‰ã€‚ äº’è”ç½‘äº§å“å¤§å¤šä¸å‘ç”¨æˆ·ç›´æ¥æ”¶è´¹ï¼Œè€Œæ˜¯ç”¨å…è´¹ç­–ç•¥æåŠ›äº‰å–ç”¨æˆ·ï¼Œé”å®šç”¨æˆ·ã€‚å¹¶ä¸”ï¼ŒåŒæ—¶è‡´åŠ›äºä½¿Imï¼Œæœç´¢å¼•æ“ï¼Œæµè§ˆå™¨ï¼Œæ€æ¯’è½¯ä»¶ç­‰ä»ä¸“ç”¨äº§å“å˜æˆå¹³å°äº§å“ï¼Œå‡­å€Ÿåºå¤§çš„ç”¨æˆ·åŸºæ•°ï¼Œæ¨å¹¿å’Œé”€å”®å…¶ä»–æœåŠ¡ã€‚ ç²‰ä¸ç»æµï¼Œè‰æ ¹å“ç‰Œã€‚åŸ¹è‚²å’Œå‹¾å¼•æ­»å¿ ç”¨æˆ·ï¼Œå£®å¤§ç²‰ä¸è§„æ¨¡ï¼Œè¥é€ ç²‰ä¸æ–‡åŒ–ä¹ƒè‡³æ„å»ºè¯è¯­ä½“ç³»ã€‚åŒæ—¶å¿…é¡»åœ¨å“ç‰Œä¸­æ³¨å…¥è‰æ ¹åŸºå› ï¼Œæ”¾ä½èº«æ®µï¼Œè®¨å¥½ç”šè‡³éƒ½å¼„ç²‰ä¸ï¼Œä¿æŒé«˜é¢‘ï¼Œå…¨æ–¹ä½çš„äº’åŠ¨ï¼Œæ¯”è¾ƒæˆåŠŸçš„äº’è”ç½‘äº§å“ï¼šå°ç±³ï¼Œé€»è¾‘æ€ç»´ï¼Œæ¢æ¬¢ã€‚ æ¿€å‘ç”¨æˆ·åˆ›é€ ï¼Œè‡ªç»„ç»‡æ„ç­‘ç½‘ç»œç”Ÿæ€ã€‚ ä½¿ç”¨æˆ·ä¹Ÿæˆä¸ºäº§å“çš„ä¸€éƒ¨åˆ†ï¼Œæ¿€åŠ±ç”¨æˆ·è¿›è¡Œåˆ›é€ ï¼Œç”Ÿæˆé«˜ä»·å€¼å†…å®¹ï¼Œç”¨æˆ·åœ¨åˆ›é€ çš„åŒæ—¶è¿˜èƒ½è‡ªç»„ç»‡ï¼Œè‡ªå‘å½¢æˆå¤šå±‚æ¬¡ï¼Œå¤šæ ·æ€§çš„ç½‘ç»œå•å…ƒï¼Œä½¿äº’è”ç½‘äº§å“æ‰©å±•ä¸ºä¸€ä¸ªå¤æ‚çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæœ€å…¸å‹å¦‚è±†ç“£ï¼Œè‡ªè¡Œç¹è£å£®å¤§ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"æé«˜æ‰§è¡ŒåŠ›","slug":"execution","date":"2017-09-04T03:13:02.000Z","updated":"2020-05-27T00:49:26.000Z","comments":true,"path":"2017/09/04/execution/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/execution/","excerpt":"","text":"æ¦‚å¿µ:ä»€ä¹ˆæ˜¯æ‰§è¡ŒåŠ›? ç¬¬ä¸€ï¼Œ é™æ€ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éµå®ˆåˆ¶åº¦ã€‚ ç¬¬äºŒï¼ŒæŒ‡ä»¤å¦‚å±±ã€‚å°±æ˜¯æŠŠæ‰€æœ‰çš„æŒ‡ä»¤æ”¾åœ¨æ–¹å‘ä¸Šï¼Œå°±æ˜¯ä¸Šå¸äº¤ä»£çš„äº‹æƒ…ï¼Œå¸ƒç½®çš„ä»»åŠ¡å¦‚ä½•å°½å¿«æœ‰æ•ˆã€é«˜æ•ˆåœ°æŠŠå®ƒå®Œæˆã€‚ ç¬¬ä¸‰ï¼Œåšäº‹è¦æœ‰ç»“æœã€‚æ‰€è°“çš„åšäº‹å°±æ˜¯ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œç»“æœå°±æ˜¯å·¥ä½œä»·å€¼ã€‚ æ€è€ƒ:æ€æ ·æé«˜æ‰§è¡ŒåŠ›? ç§¯æé€‰æ‹”åˆé€‚çš„äººåˆ°æ°å½“çš„å²—ä½ä¸Šï¼Œè¿˜è¦é”»ç‚¼å‘˜å·¥é˜Ÿä¼çš„æ‰§è¡Œèƒ½åŠ›. ä»æœä»å¼€å§‹æŠ“ï¼Œå› ä¸ºä¸æœä»æ€ä¹ˆè°ˆæ‰§è¡Œï¼Ÿæœä»ä¹Ÿåº”å½“æ˜¯å‘˜å·¥çš„ç¬¬ä¸€ç¾å¾·ï¼Œä»»ä½•å‘å±•æˆ˜ç•¥ã€è¥é”€æ¨¡å¼éƒ½è¦å»ºç«‹åœ¨å‘˜å·¥æœä»çš„åŸºç¡€ä¹‹ä¸Šï¼Œæ¯ä¸€ä½å‘˜å·¥éƒ½å¿…é¡»æœä»ä¸Šçº§é¢†å¯¼çš„æŒ‡æŒ¥å®‰æ’ï¼Œæœä»æ˜¯æ‰§è¡Œçš„ç¬¬ä¸€æ­¥ã€‚ èƒ½å¤Ÿæé«˜æ‰§è¡ŒåŠ›çš„ç®¡ç†åŠ¨ä½œå¿…é¡»å…·å¤‡ä¸‰ä¸ªè¦ç´ ï¼šæ ‡å‡†ã€åˆ¶çº¦ã€è´£ä»»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹æƒ…æ€ä¹ˆåšå¿…é¡»è¦åˆ¶è®¢æ ‡å‡†ï¼Œè¦å…³æ³¨ç»†èŠ‚ï¼Œè¦æœ‰äººæ£€æŸ¥ï¼Œå½¢æˆç›‘ç£å’Œåˆ¶çº¦ï¼›æœ€åï¼Œäº‹æƒ…åšçš„å¥½ä¸åä¸€å®šè¦è¿½ç©¶è´£ä»»ï¼Œå¥½çš„å¥–ï¼Œåçš„ç½šã€‚ æŠŠå·¥ä½œé¡¹å’Œä»»åŠ¡è¿›è¡Œæ’åºã€‚é‡è¦ï¼Œç´§è¦ç­‰ã€‚ç§¯æçš„æ€åº¦å»å‚ä¸ã€‚ åšæŒã€‚æ³¨é‡ç»“æœã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"ä½•ä¸ºè¿è¥ï¼Ÿ","slug":"operation","date":"2017-09-04T02:52:23.000Z","updated":"2020-05-27T00:55:24.000Z","comments":true,"path":"2017/09/04/operation/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/operation/","excerpt":"","text":"äº§å“è¿è¥å¾€å¾€æ˜¯ç´§ç´§å›´ç»•ä¸‰ä¸ªç›®æ ‡ï¼š äº§å“ï¼Œç”¨æˆ·ï¼Œæ¸ é“ã€‚ æˆåŠŸçš„è¿è¥èƒ½å¤ŸæŒ–æ˜ç”¨æˆ·çš„ç‰¹ç‚¹å’Œéœ€æ±‚ã€‚ äº§å“è¿è¥å…·ä½“å·¥ä½œæœ‰å“ªäº›ï¼Ÿ è¿è¥ç­–åˆ’ï¼š ä¸»è¦æ˜¯ä»¥æ•°æ®ä¸ºä¾æ®çš„äº§å“è¿è¥æ–¹æ¡ˆç­–åˆ’ï¼Œè¿™å—æ˜¯é‡ç‚¹ã€‚ BD : è¿è¥ä¼šæ¥è§¦åˆ°ä¸åŒçš„æ¸ é“çš„è½¬åŒ–æ•ˆç‡ï¼Œå› æ­¤ç›¸å¯¹çš„éœ€è¦å’Œæ¸ é“å•†æ‰“äº¤é“æˆ–è€…å…¬å¸å†…éƒ¨çš„é”€å”®äººå‘˜æ¥è§¦ï¼Œè¿™å—å®é™…ä¹Ÿä¼šæ¶‰åŠåˆ°ä¸€å®šçš„æ²Ÿé€šåè°ƒå…¬å…³çš„å·¥ä½œã€‚ åª’ä»‹ï¼š è¿™é‡ŒåˆåŒ…æ‹¬æ–‡æ¡ˆçš„æ’°å†™ï¼Œè¯é¢˜ç­–åˆ’ï¼Œè½¯æ–‡å‘å¸ƒç­‰ã€‚ æ´»åŠ¨è¥é”€ï¼š ç»“åˆäº§å“æ¨å¹¿å’Œå“ç‰Œå®£ä¼ ï¼Œç­–åˆ’æ´»åŠ¨è¥é”€æ–¹æ¡ˆå¹¶æœ‰åŠ›æ‰§è¡Œï¼Œä¿ƒä½¿è¾¾åˆ°æé«˜äº§å“å’Œå“ç‰ŒçŸ¥ååº¦çš„ç›®çš„ï¼Œä»¥åŠç”¨æˆ·çš„è°ƒç ”å¥–åŠ±ç­‰ã€‚ æ•°æ®åˆ†æï¼š æ•°æ®å†³å®šè¿è¥çš„æ‰§è¡Œã€‚ å¸‚åœºç›‘æ§ï¼š ä¸»è¦æ˜¯æˆ˜ç•¥å±‚é¢ï¼ŒåŒ…æ‹¬è¡Œä¸šå¸‚åœºçš„ç›‘æ§ä»¥åŠç«äº‰å¯¹æ‰‹çš„ç›‘æ§ã€‚ äº§å“è¿è¥æœ‰æä¸ºæ˜ç¡®çš„ç›®æ ‡ã€‚ è¥æ”¶ï¼šè¿è¥è¦æ‰¾åˆ°å•†ä¸šæ¨¡å¼ï¼Œæˆ–è€…ä¸ºç°æœ‰çš„äº§å“æ‰©å¤§è¥æ”¶ã€‚ æ‰©å¤§ç”¨æˆ·ç¾¤ï¼šè®©æ›´å¤šäººçŸ¥é“ï¼Œäº§å“å°†æ›´æˆåŠŸã€‚ ç”¨æˆ·æ´»è·ƒåº¦ï¼šæ²‰é»˜çš„ç”¨æˆ·æ˜¯æ²¡æœ‰å¤šå°‘å•†ä¸šä»·å€¼çš„ï¼Œåªæœ‰æ´»è·ƒæ–¹èƒ½å¸¦æ¥ä»·å€¼ã€‚ å¥½çš„äº§å“æ˜¯è¿è¥å‡ºæ¥çš„ã€‚ç¬¬ä¸€ï¼Œå®ƒèƒ½åœ¨ä¸€ä¸ªç‚¹ä¸Šæ‰“åŠ¨ç”¨æˆ·ã€‚ç¬¬äºŒï¼Œ å®ƒä¸€å®šæ˜¯é æŒç»­æ”¹è¿›ï¼ŒæŒç»­è¿è¥çš„ä¸œè¥¿ã€‚äº’è”ç½‘æœ¬è´¨å°±æ˜¯æœåŠ¡ï¼Œç”¨æˆ·çš„éœ€æ±‚ä¸æ–­åœ¨å˜ï¼Œä½ å°±å¾—éšæ—¶è°ƒæ•´ã€‚ ç›®æ ‡å†³å®šæ•°æ®å–æ ·ï¼Œæ‰¾åˆ°å…³é”®å€¼å¹¶åŠªåŠ›æ‰§è¡Œã€‚ çœ‹æ•°æ®ï¼Œåˆ†ææ•°æ®ï¼Œæ‰¾åˆ°éœ€è¦åŠæ—¶è°ƒæ•´çš„æ•°æ®ã€‚è¿›è¡Œåç»­æ‰§è¡Œå·¥ä½œã€‚ é¦–å…ˆæ˜¯è¦æœ‰æ•°æ®ï¼Œå…¶æ¬¡æ˜¯å‡†ç¡®æ€§ï¼Œç„¶åæ•°æ®è¦æœ‰è¿è´¯æ€§ã€‚å†è€…ï¼Œä¸€åˆ‡æ•°æ®è¦æœ‰å¯¹æ¯”æ‰èƒ½äº§ç”Ÿä»·å€¼ã€‚æœ€åå¾—åˆ°ç»“è®ºã€‚ åŒæ—¶ï¼Œå…³é”®æ•°å€¼æ˜¯é‡è¦ä¸€ç¯ï¼Œå¯ä»¥çœåŠ›é«˜æ•ˆï¼›ä½†çœŸæ­£æ¯å¤©å›´ç»•è¿™ä¸ªæ•°å€¼ä¸æ–­åœ°åŠªåŠ›æ‰§è¡Œä¸‹å»æ‰ä¼šæœ‰çœŸæ­£çš„æé«˜ã€‚ äº§å“è¿è¥ä¸è¦å¯„äºˆå¸Œæœ›æœ€åä¸€å‡»å‘½ä¸­ç”¨æˆ·éœ€æ±‚ï¼Œè€Œé‡ç‚¹åº”è¯¥ç¨³å®šæœ‰æ•ˆåœ°ä¸€æ­¥æ­¥æ¥è§¦ï¼Œå¼•å¯¼ï¼Œå°è¯•ï¼Œè®¤çŸ¥ï¼Œæ¸—é€ï¼Œç†Ÿæ‚‰ çš„è¿‡ç¨‹ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"ä½ æ˜¯ä¸ªåˆæ ¼çš„äº§å“ç»ç†ï¼Ÿ","slug":"productManager","date":"2017-09-04T02:05:34.000Z","updated":"2020-05-27T00:51:50.000Z","comments":true,"path":"2017/09/04/productManager/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/productManager/","excerpt":"","text":"é¦–å…ˆï¼Œäº§å“ç»ç†åº”è¯¥åšä»€ä¹ˆï¼Ÿ å¸®åŠ©ä¼ä¸š/ç”¨æˆ·ä¸ºç”¨æˆ·æ‰“é€ æœ‰ä»·å€¼çš„äº§å“ã€‚ äº§å“ç»ç†æ€ç»´åŒ…æ‹¬å“ªäº›ï¼Ÿ æŠ“ä½éœ€æ±‚çš„æœ¬è´¨ - äººæ€§ ï¼ˆä¸€ä¸ªä¼˜ç§€çš„äº§å“ç»ç†éœ€è¦å…·å¤‡æŠ“ä½ç”¨æˆ·æ¬²æœ›çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯ä»…ä»…åœ¨äº§å“ä¸Šå¢åŠ ä¸€ä¸ªåŠŸèƒ½è¿™ä¹ˆç®€å•ï¼‰ æ ¸å¿ƒéœ€æ±‚çš„æŠŠæ§èƒ½åŠ›ã€‚(æ— è®ºåŠŸèƒ½å¦‚ä½•å¢åŠ å’Œå¤–ç•Œç»™äºˆä»»ä½•å¹²æ‰°ï¼Œéƒ½éœ€è¦æ—¶åˆ»ä¿è¯äº§å“çš„æ ¸å¿ƒä¸è¢«å½±å“) æ—¶åˆ»æç”»äº§å“çš„è“å›¾ - æœªæ¥ ï¼ˆèµ°ä¸€æ­¥ï¼Œçœ‹ç™¾æ­¥ã€‚éœ€è¦æ—¶åˆ»å¿ƒä¸­æ˜ç™½äº§å“çš„å°†æ¥ä¼šæ˜¯å¦‚ä½•ï¼Œæœ€é‡è¦çš„æ˜¯åœ¨èµ°å‘æœªæ¥çš„è¿‡ç¨‹ä¸­åˆéœ€è¦å“ªäº›åŠ©åŠ›ï¼‰ ä¸æ–­å¤ç›˜äº§å“çš„ç°åœ¨ - æ€»ç»“ ï¼ˆè¿™ä¸ªå†³å®šåšçš„å¯¹å—ï¼Ÿæœ‰ä»€ä¹ˆæ•°æ®æ”¯æ’‘ï¼Ÿ äº§å“äººéœ€ä¸€æ—¥ä¸‰çœï¼Œä¸æ–­æ€»ç»“ï¼Œä¸æ–­ä¿®æ­£ï¼Œç»™è‡ªå·±æ—¥åå†³ç­–æ›´åŠ å……è¶³çš„ä¾æ®ï¼‰ æ— æ‡ˆå¯å‡»çš„æ€ç»´ - é€»è¾‘æ€ç»´ ï¼ˆæ…å¯†çš„æ€ç»´èƒ½åŠ›ï¼Œå¯¹æ•´ä¸ªä¸šåŠ¡æµç¨‹è¦éå¸¸ç†Ÿæ‚‰ã€‚ï¼‰ äº§å“çš„ç»ˆæä»·å€¼ - å•†ä¸šç›ˆåˆ© ï¼ˆä¸æ–­è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‡‚å¾—å¦‚ä½•å¸®åŠ©äº§å“èµ°åˆ°å•†ä¸šå®ç°ï¼‰ åšå‡æ³•å¦‚åŒåšåŠ æ³• - æç®€ ï¼ˆåšäº§å“ä¸æ˜¯åšåŠŸèƒ½ï¼Œäº§å“ä¸æ˜¯åŠŸèƒ½çš„ä¸æ–­ç´¯åŠ ï¼Œæˆ‘ä»¬éœ€è¦ç»™äº§å“ç˜¦èº«çš„æœºä¼šï¼Œç»™ç”¨æˆ·æç®€çš„ä½“éªŒï¼Œè®¾é—®ï¼šæ¯ä¸ªç‰ˆæœ¬è¦ä¸Šçš„åŠŸèƒ½ï¼Œä½ èƒ½åˆ æ‰ä¸€ä¸ªå—ï¼Ÿï¼‰ æ‡‚å¾—å’Œä¸åŒçš„äººæ‰“äº¤é“ - æ²Ÿé€šï¼ˆåº”è¯¥å¥½å¥½æ€è€ƒå¦‚ä½•ä¸ä¸åŒå²—ä½çš„åŒå­¦æ‰“äº¤é“ï¼ŒçŸ¥é“å¤§å®¶çš„æ€§æ ¼ç‰¹ç‚¹ï¼Œæ‡‚å¾—å¦‚ä½•æŠŠä¿¡æ¯æœ‰æ•ˆåœ°ä¼ é€’ã€‚ï¼‰ ç®¡ç†å¥½è‡ªå·±çš„æ—¶é—´å’Œä»»åŠ¡ - todolist (å¯¹æ—¶é—´ç®¡ç†è¦æ›´åŠ ç»†åˆ†åŒ–ï¼Œå¤šç”¨TodoList ï¼Œä¼šæœ‰ä¸å°‘çš„å¸®åŠ©ã€‚) å®°ç›¸è‚šé‡Œèƒ½æ’‘èˆ¹ - æŠ—å‹ ï¼ˆäº§å“ç»ç†çš„ç‰¹æ®Šä½ç½®ï¼Œå¯¼è‡´äº†äººäººå¯å–·çš„å¢ƒé‡ã€‚åœ¨å¦‚æ­¤é€†å¢ƒä¸­ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¹¿é˜”çš„èƒ¸æ€€å’Œæå¼ºçš„æŠ—å‹èƒ½åŠ›ï¼Œå…¶å®è¿™äº›éƒ½ä¸æ˜¯ä»€ä¹ˆï¼Œå› ä¸ºæˆ‘ä»¬çœ¼é‡Œåªæœ‰äº§å“ã€‚ï¼‰","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"è¥é”€å…­å¿ƒç†","slug":"marketingPsychology","date":"2017-09-04T01:43:52.000Z","updated":"2020-05-27T00:48:23.000Z","comments":true,"path":"2017/09/04/marketingPsychology/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/04/marketingPsychology/","excerpt":"","text":"æ³•åˆ™ä¸€ï¼š ä»ä¼—å¿ƒç† 1ï¼Œæ¯”å¦‚æ·˜å®ã€‚ç”¨æˆ·è´­ç‰©æ—¶å€™å¾€å¾€ä¼šå‚è€ƒåˆ«äººçš„è´­ç‰©ä½“éªŒï¼Œå½“æŸä»¶ä¸œè¥¿å¾ˆç•…é”€ï¼Œäººä»¬ä¼šæœ¬èƒ½åœ°æŠŠå®ƒå½“ä½œä¸€ä¸ªæ­£ç¡®æœ‰æ•ˆçš„é€‰æ‹©ã€‚ å€ŸåŠ©é”€å”®æ’è¡Œæ¦œå°†ä¸€ä¸ªå“ç‰Œä¸æœ€ç•…é”€çš„å“ç‰Œè”ç³»åœ¨ä¸€èµ·ã€‚ å¯åœ¨ç¤¾äº¤å¹³å°åˆ†äº«æ¶ˆè´¹è€…ç”ŸåŠ¨æ„Ÿäººçš„è´­ä¹°ç»å†è·å¾—å…¶ä»–ç”¨æˆ·çš„è®¤åŒæ„Ÿã€‚ é€šè¿‡å·§å¦™çš„æ–¹å¼è®©æ¶ˆè´¹è€…å¿ƒç”˜æƒ…æ„¿åœ°å®£ä¼ äº§å“çš„å„ç§ä¼˜åŠ¿ã€‚ åˆ©ç”¨æŠ€æœ¯æ‰‹æ®µï¼Œé€šè¿‡ç¤¾ä¼šåŒ–æ¨èç³»ç»Ÿï¼Œå¯¹ç›¸ä¼¼æ¶ˆè´¹ç¾¤ä½“çš„æŒ–æ˜å¹¶æ¨èä»–ä»¬å¯èƒ½å–œå¥½çš„å•†å“ã€‚ æ³•åˆ™äºŒï¼šå½±å“åŠ› åˆ©ç”¨æ˜æ˜Ÿæˆ–è€…æƒå¨äººå£«è¿›è¡Œäº§å“æ¨èã€‚ å‘åäººæ¨å‡ºè¯•ç”¨æ´»åŠ¨ï¼Œå¹¶é¼“åŠ±ä»–ä»¬åœ¨ ç¤¾äº¤åª’ä½“å‘å¸ƒã€‚ æ³•åˆ™ä¸‰ï¼šç¨€ç¼ºåŸåˆ™ è¿›è¡Œé™é‡ä½“éªŒï¼Œé™é‡æœºä¼šï¼Œé™é‡æä¾›ï¼Œé™é‡ç‰ˆæœ¬ç­‰åŸºäºç¨€ç¼ºæ€§çš„ä¿ƒé”€æ´»åŠ¨ã€‚ æ¨å‡ºåªé’ˆå¯¹ç¤¾äº¤åª’ä½“çš„ä¿ƒé”€è®¡åˆ’ã€‚ æ³•åˆ™å››ï¼šå–œå¥½åŸåˆ™ å……åˆ†åˆ©ç”¨è´­ç‰©è€…çš„ç¤¾äº¤åœˆè¿›è¡Œäº§å“æ¨èï¼Œä¾‹å¦‚å¾®åšç¾¤ç»„æˆ–QQç¾¤ã€‚ åˆ©ç”¨ç¤¾ä¼šåŒ–åª’ä½“å¹³å°å…³æ³¨ï¼Œåˆ†äº«å¹¶ä¼ æ’­ä¸€äº›ç›®æ ‡æ¶ˆè´¹è€…å–œæ¬¢çš„ä¿¡æ¯ã€‚æ–°é—»æˆ–ç§‘æ™®çŸ¥è¯†ã€‚ ç»å¸¸ä¸æ´»è·ƒç²‰ä¸äº’åŠ¨ä»¥è·å¾—ä»–ä»¬çš„å¥½æ„Ÿï¼Œè¿™æ ·æ›´å®¹æ˜“æ ‘ç«‹äº§å“å“ç‰Œå½¢è±¡ã€‚ æ³•åˆ™äº”ï¼šä¸€è‡´æ€§åŸåˆ™ å®šæœŸå¼€å±•å…è´¹è¯•ç”¨ï¼Œçº¿ä¸Šçš„å…è´¹ä½“éªŒç­‰ã€‚ è®¾è®¡ä¸å“ç‰Œç›¸å…³çš„å°æ¸¸æˆåœ¨ç¤¾äº¤å¹³å°æ¨å¹¿ã€‚ ä¿ç•™æ¶ˆè´¹è€…å„ç§è´­ç‰©ä¿¡æ¯ï¼Œå¹¶æä¾›è‰¯å¥½çš„æœåŠ¡ï¼Œä½¿æ¶ˆè´¹è€…å½¢æˆä¾èµ–ã€‚ æ³•åˆ™å…­ï¼šäº’æƒ åŸåˆ™ ç»å¸¸åœ¨èŠ‚æ—¥ä¸æ¶ˆè´¹è€…äº’åŠ¨ï¼Œèµ é€æ¶ˆè´¹è€…å…è´¹çš„è¯•ç”¨è£…ï¼Œäº§å“å®£ä¼ ï¼Œæ‚å¿—ç­‰ã€‚ ç”µå•†å¯ä»¥é€è¿‡ç¤¾ä¼šå¿ƒç†å±‚é¢åˆ©ç”¨ç¤¾ä¼šåŒ–åª’ä½“å¹³å°å¡‘é€ å“ç‰Œã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"ç”¨æˆ·ä½“éªŒ","slug":"userExperience","date":"2017-09-03T02:56:37.000Z","updated":"2020-05-27T00:47:18.000Z","comments":true,"path":"2017/09/03/userExperience/","link":"","permalink":"https://www.littlewhale.xyz/2017/09/03/userExperience/","excerpt":"","text":"ä¼˜è´¨çš„ç”¨æˆ·ä½“éªŒé€šå¸¸æ˜¯æ€æ ·è¡¨è¾¾ï¼Ÿ ä¼ ç»Ÿæ–¹å¼å¯é€šè¿‡è§‚å¯Ÿç”¨æˆ·ï¼Œç”¨æˆ·è®¿è°ˆï¼Œé—®å·ï¼Œé¢å¯¹é¢æ²Ÿé€šï¼Œå¯ä»¥å¾—åˆ°å¾ˆå¤šçš„ç»†èŠ‚ä¹‹å¤„ã€‚ äº’è”ç½‘æ—¶ä»£ï¼Œåˆ©ç”¨æ•°æ®é©±åŠ¨è®¾è®¡ï¼Œå¤§æ•°æ®é‡æ¥åˆ†æç”¨æˆ·ä½“éªŒã€‚ ç°å®å®ä¾‹ï¼šç½‘è´­ï¼Œé€‰äº§å“ï¼Œè´­ç‰©è¿‡ç¨‹æ˜¯å¦ç•…é€šï¼Œæ”¯ä»˜æµç¨‹æ–¹ä¾¿å¿«æ·ï¼Ÿä¹°å®¶å¥½ä¸å¥½ï¼Œç‰©æµå¿«ä¸å¿«ç­‰ã€‚è¿™å°±æ˜¯ç”¨æˆ·ä½“éªŒã€‚ ç”¨æˆ·ä½“éªŒåŒ…æ‹¬å…·ä½“å“ªäº›è§’è‰²ï¼Ÿ ç”¨æˆ·ä½“éªŒç”±äº§å“ç»ç†ï¼Œç”¨æˆ·ä½“éªŒäººå‘˜ï¼Œè®¾è®¡å¸ˆï¼Œè¿è¥äººå‘˜å’Œå¸‚åœºäººå‘˜ï¼Œå•†åŠ¡æ‹“å±•äººå‘˜ã€‚ç”¨æˆ·åœ¨æ„çš„æ˜¯æœ€ç»ˆçš„ä½“éªŒå¦‚ä½•ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ä¸­é—´æµç¨‹ã€‚ ç”¨æˆ·ä½“éªŒç”±è°æ¥åšï¼Ÿ ç”¨æˆ·ä½“éªŒä¸€å®šæ˜¯ç”±æ•´ä¸ªå›¢é˜Ÿæ¥å®ç°ï¼Œè€Œä¸æ˜¯é å•å‡ ä¸ªä¸“ä¸šäººå‘˜ã€‚ä»»ä½•ä¸€ä¸ªç¯èŠ‚å‡ºäº†é—®é¢˜ï¼Œéƒ½ä¼šç»™ç”¨æˆ·ä½“éªŒå¸¦æ¥ç¾éš¾æ€§çš„åæœã€‚ ç”¨æˆ·ä½“éªŒè¦é å¤§å®¶çš„é›†æ€å¹¿ç›Šï¼Œæ›´å¤šçš„è®¨è®ºï¼Œæ›´å¤šçš„æ–¹æ¡ˆï¼Œå’Œæ¢ç´¢å®éªŒã€‚ ç”¨æˆ·ä½“éªŒï¼Œè¦é å¿«é€ŸæŠŠæƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œå¿«é€Ÿå°è¯•å°½å¯èƒ½å¤šçš„å¯èƒ½æ€§ã€‚ ç”¨æˆ·ä½“éªŒæ˜¯å…¸å‹è‡ªä¸Šè€Œä¸‹çš„äº‹æƒ…ã€‚è¿™ä»¶äº‹æƒ…å¿…é¡»æ˜¯å…¬å¸æœ€é«˜å±‚ï¼Œå…¬å¸çš„åˆ›å§‹äººå¾ˆåœ¨æ„çš„ï¼Œæ‰æœ‰å¯èƒ½ç”¨å¥½ã€‚ ç”¨æˆ·ä½“éªŒé ç ”å‘çš„æ¯ä¸€ä¸ªç¯èŠ‚é‡ç‚¹åˆ‡å…¥ï¼Œå°½æ—©å¼€å§‹ï¼Œå¿«é€Ÿè®¾è®¡ï¼Œå¿«é€Ÿæ£€éªŒï¼Œå……åˆ†åˆ©ç”¨æ•°æ®åé¦ˆï¼Œè¯·ä¸“ä¸šäººå£«è¿›è¡Œè¯„å®¡ã€‚ ç”¨æˆ·ä½“éªŒè¦åœ¨å“ªäº›æ–¹é¢æé«˜ï¼Ÿ ç”¨æˆ·ä½“éªŒåŒ…æ‹¬äº§å“æ€§èƒ½ï¼ˆä½¿ç”¨èµ·æ¥å¿«ä¸å¿«ï¼Œæ˜¯å¦æµç•…ï¼‰ï¼Œäº§å“çš„åŠŸèƒ½ï¼ˆèƒ½å¤Ÿå®ç°å“ªäº›æ–¹é¢çš„åŠŸèƒ½ï¼‰ï¼Œåˆé€‚çš„ä»·æ ¼ï¼ˆèƒ½ä¸äºæœ¬çš„æƒ…å†µä¸‹ï¼Œåˆèƒ½è®©äººä¹°å¾—èµ·ï¼‰ã€‚ ç”¨æˆ·ä½“éªŒæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ä½ çš„äº§å“é’ˆå¯¹æ ¸å¿ƒç”¨æˆ·æ˜¯è°ã€‚æŠŠæ¡ç”¨æˆ·çš„ç‰¹ç‚¹å’Œä½¿ç”¨ä¹ æƒ¯ã€‚å°±æ˜¯è¦ç«™åœ¨ç”¨æˆ·çš„è§’åº¦å»å¼€å‘äº§å“ï¼ˆç”¨æˆ·æ€ç»´ï¼‰ã€‚ å…¬å¸ä»€ä¹ˆæ ·çš„äººé€‚åˆåšç”¨æˆ·ä½“éªŒï¼Ÿ æœ‰ä¸€å®šçš„ç ”å‘èƒŒæ™¯ï¼Œç„¶ååˆæ˜¯ä¸ªå¼€æ”¾ï¼Œæ„¿æ„å­¦ä¹ æ–°ä¸œè¥¿ï¼Œæ„¿æ„æ¥å—ç”¨æˆ·ä½“éªŒï¼Œèƒ½å¤Ÿå¸¦é¢†å›¢é˜Ÿï¼Œèƒ½å¤Ÿä»ç‚¹ç‚¹æ»´æ»´çš„ç»†èŠ‚åšèµ·ã€‚ ä»€ä¹ˆæ‰æ˜¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ æœ€åŸºç¡€ï¼Œæœ‰ç”¨ï¼Œå®ç”¨ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚ æ˜“ç”¨ï¼ˆå‰æï¼šé’ˆå¯¹æŸäº›åˆé€‚çš„äº§å“ï¼Œå¦‚æœæ˜¯æ¸¸æˆæˆ–è€…ä¼ä¸šçº§çš„åº”ç”¨çš„è¯ï¼Œå¯èƒ½å°±ä¸åŒäº†ï¼Œåè€Œæ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½è¿˜è¦ç»è¿‡åŸ¹è®­æˆ–è€…è¾ƒé•¿çš„ä¸€æ®µæ—¶é—´åæ‰èƒ½äº†è§£ï¼‰ã€‚ ä½¿ç”¨åä¸å®¹æ˜“é—å¿˜ï¼Œå®¹æ˜“æ“ä½œä¸å®¹æ˜“çŠ¯é”™ï¼Œæœ‰åŠæ—¶çš„åé¦ˆï¼Œæœ‰å¾ˆå¥½çš„ä¸€è‡´æ€§ã€‚æœ‰å¾ˆå¤šå…·ä½“çš„å…ƒç´ ã€‚ åœ¨ç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œçœ‹æ˜¯ä¸æ˜¯ç¾è§‚ï¼Œæ˜¯ä¸æ˜¯é€‚åˆè‡ªå·±å…¬å¸çš„å“ç‰Œï¼Œæ°›å›´ï¼Œæ°”è´¨ã€‚ å…·æœ‰æ¿€å‘æ€§ã€‚èƒ½å¤Ÿæ¿€å‘ç”¨æˆ·ã€‚ ç°å®å®ä¾‹ï¼šå¾®åšã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨å¾®åšï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬èƒ½çœ‹åˆ°å¥½æœ‹å‹çš„ä¸€äº›åˆ†äº«ï¼ŒåŠ¨æ€ç­‰ã€‚çœ‹åˆ°å…³æ³¨æˆ‘çš„äººæ˜¯ä¸æ˜¯åˆå¢åŠ äº†å‡ ä¸ªï¼Œçœ‹çœ‹è°åˆè½¬å‘äº†æˆ‘çš„å¾®åšç­‰ã€‚æ ¹æ®è¿™ç‚¹ï¼Œæˆ‘ä»¬åšçš„äº§å“å¯ä»¥æ ¹æ®ç”¨æˆ·äº§ç”Ÿçš„å†…å®¹åŠ ä¸Šç¤¾äº¤å…ƒç´ ï¼Œä½¿äº§å“å’Œç”¨æˆ·çš„å…³ç³»è½¬å‘ç”¨æˆ·å’Œç”¨æˆ·çš„å…³ç³»ï¼Œç‚¹èµç­‰ï¼Œä½¿å¾—ç”¨æˆ·ä¹‹é—´ç›¸äº’æ¿€åŠ±ã€‚ å…·æœ‰æ¼‚äº®çš„å›¾æ ‡ã€‚å°¤å…¶æ˜¯æ¶ˆè´¹è€…ç±»å‹çš„äº§å“ã€‚ç”¨æˆ·å¯èƒ½çœ‹åˆ°æ¼‚äº®çš„å›¾æ ‡å°±ä¸‹è½½äº†ã€‚ åœ¨æ¶ˆè´¹é¢†åŸŸçš„äº§å“ï¼Œä¸€å®šè¦æ‹¿èµ·å°±å¯ä»¥ç”¨ã€‚ ç”¨æˆ·ä½“éªŒï¼Œäº§å“ä¸€å¼€å§‹æ˜¯é’ˆå¯¹ç§å­ç”¨æˆ·ï¼Œè€Œåæ˜¯è°ƒæ•´é¢å‘å¤§ä¼—ã€‚åŒæ—¶ä¹Ÿä¸ä¼šå½±å“ç§å­ç”¨æˆ·çš„ä½“éªŒã€‚ æ€»ç»“ä¸€ç‚¹ï¼šäº§å“åšå¾—å¥½äº†ï¼ŒæŒ£é’±ï¼Œåèª‰æ‰€æœ‰çš„å…¶ä»–ä¸œè¥¿éƒ½ä¼šéšä¹‹è€Œæ¥ã€‚ä¸ç„¶çš„è¯ï¼Œå³ä¾¿æ˜¯è·å¾—äº†ï¼Œä¹Ÿåªæ˜¯çŸ­æš‚çš„è·å¾—ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"å·§ç”¨å›¾è§£æ„æ€-ç™¾åº¦è„‘å›¾","slug":"brainMap","date":"2017-08-11T04:17:40.000Z","updated":"2020-05-27T00:51:29.000Z","comments":true,"path":"2017/08/11/brainMap/","link":"","permalink":"https://www.littlewhale.xyz/2017/08/11/brainMap/","excerpt":"","text":"å¾ˆå¤šæƒ…å†µï¼Œè½¯ä»¶åŠŸèƒ½å®ç°é‡åˆ°æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œéƒ½ä¼šå€ŸåŠ©äºè‰ç¨¿æˆ–è€…æµç¨‹å›¾ å»ç®€å•ç”»å‡ºä¸šåŠ¡çš„æµç¨‹ï¼Œç„¶åå†ç¼–ç å®ç°ã€‚è¿™æ ·æœ‰åŠ©äºæé«˜ç¨‹åºçš„ç¼–å†™æ•ˆç‡ï¼Œå‡å°‘bug çš„å‡ºç°ã€‚ ä»¥ä¸‹ï¼Œæ˜¯åŸºäºå®æ—¶èŠå¤©çš„ä¼šè®®åŠŸèƒ½è®¾è®¡æµç¨‹å›¾ã€‚é€»è¾‘ç´§ä»£è¡¨æœ¬äººè‰ç¨¿è®¾è®¡æ€è·¯ã€‚ ä½¿ç”¨ç™¾åº¦è„‘å›¾ç”»å›¾","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"å…³ç³»å›¾","slug":"å…³ç³»å›¾","permalink":"https://www.littlewhale.xyz/tags/%E5%85%B3%E7%B3%BB%E5%9B%BE/"}]},{"title":"Android-TableView","slug":"Android-TableView","date":"2016-11-11T05:22:42.000Z","updated":"2020-05-27T00:43:47.000Z","comments":true,"path":"2016/11/11/Android-TableView/","link":"","permalink":"https://www.littlewhale.xyz/2016/11/11/Android-TableView/","excerpt":"How to development a Android AppBefore you begin, Letâ€™s talk about Android lifecycle first . Learn about Androidâ€™s four major components,And to be familiar with Android development tool -Android Studio.Activity 1234Activity1-&gt;Activity2: onCreate()â€”â€”&gt;onStart()â€”â€”&gt;onResume()Note left of Activity2: ç¬¬ä¸€ä¸ª Pauseï¼Œç¬¬äºŒä¸ªCreateï¼ŒStartï¼ŒResumeã€‚ç¬¬ä¸€ä¸ª StopActivity2--&gt;Activity1: back to the activity1Note left of Activity2: æš‚åœï¼Œrestartç¬¬ä¸€ä¸ªï¼Œstartï¼Œresume,ç¬¬äºŒä¸ªstop,destory. when you push a new Activity or back Activity, itâ€™s due to the stack to manage the Activity status, but how to push a new Activity? 12345Intent intent &#x3D; new Intent(ReorderFour.this, ReorderTwo.class); intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);startActivity(intent);","text":"How to development a Android AppBefore you begin, Letâ€™s talk about Android lifecycle first . Learn about Androidâ€™s four major components,And to be familiar with Android development tool -Android Studio.Activity 1234Activity1-&gt;Activity2: onCreate()â€”â€”&gt;onStart()â€”â€”&gt;onResume()Note left of Activity2: ç¬¬ä¸€ä¸ª Pauseï¼Œç¬¬äºŒä¸ªCreateï¼ŒStartï¼ŒResumeã€‚ç¬¬ä¸€ä¸ª StopActivity2--&gt;Activity1: back to the activity1Note left of Activity2: æš‚åœï¼Œrestartç¬¬ä¸€ä¸ªï¼Œstartï¼Œresume,ç¬¬äºŒä¸ªstop,destory. when you push a new Activity or back Activity, itâ€™s due to the stack to manage the Activity status, but how to push a new Activity? 12345Intent intent &#x3D; new Intent(ReorderFour.this, ReorderTwo.class); intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);startActivity(intent); Activity Extentedafter we know the android activity, i want tall about fragment.Perhaps you have seen the most app interfaces is like this. YEs ,itâ€™s Tabbar UI Interface.æ•ˆæœå›¾ so, what about the fragment ? tabbar interface is a activity contains one or more fragments. fragments lifecycle is rely one activity. what did I do to make layout the UITabarActivity?app gradle é…ç½® é¡¹ç›®ç»“æ„ Tabbar Activity Layout å¸ƒå±€ ç•Œé¢Fragmenté…ç½® ok,after you see my screenshots, you can know , i use the ViewpagerIndicator to make a tabbar Activity . it can manager fragments. you can easy to change every fragment you need. app gradle instroduce1. use the fastjson to make json parse.2. use the butterknife replace the frequent findViewById.3. use the ViewPagerIndicator to achieve a tabbarActivity interface.4. use the android-smart-image-view to make the image cache.5. use the android-async-http to make http request.6. use the recycleView-v7 replace the android system listView.7. use the bga-refreshlayout to make the pull refresh cool header.8. finally, use cn.bingoogolapple:bga-adapter to make the recycleView cell Item can right move delete, long press event ,ItemChildClickListener ,and so on . all in all, bga-adapter is perfect ! For your convenience, i encapsulated a tableview like iOS UITableView , you can use the group style or plain style decide by youself; you can find it in the package com.lvj.bookoneday-&gt;widget.view 123456&#x2F;&#x2F;å®šä¹‰è¡¨æ ¼çš„æ•°æ®æºæ¥å£public interface TableViewDataSource&lt;T&gt; &#123; RecyclerViewCell&lt;T&gt;[] getRecyclerCells(); &#x2F;&#x2F;è·å–cell int getItemViewType(int position); &#x2F;&#x2F;è·å–position: cellç±»å‹çš„tag&#125; 12345678910&#x2F;&#x2F;å®šä¹‰è¡¨æ ¼çš„äº‹ä»¶å§”æ‰˜æº public interface TableViewDelegate &#123; void onTableViewDidSelectRow(int row);&#x2F;&#x2F;ç‚¹å‡»å•è¡Œ void onTableViewDidLongClickRow(int row); &#x2F;&#x2F;é•¿æŒ‰å•è¡Œ void onTableViewDidChangeCheckRow(int row, boolean isChecked); &#x2F;&#x2F;é€‰ä¸­è¡Œ void onItemChildClick(View childView, int position); &#x2F;&#x2F;item ç‚¹å‡» void onTableViewRefresh();&#x2F;&#x2F;ä¸‹æ‹‰åˆ·æ–° void onTableViewLoadMore(); &#x2F;&#x2F;åŠ è½½æ›´å¤š&#125; I create two java interface : TableViewDelete, TableViewDataSoucre. that you can easyimplements thereâ€™s methods . when you use the activity or fragment need tableView layout , you can easy and fastlayout ,and implements TableViewDelegate, TableViewDatasource. for examples Talk about Http requestyou know, when your app ask a request, may be have two Design Patterns . it named â€œblockâ€ï¼ˆanonymous inner classesï¼‰ ,â€delegateâ€(delegate is named by iOS. on java, itâ€™s interface or ask â€œOOPâ€ thoughts). My HttpRequest Designthere is a abstract class named BaseDataService. if you have a new request . you just extend BaseDataService and @Override three methods. â€œgetAPIRequestMethodName, setRequestParams,parseResponseâ€. look these screenshots. And on your Activity or Fragments , you just implemets RequestCallBackDelegate , and you can use your son of BaseDataService to make some request. çˆ¶ç±» å­ç±»ç»§æ‰¿çˆ¶ç±» ç•Œé¢ç”¨å­ç±»è¯·æ±‚å®ç° For more info about the tableView how to work, you can find my open source on my Github Android-TableView,welcome make you suggestion. if you like this project, on my github, I hope you can click on the star in the upper right corner to give me more encouragement. thank you! TO Do: Introduce Android Service components","categories":[],"tags":[{"name":"AndroidTableView","slug":"AndroidTableView","permalink":"https://www.littlewhale.xyz/tags/AndroidTableView/"}]},{"title":"å®¢æˆ·ç«¯ç½‘ç»œè¯·æ±‚æ¨¡å—çš„è®¾è®¡","slug":"iOSDataTransmission","date":"2016-05-29T14:11:19.000Z","updated":"2020-05-27T00:54:15.000Z","comments":true,"path":"2016/05/29/iOSDataTransmission/","link":"","permalink":"https://www.littlewhale.xyz/2016/05/29/iOSDataTransmission/","excerpt":"AFNetworkingä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚å…¶å®ƒçš„ASIHttpRequestï¼ŒMKNetworkKitå•¥çš„å…¶å®ä¹Ÿéƒ½è¿˜ä¸é”™ï¼Œè‹¹æœå¯¹ç½‘ç»œè¯·æ±‚éƒ¨åˆ†å·²ç»åšäº†å¾ˆå¥½çš„å°è£…ã€‚ä½†ä¸ç®¡å¦‚ä½•ï¼ŒAPPç«¯è¿˜æ˜¯è¦å¯¹ç½‘ç»œè¿›è¡Œä¸€ä¸ªå°è£…ã€‚åœ¨å®é™…çš„Appå¼€å‘ä¸­ï¼ŒAfnetworkingå·²ç»æˆä¸ºäº†äº‹å®ä¸Šå„å¤§Appçš„æ ‡å‡†é…ç½®ã€‚ iOSå¼€å‘é¢†åŸŸæœ‰å¾ˆå¤šå¯¹è±¡é—´æ•°æ®çš„ä¼ é€’æ–¹å¼ï¼Œæˆ‘çœ‹åˆ°çš„å¤§å¤šæ•°Appåœ¨ç½‘ç»œå±‚æ‰€é‡‡ç”¨çš„æ–¹æ¡ˆä¸»è¦é›†ä¸­äºè¿™ä¸‰ç§ï¼šDelegateï¼ŒNotificationï¼ŒBlockã€‚æˆ‘çš„æ„è§æ˜¯Delegateä¸ºä¸»ï¼ŒNotificationå¯ä»¥ç”¨åœ¨ç½‘ç»œå‘ç”Ÿå˜åŒ–æ—¶å€™ä½¿ç”¨ã€‚","text":"AFNetworkingä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚å…¶å®ƒçš„ASIHttpRequestï¼ŒMKNetworkKitå•¥çš„å…¶å®ä¹Ÿéƒ½è¿˜ä¸é”™ï¼Œè‹¹æœå¯¹ç½‘ç»œè¯·æ±‚éƒ¨åˆ†å·²ç»åšäº†å¾ˆå¥½çš„å°è£…ã€‚ä½†ä¸ç®¡å¦‚ä½•ï¼ŒAPPç«¯è¿˜æ˜¯è¦å¯¹ç½‘ç»œè¿›è¡Œä¸€ä¸ªå°è£…ã€‚åœ¨å®é™…çš„Appå¼€å‘ä¸­ï¼ŒAfnetworkingå·²ç»æˆä¸ºäº†äº‹å®ä¸Šå„å¤§Appçš„æ ‡å‡†é…ç½®ã€‚ iOSå¼€å‘é¢†åŸŸæœ‰å¾ˆå¤šå¯¹è±¡é—´æ•°æ®çš„ä¼ é€’æ–¹å¼ï¼Œæˆ‘çœ‹åˆ°çš„å¤§å¤šæ•°Appåœ¨ç½‘ç»œå±‚æ‰€é‡‡ç”¨çš„æ–¹æ¡ˆä¸»è¦é›†ä¸­äºè¿™ä¸‰ç§ï¼šDelegateï¼ŒNotificationï¼ŒBlockã€‚æˆ‘çš„æ„è§æ˜¯Delegateä¸ºä¸»ï¼ŒNotificationå¯ä»¥ç”¨åœ¨ç½‘ç»œå‘ç”Ÿå˜åŒ–æ—¶å€™ä½¿ç”¨ã€‚ è°ˆè°ˆNotificationä½¿ç”¨Notificationæ¥è¿›è¡Œç½‘ç»œå±‚å’Œä¸šåŠ¡å±‚ä¹‹é—´æ•°æ®çš„äº¤æ¢ï¼Œ ä½†æ˜¯ä½¿ç”¨Notificationç»™è·¨å±‚æ•°æ®äº¤æµå¼€äº†ä¸€é“å£å­ï¼Œå› ä¸ºNotificationçš„å½±å“é¢ä¸å¯æ§åˆ¶ï¼Œåªè¦å­˜åœ¨å®ä¾‹å°±å­˜åœ¨è¢«å½±å“çš„å¯èƒ½ã€‚Notificationå› ä¸ºæ”¯æ’‘ä¸€å¯¹å¤šçš„æƒ…å†µï¼Œè¿™ä¹Ÿç»™ä»£ç æ•£è½æä¾›äº†æ¡ä»¶ã€‚åŒæ—¶ï¼ŒNotificationæ‰€å¯¹åº”çš„å“åº”æ–¹æ³•å¾ˆéš¾åœ¨ç¼–è¯‘å±‚é¢ä½œé™åˆ¶ã€‚ å…³äºBlock ä¹‹è°ˆ1ã€blockå¾ˆéš¾è¿½è¸ªï¼Œéš¾ä»¥ç»´æŠ¤ã€‚è°ƒè¯•çš„æ—¶å€™æœ‰ä¸ªblockï¼Œå¦‚æœæƒ³çŸ¥é“è¿™ä¸ªblocké‡Œé¢éƒ½åšäº†äº›ä»€ä¹ˆäº‹æƒ…ï¼Œè¿™æ—¶å€™å°±è¦ä»ä¹‹å‰å†™çš„ä»£ç å¾€å›æŸ¥äº†ã€‚ã€‚2ã€blockä¼šå»¶é•¿ç›¸å…³å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚blockä¼šç»™å†…éƒ¨æ‰€æœ‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°åŠ ä¸€ï¼Œè¿™ä¸€æ–¹é¢ä¼šå¸¦æ¥æ½œåœ¨çš„retain cycleã€‚è¿™ä¸ªæ—¶å€™åœ¨blockå—ä¸­éœ€è¦ä½¿ç”¨weak self ä¿®é¥°è¯ã€‚å› ä¸ºblockä¼šå»¶é•¿ç”Ÿå‘½å¥½å‘¨æœŸï¼Œæ‰€ä»¥å¯èƒ½è¯·æ±‚è¿˜åœ¨æ‰§è¡Œä¸­ï¼ŒViewController popä¹‹åï¼Œè¯·æ±‚è¿˜åœ¨é£ã€‚è€Œdelegateæ˜¯å¼±å¼•ç”¨ï¼Œå“ªæ€•è¯·æ±‚ä»ç„¶åœ¨å¤–é¢é£ï¼ŒViewControllerè¿˜æ˜¯èƒ½å¤ŸåŠæ—¶è¢«å›æ”¶çš„ï¼Œå›æ”¶ä¹‹åæŒ‡é’ˆè‡ªåŠ¨è¢«ç½®ä¸ºäº†nilã€‚ Delegate å§”æ‰˜å°è£…è¯·æ±‚åŸºç±» h æ–‡ä»¶ BaseDataService ç½‘ç»œè¯·æ±‚åŸºç±» mæ–‡ä»¶ åˆå§‹åŒ– BaseDataService é…ç½®è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨å…·ä½“ä¸šåŠ¡è¯·æ±‚å­ç±» BaseDataService è¯·æ±‚ç»“æŸï¼Œé€šè¿‡å§”æ‰˜è°ƒç”¨viewController æ‰€å®ç°çš„æˆåŠŸ æˆ–å¤±è´¥çš„æ–¹æ³•","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"è°ˆè°ˆiOSçš„å¤šçº¿ç¨‹","slug":"iOSThread","date":"2016-05-16T04:00:08.000Z","updated":"2020-05-27T00:49:58.000Z","comments":true,"path":"2016/05/16/iOSThread/","link":"","permalink":"https://www.littlewhale.xyz/2016/05/16/iOSThread/","excerpt":"iosçº¿ç¨‹å½¢å¼æœ‰ä¸‰ç§ã€‚ ios4åï¼Œè‹¹æœæ”¹ç”¨GCDå¤šçº¿ç¨‹ã€‚çº¿ç¨‹å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿå¤šçº¿ç¨‹å¯ä»¥ç”¨æ¥åå°åŠ è½½å›¾ç‰‡æ›´æ–°ä¸»çº¿ç¨‹UI,æˆ–è€…è¯·æ±‚ç½‘ç»œæ•°æ®ç­‰ç­‰ã€‚ Threadä½¿ç”¨ NSThread æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•:12345678[NSThread detachNewThreadSelector:@selector(myThreadMainMethod:) toTarget:self withObject:nil];NSThread* myThread = [[NSThread alloc] initWithTarget:self selector:@selector(myThreadMainMethod:) object:nil];[myThread start]; // Actually create the thread","text":"iosçº¿ç¨‹å½¢å¼æœ‰ä¸‰ç§ã€‚ ios4åï¼Œè‹¹æœæ”¹ç”¨GCDå¤šçº¿ç¨‹ã€‚çº¿ç¨‹å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿå¤šçº¿ç¨‹å¯ä»¥ç”¨æ¥åå°åŠ è½½å›¾ç‰‡æ›´æ–°ä¸»çº¿ç¨‹UI,æˆ–è€…è¯·æ±‚ç½‘ç»œæ•°æ®ç­‰ç­‰ã€‚ Threadä½¿ç”¨ NSThread æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•:12345678[NSThread detachNewThreadSelector:@selector(myThreadMainMethod:) toTarget:self withObject:nil];NSThread* myThread = [[NSThread alloc] initWithTarget:self selector:@selector(myThreadMainMethod:) object:nil];[myThread start]; // Actually create the thread å¦‚æœä½ æ‹¥æœ‰ä¸€ä¸ª NSThread å¯¹è±¡,å®ƒçš„çº¿ç¨‹å½“å‰æ­£è¿è¡Œ,ä½ å¯ä»¥ç»™è¯¥çº¿ç¨‹å‘é€ æ¶ˆæ¯çš„å”¯ä¸€æ–¹æ³•æ˜¯åœ¨ä½ åº”ç”¨ç¨‹åºé‡Œé¢çš„ä»»ä½•å¯¹è±¡ä½¿ç”¨ performSelector:onThread:withObject:waitUntilDone:æ–¹æ³•ã€‚å®ƒæ˜¯å®ç°çº¿ç¨‹é—´é€š ä¿¡çš„ä¾¿æ·æ–¹æ³•. çº¿ç¨‹é€šä¿¡ï¼š1.åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ[self performSelector:@selector(run) onThread:thread withObject:nil waitUntilDone:YES]; 2.åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ [self performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:YES]; 3.åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ [self performSelector:@selector(run) withObject:nil]; NSOperationé€šå¸¸ NSOperation ä¼šå’ŒNSOperationQueue ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥äº†è§£ä¸€ä¸‹NSOperation .Cocoa operationsæ˜¯åŸºäº Obective-Cå®ç°çš„ï¼Œç±» NSOperation ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…äº†ç”¨æˆ·éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œæˆ‘ä»¬åªè¦èšç„¦äºæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…ï¼Œè€Œä¸å¿…å¤ªæ“å¿ƒçº¿ç¨‹çš„ç®¡ç†ï¼ŒåŒæ­¥ç­‰äº‹æƒ…ï¼Œå› ä¸ºNSOperationå·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†è¿™äº›äº‹æƒ…ã€‚ NSOperation æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å®ƒçš„å­ç±»ã€‚iOS æä¾›äº†ä¸¤ç§é»˜è®¤å®ç°ï¼šNSInvocationOperation å’Œ NSBlockOperationã€‚ä»£ç ç¤ºä¾‹ï¼š12345NSOperationQueue *mainQueue = [NSOperationQueue mainQueue]; //ä¸»é˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init]; //è‡ªå®šä¹‰é˜Ÿåˆ—NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123; //ä»»åŠ¡æ‰§è¡Œ &#125;];[queue addOperation:operation];å¦‚æœæˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ªNSOperationæ‰§è¡Œå®Œæ¯•ååšä¸€äº›äº‹æƒ…ï¼Œå°±è°ƒç”¨NSOperationçš„setCompletionBlockæ–¹æ³•æ¥è®¾ç½®æƒ³åšçš„äº‹æƒ…operation.completionBlock = ^() { NSLog(@â€æ‰§è¡Œå®Œæ¯•â€);}; NSInvocationOperationåŸºäºä¸€ä¸ªå¯¹è±¡å’Œselectoræ¥åˆ›å»ºæ“ä½œã€‚å¦‚æœä½ å·²ç»æœ‰ç°æœ‰çš„æ–¹æ³•æ¥æ‰§è¡Œéœ€è¦çš„ä»»åŠ¡,å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»// è¿™ä¸ªæ“ä½œæ˜¯ï¼šè°ƒç”¨selfçš„runæ–¹æ³•NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run) object:nil];// å¼€å§‹æ‰§è¡Œä»»åŠ¡(åŒæ­¥æ‰§è¡Œ)[operation start]; GCDå•åˆ—æ¨¡å¼å•ä¾‹å°±æ˜¯å…¨å±€éƒ½åªæœ‰ä¸€ä¸ªå¯¹è±¡å­˜åœ¨ï¼Œè€Œä¸”æ˜¯åœ¨æ•´ä¸ªAppè¿è¡Œè¿‡ç¨‹ä¸­éƒ½å­˜åœ¨ã€‚ åšç”¨æˆ·æ•°æ®å­˜å‚¨æ—¶ï¼Œé€šå¸¸éƒ½ä¼šç”¨å•ä¾‹å­˜å‚¨ï¼Œå› ä¸ºåº”ç”¨åœ¨æ‰€æœ‰æ“ä½œä¸­ï¼Œç»å¸¸è¦æ±‚å…ˆç™»å½•.1234567891011+ (instancetype)shared &#123; static HYBUserManager *sg_userManager = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; if (sg_userManager == nil) &#123; sg_userManager = [[HYBUserManager alloc] init]; &#125; &#125;); return sg_userManager;&#125;ç›¸ä¿¡å¤§å®¶å¯¹dispatch_onceéƒ½ä¸é™Œç”Ÿäº†ï¼Œæˆ‘å°†å’Œå¤§å®¶ä¸€èµ·æ¢ç©¶dispatch_onceçš„æ›´å¤šç»†èŠ‚ã€‚dispatch_onceçš„ä½œç”¨æ­£å¦‚å…¶åï¼šå¯¹äºæŸä¸ªä»»åŠ¡æ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚ dispatch_onceå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°predicateç”¨æ¥ä¿è¯æ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œä¸€æ¬¡çš„ä»»åŠ¡blockã€‚static dispatch_once_t predicate;dispatch_once(&amp;predicate, ^{ // some one-time task});dispatch_onceè¢«å¹¿æ³›ä½¿ç”¨åœ¨å•ä¾‹ã€ç¼“å­˜ç­‰ä»£ç ä¸­ï¼Œç”¨ä»¥ä¿è¯åœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡æŸä»»åŠ¡ã€‚dispatch_onceåœ¨å•çº¿ç¨‹ç¨‹åºä¸­æ¯«æ— æ„ä¹‰ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå…¶ä½è´Ÿè½½ã€é«˜å¯ä¾èµ–æ€§ã€æ¥å£ç®€å•ç­‰ç‰¹æ€§ï¼Œèµ¢å¾—äº†å¹¿å¤§æ¶ˆè´¹è€…çš„ä¸€è‡´äº”æ˜Ÿå¥½è¯„ã€‚ dispatch_onceä½¿å¾—blockä¸­çš„ä»£ç æ‰§è¡Œä¸”åªæ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨å¤šçº¿ç¨‹ç«æ€æ—¶ï¼Œä½¿å…¶ä»–çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´è‡³blockæ‰§è¡Œå®Œæ¯•ï¼Œå¹¶ä¸”è¿˜ä¿è¯æ— ç«æ€æ—¶æ‰§è¡Œæ•ˆç‡ä¸éçº¿ç¨‹å®‰å…¨çš„ifè¯­å¥æ•ˆç‡ç›¸å½“ã€‚dispatch_onceå†…éƒ¨ä½¿ç”¨äº†å¤§é‡çš„åŸå­æ“ä½œæ¥æ›¿ä»£é”ä¸ä¿¡å·é‡ï¼Œè¿™ä½¿å¾—å…¶æ•ˆç‡å¤§å¤§æå‡ï¼Œä½†å¸¦æ¥çš„æ˜¯ç»´æŠ¤å’Œé˜…è¯»æ€§çš„é™ä½ã€‚dispatch_onceè¢«å¤§é‡ä½¿ç”¨åœ¨æ„å»ºå•ä¾‹ä¸Šï¼Œappleä¹Ÿæ¨èå¦‚æ­¤ã€‚ Dispatch Groupæˆ‘ä»¬å¯ä»¥ä½¿ç”¨dispatch_group_asyncå‡½æ•°å°†å¤šä¸ªä»»åŠ¡å…³è”åˆ°ä¸€ä¸ªDispatch Groupå’Œç›¸åº”çš„queueä¸­ï¼Œgroupä¼šå¹¶å‘åœ°åŒæ—¶æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚è€Œä¸”Dispatch Groupå¯ä»¥ç”¨æ¥é˜»å¡ä¸€ä¸ªçº¿ç¨‹, ç›´åˆ°groupå…³è”çš„æ‰€æœ‰çš„ä»»åŠ¡å®Œæˆæ‰§è¡Œã€‚æœ‰æ—¶å€™ä½ å¿…é¡»ç­‰å¾…ä»»åŠ¡å®Œæˆçš„ç»“æœ,ç„¶åæ‰èƒ½ç»§ç»­åé¢çš„å¤„ç†ã€‚ä¸‹é¢ç”¨Dispatch Groupä¼˜åŒ–ä¸Šé¢çš„ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849501. // æ ¹æ®urlè·å–UIImage 2. - (UIImage *)imageWithURLString:(NSString *)urlString &#123; 3. NSURL *url = [NSURL URLWithString:urlString]; 4. NSData *data = [NSData dataWithContentsOfURL:url]; 5. // è¿™é‡Œå¹¶æ²¡æœ‰è‡ªåŠ¨é‡Šæ”¾UIImageå¯¹è±¡ 6. return [[UIImage alloc] initWithData:data]; 7. &#125; 8. 9. - (void)downloadImages &#123; 10. dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); 11. 12. // å¼‚æ­¥ä¸‹è½½å›¾ç‰‡ 13. dispatch_async(queue, ^&#123; 14. // åˆ›å»ºä¸€ä¸ªç»„ 15. dispatch_group_t group = dispatch_group_create(); 16. 17. __block UIImage *image1 = nil; 18. __block UIImage *image2 = nil; 19. 20. // å…³è”ä¸€ä¸ªä»»åŠ¡åˆ°group 21. dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; 22. // ä¸‹è½½ç¬¬ä¸€å¼ å›¾ç‰‡ 23. NSString *url1 = @\"http://car0.autoimg.cn/upload/spec/9579/u_20120110174805627264.jpg\"; 24. image1 = [self imageWithURLString:url1]; 25. &#125;); 26. 27. // å…³è”ä¸€ä¸ªä»»åŠ¡åˆ°group 28. dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; 29. // ä¸‹è½½ç¬¬ä¸€å¼ å›¾ç‰‡ 30. NSString *url2 = @\"http://hiphotos.baidu.com/lvpics/pic/item/3a86813d1fa41768bba16746.jpg\"; 31. image2 = [self imageWithURLString:url2]; 32. &#125;); 33. 34. // ç­‰å¾…ç»„ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•,å›åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œblockå›è°ƒ 35. dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123; 36. self.imageView1.image = image1; 37. self.imageView2.image = image2; 38. 39. // åƒä¸‡ä¸è¦åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­è‡ªåŠ¨é‡Šæ”¾UIImageï¼Œå› ä¸ºå½“å¼‚æ­¥çº¿ç¨‹ç»“æŸï¼Œå¼‚æ­¥çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± ä¹Ÿä¼šè¢«é”€æ¯ï¼Œé‚£ä¹ˆUIImageä¹Ÿä¼šè¢«é”€æ¯ 40. 41. // åœ¨è¿™é‡Œé‡Šæ”¾å›¾ç‰‡èµ„æº 42. [image1 release]; 43. [image2 release]; 44. &#125;); 45. 46. // é‡Šæ”¾group 47. dispatch_release(group); 48. &#125;); 49. &#125;dispatch_group_notifyå‡½æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé¢å¤–çš„blockï¼Œè¯¥blockå°†åœ¨groupä¸­æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰§è¡Œ. å¼‚æ­¥ä¸‹è½½å›¾ç‰‡1&gt; GCDæä¾›ä¸€ä¸ªç‰¹æ®Šçš„dispatch queue,å¯ä»¥åœ¨åº”ç”¨çš„ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ã€‚åªè¦åº”ç”¨ä¸»çº¿ç¨‹è®¾ç½®äº†run loop(ç”±CFRunLoopRefç±»å‹æˆ–NSRunLoopå¯¹è±¡ç®¡ç†),å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªqueue,å¹¶ä¸”æœ€åä¼šè‡ªåŠ¨é”€æ¯ã€‚éCocoaåº”ç”¨å¦‚æœä¸æ˜¾å¼åœ°è®¾ç½®run loop, å°±å¿…é¡»æ˜¾å¼åœ°è°ƒç”¨dispatch_mainå‡½æ•°æ¥æ˜¾å¼åœ°æ¿€æ´»è¿™ä¸ªdispatch queueï¼Œå¦åˆ™è™½ç„¶ä½ å¯ä»¥æ·»åŠ ä»»åŠ¡åˆ°queue,ä½†ä»»åŠ¡æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œã€‚2&gt; è°ƒç”¨dispatch_get_main_queueå‡½æ•°è·å¾—åº”ç”¨ä¸»çº¿ç¨‹çš„dispatch queue,æ·»åŠ åˆ°è¿™ä¸ªqueueçš„ä»»åŠ¡ç”±ä¸»çº¿ç¨‹ä¸²è¡ŒåŒ–æ‰§è¡Œ3&gt; ä»£ç å®ç°ï¼Œæ¯”å¦‚å¼‚æ­¥ä¸‹è½½å›¾ç‰‡åï¼Œå›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºå›¾ç‰‡123456789101. // å¼‚æ­¥ä¸‹è½½å›¾ç‰‡ 2. dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; 3. NSURL *url = [NSURL URLWithString:@\"http://car0.autoimg.cn/upload/spec/9579/u_20120110174805627264.jpg\"]; 4. UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]]; 5. 6. // å›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºå›¾ç‰‡ 7. dispatch_async(dispatch_get_main_queue(), ^&#123; 8. self.imageView.image = image; 9. &#125;); 10. &#125;);","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"Xmppåè®®","slug":"xmpp","date":"2016-05-15T11:31:12.000Z","updated":"2020-05-27T01:11:12.000Z","comments":true,"path":"2016/05/15/xmpp/","link":"","permalink":"https://www.littlewhale.xyz/2016/05/15/xmpp/","excerpt":"åŸºäºTCPçš„é•¿è¿æ¥ã€‚åœ¨ä½¿ç”¨ TCP é•¿è¿æ¥çš„ IM æœåŠ¡è®¾è®¡ä¸­ï¼Œå¾€å¾€éƒ½ä¼šæ¶‰åŠåˆ°å¿ƒè·³ã€‚å¿ƒè·³ä¸€èˆ¬æ˜¯æŒ‡æŸç«¯(ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å®¢æˆ·ç«¯)æ¯éš”ä¸€å®šæ—¶é—´å‘å¯¹ç«¯å‘é€è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä»¥åˆ¤æ–­åŒæ–¹æ˜¯å¦å­˜æ´»ï¼Œå› å…¶æŒ‰ç…§ä¸€å®šé—´éš”å‘é€ï¼Œç±»ä¼¼äºå¿ƒè·³ï¼Œæ•…è¢«ç§°ä¸ºå¿ƒè·³æŒ‡ä»¤ã€‚","text":"åŸºäºTCPçš„é•¿è¿æ¥ã€‚åœ¨ä½¿ç”¨ TCP é•¿è¿æ¥çš„ IM æœåŠ¡è®¾è®¡ä¸­ï¼Œå¾€å¾€éƒ½ä¼šæ¶‰åŠåˆ°å¿ƒè·³ã€‚å¿ƒè·³ä¸€èˆ¬æ˜¯æŒ‡æŸç«¯(ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å®¢æˆ·ç«¯)æ¯éš”ä¸€å®šæ—¶é—´å‘å¯¹ç«¯å‘é€è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä»¥åˆ¤æ–­åŒæ–¹æ˜¯å¦å­˜æ´»ï¼Œå› å…¶æŒ‰ç…§ä¸€å®šé—´éš”å‘é€ï¼Œç±»ä¼¼äºå¿ƒè·³ï¼Œæ•…è¢«ç§°ä¸ºå¿ƒè·³æŒ‡ä»¤ã€‚ ä¿æŒå¿ƒè·³çš„å¿…è¦æœåŠ¡å™¨éœ€è¦åŠæ—¶æ¸…ç†æ— æ•ˆè¿æ¥ä»¥å‡è½»è´Ÿè½½ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¦‚æ¸¸æˆå‰¯æœ¬ä¸­æœåŠ¡å™¨éœ€è¦åŠæ—¶å¤„ç†ç©å®¶æ‰çº¿å¸¦æ¥çš„é—®é¢˜ã€‚ ä¸ºä»€ä¹ˆTCP KeepAlive ä¸èƒ½ç”¨äºæ£€æµ‹TCP KeepAliveç”¨äºæ£€æµ‹è¿æ¥çš„æ­»æ´»ï¼Œå¿ƒè·³æœºåˆ¶ç”¨äºæ£€æŸ¥åŒæ–¹çš„å­˜æ´»çŠ¶æ€ã€‚è€ƒè™‘ä¸€ç§æƒ…å†µï¼ŒæŸå°æœåŠ¡å™¨å› ä¸ºæŸäº›åŸå› å¯¼è‡´è´Ÿè½½è¶…é«˜ï¼ŒCPU 100%ï¼Œæ— æ³•å“åº”ä»»ä½•ä¸šåŠ¡è¯·æ±‚ï¼Œä½†æ˜¯ä½¿ç”¨ TCP æ¢é’ˆåˆ™ä»æ—§èƒ½å¤Ÿç¡®å®šè¿æ¥çŠ¶æ€ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è¿æ¥æ´»ç€ä½†ä¸šåŠ¡æä¾›æ–¹å·²æ­»çš„çŠ¶æ€ï¼Œå¯¹å®¢æˆ·ç«¯è€Œè¨€ï¼Œè¿™æ—¶çš„æœ€å¥½é€‰æ‹©å°±æ˜¯æ–­çº¿åé‡æ–°è¿æ¥å…¶ä»–æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä¸€ç›´è®¤ä¸ºå½“å‰æœåŠ¡å™¨æ˜¯å¯ç”¨çŠ¶æ€ï¼Œä¸€ç›´å‘å½“å‰æœåŠ¡å™¨å‘é€äº›å¿…ç„¶ä¼šå¤±è´¥çš„è¯·æ±‚ã€‚ å¿ƒè·³çš„åšæ³•æ¯éš” 30 ç§’å¿ƒè·³ä¸€æ¬¡ï¼Œ15 ç§’å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³å›åŒ…åˆ™è®¤ä¸ºå½“å‰è¿æ¥å·²å¤±æ•ˆï¼Œæ–­å¼€è¿æ¥å¹¶è¿›è¡Œé‡è¿ã€‚è¿æ¥å¯é æ€§å¯åœ¨å¿ƒè·³è¶…æ—¶ n æ¬¡åæ‰åˆ¤å®šå½“å‰è¿æ¥ä¸å¯ç”¨ï¼Œè¿™æ ·åšå¯ä»¥å‡å°‘å¿ƒè·³è¿æ¥çš„æ¬¡æ•°ï¼Œå‡å°‘æµé‡ã€‚ æ¶ˆæ¯å¯è¾¾åœ¨ç§»åŠ¨ç½‘ç»œä¸‹ï¼Œä¸¢åŒ…ï¼Œç½‘ç»œé‡è¿ç­‰æƒ…å†µéå¸¸ä¹‹å¤šï¼Œä¸ºäº†ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ï¼Œä¸€èˆ¬éœ€è¦åšæ¶ˆæ¯å›æ‰§å’Œé‡å‘æœºåˆ¶ã€‚å‚è€ƒæ˜“ä¿¡ï¼Œæ¯æ¡æ¶ˆæ¯ä¼šæœ€å¤šä¼šæœ‰3æ¬¡é‡å‘ï¼Œè¶…æ—¶æ—¶é—´ä¸º15ç§’ï¼ŒåŒæ—¶åœ¨å‘é€ä¹‹å‰ä¼šæ£€æµ‹å½“å‰è¿æ¥çŠ¶æ€ï¼Œå¦‚æœå½“å‰è¿æ¥å¹¶æ²¡æœ‰æ­£ç¡®å»ºç«‹ï¼Œç¼“å­˜æ¶ˆæ¯ä¸”å®šæ—¶æ£€æŸ¥(æ¯éš”2ç§’æ£€æŸ¥ä¸€æ¬¡ï¼Œæ£€æŸ¥15æ¬¡)ã€‚æ‰€ä»¥ä¸€æ¡æ¶ˆæ¯åœ¨æœ€å·®çš„æƒ…å†µä¸‹ä¼šæœ‰2åˆ†é’Ÿå·¦å³çš„é‡è¯•æ—¶é—´ï¼Œä»¥ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ã€‚ å› ä¸ºé‡å‘çš„å­˜åœ¨ï¼Œæ¥å—ç«¯å¶å°”ä¼šæ”¶åˆ°é‡å¤æ¶ˆæ¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æ¥æ”¶ç«¯è¿›è¡Œå»é‡ã€‚é€šç”¨çš„åšæ³•æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½å¸¦ä¸Šè‡ªå·±å”¯ä¸€çš„message id(ä¸€èˆ¬æ˜¯uuid)ã€‚ æ¶ˆæ¯åŠ å¯†ä¸ºäº†ä¿è¯åè®®ä¸å®¹æ˜“è¢«ç ´è§£ï¼Œå¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰ä¸»æµIMéƒ½ä¼šå¯¹åè®®è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚å¸¸è§çš„æµç¨‹å’ŒHTTPSåŠ å¯†ç›¸ä¼¼:å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œè¿›è¡Œåå•†ï¼Œæœ€ç»ˆå®¢æˆ·ç«¯è·å¾—ä¸€ä¸ªå½“å‰Sessinoçš„ç§˜é’¥ï¼Œåç»­çš„æ•°æ®ä¼ è¾“éƒ½é€šè¿‡è¿™ä¸ªç§˜é’¥è¿›è¡ŒåŠ è§£å¯†ã€‚ä¸€èˆ¬å‡ºäºæ•ˆç‡çš„è€ƒè™‘éƒ½ä¼šé‡‡ç”¨æµå¼åŠ å¯†ï¼Œå¦‚RC4ã€‚è€Œå‰æœŸåå•†è¿‡ç¨‹åˆ™æ¨èä½¿ç”¨RSAç­‰éå¯¹ç§°åŠ å¯†ä»¥å¢åŠ ç ´è§£éš¾åº¦ã€‚ IMåè®®åŒ…åŒ…å¤´ï¼šstruct PackHeader{ int32t length; //åŒ…é•¿åº¦ int32t serial; //åŒ…åºåˆ—å· int32t command; //åŒ…è¯·æ±‚ç±»å‹ int32t code; //è¿”å›ç }; IMèŠå¤©App ç™»å½•åè¦åšå¾—äº‹æƒ… å¥½å‹åˆ—è¡¨ å¥½å‹ä¸ªäººä¿¡æ¯ ç¾¤ç»„åˆ—è¡¨ ç¾¤æˆå‘˜åˆ—è¡¨ ç¾¤æˆå‘˜ä¸ªäººä¿¡æ¯ ç¦»çº¿æ¶ˆæ¯ 1ï¼Œå®¢æˆ·ç«¯æ°¸è¿œåªæ›´æ–°æ¯”æœ¬åœ°ç¼“å­˜æ•°æ®æ–°çš„æ•°æ®ã€‚2ã€ç™»å½•æ—¶å€™LBSå¯æ”¾åœ¨ç™»å½•åæˆ–è€…ç½‘ç»œç©ºé—²æ—¶å»è¯·æ±‚ã€‚3ã€æœ‰äº›æ•°æ®åªæ˜¯åœ¨è¯·æ±‚æ—¶å€™å»æ›´æ–°UI. ä½¿ç”¨XMppåè®®çš„ä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºé€€åˆ°åå°çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æ¥æ”¶åˆ°èŠå¤©ä¿¡æ¯æˆ–iconæ˜¾ç¤ºbadge, è¯¥æ€ä¹ˆåšï¼ŸGCDAsyncSocketYou need to set the VoIP flag in your appâ€™s (appname)-info.plist file, and then in (void)xmppStream:(XMPPStream )sender socketWillConnect:(AsyncSocket )socketYouâ€™ll need to set the socket stream flags to include kCFStreamNetworkServiceTypeVoIP: CFReadStreamSetProperty([socket getCFReadStream], kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP); CFWriteStreamSetProperty([socket getCFWriteStream], kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);Then, your app will be woken up briefly when a new XMPP message arrives. In your normal (void)xmppStream:(XMPPStream )sender didReceiveMessage:(XMPPMessage )messagehandler, you would want to create a local notification for the message if you are backgrounded (you can keep track of background state via UIApplicationDidEnterBackgroundNotification and UIApplicationWillEnterForegroundNotification). The local notification handler can set the application badge number, etc (just like you would for a push notification). EDITNewer versions of the XMPP Framework (specifically, GCDAsyncSocket) now support a call to make this easier, so you can just have: (void)xmppStream:(XMPPStream )sender socketWillConnect:(GCDAsyncSocket )socket{ // Tell the socket to stay around if the app goes to the background (only works on apps with the VoIP background flag set) [socket performBlock:^{[socket enableBackgroundingOnSocket]; }];}åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½ æˆ–è®¸èƒ½æ‰¾åˆ°ç­”æ¡ˆ ä¸å¾—ä¸è¯´StackOverFlowçœŸæ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚ èŠèŠIOSåå°åº”ç”¨ç¨‹åºè¿›å…¥åå°çŠ¶æ€ä¸ä¹…åè½¬å…¥æš‚åœçŠ¶æ€ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºä¸æ‰§è¡Œä»»ä½•ä»£ç ï¼Œå¹¶æœ‰å¯èƒ½åœ¨ä»»æ„æ—¶å€™ä»å†…å­˜ä¸­åˆ é™¤ã€‚åº”ç”¨ç¨‹åºæä¾›ç‰¹å®šçš„æœåŠ¡ï¼Œç”¨æˆ·å¯ä»¥è¯·æ±‚åå°æ‰§è¡Œæ—¶é—´ï¼Œä»¥æä¾›è¿™äº›æœåŠ¡ã€‚ä¸‰ç§ç±»å‹çš„å¯ä»¥è¿è¡Œåœ¨åä»¥ï¼Œ1.éŸ³ä¹2.location3.voipå£°æ˜ä½ éœ€è¦çš„åå°ä»»åŠ¡Info.plistä¸­æ·»åŠ UIBackgroundModesé”®å€¼ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªstringçš„å€¼ï¼ŒåŒ…æ‹¬audio:åœ¨åå°æä¾›å£°éŸ³æ’­æ”¾åŠŸèƒ½ï¼ŒåŒ…æ‹¬éŸ³é¢‘æµå’Œæ’­æ”¾è§†é¢‘æ—¶çš„å£°éŸ³locationï¼šåœ¨åå°å¯ä»¥ä¿æŒç”¨æˆ·çš„ä½ç½®ä¿¡æ¯voipï¼šåœ¨åå°ä½¿ç”¨VOIPåŠŸèƒ½ å®ç°VOIPåº”ç”¨ï¼šVOIPç¨‹åºéœ€è¦ç¨³å®šçš„ç½‘ç»œå»è¿æ¥å’Œå®ƒç›¸å…³çš„æœåŠ¡ï¼Œè¿™æ ·å®ƒæ‰èƒ½æ¥åˆ°æ¥ç”µå’Œå…¶ä»–ç›¸å…³çš„æ•°æ®ã€‚ç³»ç»Ÿå…è®¸VOIPç¨‹åºè¢«æŒ‚æ–­å¹¶æä¾›ç»„ä»¶å»ç›‘å¬å®ƒä»¬çš„socketsï¼Œè€Œä¸æ˜¯åœ¨ä»»æ„æ—¶å€™éƒ½å¤„äºå”¤é†’çŠ¶æ€ã€‚è®¾ç½®VOIPåº”ç”¨ç¨‹åºå¦‚ä¸‹ï¼šAã€ æ·»åŠ UIBackgroundModesä¸­çš„VOIPé”®å€¼Bã€ ä¸ºVOIPè®¾ç½®ä¸€ä¸ªåº”ç”¨ç¨‹åºsocketCã€ åœ¨ç§»å‡ºåå°ä¹‹å‰ï¼Œè°ƒç”¨setKeepAliveTimeout:handler:æ–¹æ³•å»å»ºç«‹ä¸€ä¸ªå®šæœŸæ‰§è¡Œçš„handlerï¼Œä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œè¿™ä¸ªhandleræ¥ä¿æŒæœåŠ¡çš„è¿æ¥ã€‚(BOOL backgroundAccepted = [[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^{ [self backgroundHandler]; }]; if (backgroundAccepted) { NSLog(@â€VOIP backgrounding acceptedâ€); }ä¸ºäº†é˜²æ­¢æ–­è¿ï¼Œvoipç¨‹åºéœ€è¦å®šæœŸè¢«å”¤é†’å»æ£€æŸ¥å®ƒçš„æœåŠ¡ã€‚ä¸ºäº†å®¹æ˜“å®ç°è¿™ä¸ªè¡Œä¸ºï¼ŒIOSé€šè¿‡ä½¿ç”¨ï¼ˆUIApplication setKeepAliveTimeout:handler:ï¼‰æ–¹æ³•å»ºç«‹ä¸€ä¸ªç‰¹æ®Šçš„å¥æŸ„ã€‚ä½ å¯ä»¥åœ¨applicationDidEnterBackgroundæ–¹æ³•ä¸­å»ºç«‹è¯¥å¥æŸ„ã€‚ä¸€æ—¦å»ºç«‹ï¼Œç³»ç»Ÿè‡³å°‘ä¼šåœ¨è¶…æ—¶ä¹‹å‰è°ƒç”¨è¯¥å¥æŸ„ä¸€æ¬¡ï¼Œæ¥å”¤é†’ä½ çš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªkeep-alive handleråœ¨åå°æ‰§è¡Œï¼Œå¿…é¡»å°½å¿«çš„è¿”å›å‚æ•°ï¼Œå®ƒæœ‰æœ€å¤š30ç§’çš„æ—¶é—´æ¥æ‰§è¡Œæ‰€éœ€çš„ä»»åŠ¡ï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å¥æŸ„æ²¡æœ‰è¿”å›ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚å½“ä½ å»ºç«‹äº†handlerä¹‹åï¼Œç¡®å®šåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœ€å¤§è¶…æ—¶ã€‚ç³»ç»Ÿä¿è¯ä¼šåœ¨æœ€å¤§è¶…æ—¶ä¹‹å‰è°ƒç”¨handlerï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥ä½ çš„handlerå¿…é¡»åœ¨ä½ ç”³æ˜çš„è¶…æ—¶ä¹‹å‰åšå¥½æ‰§è¡Œç¨‹åºçš„å‡†å¤‡)Dã€ è®¾ç½®ä½ çš„audio sessionå»å¤„ç†è¿™ç§åˆ‡æ¢ å®‰æ’Local Notificationçš„ä¼ é€’UILocalNotificationç±»æä¾›äº†ä¸€ç§æ–¹æ³•æ¥ä¼ é€’local notificationsã€‚å’Œpush notificationséœ€è¦è®¾ç½®remote serverä¸åŒï¼Œlocal notifications åœ¨ç¨‹åºä¸­å®‰æ’å¹¶åœ¨å½“å‰çš„è®¾å¤‡ä¸Šæ‰§è¡Œã€‚æ»¡è¶³å¦‚ä¸‹æ¡ä»¶å¯ä»¥ä½¿ç”¨è¯¥èƒ½åŠ›ï¼š1ã€ä¸€ä¸ªåŸºäºæ—¶é—´çš„ç¨‹åºï¼Œå¯ä»¥åœ¨å°†æ¥ç‰¹å®šçš„æ—¶é—´è®©ç¨‹åºpost ä¸€ä¸ªalertï¼Œæ¯”å¦‚é—¹é’Ÿ2ã€ä¸€ä¸ªåœ¨åå°è¿è¡Œçš„ç¨‹åºï¼Œpost ä¸€ä¸ªlocal notificationå»å¼•èµ·ç”¨æˆ·çš„æ³¨æ„ä¸ºäº†å®‰æ’local notification çš„ä¼ é€’ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªUILocalNotificationçš„å®ä¾‹ï¼Œå¹¶è®¾ç½®å®ƒï¼Œä½¿ç”¨UIApplicationç±»æ–¹æ³•æ¥å®‰æ’å®ƒã€‚Local notificationå¯¹è±¡åŒ…å«äº†æ‰€è¦ä¼ é€’çš„ç±»å‹ï¼ˆsoundï¼Œalertï¼Œæˆ–è€…badgeï¼‰å’Œæ—¶é—´ä½•æ—¶å‘ˆç°ï¼‰ ã€‚UIApplicationç±»æ–¹æ³•æä¾›é€‰é¡¹å»ç¡®å®šæ˜¯ç«‹å³ä¼ é€’è¿˜æ˜¯åœ¨æŒ‡å®šçš„æ—¶é—´ä¼ é€’ã€‚Listing 4-3 Scheduling an alarm notification (void)scheduleAlarmForDate:(NSDate)theDate{UIApplication app = [UIApplication sharedApplication];NSArray oldNotifications = [app scheduledLocalNotifications];// Clear out the old notification before scheduling a new one.if ([oldNotifications count] &gt; 0)[app cancelAllLocalNotifications];// Create a new notification.UILocalNotification alarm = [[[UILocalNotification alloc] init] autorelease];if (alarm){alarm.fireDate = theDate;alarm.timeZone = [NSTimeZone defaultTimeZone];alarm.repeatInterval = 0;alarm.soundName = @â€alarmsound.cafâ€;alarm.alertBody = @â€Time to wake up!â€;[app scheduleLocalNotification:alarm];}}(å¯ä»¥æœ€å¤šåŒ…å«128ä¸ª local notifications active at any given time, any of which can be configured to repeat at a specified interval.)å¦‚æœåœ¨è°ƒç”¨è¯¥notificationçš„æ—¶å€™ï¼Œç¨‹åºå·²ç»å¤„äºå‰å°ï¼Œé‚£ä¹ˆapplicationï¼šdidReceiveLocalNotificationï¼šæ–¹æ³•å°†å–è€Œä»£ä¹‹ã€‚ voipä¸socketå®ç°åå°æ¨é€1.æ‰¾åˆ°è¯¥æ–‡ä»¶,æ·»åŠ è¯¥é¡¹(1)èœ—ç‰›å¸®-Info.plist(2)Required background modeså®ƒçš„itemï¼šApp provides Voice over IP services 2.åœ¨socketè¿æ¥æˆåŠŸä»£ç†é‡Œé¢1234567-(void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port//å»ºç«‹è¿æ¥æˆåŠŸåæ‰§è¡Œçš„ä»£ç†&#123; //åå°æŒ‚èµ·voip [socket performBlock:^&#123; [socket enableBackgroundingOnSocket]; &#125;]; &#125; 3.åœ¨æ”¶åˆ°socketæ¶ˆæ¯ä»£ç†é‡Œé¢1234567891011121314151617181920212223242526-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag//æ¥æ”¶åˆ°æ¶ˆæ¯æ‰§è¡Œçš„ä»£ç†ã€‚&#123; [socket readDataWithTimeout:-1 tag:0];//è¿™å¥è¯å¤ªé‡è¦äº† UIApplication *application=[UIApplication sharedApplication]; if (application.applicationState==UIApplicationStateBackground||application.applicationState==UIApplicationStateInactive ) &#123; NSArray *oldNotifications=[application scheduledLocalNotifications]; if ([oldNotifications count]&gt;0) &#123; [application cancelAllLocalNotifications]; &#125; UILocalNotification *alarm=[[UILocalNotification alloc] autorelease]; if (alarm) &#123; alarm.fireDate=[NSDate date]; alarm.timeZone=[NSTimeZone defaultTimeZone]; alarm.repeatInterval=0; [Single sharedSingle].iconNumber++; alarm.applicationIconBadgeNumber=[Single sharedSingle].iconNumber; alarm.soundName=@\"alarmsound.caf\"; alarm.alertBody=[jsonDictionary valueForKey:@\"sendmsg\"]; [application scheduleLocalNotification:alarm]; &#125; &#125; 4.//æŒ‚èµ·æ—¶ï¼Œæœ¬æ“ä½œæ˜¯ä¸ºäº†600ç§’é‡å†™è¿æ¥ä¸€æ¬¡socketï¼Œä¿æŒsocketåœ¨çº¿12345678910111213141516171819202122232425262728293031- (void)applicationDidEnterBackground:(UIApplication *)application&#123; [[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^&#123; [[NSNotificationCenter defaultCenter]postNotificationName:@\"CreatSocket\" object:nil userInfo:nil];&#125;];&#125;-(void)creatSocket&#123; if (![[Single sharedSelfMemberID] isEqualToString:@\"\"]) &#123;//ç™»é™†äº† [Single sharedSingle].socket.delegate=self; [Single sharedSingle].socket.delegateQueue=dispatch_get_main_queue(); NSError *err = nil; if(![socket connectToHost:socketURL onPort:socketPort error:&amp;err]) &#123; NSLog(@\"%@\",err); [[Single sharedSingle].socket readDataWithTimeout:-1 tag:0]; &#125; else &#123; [[Single sharedSingle].customStatueBar show]; [Single sharedSingle].customStatueBar.messageLabel.text=@\"è¿æ¥ä¸­...\"; NSLog(@\"ok\"); &#125; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[]},{"title":"AFNNetWorking-åˆ†æ","slug":"AFNNetWorking","date":"2016-05-13T10:42:40.000Z","updated":"2020-05-27T00:44:21.000Z","comments":true,"path":"2016/05/13/AFNNetWorking/","link":"","permalink":"https://www.littlewhale.xyz/2016/05/13/AFNNetWorking/","excerpt":"åŸºäºASIä¹‹åï¼ŒAFNåº”è¯¥æ˜¯æ¯”è¾ƒæµè¡Œçš„iosç¬¬ä¸‰æ–¹ã€‚GIthub AFNetWorking.è¿™é‡Œï¼Œå…ˆè´´æˆ‘ä¹‹å‰åšé¡¹ç›® åŸºäºAFNçš„å°è£…ã€‚ä¹‹åï¼Œè§£é‡Šä¸‹AFNetWorking çš„ç›¸å…³çŸ¥è¯†ï¼ŒAFURLConnectionOperation,SSL å®‰å…¨AFSecurityPolicyã€‚","text":"åŸºäºASIä¹‹åï¼ŒAFNåº”è¯¥æ˜¯æ¯”è¾ƒæµè¡Œçš„iosç¬¬ä¸‰æ–¹ã€‚GIthub AFNetWorking.è¿™é‡Œï¼Œå…ˆè´´æˆ‘ä¹‹å‰åšé¡¹ç›® åŸºäºAFNçš„å°è£…ã€‚ä¹‹åï¼Œè§£é‡Šä¸‹AFNetWorking çš„ç›¸å…³çŸ¥è¯†ï¼ŒAFURLConnectionOperation,SSL å®‰å…¨AFSecurityPolicyã€‚ é¡¹ç›®AFNetWorking è¯·æ±‚å°è£…éƒ¨åˆ†ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215 #å…³äº åŸºäºAFNç½‘ç»œè¯·æ±‚çš„get,postæ–¹æ³•// BaseDataService.m// LvJinKu//// Created by lvjinku on 15/9/8.// Copyright (c) 2015å¹´ lvjinku. All rights reserved.//#import \"BaseDataService.h\"#import \"DFReachabilityUtil.h\"#import \"NSString+RRAPI.h\"#import \"JSONKit.h\"static const NSString *LvJinKuAgency = @\"root\";static const NSString *LvJinKuSecurity = @\"permission\";@interface BaseDataService()@property (nonatomic,strong) NSMutableDictionary *requestParams;-(NSString *) acquireBaseRequestParamDictionary;@end@implementation BaseDataService@synthesize manager,requestType,requestParams;#pragma mark - Lifecycle- (instancetype)init&#123; self = [super init]; if (self) &#123; manager = [[AFHTTPRequestOperationManager alloc] init]; manager.requestSerializer.timeoutInterval = NetworkTimeoutInterval; requestType = RequestTypeGet; requestParams = [NSMutableDictionary dictionary]; &#125; return self;&#125;#pragma mark - Method-(void)executeRequest&#123; //ç½‘ç»œä¸å¯ç”¨ if (![DFReachabilityUtil isNetworkAvailable]) &#123; NSError *error = [NSError errorWithDomain:CustomErrorDomain code:CustomErrorConnectFailed userInfo:nil]; [self onError:error]; return; &#125; switch (requestType) &#123; case RequestTypeGet: &#123; NSDictionary *requestParamsDic = @&#123;@\"xml\":[self acquireBaseRequestParamDictionary]&#125;; NSLog(@\"getè¯·æ±‚å‚æ•°ï¼š%@\", [self acquireBaseRequestParamDictionary]); //å‚æ•°,ç®€å•çš„getè¯·æ±‚ [manager GET:[self getRequestDomain] parameters:requestParamsDic success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; [self onSuccess:responseObject]; &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; NSLog(@\"é”™è¯¯æ—¥å¿—ï¼š%@\",error.localizedDescription); [self onError:error]; &#125;]; break; &#125; case RequestTypePost: &#123; //å‚æ•°,ç®€å•çš„postè¯·æ±‚ NSDictionary *requestParamsDic = @&#123;@\"xml\":[self acquireBaseRequestParamDictionary]&#125;; [manager POST:[self getRequestDomain] parameters:requestParamsDic success:^(AFHTTPRequestOperation *operation, id responseObject)&#123; [self onSuccess:responseObject]; &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; [self onError:error]; &#125;]; break; &#125; case RequestTypePostMultipart: &#123; //æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶ç±»å‹ BOOL isFile = NO; for (NSString * key in requestParams.allKeys) &#123; id value = requestParams[key]; //åˆ¤æ–­è¯·æ±‚å‚æ•°æ˜¯å¦æ˜¯æ–‡ä»¶æ•°æ® if ([value isKindOfClass:[NSData class]]) &#123; isFile = YES; break; &#125; &#125; if(isFile) &#123; //ä¸Šä¼ æ–‡ä»¶ [manager POST:[self getRequestDomain] parameters:requestParams constructingBodyWithBlock:^(id formData) &#123; for (NSString *key in requestParams) &#123; id value = requestParams[key]; if ([value isKindOfClass:[NSData class]]) &#123; [formData appendPartWithFileData:value name:key fileName:key mimeType:@\"image/jpeg\"]; &#125; &#125; &#125; success:^(AFHTTPRequestOperation *operation, id responseObject) &#123; [self onSuccess:responseObject]; &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123; [self onError:error]; &#125;]; &#125; break; &#125; default: break; &#125; &#125;-(NSString *) getRequestDomain&#123; return @\"https://www.lvjinku.com/Home/Router/doRoute\";&#125;-(void) onSuccess:(id)result&#123; if (result) &#123; BaseResponse *response = [[BaseResponse alloc] initWithData:result]; response.requestAPICode = self.requestApiCode; if (response.error == 0) &#123; NSLog(@\"reqest finished:%@\",result); //è§£æï¼Œå°†responseObjectè®¾ç½®æˆmodelå¯¹è±¡ [self parseResponse:response]; if (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestSuccess:)]) &#123; [_delegate onRequestSuccess:response]; &#125; &#125;else&#123; if (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestStatusError:)]) &#123; [_delegate onRequestStatusError:response]; &#125; &#125; &#125; &#125;-(void) onError:(NSError *)error&#123; if (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestError:)]) &#123; [_delegate onRequestError:error]; &#125;&#125;//é…ç½®è¯·æ±‚å‚æ•° xmlçš„å€¼-(NSString *) acquireBaseRequestParamDictionary&#123; [self setRequestParams:self.requestParams]; //jsonå­—ç¬¦ä¸² NSMutableDictionary *baseRequestDictionary = [NSMutableDictionary dictionary]; [baseRequestDictionary setObject:LvJinKuAgency forKey:@\"agency\"]; [baseRequestDictionary setObject:LvJinKuSecurity forKey:@\"security\"]; [baseRequestDictionary setObject:[self getAPIRequestMethodName] forKey:@\"serviceCode\"]; [baseRequestDictionary setObject:self.requestParams forKey:@\"params\"]; NSString *requestParamJsonStr = [self.requestParams JSONString]; NSString *tokenIdStr = [NSString stringWithFormat:@\"%@%@%@%@\",LvJinKuAgency,LvJinKuSecurity,[self getAPIRequestMethodName],requestParamJsonStr]; NSString *tokenId = [tokenIdStr MD5Code]; [baseRequestDictionary setObject:tokenId forKey:@\"tokenid\"]; //md5åŠ å¯† NSString *baseRequestParamJsonStr = [baseRequestDictionary JSONString]; return baseRequestParamJsonStr; &#125;/** * è·å–è¯·æ±‚apiçš„å…·ä½“æ¥å£æ–¹æ³•å * * @return &lt;#return value description#&gt; */-(NSString *) getAPIRequestMethodName&#123; return @\"\";&#125;/** * è§£æresponse å­—æ®µ * * @param response &lt;#response description#&gt; */-(void) parseResponse:(BaseResponse *)response&#123; //å­ç±»è¦†ç›–è¯¥æ–¹æ³•è¿›è¡Œè§£æ&#125;@end ã€åé¢æˆ‘å°†ä¼šç»“åˆHttpè¯·æ±‚å°è£…è§£è€¦ å†™ä¸€ä¸ªç³»åˆ—å…³äºHTTPè¯·æ±‚è‡ªå®šä¹‰å°è£…çš„è§£æï¼Œç»“åˆAFNå°è£…ï¼ŒJSONè§£æï¼Œä¸‹æ‹‰åˆ·æ–°ï¼Œåˆ†é¡µã€‘ AFNetWorking.h æ–‡ä»¶ä»£ç 12345678910111213141516171819202122#import &lt;Foundation/Foundation.h&gt;#import &lt;Availability.h&gt;#ifndef _AFNETWORKING_ #define _AFNETWORKING_ #import \"AFURLRequestSerialization.h\" #import \"AFURLResponseSerialization.h\" #import \"AFSecurityPolicy.h\" #import \"AFNetworkReachabilityManager.h\" #import \"AFURLConnectionOperation.h\" #import \"AFHTTPRequestOperation.h\" #import \"AFHTTPRequestOperationManager.h\"#if ( ( defined(__MAC_OS_X_VERSION_MAX_ALLOWED) &amp;&amp; __MAC_OS_X_VERSION_MAX_ALLOWED &gt;= 1090) || \\ ( defined(__IPHONE_OS_VERSION_MAX_ALLOWED) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 70000 ) ) #import \"AFURLSessionManager.h\" #import \"AFHTTPSessionManager.h\"#endif#endif /* _AFNETWORKING_ */ ä¸€ã€ç»¼è¿°#ç±»åº“çš„å¤´æ–‡ä»¶AFNetworking.hå¼•å…¥äº†ä¸‹é¢çš„æ‰€æœ‰ç±»åº“ï¼Œå¹¶å¯ä»¥æ ¹æ®ä¸åŒçš„ç³»ç»Ÿä½¿ç”¨ä¸åŒçš„å®ç°æ–¹å¼ã€‚ 1ã€AFURLConnectionOperation12AFURLConnectionOperation.h æ–‡ä»¶ @interface AFURLConnectionOperation : NSOperation &lt;NSURLConnectionDelegate, NSURLConnectionDataDelegate, NSSecureCoding, NSCopying&gt; AFNæœ€åŸºç¡€çš„ç±»ç»§æ‰¿è‡ªNSOperationç±»ï¼Œå°†ç½‘ç»œè¯·æ±‚ä¾é™„åˆ°ä¸€ä¸ªoperationä¸Šã€‚ä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆçš„æ§åˆ¶å¹¶è§‚å¯Ÿä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„åˆ›å»ºã€è¿›è¡Œã€å–æ¶ˆã€å®Œæˆã€æš‚åœæ¢å¤ã€å¼‚å¸¸ç­‰é—®é¢˜åŠçŠ¶æ€ã€‚ 2ã€AFHTTPRequestOperation12345AFHTTPRequestOperation.h æ–‡ä»¶ /**`AFHTTPRequestOperation` is a subclass of `AFURLConnectionOperation` for requests using the HTTP or HTTPS protocols. It encapsulates the concept of acceptable status codes and content types, which determine the success or failure of a request.*/@interface AFHTTPRequestOperation : AFURLConnectionOperation HTTPæˆ–HTTPSåè®®è¯·æ±‚çš„AFURLConnectionOperationçš„å­ç±»ã€‚å®ƒå°è£…çš„å¯æ¥å—çŠ¶æ€ç å’Œå†…å®¹çš„ç±»å‹ï¼Œåˆ¤å®šä¸€ä¸ªè¯·æ±‚ç»“æœæ˜¯æˆåŠŸæˆ–å¤±è´¥ã€‚å®é™…ä¸Šå¯¹ç³»ç»Ÿçš„HTTPç½‘ç»œè¯·æ±‚å¢åŠ äº†å‡ ä¸ªHTTPéœ€è¦ç”¨åˆ°çš„å‚æ•°ã€‚ 3ã€AFHTTPRequestOperationManagerè¿™ä¸ªç±»æ˜¯AFNç±»åº“çš„æ ¸å¿ƒç±»ã€‚å®ƒå°è£…å®Œæˆäº†ä¸€ç§é€šç”¨çš„æ¨¡å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾å‹å¥½çš„å®Œæˆè¯·æ±‚çš„åˆ›å»ºã€å“åº”çš„ç³»åˆ—åŒ–ï¼Œç½‘ç»œçŠ¶æ€çš„ç›‘æ§ä»¥åŠå®‰å…¨ç­–ç•¥ä»¥åŠæ¯ä¸€ä¸ªè¯·æ±‚operationçš„ç®¡ç†ï¼ˆoperationçš„ç›¸äº’ä¾èµ–æˆ–çŠ¶æ€æ”¹å˜ï¼‰ã€‚ 4ã€AFURLSessionManageriOS7ä¹‹åï¼Œè‹¹æœå¢åŠ äº†æ–°çš„ç½‘ç»œè¯·æ±‚ç±»â€“NSURLSessionã€‚AFNå®˜æ–¹æ¨èiOS 7 æˆ–è€… Mac OS X 10.9ä»¥ä¸Šçš„ï¼Œæœ€å¥½ä½¿ç”¨è¯¥ç±»å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå–ä»£AFHTTPRequestOperationManagerã€‚åŸºäºç›®å‰å›½å†…appå¤§éƒ½æœ€ä½é€‚é…çš„iOS6ï¼Œè¯¥ç±»çš„ç”¨é€”è¿˜ä¸æ˜¯å¤ªå¹¿æ³›ã€‚ 5ã€AFNetworkReachabilityManagerç½‘ç»œçš„è¿é€šçŠ¶æ€ç›‘æ§ä»¥åŠç½‘ç»œçš„ç±»å‹ã€‚å®é™…æ˜¯å°†è‹¹æœå®˜æ–¹æä¾›çš„Reachabilityçš„ç±»åå’Œé€šçŸ¥åæ›´æ¢äº†ä¸€ä¸‹ï¼Œé˜²æ­¢å’Œç³»ç»Ÿæä¾›çš„ç±»çš„é€šçŸ¥åä»¥åŠç±»åçš„å†²çªã€‚ 6ã€AFURLRequestSerialization1ï¼šç¬¦åˆè¿™ä¸ªåè®®çš„å¯¹è±¡ç”¨äºå¤„ç†è¯·æ±‚ï¼Œå®ƒå°†è¯·æ±‚å‚æ•°è½¬æ¢ä¸º query string æˆ–æ˜¯ entity body çš„å½¢å¼ï¼Œå¹¶è®¾ç½®å¿…è¦çš„ headerã€‚2ï¼šæ„å»ºmultipartè¯·æ±‚ã€‚ 7ã€AFURLResponseSerializationéµå¾ªAFURLResponseSerializationåè®®çš„å¯¹è±¡ï¼Œç”¨äºéªŒè¯ã€åºåˆ—åŒ–å“åº”åŠç›¸å…³æ•°æ®ï¼Œè½¬æ¢ä¸ºæœ‰ç”¨çš„å½¢å¼ï¼Œæ¯”å¦‚ JSON å¯¹è±¡ã€å›¾åƒã€ç”šè‡³åŸºäºmantleçš„æ¨¡å‹å¯¹è±¡ã€‚ 8ã€AFSecurityPolicyåŸºäºHTTPS é…ç½®ä¸€äº›è¯·æ±‚è¯ä¹¦ç›¸å…³çš„å®‰å…¨ç­–ç•¥ã€‚è®²åˆ°AFSecurityPolicy ï¼Œæœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹HTTPS.HTTPS è¿æ¥å»ºç«‹è¿‡ç¨‹å¤§è‡´æ˜¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ªè¯ä¹¦ï¼Œå®¢æˆ·ç«¯é‡Œå­˜æœ‰å„ä¸ªå—ä¿¡ä»»çš„è¯ä¹¦æœºæ„æ ¹è¯ä¹¦ï¼Œç”¨è¿™äº›æ ¹è¯ä¹¦å¯¹æœåŠ¡ç«¯ è¿”å›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œç»éªŒè¯å¦‚æœè¯ä¹¦æ˜¯å¯ä¿¡ä»»çš„ï¼Œå°±ç”Ÿæˆä¸€ä¸ªpre-master secretï¼Œç”¨è¿™ä¸ªè¯ä¹¦çš„å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†åå¾—åˆ°pre-master secretï¼Œå†æ ¹æ®æŸç§ç®—æ³•ç”Ÿæˆmaster secretï¼Œå®¢æˆ·ç«¯ä¹ŸåŒæ ·æ ¹æ®è¿™ç§ç®—æ³•ä»pre-master secretç”Ÿæˆmaster secretï¼ŒéšååŒæ–¹çš„é€šä¿¡éƒ½ç”¨è¿™ä¸ªmaster secretå¯¹ä¼ è¾“æ•°æ®è¿›è¡ŒåŠ å¯†è§£å¯†ã€‚12345678910111213141516171819AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; AFSecurityPolicy *securityPolicy = [[AFSecurityPolicy alloc] init]; [securityPolicy setAllowInvalidCertificates:NO]; [securityPolicy setSSLPinningMode:AFSSLPinningModeCertificate]; [securityPolicy setValidatesDomainName:YES];[securityPolicy setValidatesCertificateChain:NO]; manager.securityPolicy = securityPolicy;## SSL Pinning Modes The following constants are provided by `AFSSLPinningMode` as possible SSL pinning modes. enum &#123; AFSSLPinningModeNone, AFSSLPinningModePublicKey, AFSSLPinningModeCertificate, &#125;AFSSLPinningModeNone: ä»£è¡¨å®¢æˆ·ç«¯æ— æ¡ä»¶åœ°ä¿¡ä»»æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦ã€‚AFSSLPinningModePublicKey: ä»£è¡¨å®¢æˆ·ç«¯ä¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦ä¸æœ¬åœ°ä¿å­˜çš„è¯ä¹¦ä¸­ï¼ŒPublicKeyçš„éƒ¨åˆ†è¿›è¡Œæ ¡éªŒï¼›å¦‚æœæ­£ç¡®ï¼Œæ‰ç»§ç»­è¿›è¡Œã€‚AFSSLPinningModeCertificate: ä»£è¡¨å®¢æˆ·ç«¯ä¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦å’Œæœ¬åœ°ä¿å­˜çš„è¯ä¹¦ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬PublicKeyå’Œè¯ä¹¦éƒ¨åˆ†ï¼Œå…¨éƒ¨è¿›è¡Œæ ¡éªŒï¼›å¦‚æœæ­£ç¡®ï¼Œæ‰ç»§ç»­è¿›è¡Œã€‚AFSecurityPolicyç›¸å…³æ›´å¤šçŸ¥è¯†å¯ä»¥äº†è§£è¿™ç¯‡æ–‡ç«  AFSecurityPolicy AFURLConnectionOperation å®ç°åˆ†æ1ã€ç»¼è¿°AFURLConnectionOperationå°†Operationå’ŒURLConnectionç»“åˆåˆ°ä¸€èµ·ï¼Œåˆ©ç”¨operationå¯ä»¥ç›‘å¬åˆ°çŠ¶æ€ä»¥åŠå¯ä»¥å»ºç«‹ç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„ç‰¹æ€§ï¼Œå®ç°äº†å¯¹äºä¸€ä¸ªNSURLConnectionå¯¹è±¡çš„å®Œç¾æ§åˆ¶ï¼Œå¹¶å°†è¯·æ±‚çš„ç»“æœé€šè¿‡blockå‹å¥½çš„è¿”å›ã€‚ 2ã€å®ç°æ–‡ä»¶.mæˆ‘ä»¬æ€»ç»“ä¸‹.mä¸­è¿™ä¸ªç±»ä¸»è¦æœ‰å“ªäº›æ–¹æ³•ã€‚ 1ï¼‰ï¼šé¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒåˆ›å»ºäº†ä¸€ä¸ªå•ä¾‹çº¿ç¨‹ã€‚è¿™ä¸ªçº¿ç¨‹å°†ä¼šå¸¸é©»å†…å­˜ï¼Œç”¨æ¥å¤„ç†AFNå‘èµ·çš„æ‰€æœ‰è¯·æ±‚ä»»åŠ¡ã€‚å½“ç„¶ï¼Œçº¿ç¨‹ä¹Ÿè·Ÿéšç€ä¸€ä¸ªrunloopï¼ŒAFNå°†è¿™ä¸ªrunloopçš„æ¨¡å¼è®¾ç½®ä¸ºNSDefaultRunLoopModeã€‚NSDefaultRunLoopModeæ˜¯æ— æ³•æ£€æµ‹åˆ°connectionçš„çŠ¶æ€çš„ã€‚è¿™è¯´æ˜äº†ï¼ŒAFNå°†ä¸ä¼šåœ¨è¿™è¯¥çº¿ç¨‹å¤„ç†connectionå®Œæˆåçš„UIåˆ·æ–°ç­‰å·¥ä½œï¼Œè€Œæ˜¯ä¼šå°†æ•°æ®æŠ›ç»™ä¸»çº¿ç¨‹ï¼Œè®©ä¸»çº¿ç¨‹å»å®ŒæˆUIçš„åˆ·æ–°ã€‚2ï¼‰ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥ç±»é€šè¿‡æ¥å—è¯·æ±‚çš„å­—ç¬¦ä¸²ï¼Œåˆ›å»ºäº†URLRequestä»¥åŠNSURLConnectionå¯¹è±¡ã€‚ä»è€Œå»è¿›è¡Œè¯·æ±‚ã€‚3ï¼‰ï¼šå®ç°æ–‡ä»¶å¤šæ¬¡ä½¿ç”¨åˆ°äº†é”ï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„å®‰å…¨ã€‚å½“ç„¶ä»–ä¹Ÿå®ç°äº†å‡ ä¸ªæ•°æ®çš„NSCopingåè®®ã€‚4ï¼‰ï¼šè¯·æ±‚çš„åˆ›å»ºã€è¿›è¡Œã€å–æ¶ˆã€å®Œæˆã€æš‚åœæ¢å¤ã€å¼‚å¸¸ç­‰é—®é¢˜åŠçŠ¶æ€çš„æ§åˆ¶ã€‚è¿™é‡Œè®²ä¸€ä¸‹æš‚åœå’Œæ¢å¤ã€‚æš‚åœå®é™…ä¸Šå°†ç½‘ç»œè¯·æ±‚å–æ¶ˆæ‰äº†ã€‚ä½†æ˜¯ç”±äºå®ç°äº†nscopingåè®®ï¼Œå·²ç»ä¸‹è½½åˆ°æ•°æ®å¾—ä»¥ä¿å­˜ä¸‹æ¥ã€‚ä¸‹æ¬¡è¿›è¡Œç›¸åŒè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†å·²ç»ä¸‹è½½åˆ°çš„æ•°æ®çš„èŠ‚ç‚¹ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨è¿™äº›éƒ¨é—¨çš„æ•°æ®æˆ‘ä»¬ä¸éœ€è¦äº†ï¼ŒæœåŠ¡å™¨æ ¹æ®æˆ‘å‘é€çš„è¿”å›èŠ‚ç‚¹ç»™æˆ‘è¿”å›ç›¸åº”çš„æ•°æ®å³å¯ã€‚ä»è€Œå®ç°äº†æš‚åœå’Œæ¢å¤åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ–­ç‚¹ç»­ä¼ ã€‚5ï¼‰ï¼šoperationæ–¹æ³•çš„é‡å†™ã€‚6ï¼‰ï¼šçŠ¶æ€çš„å„ç§æ§åˆ¶æ–¹æ³•çš„å®ç°ä»¥åŠå‘é€çŠ¶æ€æ”¹å˜çš„é€šçŸ¥ 3ã€æ¥å£æ–‡ä»¶.hæ¥å£æ–‡æ¡£ä¸­çš„å±æ€§æ–¹æ³•ï¼ŒåŸºæœ¬å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹æ³• 1ï¼‰ï¼šåªè¯»çš„æ•°æ®ï¼Œè®©ç®¡ç†è€…å¯ä»¥æ¥æ”¶åˆ°ã€‚2ï¼‰ï¼šè®¾ç½®runloopçš„modesã€‚ä¸å†ä½¿ç”¨ç±»åº“é»˜è®¤è®¾ç½®çš„defaultmodesã€‚3ï¼‰ï¼šçŠ¶æ€çš„æ§åˆ¶æ–¹æ³•4ï¼‰ï¼šå®‰å…¨ç­–ç•¥çš„è®¾ç½®æ€»è€Œè¨€ä¹‹ï¼Œæ¥å£æ–‡ä»¶.hæš´éœ²çš„æ¥å£éƒ½æ˜¯ä¸ºäº†è®©managerå¯ä»¥å»å®Œå…¨æ§åˆ¶è¿™ä¸ªoperationä»¥åŠå…¶ä¸­çš„ç½‘ç»œè¯·æ±‚ã€‚ AFHTTPRequestOperationManger2.0åï¼ŒAFNå°†ä¸€äº›è®¾ç½®æå–å‡ºæ¥ï¼Œçº¿ç¨‹äº†ä¸“é—¨çš„ç±»ã€AFSecurityPolicyã€AFURLRequestSerializationã€AFURLResponseSerializationã€‘ã€‚ç°åœ¨çœ‹æ¥ï¼ŒAFNæ•´ä½“çš„è®¾è®¡æ˜¯éå¸¸å®Œç¾çš„ã€‚è€¦åˆæ€§å˜å¾—éå¸¸ä½ï¼Œä¸€äº›1.0ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜ä¹Ÿå¾—åˆ°äº†æ”¹å–„ã€‚ 1ã€å®ç°æ–‡ä»¶.må®ç°æ–‡ä»¶è¾ƒä¸ºç®€å•ï¼Œå¯ä»¥çœ‹åˆ°ä»–åˆ›å»ºäº†ä¸€ä¸ªé˜Ÿåˆ—ã€‚å¹¶å°†å„ä¸ªoperationåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚åœ¨é˜Ÿåˆ—ä¸­ï¼Œå„ä¸ªè¯·æ±‚å°±å¯ä»¥è®¾ç½®ä¾èµ–å…³ç³»ï¼Œå¹¶å‘çš„æ•°é‡ç­‰ç­‰ã€‚ 2ã€æ¥å£æ–‡ä»¶.hæ¥å£æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ã€‚è¿™ä¸ªç±»å¯ä»¥è®¾ç½®AFSecurityPolicyã€AFURLRequestSerializationã€AFURLResponseSerialization ç­‰å‚æ•°äº†ã€‚è¿™å°±æ˜¯ç»¼è¿°æ‰€è¯´çš„é™ä½è€¦åˆæ€§çš„æ–¹å¼ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"}],"tags":[]},{"title":"2015å¹´æ€»ç»“","slug":"2015_Overview","date":"2016-02-03T09:03:44.000Z","updated":"2020-05-27T01:00:16.000Z","comments":true,"path":"2016/02/03/2015_Overview/","link":"","permalink":"https://www.littlewhale.xyz/2016/02/03/2015_Overview/","excerpt":"ä»Šå¤©æ˜¯2016å¹´ 2æœˆ 3å·äº†ï¼Œå†™è¿™ç¯‡åšæ–‡çš„æ—¶å€™ï¼Œæ‰‹è„šå†°å†·å†°å†·çš„ã€‚å›æƒ³èµ·èµ°è¿‡çš„2015å¹´ï¼Œè™½ç„¶ä¸æ˜¯å¾ˆé¡ºåˆ©ï¼Œå¥½å‡ æ¬¡é‡åˆ°å›°éš¾éƒ½æ˜¯åœ¨é›¶ç•Œç‚¹å¿«è¦æ”¾å¼ƒäº†ï¼Œè‡ªå·±çš„æœ€ååšæŒåˆè®©æˆ‘é‡æ–°çœ‹åˆ°å¸Œæœ›ã€‚å½“ç„¶ï¼Œæˆ‘ä¸€ç›´åšä¿¡ç­”æ¡ˆæ˜¯åœ¨æœ€åæ‰èƒ½å¾—åˆ°ã€‚æˆ‘çš„ç”Ÿæ´»ï¼Œæ€æƒ³ éƒ½åœ¨å˜åŒ–ç€ã€‚ä½†æˆ‘ä¸€ç›´åšä¿¡æ‰€ç»å†çš„ä¸€åˆ‡éƒ½å¯¹çš„ï¼Œè™½ç„¶æœ‰æ—¶å€™å›å¤´æƒ³äº†ä¸€äº›äº‹æƒ…çš„å†³å®šåï¼Œå¶å°”ä¼šæœ‰äº›é—æ†¾ï¼Œä½†æˆ‘ä¸€ç›´åœ¨è·Ÿç€å¿ƒèµ°ï¼Œæƒ³æ¸…æ¥šäº†ï¼Œå†³å®šäº†ï¼Œå°±å»åšã€‚ç”¨å¿ƒå»è‡ªå·±å–œæ¬¢åšå¾—äº‹ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›èŠ±åœ¨ä¸Šé¢æˆ‘åè€Œè§‰å¾—æ›´æœ‰æ„ä¹‰ã€‚","text":"ä»Šå¤©æ˜¯2016å¹´ 2æœˆ 3å·äº†ï¼Œå†™è¿™ç¯‡åšæ–‡çš„æ—¶å€™ï¼Œæ‰‹è„šå†°å†·å†°å†·çš„ã€‚å›æƒ³èµ·èµ°è¿‡çš„2015å¹´ï¼Œè™½ç„¶ä¸æ˜¯å¾ˆé¡ºåˆ©ï¼Œå¥½å‡ æ¬¡é‡åˆ°å›°éš¾éƒ½æ˜¯åœ¨é›¶ç•Œç‚¹å¿«è¦æ”¾å¼ƒäº†ï¼Œè‡ªå·±çš„æœ€ååšæŒåˆè®©æˆ‘é‡æ–°çœ‹åˆ°å¸Œæœ›ã€‚å½“ç„¶ï¼Œæˆ‘ä¸€ç›´åšä¿¡ç­”æ¡ˆæ˜¯åœ¨æœ€åæ‰èƒ½å¾—åˆ°ã€‚æˆ‘çš„ç”Ÿæ´»ï¼Œæ€æƒ³ éƒ½åœ¨å˜åŒ–ç€ã€‚ä½†æˆ‘ä¸€ç›´åšä¿¡æ‰€ç»å†çš„ä¸€åˆ‡éƒ½å¯¹çš„ï¼Œè™½ç„¶æœ‰æ—¶å€™å›å¤´æƒ³äº†ä¸€äº›äº‹æƒ…çš„å†³å®šåï¼Œå¶å°”ä¼šæœ‰äº›é—æ†¾ï¼Œä½†æˆ‘ä¸€ç›´åœ¨è·Ÿç€å¿ƒèµ°ï¼Œæƒ³æ¸…æ¥šäº†ï¼Œå†³å®šäº†ï¼Œå°±å»åšã€‚ç”¨å¿ƒå»è‡ªå·±å–œæ¬¢åšå¾—äº‹ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›èŠ±åœ¨ä¸Šé¢æˆ‘åè€Œè§‰å¾—æ›´æœ‰æ„ä¹‰ã€‚ å·¥ä½œç¼©å½±å‰8ä¸ªæœˆï¼Œæˆ‘åœ¨ä¸€å®¶ç¤¾äº¤å…¬å¸æ‹…ä»»ioså¼€å‘ä¸€èŒã€‚æ¯å‘¨6å¤©ç­ï¼Œæ¯å¤©10ç‚¹åˆ°æ™šä¸Š10ç‚¹ã€‚å½“ç„¶æˆ‘ä¸æ˜¯è¯´å·¥ä½œæ—¶é—´å¾ˆé•¿ï¼Œæ­£çœŸå·¥ä½œçš„æ—¶é—´ä¹Ÿæ‰5åˆ°6ä¸ªå¤šå°æ—¶ã€‚è¿™æ ·é•¿æœŸä¸‹å»ï¼Œä¸€ï¼šèº«ä½“é€æ”¯ã€‚ äºŒï¼šå·¥ä½œæ•ˆç‡é™ä½ã€‚ä¸‰ï¼šç”Ÿæ´»ä¸Šå¤§éƒ¨åˆ†æ—¶é—´è¢«å ç”¨ï¼Œæœ‰äº›äº‹æƒ…å¤„ç†å¾—ä¸æ˜¯å¾ˆå¥½ã€‚ æˆ‘å–œæ¬¢å·¥ä½œå’Œç”Ÿæ´»å®‰æ’éƒ½é€‚å½“çš„èŠ‚å¥ã€‚ä¼ä¸šæ–‡åŒ–é—®é¢˜ä¹Ÿæ— æ³•ä¸€ä¸‹å­æå»ºè®®å°±æ”¹å˜çš„ã€‚9æœˆåå…¥èŒä¸€å®¶P2På…¬å¸ï¼Œè´Ÿè´£IOSä»¥åŠçš„å¼€å‘ã€‚å¼€å‘å®Œåï¼Œè€æ¿ä¸€ç›´æ²¡æœ‰ä¸Šçº¿çš„æ„æ€ã€‚å·¥ä½œ2ä¸ªæœˆåï¼Œå…¬å¸å‘å±•æˆ˜ç•¥é‡åˆ°ç“¶é¢ˆï¼Œ15å¹´å¾ˆå¤šP2Pçš„å…¬å¸è·‘è·¯ï¼Œå‘å±•å¾—ä¸æ˜¯å¾ˆå¥½ã€‚åé¢å…¬å¸è½¬ç§»æ–¹å‘åšP2Pçš„ä¿¡æ¯å¹³å°äº†ã€‚åé¢æƒ¨çš„å°±æ˜¯å‘˜å·¥äº†ï¼Œæœ¬èº«å…¬å¸å¾ˆå°ï¼Œå‘˜å·¥æ²¡å‡ ä¸ªã€‚ä½†éƒ½è¢«é™å·¥èµ„äº†ã€‚åˆ°1æœˆ19å·ï¼Œæˆ‘ä¹Ÿç¦»èŒèµ°äº†ã€‚ ç»å†ä¸ŠåŠå¹´è¿‡å¾—ç‰¹åˆ«å……å®ï¼Œä¸Šç­ä¸‹ç­ã€‚ç§Ÿå®¤ ï¼Œå…¬å¸ ã€‚ä¸¤ç‚¹ä¸€çº¿ï¼Œæ¯å¤©è¿™æ ·ï¼Œéƒ½æ²‰æµ¸åœ¨ä»£ç ä¸­ã€‚é‚£æ®µæ—¥å­ï¼Œå¸ˆå‚…ä¹Ÿæ¯”è¾ƒå–œæ¬¢æˆ‘ã€‚ç§¯æå‘ä¸Šï¼Œèƒ½å¤Ÿå¿«é€Ÿå®Œæˆå¸ˆå‚…åˆ†é…çš„ä»»åŠ¡ï¼Œå’ŒåŒäº‹ä»–ä»¬å…³ç³»å¾ˆèæ´½ï¼Œç©å¾—å¾ˆå¥½ã€‚ä¹Ÿå¾ˆæœ‰è¯é¢˜ï¼Œæ¯å¤©ä¸­åˆæœåŠ¡å™¨ï¼Œandroid ,ioséƒ½æ˜¯ä¸€äº›ææŠ€æœ¯çš„äºº ä¸€èµ·å»åƒé¥­ã€‚èŠèŠæŠ€æœ¯ï¼Œå¼€å¼€ç©ç¬‘ï¼Œå“ˆã€‚é‚£æ®µæ—¶é—´æœ€å¼€å¿ƒäº†ã€‚è‡ªå·±ä¹Ÿæˆé•¿æœ€å¿«ã€‚å·¥ä½œå¿«åŠå¹´çš„æ ·å­ï¼Œæˆ‘å°±è¯·äº†ä¸€è¶Ÿå‡å»æ­å·ç©ã€‚å› ä¸ºä¼¯ä¼¯åœ¨é‚£è¾¹ï¼Œå»çœ‹çœ‹è¥¿æ¹–ï¼Œé’±å¡˜æ±Ÿã€‚é‚£æ®µæ—¶é—´å¾ˆç¾å¥½ï¼Œå¾ˆæ€€å¿µï¼Œå¾ˆæ”¾æ¾ã€‚çŸ­çŸ­çš„ç©ä¸€æ˜ŸæœŸã€‚ç„¶å6æœˆ1å·å°±åé£æœºå›æ¥äº†ã€‚ æ³¢æŠ˜çš„å…­æœˆå…­æœˆï¼Œé‚£ä¸ªæœˆæˆ‘ç”Ÿç—…äº†ã€‚èŠ±äº†8åƒå—é’±æ²»ç–—ã€‚æ¥ç€å®¶é‡Œåˆå‡ºç°ä¸€äº›äº‹æƒ…ï¼Œæ‰€ä»¥å·¥ä½œä¸€ç›´æ²¡æœ‰å¾ˆä¸“å¿ƒã€‚æ¥ç€å…¬å¸ä¹Ÿæ¥äº†ä¸€ä¸ªæ–°å¦¹å­ï¼Œå¹³é™çš„ç”Ÿæ´»ä¸€ä¸‹å­è¢«æ‰“ç ´äº†ã€‚åæ¥é‡åˆ°äº†é‚£è¡¨è¿°ä¸æ¸…å´å¾ˆæ¸´æœ›çš„ç¥åœ£ä¸œè¥¿åæ›°çˆ±æƒ…ã€‚æ¥ç€ç¬¬ä¸ƒä¸ªæœˆï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å¿ƒæ€éƒ½æ²¡æœ‰è®¤çœŸèŠ±åœ¨å·¥ä½œä¸Šã€‚æ¯å¤©éƒ½ä¼šå¼€å°å·®ï¼Œç„¶åè¶å¥¹ä¸æ³¨æ„å¤šçœ‹å¥¹å‡ çœ¼ã€‚é‚£æ®µæ—¶é—´ï¼Œå†™ç¨‹åºæ€»æ˜¯ç²—å¿ƒï¼Œbug . è¿˜æœ‰ä¸€ä¸ªbugæ²¡è§£å†³ . æ¥ç€ï¼Œéšç€ç›¸å¤„ã€‚8æœˆä»½æˆ‘ä»¬å°±å†ä¸€èµ·äº†ï¼Œåæ¥ä¸ƒå¤•æˆ‘é€ç«ç‘°ç»™å¥¹äº†ã€‚ä½†æ˜¯åŠä¸ªæœˆåï¼Œå› ä¸ºä¸€ä¸ªå°è¯¯ä¼šï¼Œåˆè®©æˆ‘æ²‰æµ¸åœ¨éš¾è¿‡å½“ä¸­ã€‚æ¥ä¸‹æ¥çš„ä¸€æ˜ŸæœŸï¼Œå¼‚å¸¸éš¾è¿‡ã€‚åæ¥åŒæ–¹å†·æˆ˜ã€‚çœ‹åˆ°å¥¹éš¾è¿‡ï¼Œå®¶é‡Œçäº‹é‡é‡ï¼Œå·¥ä½œä½œæ¯ç­‰ä¸åè°ƒï¼Œä¹Ÿç¡®å®ç´¯äº†ã€‚å½“æ—¶å†²åŠ¨å°±ç¦»èŒäº†ã€‚ã€‚ å…³äºçˆ±æƒ…çš„æƒ³æ³•çˆ±æƒ…æ˜¯åŒæ–¹çš„ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šåµæ¶ï¼Œä½†è¿™ä¹Ÿè®¸å°±æ˜¯å°æ’æ›²å§ã€‚ä¸­é—´ä¼šå‡ºç°å¾ˆå¤šç£¨åˆï¼Œæ­£æ˜¯å› ä¸ºè¿™äº›ï¼Œæ‰è®©å¯¹æ–¹å’Œè‡ªå·±å˜å¾—æ…¢æ…¢ç†æ€§æˆç†Ÿèµ·æ¥ï¼Œåªæœ‰ç›¸äº’åœ°å®½å®¹å¯¹æ–¹ï¼Œç†è§£å¯¹æ–¹ï¼Œæ‰èƒ½æ›´é•¿ä¹…åœ°èµ°ä¸‹å»ã€‚ç‡•å„¿ï¼Œæˆ‘çˆ±ä½ ã€‚ æ–°çš„ä¸€å¹´å‰åšå¾—äº‹æƒ…è™½ç„¶è¿™ä¸€å¹´æ›²æŠ˜å¤šå˜ï¼Œä½†ä¹Ÿè®©æˆ‘æˆé•¿ä¸å°‘ã€‚æ–°çš„ä¸€å¹´2016å¹´ä¸€æœˆï¼Œæˆ‘ä¸ºè‡ªå·±åšäº†è¿™äº›äº‹æƒ…ï¼Œ1.20å·ç¦»èŒäº†ã€‚21å·åˆ°31å·è¿™åå¤©ï¼š1ã€æ­å»ºäº†ä¸€ä¸ªä¸ªäººåšå®¢ç½‘ç«™ã€‚2ã€æ¨¡ä»¿ä¸€ä¸ªappåšäº†ä¸€ä¸ªAndroidç‰ˆdemo.(æ‰€æœ‰UIä»¥åŠåŠ¨æ•ˆ) åæœŸç­‰å®Œå–„æœåŠ¡å™¨åå°æ¥å£è°ƒé€šåï¼Œæˆ‘ä¼šå‘åšæ–‡å‰–ææ•´ä¸ªæ¶æ„ã€‚3ã€åšæŒæ¯å¤©å‚æ™šå»è·‘3åœˆã€‚ä»ç¬¬ä¸€å¤©çš„11åˆ†06ç§’ åˆ° ç¬¬ä¹å¤©çš„ 9åˆ† 06 ç§’ã€‚4ã€å‡†å¤‡å¥½äº†å¹´åçš„è®¡åˆ’ï¼Œä»¥åŠè¦å»åšçš„äº‹æƒ…ã€‚åˆ›ä¸šèµ°èµ·ã€‚ç›¸ä¿¡ç”Ÿæ´»ä¼šè¶Šæ¥è¶Šå¥½ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"https://www.littlewhale.xyz/categories/%E6%9D%82%E8%B0%88/"}],"tags":[]},{"title":"æ‰‹æ’•æœº-æ‹†ç¬”è®°æœ¬äº†è§£ç»“æ„","slug":"openTheNotebook","date":"2016-01-24T12:41:11.000Z","updated":"2020-05-27T00:50:22.000Z","comments":true,"path":"2016/01/24/openTheNotebook/","link":"","permalink":"https://www.littlewhale.xyz/2016/01/24/openTheNotebook/","excerpt":"è¿™å‡ å¤©ä»Šå¤©å¹¿å·çš„å¤©æ°”å¥½å†·ï¼Œæœ€ä½æ°”æ¸©0åº¦ã€‚ç¦»èŒåæœ‰å‡ å¤©äº†ï¼Œåœ¨å®¶é‡Œå†™ä»£ç ï¼Œå‚æ™šçš„æ—¶å€™å°±å»è·‘æ­¥ã€‚ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œå°±ç¨å¾®ä¼‘æ¯äº†ä¸‹ã€‚å‰å‡ å¤©åˆšå¥½æŠŠåšå®¢æ­å»ºèµ·æ¥äº†ï¼Œä»Šå¤©å°±è·Ÿå¤§å®¶å¤§æ¦‚è®²ä¸€ä¸‹ç¬”è®°æœ¬çš„ä¸»æ¿ç»“æ„ã€‚ä»¥ä¸‹å›¾ä¸ºä»…ä»Šå¤©åŠ¨æ‰‹æ‹†å¸åæ‰€æ‹ã€‚ï¼ˆæ³¨ï¼šäº²ï¼Œè¯·å‹¿å†²åŠ¨æ‹†å¸ç¬”è®°æœ¬ã€‚ï¼‰ ä¸»æ¿æ‹æ‘„å›¾ä¸»æ¿","text":"è¿™å‡ å¤©ä»Šå¤©å¹¿å·çš„å¤©æ°”å¥½å†·ï¼Œæœ€ä½æ°”æ¸©0åº¦ã€‚ç¦»èŒåæœ‰å‡ å¤©äº†ï¼Œåœ¨å®¶é‡Œå†™ä»£ç ï¼Œå‚æ™šçš„æ—¶å€™å°±å»è·‘æ­¥ã€‚ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œå°±ç¨å¾®ä¼‘æ¯äº†ä¸‹ã€‚å‰å‡ å¤©åˆšå¥½æŠŠåšå®¢æ­å»ºèµ·æ¥äº†ï¼Œä»Šå¤©å°±è·Ÿå¤§å®¶å¤§æ¦‚è®²ä¸€ä¸‹ç¬”è®°æœ¬çš„ä¸»æ¿ç»“æ„ã€‚ä»¥ä¸‹å›¾ä¸ºä»…ä»Šå¤©åŠ¨æ‰‹æ‹†å¸åæ‰€æ‹ã€‚ï¼ˆæ³¨ï¼šäº²ï¼Œè¯·å‹¿å†²åŠ¨æ‹†å¸ç¬”è®°æœ¬ã€‚ï¼‰ ä¸»æ¿æ‹æ‘„å›¾ä¸»æ¿ CPU å†…å­˜æ¡ ä¸»æ¿æ­£é¢ ä¸»æ¿èƒŒé¢ æŠ€æœ¯ä»æ¥å°±ä¸æ˜¯å› ä¸ºéš¾è€Œè®©æˆ‘ä»¬åœæ­¢ï¼Œåªæœ‰åŠ¨æ‰‹å°è¯•ï¼Œå»åšå°±å¯¹äº†ã€‚æ¬¢è¿å¤§å®¶æœ‰å…³ç¬”è®°æœ¬æ’è§£æ–¹é¢æœ‰å…³çš„è®¨è®ºå’Œåé¦ˆã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"Hexo æ­å»ºGithubPage ä¸ªäººåšå®¢","slug":"hexoGithubPageBlog","date":"2016-01-22T03:15:54.000Z","updated":"2020-05-27T00:42:39.000Z","comments":true,"path":"2016/01/22/hexoGithubPageBlog/","link":"","permalink":"https://www.littlewhale.xyz/2016/01/22/hexoGithubPageBlog/","excerpt":"ç¨‹åºå‘˜éƒ½å–œæ¬¢æŠ˜è…¾ï¼Œæˆ‘ä¹Ÿä¸åˆ—å¤–ã€‚å½“ç„¶ï¼Œç”¨hexo å»ºåšå®¢ä¹Ÿæ˜¯å½“æ—¶ç¢°å·§åœ¨ç½‘ä¸Šçœ‹åˆ°åˆ«äººçš„åšå®¢ï¼Œç”¨æ¥å†™æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè¯»ä¹¦ï¼Œä»¥åŠä¸ä¸€æ ·çš„å¿ƒæƒ…ã€‚å½“æ—¶æˆ‘ä¹Ÿå¾ˆæ˜¯å¥½å¥‡è¿™æ ·çš„åšå®¢æ˜¯ç”¨ä»€ä¹ˆæ­å»ºçš„ã€‚çœ‹åˆ°åšå°¾æœ‰ä¸€è¡Œå°å­—â€œPowered by Hexo.â€, äºæ˜¯ï¼Œå¼€å§‹äº†è‡ªå·±çš„ä¸æ–­æŠ˜è…¾ã€‚å› ä¸ºè¿™æ®µæ—¶é—´ç¦»èŒäº†ï¼Œåˆšå¥½ä¹Ÿæœ‰ç©ºé—²ä¸‹æ¥å»åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å¤§æ¦‚æŒ‰ç…§æˆ‘çš„æ€è·¯è®°ä¸‹æ¥æˆ‘æ­å»ºhexoçš„æ­¥éª¤ã€‚","text":"ç¨‹åºå‘˜éƒ½å–œæ¬¢æŠ˜è…¾ï¼Œæˆ‘ä¹Ÿä¸åˆ—å¤–ã€‚å½“ç„¶ï¼Œç”¨hexo å»ºåšå®¢ä¹Ÿæ˜¯å½“æ—¶ç¢°å·§åœ¨ç½‘ä¸Šçœ‹åˆ°åˆ«äººçš„åšå®¢ï¼Œç”¨æ¥å†™æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè¯»ä¹¦ï¼Œä»¥åŠä¸ä¸€æ ·çš„å¿ƒæƒ…ã€‚å½“æ—¶æˆ‘ä¹Ÿå¾ˆæ˜¯å¥½å¥‡è¿™æ ·çš„åšå®¢æ˜¯ç”¨ä»€ä¹ˆæ­å»ºçš„ã€‚çœ‹åˆ°åšå°¾æœ‰ä¸€è¡Œå°å­—â€œPowered by Hexo.â€, äºæ˜¯ï¼Œå¼€å§‹äº†è‡ªå·±çš„ä¸æ–­æŠ˜è…¾ã€‚å› ä¸ºè¿™æ®µæ—¶é—´ç¦»èŒäº†ï¼Œåˆšå¥½ä¹Ÿæœ‰ç©ºé—²ä¸‹æ¥å»åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å¤§æ¦‚æŒ‰ç…§æˆ‘çš„æ€è·¯è®°ä¸‹æ¥æˆ‘æ­å»ºhexoçš„æ­¥éª¤ã€‚ ä¸‹è½½node.js11) åœ¨ Windows ç¯å¢ƒä¸‹å®‰è£… Node.js éå¸¸ç®€å•.åˆ°æ­¤å¤„ä¸‹è½½ [ä¸‹è½½node.js](http://nodejs.org/) ä¸‹è½½ Gitç¨³å®šç‰ˆ1ç”±äºgitå®˜ç½‘ä¸‹è½½ å¯èƒ½æ¯”è¾ƒç¼“æ…¢ï¼Œå¯é€šè¿‡å…¶ä»–é€”å¾„å¦‚csdnä¸‹è½½ã€‚æˆ‘ä¸‹è½½çš„gitç‰ˆæœ¬æ˜¯ 2.6.2.windows.1 é…ç½®Git SSH keyã€‚æœ¬åœ°ä¸githubæœåŠ¡å™¨é“¾æ¥ã€‚123451)æ‰“å¼€æœ¬åœ°C:\\Documents and Settings\\Administrator.ssh\\id_rsa.pubæ–‡ä»¶ã€‚æ­¤æ–‡ä»¶é‡Œé¢å†…å®¹ä¸ºåˆšæ‰ç”Ÿæˆäººå¯†é’¥ã€‚å¦‚æœçœ‹ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦è®¾ç½®æ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚å‡†ç¡®çš„å¤åˆ¶è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ‰èƒ½ä¿è¯è®¾ç½®çš„æˆåŠŸã€‚2)ç™»é™†githubç³»ç»Ÿã€‚ç‚¹å‡»å³ä¸Šè§’çš„ Account Settings---&gt;SSH Public keys ---&gt; add another public keys3)æŠŠä½ æœ¬åœ°ç”Ÿæˆçš„å¯†é’¥å¤åˆ¶åˆ°é‡Œé¢ï¼ˆkeyæ–‡æœ¬æ¡†ä¸­ï¼‰ï¼Œ ç‚¹å‡» add key å°±okäº†4)æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸ $ ssh -T git@github.com ä¸‹è½½å¹¶å®‰è£… Hexo1234561) åœ¨ä»»æ„ä½ç½®æ‰“å¼€ git bash .2) è¿è¡Œä»¥ä¸‹å‘½ä»¤ $ npm install -g hexo3) ä¸‹è½½å®Œæˆåï¼Œåœ¨ä½ å–œæ¬¢çš„ä½ç½® å¦‚D:/hexo ä¸‹æ‰“å¼€git bash è¿è¡Œ hexo init è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ Hexo å³ä¼šè‡ªåŠ¨åœ¨ç›®æ ‡æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™æ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶4) å®‰è£…hexo ç›¸å…³çš„ä¾èµ–åŒ… npm install5) è¿è¡Œhexo g ç¼–è¯‘é™æ€æ–‡ä»¶ ï¼Œç„¶åå†hexo s å¯åŠ¨æœ¬åœ°æœåŠ¡ã€‚æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ åœ¨æµè§ˆå™¨åœ°å€è¾“å…¥ localhost:4000 hexo configçš„åŸºæœ¬é…ç½®1åœ¨hexoçš„æ ¹ç›®å½•ä¸‹é…ç½® _config.yml æ–‡ä»¶ã€‚ ä¸‹è½½å¹¶ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œä¸»é¢˜çš„é…ç½®1231) æˆ‘ä½¿ç”¨çš„æ˜¯nextä¸»é¢˜ã€‚è¿›å…¥ä½ çš„hexoæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸‹è½½å¯ä»¥ä½¿ç”¨$ git clone https://github.com/iissnan/hexo-theme-next themes/next2) ä¸‹è½½å®‰è£…ï¼Œä¸»é¢˜è®¾ç½®å¯å‚è€ƒ [Nextä¸»é¢˜](http://theme-next.iissnan.com/five-minutes-setup.html) hexo çš„ä½¿ç”¨ï¼Œä»¥åŠéƒ¨ç½²åˆ°ä½ çš„githubåº“12345åœ¨hexo æ ¹ç›®å½• _config.yml æ–‡ä»¶é…ç½®deploy: type: git repo: https://github.com/gaoyingqiu/gaoyingqiu.github.io branch: master hexoæ­å»ºé‡åˆ°çš„ç›¸å…³é—®é¢˜è§£å†³åŠæ³•12345678910111213141516171819#å…³äº hexo d å‡ºç° ERROR Deployer not found : github å¦‚ä½•è§£å†³ï¼Ÿ1) deployçš„typeæ”¹æˆgitï¼Œç„¶åè¿è¡Œä¸‹npm install hexo-deployer-git --save2) ç»§ç»­è¿è¡Œ hexo g ç„¶åå†hexo d# *** Please tell me who you are.Run git config --global user.email \"you@example.com\" git config --global user.name \"Your Name\" å¦‚ä½•è§£å†³ï¼Ÿ1) æ ¹æ®æ­¤é”™è¯¯å¯çŸ¥ï¼Œéƒ¨ç½²åˆ°github åº“éœ€è¦ è¾“å…¥é‚®ç®±å’Œä½ çš„githubçš„ç”¨æˆ·åã€‚æ‰€ä»¥æ ¹æ®æç¤ºï¼Œè¿è¡Œç›¸åº”çš„å‘½ä»¤å³å¯ï¼Œå†æ¬¡éƒ¨ç½²ä¸€æ¬¡ã€‚hexo d.#è®¾ç½®faviconã€‚1)æŠŠfavicon.iconå›¾æ ‡æ‹·è´åˆ°hexo æ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æ²¡ç½‘é¡µiconä¸æ˜¾ç¤ºå¯æ›´æ”¹ä¸»é¢˜æ–‡ä»¶é…ç½®ä¸­çš„faviconå±æ€§ ã€‚æŠŠfavicon.iconæ‹·è´åˆ°imagesæ–‡ä»¶å¤¹ä¸‹ã€‚faviconçš„é…ç½®å¦‚ favicon: /images/favicon.icon#hexo éƒ¨ç½²åˆ°githubæ—¶å€™ï¼Œæ€æ ·è§£å†³é¢‘ç¹åœ°è¾“å…¥ç”¨æˆ·å å’Œå¯†ç ï¼Ÿ1) åœ¨ç³»ç»Ÿå±æ€§ç¯å¢ƒå˜é‡å¤„ æ·»åŠ ç”¨æˆ·ç¯å¢ƒå˜é‡ã€‚å˜é‡åï¼šHOME å˜é‡å€¼ï¼š %USERPROFILE%2) åœ¨ C:\\Users\\Administrator æ·»åŠ ä¸€ä¸ªåä¸º â€œ_netrcâ€ çš„æ–‡ä»¶ï¼Œæ— åç¼€ã€‚åœ¨é‡Œé¢è®¾ç½® machine github.com login ä½ çš„githubç”¨æˆ·å password ä½ çš„githubç™»å½•å¯†ç  è´­ä¹°åŸŸåï¼ŒDNSè§£æ","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.littlewhale.xyz/tags/Hexo/"}]}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://www.littlewhale.xyz/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"iOS","slug":"iOS","permalink":"https://www.littlewhale.xyz/categories/iOS/"},{"name":"Web","slug":"Web","permalink":"https://www.littlewhale.xyz/categories/Web/"},{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://www.littlewhale.xyz/categories/%E6%8A%80%E6%9C%AF/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://www.littlewhale.xyz/categories/%E5%85%B6%E4%BB%96/"},{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"https://www.littlewhale.xyz/categories/%E6%9D%82%E8%B0%88/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://www.littlewhale.xyz/tags/%E7%AE%97%E6%B3%95/"},{"name":"å¯Œæ–‡æœ¬","slug":"å¯Œæ–‡æœ¬","permalink":"https://www.littlewhale.xyz/tags/%E5%AF%8C%E6%96%87%E6%9C%AC/"},{"name":"HTTP","slug":"HTTP","permalink":"https://www.littlewhale.xyz/tags/HTTP/"},{"name":"è½¯å®åŠ›","slug":"è½¯å®åŠ›","permalink":"https://www.littlewhale.xyz/tags/%E8%BD%AF%E5%AE%9E%E5%8A%9B/"},{"name":"SKU","slug":"SKU","permalink":"https://www.littlewhale.xyz/tags/SKU/"},{"name":"Slider","slug":"Slider","permalink":"https://www.littlewhale.xyz/tags/Slider/"},{"name":"DatePicker","slug":"DatePicker","permalink":"https://www.littlewhale.xyz/tags/DatePicker/"},{"name":"æŠ½å¥–","slug":"æŠ½å¥–","permalink":"https://www.littlewhale.xyz/tags/%E6%8A%BD%E5%A5%96/"},{"name":"MVC","slug":"MVC","permalink":"https://www.littlewhale.xyz/tags/MVC/"},{"name":"HTTPS","slug":"HTTPS","permalink":"https://www.littlewhale.xyz/tags/HTTPS/"},{"name":"å…³ç³»å›¾","slug":"å…³ç³»å›¾","permalink":"https://www.littlewhale.xyz/tags/%E5%85%B3%E7%B3%BB%E5%9B%BE/"},{"name":"AndroidTableView","slug":"AndroidTableView","permalink":"https://www.littlewhale.xyz/tags/AndroidTableView/"},{"name":"Hexo","slug":"Hexo","permalink":"https://www.littlewhale.xyz/tags/Hexo/"}]}