<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç»™æ•°ç»„å…ƒç´ å»é‡</title>
      <link href="/2021/07/08/hash/"/>
      <url>/2021/07/08/hash/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªæ•°ç»„ï¼Œè¦å¯¹å…ƒç´ è¿›è¡Œå»é‡æ“ä½œæœ‰ä¸¤ç§æ–¹å¼ï¼Œè¦ä¹ˆé‡å†™equalsæ–¹æ³•åšæ¯”è¾ƒï¼Œè¦ä¹ˆåˆ©ç”¨Hashå€¼åšæ¯”è¾ƒã€‚<br>å‡è®¾å¯¹è±¡ä¸ºç‚¹Point<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> x: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">let</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="è®©å¯¹è±¡å®ç°equalsæ–¹æ³•"><a href="#è®©å¯¹è±¡å®ç°equalsæ–¹æ³•" class="headerlink" title="è®©å¯¹è±¡å®ç°equalsæ–¹æ³•"></a>è®©å¯¹è±¡å®ç°equalsæ–¹æ³•</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Point</span>: <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> == <span class="params">(lhs: Point, rhs: Point)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯¹Arrayåšæ‰©å±•ï¼Œæ–°å¢å»é‡æ–¹æ³•å¹¶è¿”å›æ–°æ•°ç»„ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">uniqueElements</span><span class="params">()</span></span> -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> out = [<span class="type">Element</span>]()</span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> !out.<span class="built_in">contains</span>(element) &#123;</span><br><span class="line">        out.append(element)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç”¨Hashå€¼æ–¹å¼æ¯”è¾ƒå¯¹è±¡"><a href="#ç”¨Hashå€¼æ–¹å¼æ¯”è¾ƒå¯¹è±¡" class="headerlink" title="ç”¨Hashå€¼æ–¹å¼æ¯”è¾ƒå¯¹è±¡"></a>ç”¨Hashå€¼æ–¹å¼æ¯”è¾ƒå¯¹è±¡</h3><p>æŠŠå…ƒç´ å¯¹è±¡æ”¾è‡³Setæ— åºé›†åˆä¸­ï¼Œç”±äºSetæ ¹æ®Hashå€¼æ¥å­˜å‚¨ï¼Œå¯å­˜å‚¨å”¯ä¸€Hashå€¼å¯¹è±¡ä¿è¯ä¸é‡å¤ã€‚å‡†å¤‡ä¸€ä¸ªç©ºæ•°ç»„æ¥æ”¶ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">uniqueElements</span><span class="params">()</span></span> -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> seen = <span class="type">Set</span>&lt;<span class="type">Element</span>&gt;()</span><br><span class="line">    <span class="keyword">var</span> out = [<span class="type">Element</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> !seen.<span class="built_in">contains</span>(element) &#123;</span><br><span class="line">        out.append(element)</span><br><span class="line">        seen.insert(element)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å°†ä»£ç ç”¨compactMapæ”¹è¿›ä¸€ä¸‹ï¼šéå†æ¯ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›ä¸ä¸ºnilçš„å…ƒç´ ã€‚æˆ‘ä»¬æ ¹æ®å…ƒç´ æ˜¯å¦å­˜åœ¨Seté›†åˆä¸­ä¸ºæ¡ä»¶ï¼Œå½“å­˜åœ¨é›†åˆä¸­æ—¶è¿”å›nilã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">uniqueElements</span><span class="params">()</span></span> -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> seen = <span class="type">Set</span>&lt;<span class="type">Element</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.compactMap &#123; element <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">guard</span> !seen.<span class="built_in">contains</span>(element)</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line"></span><br><span class="line">      seen.insert(element)</span><br><span class="line">      <span class="keyword">return</span> element</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“æˆ‘ä»¬ä¸è€ƒè™‘åŸå…ƒç´ å¯¹è±¡é¡ºåºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¿«é€Ÿå¯¹å…ƒç´ å»é‡<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span>: <span class="title">Hashable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">unsortedUniqueElements</span><span class="params">()</span></span> -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">set</span> = <span class="type">Set</span>(<span class="keyword">self</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Array</span>(<span class="keyword">set</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½•æ—¶ä½¿ç”¨weak self é˜²æ­¢å†…å­˜æ³„éœ²</title>
      <link href="/2021/07/08/weak/"/>
      <url>/2021/07/08/weak/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½æƒ³å†™å¾—ä¸€æ‰‹å¥½ä»£ç ã€‚è¿™åŒ…å«é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå½“åœ¨å†™é—­åŒ…æ—¶ä¸šåŠ¡å¦‚æœéœ€è¦ç”¨åˆ°selfï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨[weak self] ä¿®é¥°ã€‚ä½†ä¸ºä»€ä¹ˆéœ€è¦å¼±æ•è·å‘¢ï¼Ÿæ˜¯å¦ä»»ä½•æƒ…å†µä¸‹åœ¨é—­åŒ…é‡Œéƒ½è¦ç”¨weak? æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç”¨æ•è·åˆ—è¡¨æ¥å›ç­”è¿™å‡ ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å°†è®²è§£åˆ°ä¸åŒçš„æ•è·ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨åˆé€‚çš„æ•è·å»å¤„ç†é—®é¢˜ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨"><a href="#ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨"></a>ä»€ä¹ˆæ˜¯æ•è·åˆ—è¡¨</h3><p>æˆ‘ä»¬å…ˆçœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼Œè°ƒç”¨é—­åŒ…åæ˜¾ç¤ºçš„ç»“æœ:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"qiu"</span></span><br><span class="line"><span class="keyword">var</span> appendToName = &#123; (string: <span class="type">String</span>) -&gt; <span class="type">String</span> <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">return</span> name.appending(string)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> one = appendToName(<span class="string">"gaoying"</span>) <span class="comment">//qiugaoying</span></span><br><span class="line">name = <span class="string">"liu"</span></span><br><span class="line"><span class="keyword">let</span> two = appendToName(<span class="string">"gaoying"</span>)  <span class="comment">//liugaoying</span></span><br></pre></td></tr></table></figure><br>é—­åŒ…å¯å¯¹åŒä¸€ä½œç”¨åŸŸèŒƒå›´å†…çš„å±æ€§åšå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…å†…æŒæœ‰çš„å±æ€§åœ¨åŒä¸€ä¸Šä¸‹æ–‡ä½œç”¨åŸŸå†…å˜æ›´å—å½±å“ã€‚æˆ‘ä»¬å†è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"qiu"</span></span><br><span class="line"><span class="keyword">var</span> appendToName = &#123; [name] (string: <span class="type">String</span>) -&gt; <span class="type">String</span> <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">return</span> name.appending(string)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> one = appendToName(<span class="string">"gaoying"</span>) <span class="comment">//qiugaoying</span></span><br><span class="line">name = <span class="string">"liu"</span></span><br><span class="line"><span class="keyword">let</span> two = appendToName(<span class="string">"gaoying"</span>)  <span class="comment">//qiugaoying</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶è¾“å‡ºçš„ç»“æœéƒ½ä¸ºqiugaoyingã€‚[name] å°†å±æ€§nameæ”¾åœ¨é—­åŒ…çš„æ•è·åˆ—è¡¨ï¼Œæ˜ç¡®åœ°å‘Šè¯‰é—­åŒ…å¼ºæŒæœ‰é—­åŒ…é¦–æ¬¡è°ƒç”¨æ—¶çš„nameå€¼ã€‚å¦‚æœè¦åœ¨é—­åŒ…æ•è·åˆ—è¡¨å†…æ•è·å¤šä¸ªå€¼ï¼Œåˆ™ç”¨é€—å·éš”å¼€ï¼Œå¦‚[property, anotherProperty] in æ–¹å¼ã€‚<br><a id="more"></a></p><h3 id="å…³äºå†…å­˜æ³„éœ²"><a href="#å…³äºå†…å­˜æ³„éœ²" class="headerlink" title="å…³äºå†…å­˜æ³„éœ²"></a>å…³äºå†…å­˜æ³„éœ²</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> instance: <span class="type">MyClass?</span> = <span class="type">MyClass</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aClosure = &#123; [instance] <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(instance)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">aClosure() <span class="comment">// MyClass</span></span><br><span class="line">instance = <span class="literal">nil</span></span><br><span class="line">aClosure() <span class="comment">// MyClass</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šä»£ç ç‰‡æ®µï¼Œå½“instance = nilä¹‹åï¼Œé—­åŒ…å†æ¬¡è°ƒç”¨ï¼Œæ­¤æ—¶instanceä»ç„¶åœ¨é—­åŒ…å†…è¢«å¼ºæ•è·ã€‚å³è™½ç„¶instanceç½®ä¸ºnilï¼Œä½†é—­åŒ…é‡Œå¼ºæ•è·çš„å±æ€§æ²¡æœ‰è¢«é‡Šæ”¾ã€‚æ­¤åˆ»instanceæ•è·çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆé—­åŒ…å¼ºæŒ‡é’ˆå¼•ç”¨è¯¥å¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“åœ¨å†…å­˜ç®¡ç†æ—¶å€™ï¼Œå¼•ç”¨ç±»å‹å¯¹è±¡åªè¦å¼•ç”¨è®¡æ•°å¤§äº1ï¼Œé‚£ä¹ˆå†å†…å­˜ä¸­æ˜¯ä¸ä¼šè¢«å›æ”¶çš„ï¼Œæ­¤åˆ»ï¼Œå³é€ æˆäº†å†…å­˜æ³„éœ²ã€‚ å¦‚æœå¼ºæ•è·çš„å±æ€§æ˜¯å€¼ç±»å‹(ç»“æ„ä½“æˆ–è€…æšä¸¾)ï¼Œé‚£ä¹ˆå¼ºæ•è·çš„æ—¶å€™å°†å‘ç”Ÿcopyã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯ä¸å¸Œæœ›è¿™ç§æƒ…å†µå‘ç”Ÿçš„ã€‚ä¸¾ä¸€ä¸ªåœºæ™¯ï¼šå½“æˆ‘ä»¬åœ¨ViewControlleræ‰§è¡Œç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œåœ¨è¯·æ±‚ç»“æœå›æ¥ä¹‹å‰ï¼Œæˆ‘ä»¬dismissedäº†æ§åˆ¶å™¨ï¼Œå¦‚æœç½‘ç»œè¯·æ±‚å›è°ƒçš„å¿…è¦å†…å¼ºæ•è·äº†æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆå†…å­˜ä¸­æ˜¯ä»ç„¶å­˜åœ¨è¯¥ViewControllerã€‚å½“æ¥å›åˆ‡æ¢çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯é€ æˆäº†å¾ˆå¤šå†…å­˜æ³„éœ²å‘¢ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼ŸæŠŠå¼ºæ•è·æ”¹æˆå¼±æ•è·å°±è¡Œäº†ï¼Œä½¿ç”¨weakå…³é”®å­—ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> instance: <span class="type">MyClass?</span> = <span class="type">MyClass</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aClosure = &#123; [<span class="keyword">weak</span> instance] <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(instance)</span><br><span class="line">  <span class="keyword">guard</span> strongSelf = instance <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">aClosure() <span class="comment">// MyClass</span></span><br><span class="line">instance = <span class="literal">nil</span></span><br><span class="line">aClosure() <span class="comment">// nil</span></span><br></pre></td></tr></table></figure><br>åœ¨é—­åŒ…è°ƒç”¨ä¹‹å‰ï¼Œå¦‚æœå¯¹è±¡é”€æ¯äº†ç»§ç»­è°ƒç”¨é—­åŒ…å¯èƒ½ä¼šå‡ºä¸€äº›æ½œåœ¨çš„ä¸šåŠ¡bugã€‚å¦‚æœä½ æƒ³ç«‹å³æŠ›å‡ºå¼‚å¸¸æˆ–ç›´æ¥è®©ç¨‹åºcrashæ‰ï¼Œè¿™æ ·æœ‰åŠ©äºåŠæ—©åœ°å‘ç°é—®é¢˜ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨å…³é”®å­—unownedå…³é”®å­—è¿›è¡Œæ•è·ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> instance: <span class="type">MyClass?</span> = <span class="type">MyClass</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aClosure = &#123; [<span class="keyword">unowned</span> instance] <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(instance)</span><br><span class="line">  <span class="keyword">guard</span> strongSelf = instance <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">aClosure() <span class="comment">// MyClass</span></span><br><span class="line">instance = <span class="literal">nil</span></span><br><span class="line">aClosure() <span class="comment">// Crash</span></span><br></pre></td></tr></table></figure></p><h3 id="é—­åŒ…å†…ä½•æ—¶ç›´æ¥ç”¨-self"><a href="#é—­åŒ…å†…ä½•æ—¶ç›´æ¥ç”¨-self" class="headerlink" title="é—­åŒ…å†…ä½•æ—¶ç›´æ¥ç”¨ self"></a>é—­åŒ…å†…ä½•æ—¶ç›´æ¥ç”¨ self</h3><ul><li>å½“self æŒ‡çš„æ˜¯å€¼ç±»å‹(ç»“æ„ä½“ã€æšä¸¾)æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ç”¨self. å› ä¸ºç»“æ„ä½“æ²¡æœ‰æŒ‡é’ˆå¼•ç”¨ä»–ä»¬ï¼Œåœ¨é—­åŒ…å†…ä¹Ÿä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²ä¸€è¯´ã€‚</li><li>å½“é—­åŒ…å’Œselfå¯¹è±¡æ— ç›´æ¥æŒæœ‰å…³ç³»æ—¶å€™ï¼Œæ¯”å¦‚DispatchQueue.<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dispatchSomething</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>åœ¨è°ƒç”¨dispatchSomethingæ–¹æ³•åï¼Œå¼‚æ­¥é—­åŒ…ä½“ä¼šç«‹å³æ‰§è¡Œï¼Œåœ¨é—­åŒ…ä½“å¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨selfã€‚å¦‚æœé—­åŒ…æ˜¯å¯¹è±¡çš„æŸä¸€äº‹ä»¶å›è°ƒä½ éœ€è¦ç•™æ„selfæ˜¯å¦å¼±å¼•ç”¨é¿å…å¼•èµ·å¾ªç¯å¼•ç”¨ã€‚<br>æœ‰ä¸ªæœ€ç®€å•çš„æ–¹æ³•åˆ¤æ–­è°ƒç”¨çš„å‡½æ•°é—­åŒ…æ˜¯å¦è¢«æŒæœ‰ï¼šåˆ¤æ–­æ˜¯å¦æœ‰å…³é”®å­—@escapingã€‚</li></ul><h3 id="é—­åŒ…é‡Œä½•æ—¶ç”¨å¼ºæ•è·å˜é‡"><a href="#é—­åŒ…é‡Œä½•æ—¶ç”¨å¼ºæ•è·å˜é‡" class="headerlink" title="é—­åŒ…é‡Œä½•æ—¶ç”¨å¼ºæ•è·å˜é‡"></a>é—­åŒ…é‡Œä½•æ—¶ç”¨å¼ºæ•è·å˜é‡</h3><p>å¼ºæ•è·ç”¨çš„åœºæ™¯æ¯”è¾ƒå°‘ã€‚ä»¥ä¸‹æœ‰ä¸€ä¸ªä¾‹å­ï¼Œå¦‚åœ¨ç½‘ç»œè¯·æ±‚åï¼Œé€šè¿‡æœ¬åœ°å­˜å‚¨CoreDataæˆ–è€…SqliteæŠŠæ•°æ®æŒä¹…åŒ–ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeDataSource</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> storage: <span class="type">MyDataStore</span> <span class="comment">//class</span></span><br><span class="line">  <span class="keyword">let</span> networking: <span class="type">NetworkingLayer</span></span><br><span class="line">  <span class="comment">// more properties</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">refreshData</span><span class="params">()</span></span> &#123;</span><br><span class="line">    networking.refresh &#123; [storage] data <span class="keyword">in</span></span><br><span class="line">      storage.persist(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™ä¸ªæ—¶å€™ï¼Œæ— è®ºé¡µé¢é”€æ¯SomeDataSourceï¼Œåªè¦ç½‘ç»œè¯·æ±‚ç»“æœå›æ¥ï¼Œéƒ½èƒ½å¤Ÿä¿è¯æ•°æ®è¢«æŒä¹…åŒ–ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚è€Œä¸”storageåªæ•è·é¦–æ¬¡è°ƒç”¨refreshDataæ—¶å€™çš„storageå˜é‡ã€‚ï¼ˆå‡è®¾ï¼‰åæœŸæ— è®ºå¯¹storageæ›´æ”¹ï¼Œstorageä»ç„¶æ˜¯ä¹‹å‰æ—§çš„å¯¹è±¡ã€‚</p><h3 id="ä½•æ—¶ä½¿ç”¨Weak-æˆ–è€…-unowned-å…³é”®å­—"><a href="#ä½•æ—¶ä½¿ç”¨Weak-æˆ–è€…-unowned-å…³é”®å­—" class="headerlink" title="ä½•æ—¶ä½¿ç”¨Weak æˆ–è€… unowned å…³é”®å­—"></a>ä½•æ—¶ä½¿ç”¨Weak æˆ–è€… unowned å…³é”®å­—</h3><p>å¼±æ•è·æ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨ä¸”æœ€å¥½é»˜è®¤çš„ä¸€ç§æ•è·é€‰æ‹©ã€‚å½“ä½ ä¸æƒ³è®©ä¸€ä¸ªå·²é‡Šæ”¾å¯¹è±¡è¿˜åœ¨é—­åŒ…å†…æ‰§è¡Œæ—¶å€™ï¼Œæˆ–è€…å½“ä½ è°ƒç”¨çš„å‡½æ•°é—­åŒ…è¢«åº”ç”¨æ—¶ï¼Œè¿™ä¸ªæ—¶å€™éœ€è€ƒè™‘ç”¨å¼±æ•è·ã€‚å¼±æ•è·çš„å±æ€§è®°å¾—ç»™å¯é€‰å€¼ï¼Œå› ä¸ºå¯èƒ½æ˜¯nilã€‚è¿™æ ·ç»™nilå‘é€æ¶ˆæ¯çš„æ—¶å€™å°±ä¸è‡³äºå´©æºƒã€‚ä½¿ç”¨weakæˆ–è€…unownedèƒ½100%ç¡®ä¿å¼•ç”¨ç±»å‹åœ¨é”€æ¯åä¹Ÿèƒ½ä»å†…å­˜ä¸­å›æ”¶ï¼Œä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²çš„æƒ…å†µã€‚å¦‚æœä½ å®åœ¨ä¸çŸ¥é“ç”¨å“ªç§æ•è·æ–¹å¼çš„æ—¶å€™ï¼Œé‚£å°±ç”¨å®ƒå§ğŸ˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Resultï¼ˆSwift5ï¼‰</title>
      <link href="/2021/07/07/result/"/>
      <url>/2021/07/07/result/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬è®¾è®¡ç½‘ç»œå±‚å“åº”ç»“æœçš„æ—¶å€™ï¼ŒResultæ˜¯å¤§å®¶ç”¨çš„æ¯”è¾ƒå¤šçš„ã€‚å’ŒOptionalæœ‰ç‚¹ç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨è¿°è¿”å›ç±»å‹æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥ã€‚åœ¨Swift5.0ä¸­ï¼ŒSwiftå›¢é˜Ÿå·²ç»æŠŠResultåŠ å…¥åˆ°äº†æ ‡å‡†åº“ã€‚è¿™ç¯‡æ–‡ç« å°†è®²è§£åˆ°ä½•æ—¶å»ä½¿ç”¨Result,ä»¥åŠæ€æ ·ä½¿ç”¨Resultã€‚<br>ä¸Šç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è®²åˆ°Swiftå¼‚å¸¸å¤„ç†ï¼Œåœ¨å¤„ç†æ—¶å€™ç”¨do{}catch{}æ•æ‰å¼‚å¸¸,ä»¥åŠåœ¨æ–¹æ³•ååé€šè¿‡throwså…³é”®å­—å°†å¼‚å¸¸å¾€ä¸Šå±‚æŠ›ã€‚å’ŒæŠ›é”™è¯¯ä¸åŒçš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­ç”¨Resultä½œä¸ºè¿”å›ç±»å‹å¯ä»¥è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚æ›´å¤§çš„ä¸åŒæ˜¯ï¼ŒResultå¯ä»¥ç”¨äºåœ¨å¼‚æ­¥å¤„ç†æ—¶å€™ï¼Œå¦‚é±¼å¾—æ°´èˆ¬åœ°ä¼˜é›…å¤„ç†æˆåŠŸä¸å¤±è´¥çš„å›è°ƒè¿”å›ã€‚åœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»¥ä¸‹ç‰‡æ®µ1ä»£ç ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completion:@escaping <span class="params">(Data?)</span></span></span> -&gt; <span class="type">Void</span>) <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">          <span class="keyword">throw</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> data = data &#123;</span><br><span class="line">          completion(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.resume()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æŒ‰ç…§ä»¥å¾€çš„æ–¹å¼ï¼Œå½“erroræœ‰å¼‚å¸¸æ—¶å€™ï¼Œæˆ‘ä»¬è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åæ–¹æ³•ä¸Šä¹ŸåŠ ä¸Šthrowsã€‚å‡è®¾ä»¥ä¸Šä»£ç ç¼–è¯‘é€šè¿‡ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> loadData(from: aURL) &#123; data <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"fetched data"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"This will be executed before any data is fetched from the network."</span>) <span class="comment">//è¿™è¡Œä»£ç ä¼šè¢«å…ˆæ‰§è¡Œã€‚ç”±äºloadDataæ–¹æ³•æ˜¯å¼‚æ­¥å¤„ç†è¯·æ±‚æ•°æ®ï¼Œå°±ç®—å‘ç”Ÿé”™è¯¯ï¼ŒerroræŠ›å‡ºå­˜åœ¨ä¸€å®šçš„æ‰§è¡Œæ—¶é•¿ã€‚è¿™å°±è¿èƒŒäº†å¼‚å¸¸æ•æ‰è€Œä¸­æ­¢çš„æ€§è´¨äº†ï¼Œä¹Ÿè°ˆä¸ä¸Šå¼‚å¸¸æ•æ‰ã€‚</span></span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><a id="more"></a><br>ä»¥ä¸Šç‰‡æ®µ1ä»£ç ç¼–è¯‘æ˜¾ç„¶æŠ¥é”™ï¼Œå¾ˆä¸å¹¸ï¼ŒdataTaskå¤„ç†æ–¹æ³•APIå¹¶æ²¡æœ‰throwså…³é”®å­—ã€‚é‚£è¦æ€ä¹ˆå¤„ç†å¼‚å¸¸å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™Resultæ´¾ä¸Šç”¨åœºäº†ã€‚åœ¨è®²è§£Resultä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹Resultçš„æ ¸å¿ƒæºç ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// A value that represents either a success or a failure, including an</span></span><br><span class="line"><span class="comment">/// associated value in each case.</span></span><br><span class="line">@frozen <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Result</span>&lt;<span class="title">Success</span>, <span class="title">Failure</span>&gt; <span class="title">where</span> <span class="title">Failure</span> : <span class="title">Error</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// A success, storing a `Success` value.</span></span><br><span class="line">    <span class="keyword">case</span> success(<span class="type">Success</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// A failure, storing a `Failure` value.</span></span><br><span class="line">    <span class="keyword">case</span> failure(<span class="type">Failure</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç„¶åç”¨Resultè¿›è¡Œæ”¹é€ ,è¿™æ ·å°±å¾ˆå‹å¥½åœ°å¤„ç†äº†æˆåŠŸå’Œå¼‚å¸¸çš„ç»“æœã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completion:@escaping <span class="params">(Result&lt;Data, URLError&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> urlError = error <span class="keyword">as</span>? <span class="type">URLError</span> &#123;</span><br><span class="line">      completion(.failure(urlError))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = data &#123;</span><br><span class="line">      completion(.success(data))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;.resume()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadData(from: <span class="type">URL</span>(string: <span class="string">"http://api.littleWhale/myAvatar"</span>)!) &#123; result <span class="keyword">in</span></span><br><span class="line">     <span class="keyword">guard</span> <span class="keyword">let</span> data = <span class="keyword">try</span>? result.<span class="keyword">get</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">     &#125;</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç»§ç»­å†çœ‹ä¸€ä¾‹å­ï¼šæ‹¿åˆ°data,éœ€è¦å°†å®ƒè½¬æˆå›¾ç‰‡ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ConversionFailure</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">  <span class="keyword">case</span> invalidData</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertToImage</span><span class="params">(<span class="number">_</span> data: Data, completionHandler: @escaping <span class="params">(Result&lt;UIImage, ConversionFailure&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="type">DispatchQueue</span>.global(qos: .userInitiated).async &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">UIImage</span>(data: data) &#123;</span><br><span class="line">      completionHandler(.success(image))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      completionHandler(.failure(<span class="type">ConversionFailure</span>.invalidData))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œï¼Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ªé”™è¯¯ç±»å‹ã€‚ç„¶åé€šè¿‡GCDå¼‚æ­¥æ–¹å¼å°†dataè½¬åŒ–æˆimageã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†Result<UIImage, ConversionFailure> ä½œä¸ºè¿”å›ç±»å‹ã€‚å½“æµè½¬æˆäº†å›¾ç‰‡åˆ™è¿”å›å›¾ç‰‡ï¼Œå¦åˆ™è¿”å›ConversionFailureé”™è¯¯ã€‚<br>ç„¶åæˆ‘ä»¬å†çœ‹è°ƒç”¨:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">convertToImage(data) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">switch</span> result &#123;</span><br><span class="line">  <span class="keyword">case</span> .success(<span class="keyword">let</span> image):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"we get an image!"</span>)</span><br><span class="line">  <span class="keyword">case</span> .failure(<span class="keyword">let</span> error):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"invalid data error! \(error)"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œæˆ‘ä»¬ç”¨switchè¯­å¥å¯¹resultæšä¸¾ç±»å‹åˆ¤æ–­.success å’Œ .failureä¸¤ç§ç±»å‹ã€‚<br>ä½ ä¹Ÿå¯ä»¥ç”¨result.get()æ–¹æ³•è·å¾—è¿”å›çš„ç»“æœè¦ä¹ˆæ˜¯æˆåŠŸï¼Œè¦ä¹ˆæ˜¯å¤±è´¥ã€‚å¤±è´¥errorå¯ä»¥è¢«do{}catch{}æ•æ‰åˆ°ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">convertToImage(data) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> image = <span class="keyword">try</span> result.<span class="keyword">get</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"we get an image!"</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"invalid data error! \(error)"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ–è€…ç”¨try? å¯èƒ½è¿”å›nilï¼Œå½“è¿”å›nilå€¼æ—¶å³å‘ç”Ÿäº†é”™è¯¯<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">convertToImage(data) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">guard</span> <span class="keyword">let</span> image = <span class="keyword">try</span>? result.<span class="keyword">get</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"we get an image!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Resultä¹Ÿæä¾›äº†ä¸€äº›åº“æ–¹æ³•ï¼Œå¦‚mapï¼ŒmapErrorç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦å¯¹resultç»“æœè¿›è¡Œå¤„ç†åŒ…è£…ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">convertToImage(data) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> newResult = result.<span class="built_in">map</span> &#123; uiImage <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> uiImage.cgImage</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">WrappedError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cause: <span class="type">Error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">convertToImage(data) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> newResult = result.mapError &#123; conversionFailure <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> <span class="type">WrappedError</span>(cause: conversionFailure)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç½‘ç»œå¤„ç†å±‚ç”¨Resultè¿›è¡ŒåŒ…è£…ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">GYRemoteFetch</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">ResultModel</span>:<span class="type">Codable</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completion:@escaping <span class="params">(Result&lt;ResultModel, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">GYRemoteFetch</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(from url: URL, completion:@escaping <span class="params">(Result&lt;ResultModel, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">      <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> data = data <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">              completion(.failure(error))</span><br><span class="line">              <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">fatalError</span>(<span class="string">"data can't be nil"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line">        <span class="keyword">let</span> result = <span class="type">Result</span>(catching: &#123;</span><br><span class="line">            <span class="keyword">try</span> decoder.decode(<span class="type">ResultModel</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">        &#125;)</span><br><span class="line">        completion(result)</span><br><span class="line">      &#125;.resume()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">User</span>:<span class="title">Codable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//UserViewModelè¯·æ±‚ç½‘ç»œç”¨æˆ·ä¿¡æ¯ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UserViewModel</span>:<span class="title">GYRemoteFetch</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">ResultModel</span> = <span class="type">User</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        loadData(from: <span class="type">URL</span>(string: <span class="string">"http://api.littleWhale/user"</span>)!) &#123; result <span class="keyword">in</span></span><br><span class="line">             <span class="keyword">guard</span> <span class="keyword">let</span> user = <span class="keyword">try</span>? result.<span class="keyword">get</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">             &#125;</span><br><span class="line">            <span class="built_in">print</span>(user)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Swiftä¸­æœ‰æ•ˆåœ°æŠ›å¼‚å¸¸</title>
      <link href="/2021/07/07/error/"/>
      <url>/2021/07/07/error/</url>
      
        <content type="html"><![CDATA[<p>åœ¨swift2.0, è‹¹æœåœ¨swiftä¸­å°±ä»‹ç»äº†throws å…³é”®å­—ã€‚è¿™æ–¹ä¾¿å¼€å‘è€…åœ¨å†™ä»£ç æ—¶å€™ä¿è¯æ¸…æ™°çš„æ€è·¯ä»¥åŠåœ¨æ‰§è¡Œæ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯åšå¼‚å¸¸å¤„ç†ã€‚å¯åšå¼‚å¸¸æ•æ‰æˆ–è€…å¿½ç•¥å¼‚å¸¸ã€‚è¿™ç¯‡æ–‡ç« å°†è¯¦ç»†è®²è§£ throws å…³é”®å­—ï¼Œä»¥åŠåœ¨ä»£ç ä¸­å¦‚ä½•å»å¤„ç†å¼‚å¸¸ã€‚</p><h3 id="å¤„ç†å¼‚å¸¸"><a href="#å¤„ç†å¼‚å¸¸" class="headerlink" title="å¤„ç†å¼‚å¸¸"></a>å¤„ç†å¼‚å¸¸</h3><p>å¦‚æœä½ åœ¨Swiftä¸­ä½¿ç”¨è¿‡JSONDecoderï¼Œå°±çŸ¥é“åœ¨ç¼–å†™ä»£ç æ—¶å€™å¯æŠ›å‡ºå¼‚å¸¸ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello, playground"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> data = greeting.data(using: .utf8)!</span><br><span class="line">  <span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line">  <span class="keyword">let</span> string = <span class="keyword">try</span> decoder.decode(<span class="type">String</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123; error</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åœ¨Playground æ‰§è¡Œä»£ç ç‰‡æ®µï¼Œå‘ç°æ§åˆ¶å°è¾“å‡ºSwift.DecodingErrorå¼‚å¸¸é”™è¯¯ï¼Œå¼‚å¸¸è¢«catchæ•æ‰åˆ°äº†ã€‚ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨do {} catch {} æ–¹å¼æŠŠå¯èƒ½å‘ç”Ÿçš„ä»£ç ä¸€æ¬¡ç”¨try æ–¹å¼å†™åœ¨do{}é‡Œé¢ã€‚å½“æ•æ‰åˆ°ä¸€æ¬¡ç«‹é©¬è¿›å…¥catch{error }æ®µã€‚catchå°†æ•æ‰åˆ°Error, åœ¨catchæ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ•æ‰ç²¾ç¡®çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚<br><a id="more"></a></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello, playground"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> data = greeting.data(using: .utf8)!</span><br><span class="line">  <span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line">  <span class="keyword">let</span> string = <span class="keyword">try</span> decoder.decode(<span class="type">String</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="keyword">is</span> <span class="type">DecodingError</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"something went wrong while decoding!"</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123; error</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Erroråœ¨Swiftä¸­æ˜¯ä¸€ä¸ªåè®®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±é”™è¯¯ç±»å‹ï¼Œåœ¨ä¸€äº›ä¸šåŠ¡é”™è¯¯ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ°ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MyError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">  <span class="keyword">case</span> myErrorCase</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="type">MyError</span>.myErrorCase</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“æ‰§è¡ŒdoSomethingæ–¹æ³•æ—¶å€™ï¼Œç¨‹åºä¼šä¸­ç«¯ã€‚try doSomething ä½ å¦‚æœè¦æ•æ‰åˆ™ç”¨do{} catch{}æ–¹å¼ã€‚å¦‚æœä½ è¦å¿½ç•¥æ­¤å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨try? doSomething()ï¼Œè¿™ä¸ªæ—¶å€™è¿”å›nilã€‚å¦‚æœä½ å¯¹è¿”å›å€¼ä¸ºnilä¸careçš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆç”¨ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„jsonè§£æï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello, playground"</span></span><br><span class="line"><span class="keyword">let</span> data = greeting.data(using: .utf8)!</span><br><span class="line"><span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line"><span class="keyword">let</span> string = <span class="keyword">try</span>? decoder.decode(<span class="type">String</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line"><span class="built_in">print</span>(string) <span class="comment">//è¾“å‡ºnilï¼Œå½“stringå˜é‡è¢«å…¶ä»–ä¸šåŠ¡ç»§ç»­ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦åšå¥½nilå€¼åˆ¤æ–­ã€‚</span></span><br></pre></td></tr></table></figure><br>å½“ä½ çœŸçš„ä¸åœ¨ä¹æ•æ‰å¼‚å¸¸ï¼Œæˆ–è€…ä¸ç®¡é”™è¯¯æ˜¯ä¸æ˜¯å‘ç”Ÿæ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨try?ã€‚ è¿˜æœ‰ä¸€ç§æ–¹å¼å¤„ç†é”™è¯¯ï¼Œä½ å¯ä»¥ç”¨try! ã€‚ä½†è¿™ç§æ–¹å¼åªé€‚ç”¨äºä½ éå¸¸è‚¯å®šä¸”æœ‰æŠŠæ¡ä½ çš„ä»£ç æ¡ä»¶æ­£ç¡®æ¯”å¦‚ä¸Šè¿°greetingå˜é‡ä¸€å®šè¦æ˜¯å¤åˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²è§£ææ‰èƒ½æˆåŠŸï¼Œå¦åˆ™éå¸¸å±é™©ï¼Œç¨‹åºç›´æ¥crashæ‰ã€‚</p><p>å‡½æ•°å¯ä»¥æŠ›å‡ºå¼‚å¸¸æ–¹æ³•å¿…é¡»å«æœ‰throwså…³é”®å­—ï¼Œå¦‚æœæœ‰è¿”å›ç±»å‹ï¼Œåˆ™throwæ”¾åœ¨è¿”å›ç±»å‹ä¹‹å‰ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="type">MyError</span>.myErrorCase</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething2</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="type">MyError</span>.myErrorCase</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“ä½ ä¸æƒ³åœ¨æŸæ–¹æ³•é‡Œå¤„ç†å¼‚å¸¸æ—¶å€™ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨çš„æ–¹æ³•ååç”¨throwså°†å¼‚å¸¸æŠ›å‡ºåˆ°ä¸Šå±‚å‡½æ•°åšå¤„ç†ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">decodeJSON</span><span class="params">(<span class="number">_</span> data: Data)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line">  <span class="keyword">let</span> decodedString = <span class="keyword">try</span> decoder.decode(<span class="type">String</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> decodedString</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello, playground"</span></span><br><span class="line"><span class="keyword">let</span> data = greeting.data(using: .utf8)!</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> string = <span class="keyword">try</span> decodeJSON(data)</span><br><span class="line">    <span class="built_in">print</span>(string)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"decode error"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åœ¨blockä¸­æŠ›å¼‚å¸¸"><a href="#åœ¨blockä¸­æŠ›å¼‚å¸¸" class="headerlink" title="åœ¨blockä¸­æŠ›å¼‚å¸¸"></a>åœ¨blockä¸­æŠ›å¼‚å¸¸</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func executeGYBlock(_ closure: (() throws -&gt; Void)) throws &#123;</span><br><span class="line">  try closure()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªthrows, executeGYBlocké‡Œçš„closureé—­åŒ…å¯èƒ½æœ‰å¼‚å¸¸éœ€è¦throwsæŠ›å‡ºï¼ŒexecuteGYBlock å‡½æ•°æœ¬èº«throwsæ˜¯åœ¨æ‰§è¡ŒexecuteGYBlockå‡½æ•°æ—¶æŠŠå†…éƒ¨blockå—å¯èƒ½å‡ºç°çš„ç§»é™¤éœ€è¦å†æ¬¡å‘ä¸Šå±‚è°ƒç”¨è€…è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ã€‚è°ƒç”¨æ—¶å¦‚ä¸‹ä»£ç ç¤ºä¾‹ï¼šå°†blockå—å†…å¤„ç†çš„é”™è¯¯è¿›è¡ŒæŠ›å‡ºã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> executeGYBlock &#123;</span><br><span class="line">        <span class="keyword">let</span> string = <span class="keyword">try</span> decodeJSON(data)</span><br><span class="line">        <span class="built_in">print</span>(string)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“æœ‰å¤šä¸ªå¼‚å¸¸æ—¶å€™ï¼šcatché¦–å…ˆæ•æ‰åˆ°ç¬¬ä¸€ä¸ªtry çš„å¼‚å¸¸é”™è¯¯ç„¶åå°±ä¸­æ­¢ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> executeGYBlock &#123;</span><br><span class="line">        <span class="keyword">try</span> doSomething()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> executeGYBlock &#123;</span><br><span class="line">        <span class="keyword">let</span> string = <span class="keyword">try</span> decodeJSON(data)</span><br><span class="line">        <span class="built_in">print</span>(string)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å› ä¸ºå¼‚å¸¸ä¸€æ—¦catchåï¼Œç¨‹åºé‡Œçš„ä»£ç ç‰‡æ®µå°†ä¸å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œå…¶ä»–ä»£ç ã€‚ç”¨ä¸‹é¢çš„ä»£ç è¡¨ç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func doSomething() throws &#123;</span><br><span class="line">  print(&quot;doSomethingBefore...&quot;)</span><br><span class="line">  throw MyError.myErrorCase</span><br><span class="line">  print(&quot;doSomethingAfter...&quot;) &#x2F;&#x2F;Code after &#39;throw&#39; will never be executed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>å¼‚å¸¸é”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨do{ try something} catch{}è¿›è¡Œæ•æ‰å¤„ç†ã€‚</li><li>Erroræ˜¯åè®®ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„å¼‚å¸¸ç±»å‹ã€‚</li><li>å¼‚å¸¸å¯ç”¨try? è¿›è¡Œå¿½ç•¥ï¼Œæ³¨æ„è¿”å›å€¼nilçš„åˆ¤æ–­å¤„ç†ã€‚</li><li>å½“ä½ éå¸¸è‚¯å®šä¸ä¼šæœ‰å¼‚å¸¸æ—¶å€™åˆä¸æƒ³å†™do catch çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨try!ã€‚ ä½†è¿™ç§æ–¹å¼éå¸¸å±é™©ï¼Œä¸‡ä¸€æœ‰å¼‚å¸¸å°±ç›´æ¥crashã€‚</li><li>å½“ä½ æ–¹æ³•é‡Œä¸æƒ³å¤„ç†å¼‚å¸¸æ—¶å€™ï¼Œåœ¨æ–¹æ³•åå¤„ç»§ç»­ç”¨throws å°†å¼‚å¸¸æŠ›å‡ºè‡³ä¸Šå±‚ã€‚</li><li>å½“blockå—éœ€è¦throwsæ—¶ï¼Œé—­åŒ…å‡½æ•°éœ€å†æ¬¡throwsã€‚æœ€ç»ˆæŠŠå¼‚å¸¸æŠ›ç»™è°ƒç”¨å¤„ç†ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨æ³›å‹å’Œåè®®æ„å»ºå¯ä¼¸ç¼©æ€§ç»„ä»¶</title>
      <link href="/2021/07/06/generics/"/>
      <url>/2021/07/06/generics/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Appå¼€å‘ä¸­ï¼Œæ•°æ®å±‚å¾€å¾€ä¼šåšæœ¬åœ°ç¼“å­˜ï¼Œä»¥ä¾¿åœ¨ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹èƒ½å¤Ÿå…ˆæ˜¾ç¤ºæœ¬åœ°ç¼“å­˜æ•°æ®ã€‚æ¥ä¸‹æ¥å°†è®²è§£åˆ°å¦‚ä½•è®¾è®¡æœ¬åœ°æ•°æ®æºä¸­é—´ä»¶æ¥å®ç°ä¸šåŠ¡æ•°æ®çš„è¯»å–ã€‚åœ¨è®²è§£ä¹‹å‰æˆ‘ä»¬ä¼šå…ˆäº†è§£ä¸€ä¸‹ç®€å•æ³›å‹åœ¨Swiftä¸­çš„åº”ç”¨ï¼Œç»“åˆassociated types, ä½ ä¹Ÿå¯ä»¥åœ¨åè®®ä¸­ä½¿ç”¨æ³›å‹ã€‚</p><p>åœ¨ä»‹ç»ä¹‹å‰ï¼Œæˆ‘åˆšæåˆ°æˆ‘æƒ³è¦å¯¹æ³›å‹æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç„¶åè¿˜éœ€è¦ä¸€ä¸ªè¿œç¨‹æ•°æ®æ¥å£APIæä¾›æ•°æ®ä»¥ä¾¿åœ¨æœ¬åœ°æ•°æ®æ²¡æœ‰çš„æƒ…å†µä¸‹è°ƒç”¨ã€‚å‡è®¾æˆ‘éœ€è¦ç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> localDataStore = <span class="type">UserDataStore</span>()</span><br><span class="line"><span class="keyword">let</span> remoteDataStore = <span class="type">UserApi</span>()</span><br><span class="line"><span class="keyword">let</span> dataStore = <span class="type">CacheBackedDataStore</span>(localDataStore, remoteDataStore)</span><br><span class="line"></span><br><span class="line">dataStore.fetch(userID) &#123; result <span class="keyword">in</span></span><br><span class="line">  <span class="comment">// handle result</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><a id="more"></a><br>ä»¥ä¸Šä¸ºå¤§è‡´é€»è¾‘ç®€å†™ï¼Œç»§ç»­æ‹†è§£CacheBackedDataStore:<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CacheBackedDataStore</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> localStore: <span class="type">LocalStore</span></span><br><span class="line">  <span class="keyword">let</span> remoteStore: <span class="type">RemoteStore</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">fetch</span><span class="params">(<span class="number">_</span> identifier: IdentifierType, completion: @escaping Result&lt;T, Error&gt;)</span></span> &#123;</span><br><span class="line">    localStore.fetchObject(identifier) &#123; result <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">let</span> result = <span class="keyword">try</span>? result.<span class="keyword">get</span>() &#123;</span><br><span class="line">         completion(.success(result))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        remoteStore.fetchObject(identifier) &#123; result <span class="keyword">in</span></span><br><span class="line">          <span class="keyword">if</span> <span class="keyword">let</span> result = <span class="keyword">try</span>? result.<span class="keyword">get</span>() &#123;</span><br><span class="line">            completion(.success(result))</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// extract error and forward to the completion handler</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨æ„åˆ°Result<T, Error>ï¼Œ T ä¸ºæ³›å‹çš„ä¸€ä¸ªå ä½ç¬¦ã€‚å¯ä»£è¡¨ä»»ä½•å¯¹è±¡ã€‚è®²è§£æ³›å‹ä¹‹å‰ï¼Œå›é¡¾ä¸€ä¸‹åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let words1 &#x3D; [String]()</span><br><span class="line">let words2 &#x3D; Array&lt;String&gt;()</span><br></pre></td></tr></table></figure><br>ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬ç•™æ„åˆ°<String>æ–¹å¼æ³¨æ˜æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚æˆ‘ä»¬æŸ¥çœ‹Arrayçš„ä»£ç å¯ä»¥çœ‹åˆ°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">struct Array&lt;T&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; implementation code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Tå³ä»£è¡¨æˆ‘ä»¬å°†è¦æ³¨å…¥çš„ç±»å‹ã€‚æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸²ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct SpecializedPrinter&lt;T&gt; &#123;</span><br><span class="line">  func print(_ object: T) &#123;</span><br><span class="line">    print(object)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªSpecializedPrinteræ³›å‹ç»“æ„ä½“ï¼Œprintæ–¹æ³•ä½¿ç”¨äº†æ³›å‹å‚æ•°ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥äº†å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆè¾“å‡ºæ‰“å°çš„å°±æ˜¯å­—ç¬¦ä¸²ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> printer = <span class="type">SpecializedPrinter</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">printer.<span class="built_in">print</span>(<span class="string">"Hello!"</span>) <span class="comment">// this is fine</span></span><br><span class="line">printer.<span class="built_in">print</span>(<span class="number">10</span>) <span class="comment">// this is not okay since T for this printer is String, not Int</span></span><br></pre></td></tr></table></figure><br>ç°åœ¨ä½ å·²ç»äº†è§£äº†æ³›å‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¯¹CacheBackedDataStoreè¿›è¡Œæ”¹è¿›ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CacheBackedDataSource</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> localStore: <span class="type">LocalStore</span></span><br><span class="line">  <span class="keyword">let</span> remoteStore: <span class="type">RemoteStore</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;T?, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä¹‹å‰çš„ä»£ç ï¼Œæˆ‘ä»¬localStore,å’ŒremoteStoreä¸èƒ½å¤Ÿå†™æ­»ï¼Œéœ€è¦åˆ¶å®šä¸€å¥—æ ‡å‡†ã€‚å³localStoreå¯ä»¥åšä»€ä¹ˆï¼ŒremoteStoreå¯ä»¥åšä»€ä¹ˆã€‚è¿›è€Œç»§ç»­æ”¹è¿›ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">LocalStore</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;T, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">persist</span><span class="params">(<span class="number">_</span> object: T)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">RemoteStore</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;T, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“æ”¹æˆä¸Šè¿°ä»£ç çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œåœ¨åè®®ä¸­ï¼Œæ³›å‹å‚æ•°Tæ²¡æœ‰å£°æ˜ï¼æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨åè®®ä¸­ä½¿ç”¨æ³›å‹æœºåˆ¶ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°AssociateTypeè¿›è¡Œç±»å‹å…³è”ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">LocalStore</span> </span>&#123;</span><br><span class="line">  <span class="keyword">associatedtype</span> <span class="type">StoredObject</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;StoredObject, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">persist</span><span class="params">(<span class="number">_</span> object: StoredObject)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">RemoteStore</span> </span>&#123;</span><br><span class="line">  <span class="keyword">associatedtype</span> <span class="type">TargetObject</span>:<span class="type">Decodable</span> <span class="comment">//ä¸ºäº†çº¦æŸTargetObjectè¦ç¬¦åˆDecodableåè®®è§„åˆ™</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;TargetObject, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰ArrayBackedUserStoreçš„ä¸šåŠ¡ç±»å®ç°LocalStoreåè®®,RemoteUserStoreä¸šåŠ¡ç±»å®ç° RemoteStore åè®®ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ArrayBackedUserStore</span>: <span class="title">LocalStore</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;User, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="comment">//æœ¬åœ°æ•°æ®è¯»å–</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">persist</span><span class="params">(<span class="number">_</span> object: User)</span></span> &#123;</span><br><span class="line">    <span class="comment">//æœ¬åœ°æŒä¹…åŒ–æ“ä½œ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RemoteUserStore</span>: <span class="title">RemoteStore</span> </span>&#123;</span><br><span class="line">  <span class="keyword">typealias</span> <span class="type">TargetObject</span> = <span class="type">User</span> <span class="comment">//å¦‚æœæ‰€ä½¿ç”¨çš„å¯¹è±¡Userä¸æ˜¯Decodableåè®®ï¼Œåˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;TargetObject, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å›åˆ°ä¸Šè¿°CacheBackedDataSource<T>æ³›å‹ç»“æ„ä½“ï¼Œå…¶ä¸­ä¸¤ä¸ªå˜é‡localStoreå’ŒremoteStoreå°†ä¼šç¼–è¯‘å‡ºé”™ï¼Œæç¤ºâ€œProtocol â€˜LocalStoreâ€™ can only be used as a generic constraint because it has Self or associated type requirementsâ€ æ„æ€æ˜¯LocalStoreåè®®é‡Œæœ‰associatedtypeå…³è”ç±»å‹ï¼Œåªèƒ½å¤Ÿé€šè¿‡æ³›å‹çº¦æŸæ¥ä½¿ç”¨ã€‚<br>ç»§ç»­æ”¹è¿›ä»£ç ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CacheBackedDataSource</span>&lt;<span class="title">Local</span>:<span class="title">LocalStore</span>,<span class="title">Remote</span>:<span class="title">RemoteStore</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> localStore: <span class="type">Local</span></span><br><span class="line">  <span class="keyword">let</span> remoteStore: <span class="type">Remote</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;Local.StoredObject, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™æ ·å°±ç¼–è¯‘æ­£å¸¸äº†ã€‚æ­¤æ—¶CacheBackedDataSourceå«æœ‰ä¸¤ä¸ªæ³›å‹å‚æ•°ï¼Œè€ŒResult<T, Error> æ”¹æˆäº†Result<Local.StoredObject, Error>ã€‚å…¶å®ç”¨Result<Remote.TargetObject, Error>ä¹Ÿæ˜¯å¯ä»¥ï¼Œä¸ºäº†ä¿è¯localå’Œremoteå…³è”çš„ç±»å‹ä¸ºåŒä¸€å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬ç»§ç»­å¯¹CacheBackedDataSourceå¢åŠ çº¦æŸï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CacheBackedDataSource</span>&lt;<span class="title">Local</span>:<span class="title">LocalStore</span>,<span class="title">Remote</span>:<span class="title">RemoteStore</span>&gt; <span class="title">where</span> <span class="title">Local</span>.<span class="title">StoredObject</span> == <span class="title">Remote</span>.<span class="title">TargetObject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> localStore: <span class="type">Local</span></span><br><span class="line">  <span class="keyword">let</span> remoteStore: <span class="type">Remote</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(<span class="number">_</span> objectID: String, completion: @escaping <span class="params">(Result&lt;Local.StoredObject, Error&gt;)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    localStore.<span class="built_in">find</span>(objectID) &#123; result <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> object = <span class="keyword">try</span> result.<span class="keyword">get</span>()</span><br><span class="line">        completion(.success(object))</span><br><span class="line">      &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.remoteStore.<span class="built_in">find</span>(objectID) &#123; result <span class="keyword">in</span></span><br><span class="line">          <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> object = <span class="keyword">try</span> result.<span class="keyword">get</span>()</span><br><span class="line">            <span class="keyword">self</span>.localStore.persist(object)</span><br><span class="line">            completion(.success(object))</span><br><span class="line">          &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            completion(.failure(error))</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æœ€åè°ƒç”¨çš„æ—¶å€™ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> localUserStore = <span class="type">ArrayBackedUserStore</span>()</span><br><span class="line"><span class="keyword">let</span> remoteUserStore = <span class="type">RemoteUserStore</span>()</span><br><span class="line"><span class="keyword">let</span> cache = <span class="type">CacheBackedDataSource</span>(localStore: localUserStore, remoteStore: remoteUserStore)</span><br><span class="line">cache.<span class="built_in">find</span>(<span class="string">"someObjectId"</span>) &#123; (result: <span class="type">Result</span>&lt;<span class="type">User</span>, <span class="type">Error</span>&gt;) <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å·²ç»çŸ¥é“ä½¿ç”¨<T>ç»™å¯¹è±¡å®šä¹‰æ³›å‹ï¼Œä½¿ç”¨æ³›å‹å‚æ•°ï¼Œä»¥åŠåœ¨åœ¨åè®®ä¸­ä½¿ç”¨å…³è”ç±»å‹æ¥çº¦æŸå‚æ•°ç±»å‹ã€‚ä»¥åŠåœ¨å¯¹è±¡ä¸­åŒ…å«å®šä¹‰äº†å…³è”çš„åè®®å˜é‡ï¼Œéœ€ä½¿ç”¨æ³›å‹å‚æ•°æ¥å¯¹åè®®å˜é‡è¿›è¡Œçº¦æŸã€‚æ³›å‹çš„åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä½¿ç»„ä»¶æŠ½è±¡ï¼Œå¤ç”¨ã€‚å¯å¸®åŠ©æˆ‘ä»¬æ„å»ºå¼¹æ€§ç»„ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SwiftUI å±æ€§åŒ…è£¹å™¨</title>
      <link href="/2021/07/05/@State/"/>
      <url>/2021/07/05/@State/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æ–‡ç« å°†ç®€è¦è®²è¿°ä½•æ—¶ä½¿ç”¨@State, @Binding, @StateObject, @ObservedObject, @EnvironmentObjectã€‚</p><h3 id="State"><a href="#State" class="headerlink" title="@State"></a>@State</h3><p>@Stateå±æ€§åŒ…è£¹å™¨å¯ç”¨äºå½“ä½ çš„è§†å›¾å¯¹è±¡å“åº”ä»»ä½•çŠ¶æ€æ”¹å˜æ—¶å€™ã€‚æ¢å¥è¯è¯´ï¼Œè§†å›¾åˆå§‹åŒ–@Stateä¿®é¥°çš„å±æ€§å˜é‡ã€‚è¯¥å±æ€§å˜é‡çš„å˜æ›´åªå‘ç”Ÿåœ¨å†…éƒ¨Viewï¼Œè€Œä¸è¢«å¤–ç•Œæ‰€æ”¹å˜ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">struct StateExample: View &#123;</span><br><span class="line">  @State private var intValue &#x3D; 0</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    VStack &#123;</span><br><span class="line">      Text(&quot;intValue equals \(intValue)&quot;)</span><br><span class="line"></span><br><span class="line">      Button(&quot;Increment&quot;) &#123;</span><br><span class="line">        intValue +&#x3D; 1</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åœ¨å†…éƒ¨ï¼ŒSwiftUIå°†ä¼šå­˜å‚¨ @Stateä¿®é¥°çš„å±æ€§å€¼ï¼Œç„¶åè´¯ç©¿æ•´ä¸ªæ¸²æŸ“æˆ–é‡å¤æ¸²æŸ“çš„ç”Ÿå‘½å‘¨æœŸä¸­å°†æŒä¹…åŒ–å­˜å‚¨è¿™ä¸ªå€¼ï¼Œå½“åœ¨è§†å›¾åˆ·æ–°æˆ–è€…é‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼Œè¯¥å±æ€§å€¼å¯ä»¥å¾ˆå¥½åœ°è¢«è§†å›¾è‡ªèº«ç®¡ç†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨privateä¿®é¥°è¯ä¿®é¥°@Stateå±æ€§ï¼Œä¿è¯åªåœ¨å†…éƒ¨ä¿®æ”¹@Stateå±æ€§ã€‚<br>@Stateä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>åœ¨è¢«ä¿®é¥°çš„å±æ€§éœ€è¦å“åº”ä½ è§†å›¾å˜åŒ–çš„çŠ¶æ€æ—¶å€™</li><li>ä½ ä¿®é¥°çš„æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼ˆç»“æ„ä½“ã€æšä¸¾ï¼‰<a id="more"></a></li></ul><h3 id="Binding"><a href="#Binding" class="headerlink" title="@Binding"></a>@Binding</h3><p>@Bindingå±æ€§åŒ…è£¹å™¨ä¿®é¥°çš„å±æ€§å€¼è¢«å…¶ä»–Viewæ‰€ä¼ é€’ã€‚è§†å›¾å†…å®šä¹‰çš„@Bindingä¿®é¥°çš„å±æ€§å€¼å¯æ¥å—å¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œä¹ŸåŒ…å«å†™çš„æƒé™ï¼Œå³å¯å¯¹Bindingä¿®é¥°çš„å±æ€§åšæ›´æ”¹ï¼Œå¯å°†å€¼å“åº”å›åˆ°çˆ¶å®¹å™¨ã€‚ï¼ˆä¸€èˆ¬åœ¨å­view Bindingä¿®é¥°å±æ€§æ¥æ”¶çˆ¶å®¹å™¨åˆå§‹å€¼ï¼Œç„¶åå­viewåšæ›´æ”¹ï¼Œçˆ¶è§†å›¾å¯å®æ—¶å“åº”å…¶ç»“æœã€‚ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">struct StateView: View &#123;</span><br><span class="line">  @State private var intValue &#x3D; 0</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    VStack &#123;</span><br><span class="line">      Text(&quot;intValue equals \(intValue)&quot;)</span><br><span class="line"></span><br><span class="line">      BindingView(intValue: $intValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct BindingView: View &#123;</span><br><span class="line">  @Binding var intValue: Int</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    Button(&quot;Increment&quot;) &#123;</span><br><span class="line">      intValue +&#x3D; 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯´æ˜ï¼šä»¥ä¸Šä»£ç StateViewä¸­æŠŠ @StateåŒ…è£¹ä¿®é¥°çš„intValueé€šè¿‡$ç¬¦å·ä¼ é€’åˆ°BindingViewä¸­ã€‚å­Viewé€šè¿‡Bindingå½¢å¼é—´æ¥ä¿®æ”¹äº†@StateåŒ…è£¹çš„intValueã€‚ç”±äº@BindingåŒ…è£¹ä¿®é¥°æ—¶ï¼Œå€¼æ€»æ˜¯ä»å¤–éƒ¨ä¼ é€’è¿›æ¥ã€‚æ‰€ä»¥å½“è¯•å›¾è¢«ä¸¢å¼ƒæ—¶ï¼ŒSwiftUIä¸ç®¡ç†Bindingã€‚ @Bindinggå¯ä»¥æ¯”ä½œæ˜¯ç»‘å®šä¼ é€’ã€å“åº”çˆ¶è§†å›¾ï¼Œè€Œ@Stateæ˜¯éœ€è¦æŒä¹…åŒ–çŠ¶æ€å˜æ›´ã€‚</p><p>@Bindingä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>ä½ éœ€è¦å¯¹çˆ¶è§†å›¾çš„å±æ€§è¿›è¡Œè¯»æˆ–å†™æƒé™æ—¶å€™</li><li>è¢«åŒ…è£¹çš„å±æ€§æ˜¯å€¼ç±»å‹çš„æ—¶å€™(ç»“æ„ä½“æˆ–æšä¸¾)</li></ul><h3 id="StateObject"><a href="#StateObject" class="headerlink" title="@StateObject"></a>@StateObject</h3><p>@StateObjectä¿®é¥°å±æ€§æœ‰ç‚¹ç±»ä¼¼@Stateçš„ç”¨æ³•ï¼Œä½†å¯ç”¨æ¥å¼•ç”¨ç±»å‹æ¯”å¦‚class. ä¸€èˆ¬ç”¨äºä¿®é¥°ObservableObjectå¯¹è±¡ã€‚ä»¥åŠè®¢é˜…ObservableObjecté‡Œ@Publishedä¿®é¥°çš„å±æ€§ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class DataProvider: ObservableObject &#123;</span><br><span class="line">  @Published var currentValue &#x3D; &quot;a value&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct DataOwnerView: View &#123;</span><br><span class="line">  @StateObject private var provider &#x3D; DataProvider()</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    Text(&quot;provider value: \(provider.currentValue)&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯´æ˜ï¼šDataOwnerViewæŒæœ‰DataProviderçš„å®ä¾‹ã€‚å½“DataProvideré‡Œçš„currentValueå‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå€¼å°†åœ¨DataOwnerViewé‡Œå®æ—¶æ˜¾ç¤ºã€‚å†…éƒ¨ï¼Œå½“DataOwnerViewå‘ç”Ÿåˆ·æ–°éœ€è¦é‡æ–°åˆ›å»ºçš„æ—¶å€™ï¼ŒSwiftUIå°†ä¼šç®¡ç†æŒæœ‰@StateObjectåŒ…è£¹çš„å˜é‡ã€‚æ„å‘³ç€è§†å›¾ä¸­@StateObjectä¿®é¥°çš„å˜é‡åªåˆ›å»º1æ¬¡ã€‚SwiftUIå°†å®ä¾‹å’Œ@StateObjectå…³è”ï¼Œå½“è§†å›¾å†æ¬¡åˆå§‹åŒ–æ—¶å°†ä¼šå†æ¬¡é‡ç”¨@StateObjectä¿®é¥°çš„å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œ@StateObject æ ‡è®°çš„å±æ€§ï¼ŒSwiftUIç»´æŠ¤ç®¡ç†ç€è¯¥å®ä¾‹ï¼Œä¾›è§†å›¾éœ€è¦æ—¶ä½¿ç”¨ï¼ˆç”šè‡³SwiftUIé‡æ–°åˆ›å»ºæ¸²æŸ“è§†å›¾ï¼‰ã€‚å’Œ@Stateä¸åŒçš„æ˜¯ï¼Œ@StateObjectå¯ç”¨æ¥æ¥æ”¶ObservableObjectçš„å¯¹è±¡è€Œä¸æ˜¯æ¥æ”¶ä¸€ä¸ªå€¼ç±»å‹ã€‚</p><p>@StateObjectä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>ä½ æƒ³åœ¨ObservableObjecté‡Œå“åº”æˆ–è€…æ›´æ–°è§†å›¾ã€‚</li><li>åœ¨è§†å›¾ä¸­ï¼Œåˆ›å»ºäº†ObservableObjectå®ä¾‹ï¼Œéœ€è¦ç”¨@StateObjectä¿®é¥°ã€‚</li></ul><h3 id="ObservedObject"><a href="#ObservedObject" class="headerlink" title="@ObservedObject"></a>@ObservedObject</h3><p>@ObservedObjectæ˜¯ç”¨æ¥åŒ…è£¹ObservableObjectå®ä¾‹ï¼Œå’Œ@StateObjectç›¸ä¼¼ï¼Œé™¤äº†è§†å›¾ä¸åˆ›å»ºæ‹¥æœ‰@ObservedObject å®ä¾‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">struct DataOwnerView: View &#123;</span><br><span class="line">  @StateObject private var provider &#x3D; DataProvider()</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    VStack &#123;</span><br><span class="line">      Text(&quot;provider value: \(provider.currentValue)&quot;)</span><br><span class="line"></span><br><span class="line">      DataUserView(provider: provider)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct DataUserView: View &#123;</span><br><span class="line">  @ObservedObject var provider: DataProvider</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    &#x2F;&#x2F; create body and use &#x2F; modify &#96;provider&#96;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>DataOwnerViewå¾€DataUserViewä¼ é€’äº†ä¸€ä¸ª@StateObjectï¼Œè€ŒDataProviderå®ä¾‹åœ¨DatauserViewä¸­è¢«ä½¿ç”¨ã€‚åœ¨DatauserViewä¸­ï¼Œå½“è¯¥è§†å›¾éœ€è¦åˆ·æ–°æ¸²æŸ“çš„æ—¶å€™ï¼ŒSwiftUIå†…éƒ¨ä¸ç»´æŠ¤ä¸ç®¡ç† @ObservedObjectã€‚SwiftUIçŸ¥é“çˆ¶è§†å›¾å°†ä¼šä¼ é€’ObservedObjectè¿‡æ¥,ç”¨äºDatauserViewä¸­ä½œä¸ºä¸€ä¸ªå±æ€§å€¼æ¥ä½¿ç”¨å³å¯ã€‚</p><p>@ObservedObjectä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>ä½ éœ€è¦åœ¨ObservedObjectå“åº”å˜æ›´æˆ–è€…æ›´æ–°</li><li>åœ¨è§†å›¾ä¸­ä¸éœ€åˆ›å»ºObservedObjectçš„å®ä¾‹ï¼ˆå¦‚æœéœ€è¦ï¼Œåˆ™ç”¨@StateObjectï¼‰</li></ul><h3 id="EnvironmentObject"><a href="#EnvironmentObject" class="headerlink" title="@EnvironmentObject"></a>@EnvironmentObject</h3><p>æœ‰æ—¶å€™ä½ éœ€è¦åœ¨ä½ çš„Appå„ç§å„æ ·çš„åœ°æ–¹ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä½ åˆä¸æƒ³ä¸€å±‚å±‚ä¼ é€’ã€‚ä½ å¯èƒ½æƒ³åšä¸€ä¸ªå…¨å±€ä¾èµ–å¯ç”¨äºè®©è§†å›¾çš„æ‰€æœ‰èŠ‚ç‚¹æˆ–è€…ä½ çš„Appéƒ½å…±äº«ä½¿ç”¨åˆ°è¯¥å¯¹è±¡ã€‚é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨@EnvironmentObjectã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">struct EnvironmentUsingView: View &#123;</span><br><span class="line">  @EnvironmentObject var dependency: DataProvider</span><br><span class="line"></span><br><span class="line">  var body: some View &#123;</span><br><span class="line">    Text(dependency.currentValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>@EnvironmentObject ä¿®é¥°çš„å¯¹è±¡å¿…é¡»éµå¾ªObservableObjectåè®®ï¼Œä¸€èˆ¬å¯é…ç½®åœ¨çˆ¶èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Appå…¥å£æ³¨å…¥ä¸€ä¸ªå…¨å±€çš„ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬æ•´ä¸ªAppéƒ½å¯ä»¥ä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">struct MyApp: App &#123;</span><br><span class="line">  @StateObject var dataProvider &#x3D; DataProvider()</span><br><span class="line"></span><br><span class="line">  var body: some Scene &#123;</span><br><span class="line">    WindowGroup &#123;</span><br><span class="line">      EnvironmentUsingView()</span><br><span class="line">        .environmentObject(dataProvider)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“@EnvironmentObject ä¿®é¥°çš„å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™ï¼Œä½ çš„è§†å›¾å°†ä¼šé‡æ–°æ¸²æŸ“ã€‚<br>@EnvironmentObjectä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨@ObservedObjectï¼Œä½†ä½ å¯èƒ½éœ€è¦æŠŠObservableObjectå¯¹è±¡ä¼ é€’åˆ°å¤šä¸ªè§†å›¾ä¸­åˆå§‹åŒ–ä¹‹å‰ï¼Œå› ä¸ºè§†å›¾æ¸²æŸ“çš„æ—¶å€™å¯èƒ½ç”¨åˆ°å®ƒï¼Œé‚£ä¹ˆæ­¤åˆ»å°±ç”¨@EnvironmentObjectã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šè®²è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¸²æŸ“çš„ç±»å‹åˆ†ä¸ºå€¼ç±»å‹å’Œå¯¹è±¡ã€‚<br>å€¼ç±»å‹ï¼š æ•°æ®æ€æ ·ä½¿ç”¨ï¼Ÿå¸¸è§„å±æ€§ï¼Ÿåªè¯»ï¼Ÿè¯»æˆ–å†™ï¼Ÿ è°æŒæœ‰è¯¥æ•°æ®ï¼Ÿæ¥è‡ªå¤–ç•Œï¼Ÿï¼ˆ@Bindingï¼‰ è¿˜æ˜¯è‡ªèº«Viewçš„çŠ¶æ€ï¼ˆ@Stateï¼‰?<br>å¯¹è±¡ç±»å‹ï¼š Viewæ€æ ·æ¥æ”¶è¯¥å¯¹è±¡ï¼Ÿ ä½œä¸ºå‚æ•°ï¼Ÿï¼ˆ@ObservedObjectï¼‰ è‡ªèº«åˆ›å»ºè¯¥å¯¹è±¡å®ä¾‹ï¼Ÿï¼ˆ@StateObjectï¼‰ é€šè¿‡ç¯å¢ƒå˜é‡ï¼Ÿï¼ˆ@EnvironmentObjectï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Sqlite å¹¶è¡Œæ¨¡å¼çš„è¯•éªŒæ¢ç©¶</title>
      <link href="/2021/07/05/sqlite/"/>
      <url>/2021/07/05/sqlite/</url>
      
        <content type="html"><![CDATA[<p>å¤§å¤šæ•°äº§å“åœ¨æœ¬åœ°Sqliteå­˜å‚¨çš„æ—¶å€™ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”¨äº†ä¸²è¡Œæ¨¡å¼ã€‚å³æ•´ä¸ªåº”ç”¨å…¨å±€åªæœ‰ä¸€ä¸ªsqlæ“ä½œå¥æŸ„ï¼Œç”¨å•ä¾‹ç®¡ç†ç€è¿™ä¸ªSqlHandlerã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ¨¡å¼å«çº¿ç¨‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹å¾ˆå®¹æ˜“å‡ºç°Sqlite_Busyé”™è¯¯ã€‚</p><ol><li>å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–è¯»æ“ä½œä¼šè¢«é©³å›ã€‚</li><li>å½“æœ‰å†™æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚</li><li>å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚</li><li>å½“å¼€å¯äº‹åŠ¡æ—¶ï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹å‰ï¼Œå…¶ä»–äº‹åŠ¡è¯·æ±‚ä¼šè¢«é©³å›ã€‚</li><li>å½“æœ‰è¯»æ“ä½œæ—¶ï¼Œå…¶ä»–å†™æ“ä½œä¼šè¢«é©³å›ã€‚</li><li>è¯»æ“ä½œä¹‹é—´èƒ½å¤Ÿå¹¶å‘æ‰§è¡Œã€‚</li></ol><p>ç¬¬ä¸‰æ–¹åº“<a href="https://github.com/Tencent/wcdb/wiki/Swift-%e6%a8%a1%e5%9e%8b%e7%bb%91%e5%ae%9a" target="_blank" rel="noopener">WCDB</a>æ”¯æŒå¤šçº¿ç¨‹åº¦äºè¯»ä¸è¯»ï¼Œè¯»ä¸å†™å¹¶å‘æ‰§è¡Œï¼Œå†™ä¸å†™ä¸²è¡Œæ‰§è¡Œã€‚WCDB åœ¨å¤šçº¿ç¨‹æ–¹é¢æ˜æ˜¾ä¼˜äº FMDB å’Œ ModelSqliteKitï¼Œé€šè¿‡ WCDB çš„æ”¹é€ ï¼Œä½¿å¾—SQLiteçš„æ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚</p><a id="more"></a><p>æˆ‘ä»¬å¯ä»¥è®¾è®¡æ‰€æœ‰å†™çš„ä»»åŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_gyWriteQueue &#x3D; dispatch_queue_create([[NSString stringWithFormat:@&quot;gy_write_queue.%@&quot;, self]</span><br></pre></td></tr></table></figure><br>å½“æ‰€æœ‰å…³äºæ–°å¢ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ç­‰sql ä¸šåŠ¡æ—¶å€™ç»Ÿä¸€ç”¨_gyWriteQueueã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dispatch_sync(_gyWriteQueue,^&#123;</span><br><span class="line">  &#x2F;&#x2F;è¿›è¡Œå†™æ“ä½œ</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å¯ä»¥æ ¹æ®é˜Ÿåˆ—çš„åå­—ï¼Œç¡®å®šæ˜¯å±äºå†™é˜Ÿåˆ—ï¼Œè¿˜æ˜¯è¯»é˜Ÿåˆ—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const char * queueLabel &#x3D; dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL); &#x2F;&#x2F;è·å–å½“å‰é˜Ÿåˆ—çš„åå­—ã€‚</span><br><span class="line">NSString *queueName &#x3D; [NSString stringWithUTF8String:queueLabel];</span><br></pre></td></tr></table></figure><br>å¦‚æœæ˜¯è¯»é˜Ÿåˆ—ï¼Œåˆ™ä»è¯»çš„é˜Ÿåˆ—æ± ä¸­å–ä¸­å–å‡ºä¸ä¹‹å¯¹åº”çš„é˜Ÿåˆ—ï¼Œæ‹¿å‡ºé˜Ÿåˆ—ä¸­æ‰€æŒæœ‰çš„handleå¥æŸ„ã€‚è¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªé˜Ÿåˆ—ä¸­å”¯ä¸€æ­£åœ¨æ‰§è¡Œçš„å­çº¿ç¨‹ä½¿ç”¨è¯¥handleå¥æŸ„ã€‚<br>é¦–å…ˆå‡†å¤‡é˜Ÿåˆ—æ± ï¼Œé˜Ÿåˆ—æœ€å¤§å¹¶å‘æ•°1ï¼Œå¹¶ä¸”æŒæœ‰ä¸€ä¸ªhandle. è¯»å–æ“ä½œæ—¶å€™ï¼Œä»é˜Ÿåˆ—æ± å–å½“å‰æ“ä½œæ•°æœ€å°çš„é˜Ÿåˆ—è¿›è¡Œæ·»åŠ ä»»åŠ¡ã€‚</p><p>ä»¥ä¸‹æ˜¯åˆ›å»ºè¯»é˜Ÿåˆ—çš„é˜Ÿåˆ—æ± :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (void)createSqlHandleToPool:(NSString *)queueName</span><br><span class="line">&#123;</span><br><span class="line">    GYSqlHandle *handleModel &#x3D; [[GYSqlHandle alloc] init]; &#x2F;&#x2F;åˆå§‹åŒ–å³åˆ›å»ºäº†ä¸€ä¸ªsqlå¥æŸ„</span><br><span class="line">    if(handleModel.sqlHandle)&#123;</span><br><span class="line">        GYSqlOperationQueue *sqlQueue &#x3D; [[GYSqlOperationQueue alloc] init];</span><br><span class="line">        sqlQueue.name &#x3D; queueName;</span><br><span class="line">        sqlQueue.sqlQueueName &#x3D; queueName;</span><br><span class="line">        sqlQueue.maxConcurrentOperationCount &#x3D; 1;</span><br><span class="line">        sqlQueue.handle &#x3D; handleModel;</span><br><span class="line"></span><br><span class="line">        [self.dbQueueList addObject:sqlQueue];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç”±äºsqliteçš„å¥æŸ„è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆï¼Œæ‰€ä»¥ç”¨GYSqlHandleå¯¹è±¡è¿›è¡ŒåŒ…è£¹ä¸€ä¸‹æ–¹ä¾¿å¤„ç†ã€‚</p><p>GYSqlOperationQueueä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@interface GYSqlOperationQueue: NSOperationQueue</span><br><span class="line">@property(nonatomic,strong) GYSqlHandle *handle; &#x2F;&#x2F;æ¯ä¸€ä¸ªqueueæŒæœ‰ä¸€ä¸ªhandleæ¨¡å‹</span><br><span class="line">@property(nonatomic,strong) NSString *sqlQueueName; &#x2F;&#x2F;è®°å½•é˜Ÿåˆ—å</span><br><span class="line">- (NSComparisonResult)compareByOperationsCount:(GYSqlOperationQueue *) another;</span><br><span class="line">-(void)addSqlOperationWithBlock:(void (^)(void))block;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation GYSqlOperationQueue</span><br><span class="line"></span><br><span class="line">- (NSComparisonResult)compareByOperationsCount:(GYSqlOperationQueue *) another</span><br><span class="line">&#123;</span><br><span class="line">    if (self.operations.count &gt; another.operations.count) &#123;</span><br><span class="line">        return NSOrderedAscending;</span><br><span class="line">    &#125;</span><br><span class="line">    else if(self.operations.count &lt; another.operations.count)</span><br><span class="line">    &#123;</span><br><span class="line">        return NSOrderedDescending;</span><br><span class="line">    &#125;</span><br><span class="line">    return NSOrderedSame;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)addSqlOperationWithBlock:(void (^)(void))block &#123;</span><br><span class="line">    if(self)&#123;</span><br><span class="line">        NSOperation *operation &#x3D; [NSBlockOperation blockOperationWithBlock:block];</span><br><span class="line">        id lastOperation &#x3D; self.operations.lastObject;</span><br><span class="line">        if(lastOperation)&#123;</span><br><span class="line">            [operation addDependency:lastOperation];</span><br><span class="line">        &#125;</span><br><span class="line">        [self addOperation:operation];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><br>è¿™é‡Œä»…ä¸ºä¸ªäººçš„ä¸€äº›è¯•éªŒæ€§çš„æ¢ç´¢ï¼Œå› ä¸ºå…¨å±€ä¸šåŠ¡ä»£ç æ— æ³•å›ºå®šä½¿ç”¨æŸç»Ÿä¸€é˜Ÿåˆ—ï¼Œçº¿ç¨‹ä¹‹é—´å¯èƒ½å‡ºç°åµŒå¥—ç­‰ï¼Œæ— æ³•ä¿è¯ä¸€ä¸ªHandleåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯æˆ‘çš„ç–‘æƒ‘ç‚¹ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šäº¤æµã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç‰‡ç¼–è¾‘æ€»ç»“</title>
      <link href="/2021/07/04/pictureEdit/"/>
      <url>/2021/07/04/pictureEdit/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å›¾ç‰‡ç¼–è¾‘æ˜¯åŸºäº CLImageEditor ç¬¬ä¸‰æ–¹è¿›è¡Œæ”¹è£…å¾—åˆ°ä»¿å¾®ä¿¡çš„å›¾ç‰‡ç¼–è¾‘äº¤äº’ã€‚åŸCLImageEditoråº“æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„å›¾ç‰‡ç¼–è¾‘ï¼Œæ”¯æŒæ¶‚é¸¦ï¼Œè£å‰ªï¼Œæ—‹è½¬ï¼Œæ–‡å­—å¸–åŠŸèƒ½ã€‚ä½†æœ‰å‡ é¡¹æˆ‘ä»¬è¿›è¡Œæ”¹è¿›ã€‚</p><ul><li>æ‰€æœ‰çš„è¿™äº›å›¾ç‰‡æ“ä½œæˆ‘ä»¬æ±‡æ€»åˆ°ä¸€èµ·è¿›è¡Œç¼–è¾‘ï¼Œæœ€ç»ˆä¿å­˜çš„æ—¶å€™æ‰å¤„ç†æ‰€æœ‰æ“ä½œæ±‡æ€»æˆä¸€å¼ å¤„ç†å›¾ç‰‡ã€‚</li><li>æ¶‚é¸¦æ’¤é”€åŠŸèƒ½å®ç°çœŸæ­£çš„ä¸Šä¸€æ­¥æ’¤é”€ï¼Œè€Œä¸æ˜¯ä»…ä»…é€æ˜è‰²è¿›è¡Œæ©¡çš®æ“¦æ“¦é™¤ã€‚</li><li>æ–°å¢é©¬èµ›å…‹æ“ä½œåŠŸèƒ½ã€‚</li><li>æŠŠå›¾ç‰‡è£å‰ªå’Œæ—‹è½¬è¿›è¡Œç»“åˆåˆ°ä¸€ä¸ªé¡µé¢æ“ä½œï¼Œå¦å¤–æ–°å¢è£å‰ªã€æ—‹è½¬ä¹‹åçš„å›¾ç‰‡æ¢å¤ã€‚</li><li>æ”¹å˜é¢œè‰²é€‰æ‹©ï¼Œæ–‡å­—ç¼–è¾‘çš„äº¤äº’ï¼Œæ–°å¢å›¾ç‰‡è£å‰ªåŒºåŸŸçš„è¾¹è§’é‡ç‚¹æ ‡æ³¨ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CLImageEditorViewControllerï¼š</span><br><span class="line"></span><br><span class="line">usedToolDicï¼šä½¿ç”¨è¿‡çš„å·¥å…·ã€toolName:CLImageToolBaseã€‘</span><br><span class="line"></span><br><span class="line">-(CLImageToolBase *)currentEditTool; å½“å‰æ­£åœ¨ä½¿ç”¨çš„å·¥å…·ã€‚</span><br><span class="line"></span><br><span class="line">-(UIImage *)getMergeDrawImageForCropTool; æœ€ååˆæˆçš„å›¾ç‰‡ã€‚ç”¨äºä¸šåŠ¡è½¬å‘ã€ä¿å­˜ã€å›è°ƒç»™ç”¨æˆ·ã€‚</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;å›¾ç‰‡ç¼–è¾‘å™¨æ‰€æ”¯æŒçš„å·¥å…·ç±»éƒ½ç»§æ‰¿äºCLImageToolBase, é€šè¿‡CLClassListè¾…åŠ©ç±»runtimeæ–¹å¼è‡ªåŠ¨å°†ç›¸å…³å·¥å…·ç±»æ³¨å…¥åˆ°èœå•é¡¹ä¸­ã€‚</span><br><span class="line">+ (NSArray*)subtools</span><br><span class="line">&#123;</span><br><span class="line">    return [CLImageToolInfo toolsWithToolClass:[CLImageToolBase class]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>CLImageToolBase å·¥å…·åŸºç±»ï¼šæŒæœ‰editorç¼–è¾‘å™¨æ–¹ä¾¿æ‹¿åˆ°å›¾ç‰‡ï¼ŒåŒæ—¶å…·æœ‰setup, cleanUp è¿™å‡ ä¸ªâ€œç”Ÿå‘½å‘¨æœŸâ€æ–¹æ³•ï¼Œåšç›¸å…³å·¥å…·çš„è§†å›¾åˆ›å»ºä¸æ¸…é™¤ã€‚<a id="more"></a><h2 id="ç”»ç¬”æ¶‚é¸¦"><a href="#ç”»ç¬”æ¶‚é¸¦" class="headerlink" title="ç”»ç¬”æ¶‚é¸¦"></a>ç”»ç¬”æ¶‚é¸¦</h2></li></ul><p>ç”»ç¬”æ‰‹åŠ¿ï¼šé€šè¿‡ UIPanGestureRecongnizer æ‰‹åŠ¿å®ç°åœ¨ imageview çš„è¡¨å±‚æ–° ImageView,é€šè¿‡ç”»å¸ƒç”Ÿæˆ image ç»™ ImageView èµ‹å€¼ã€‚</p><h3 id="ç”»ç¬”æ’¤é”€"><a href="#ç”»ç¬”æ’¤é”€" class="headerlink" title="ç”»ç¬”æ’¤é”€"></a>ç”»ç¬”æ’¤é”€</h3><p>æ—§æ’¤é”€ï¼šCLImageEditor å¼€æºåº“æ¶‚é¸¦æ’¤é”€åŸæœ¬æ˜¯ä¸€ä¸ªæ©¡çš®æª«åŠŸèƒ½ï¼Œé€šè¿‡è®¾ç½®BlendModeä¸ºé€æ˜è‰²æ¥å®ç°æ“¦é™¤ç”»ç¬”çº¿æ¡ã€‚å‡â€œæ’¤é”€â€ã€‚ CGContextSetBlendMode(context, kCGBlendModeClear);<br>æ’¤é”€-æ–¹æ¡ˆæ¼”å˜ï¼š</p><ul><li><p>æ–°æ–¹æ¡ˆ1: ä¸ºäº†å¯ä»¥çœŸæ­£çš„å®ç°æ’¤é”€ï¼Œæˆ‘ä»¬æŠŠ Pan æ‰‹åŠ¿ç”±å¼€å§‹åˆ°è§¦æ‘¸ç»“æŸè¡¨ç¤ºä¸ºä¸€æ¡çº¿ï¼Œç„¶åç”¨ä¸€ä¸ªæ•°æ®æºå­˜å‚¨å¥½è¿™äº›çº¿æ¡ã€‚å½“æ’¤é”€çš„æ—¶å€™ï¼Œå®é™…ä¸ºç§»é™¤æœ€åä¸€ä¸ªçº¿æ¡å³å¯ã€‚è¡¨å±‚å³ä¸€ä¸ªdrawImageView,æ‰€æœ‰ç”»ç¬”æ¶‚é¸¦åˆæˆå›¾ç‰‡æœ€ç»ˆåªèµ‹å€¼ç»™drawImageViewæ˜¾ç¤ºã€‚<br>åœ¨CLDrawTool ç±»ä¸Šæ–°å¢ä¸‰ä¸ªå±æ€§ï¼šç”¨æ¥è®°å½•ç”»å¸ƒå›¾å±‚ä¸Šåˆ’çº¿çš„æ“ä½œã€‚ç”±äºæ¯æ¡çº¿å¯åˆ‡æ¢é¢œè‰²è¿›è¡Œæ¶‚é¸¦ï¼Œæ‰€ä»¥æ¯æ¡çº¿éƒ½å¯¹åº”lineColorsArray é¢œè‰²æ•°ç»„æ¥è®°å½•ã€‚ä¸€æ¡çº¿å³ä¸ºnowPointArrayæ•°ç»„ã€‚è®°å½•ä¸€æ¡çº¿ä¸Šçš„æ‰€æœ‰ç‚¹ã€‚è€ŒlinePointArrayç”¨æ¥è®°å½•æ‰€æœ‰çº¿ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@property(nonatomic,strong) NSMutableArray *nowPointArray; &#x2F;&#x2F;å½“å‰çº¿çš„æ‰€æœ‰ç‚¹</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *lineColorsArray;&#x2F;&#x2F;æ¯æ¡çº¿å¯¹åº”çš„é¢œè‰²</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *linePointArray;</span><br><span class="line">&#x2F;&#x2F;æ‰€æœ‰çº¿ã€nowPointArrayã€‘</span><br></pre></td></tr></table></figure><p>  æ’¤é”€çš„æ—¶å€™ï¼šç§»é™¤æœ€åä¸€æ¡çº¿ä»¥åŠé¢œè‰²ã€‚é‡æ–°ç»˜åˆ¶åˆ°å½“å‰çš„ç”»å¸ƒä¸Šï¼Œç„¶åç”Ÿæˆimageèµ‹å€¼ç»™è¡¨å±‚çš„drawImageView.</p><p>  ç¼ºç‚¹1ï¼šæ¯æ¬¡æ’¤é”€ç§»é™¤æœ€åä¸€æ¡çº¿ï¼Œéƒ½éœ€è¦é‡ç»˜æ‰€æœ‰çº¿ã€‚ä»¥åŠæ¯æ¬¡æ–°æ¶‚é¸¦æ—¶å€™ï¼Œéƒ½éœ€è¦é‡æ–°å®æ—¶ç»˜åˆ¶æ‰€æœ‰çº¿æ¥è¾¾åˆ°å®æ—¶æ˜¾ç¤ºçš„æ•ˆæœã€‚æ€§èƒ½æ¶ˆè€—å¤ªå¤§ï¼Œä¸åˆ©äºç”¨äºå¿«é€Ÿç»˜åˆ¶ã€‚</p><p>  ç¼ºç‚¹2ï¼šå½“å›¾ç‰‡æ—‹è½¬åï¼Œæ— æ³•å¯¹æ‰€æœ‰çº¿ä¸Šçš„ç‚¹åšç›¸åº”çš„æ—‹è½¬å’Œæ”¾å¤§ã€‚æ—‹è½¬å›¾ç‰‡åï¼Œçº¿æ¡é”™ä½ã€‚</p>  <font color=red>ç¼ºé™·ï¼šè¿™ç§â€œæ­£å¸¸â€æ’¤é”€æ— æ³•æ»¡è¶³å½“å›¾ç‰‡æ—‹è½¬åï¼Œæ‰€æœ‰çº¿æ¡çš„ä½ç½®å˜åŒ–ï¼Œå³ æˆ‘ä»¬åº”è¯¥æ ¹æ®è§’åº¦å»æ—‹è½¬æ‰€æœ‰ç‚¹çš„æ—‹è½¬åçš„ç‚¹åæ ‡</font></li><li><p>æ–°æ–¹æ¡ˆ2ã€ä¸ºäº†è§£å†³å›¾ç‰‡æ—‹è½¬åçš„çš„åæ ‡ç‚¹æ”¹å˜å’Œè®¡ç®—é—®é¢˜ï¼Œæˆ‘ä»¬æ¢äº†ä¸€ç§æ€è·¯ï¼šå³ä¸€æ¬¡ Pan æ‰‹åŠ¿ç”Ÿæˆä¸€å¼ å›¾å±‚ï¼Œæ—‹è½¬æ—¶æ—‹è½¬æ‰€æœ‰ç”»ç¬”å›¾å±‚è¿›è¡Œæ—‹è½¬ã€‚ æ¯æ¬¡ç”»å®Œä¸€æ¡çº¿ï¼Œå³åœ¨è¡¨å±‚ç”Ÿæˆä¸€å¼ æ–°çš„drawImageView. å½“ç”»å¤šæ¡çº¿çš„æ—¶å€™ï¼Œå®åˆ™ã€drawImageViewã€‘é›†åˆã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123;</span><br><span class="line">    &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚</span><br><span class="line">    [self generateDrawImageView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å°†çº¿æ¡å±æ€§ç§»è‡³DrawPageDataæ¨¡å‹ä¸­ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@interface DrawPageData : NSObject</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *nowPointArray; &#x2F;&#x2F;å½“å‰ç‚¹</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *lineColorsArray;&#x2F;&#x2F;æ¯æ¡çº¿å¯¹åº”çš„é¢œè‰²</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *linePointArray; &#x2F;&#x2F;æ‰€æœ‰çº¿</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><p>  CLDrawTool ä¸­ æ–°å¢ä¸¤å±æ€§ç”¨æ¥è®°å½•æ‰€æœ‰å›¾å±‚ä»¥åŠå›¾å±‚æ‰€å¯¹åº”çš„åˆ’çº¿æ•°æ®æ¨¡å‹ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@property(nonatomic,strong) NSMutableArray *drawImageViews; &#x2F;&#x2F;[imageView]</span><br><span class="line">@property(nonatomic,strong) NSMutableArray *drawPages; &#x2F;&#x2F;[DrawPageData]</span><br></pre></td></tr></table></figure><p>  æ’¤é”€ï¼š</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_lastDrawPage.linePointArray removeLastObject ç§»é™¤æœ€åä¸€æ¡çº¿;</span><br><span class="line">_lastDrawPage.lineColorsArray removeLastObject ç§»é™¤é¢œè‰²;</span><br><span class="line">clearTopDrawImageView ç§»é™¤æœ€é¡¶å±‚çš„ç”»ç¬”å›¾ç‰‡å±‚ã€‚</span><br></pre></td></tr></table></figure>  <font color=green>ä¼˜ç‚¹ï¼šæ­¤æ–¹æ¡ˆæ—¢ä¿è¯äº†ç»˜åˆ¶æ—¶ä¸å†èµ°é‡ç»˜ï¼Œæ¯æ¡çº¿éƒ½åœ¨å•ç‹¬çš„å›¾å±‚ä¸Šã€‚åŒæ—¶åœ¨å›¾ç‰‡å‘ç”Ÿæ—‹è½¬æ—¶ï¼Œæ—‹è½¬æ¯ä¸€æ¡çº¿é”åœ¨çš„å›¾ç‰‡drawImageView,ä¿è¯äº†æ¯ä¸€æ¡çº¿æ˜¾ç¤ºéƒ½æ­£ç¡®ã€‚</font></li></ul>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">@property(nonatomic,strong) DrawPageData _lastDrawPage; &#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªå½“å‰é¡µè®°å½•æ¨¡å‹</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ç”»ç¬”æ’¤é”€åŠŸèƒ½</span><br><span class="line">-(void)eraserButtonDidTap:(UIButton *)btn&#123;</span><br><span class="line">if (_lastDrawPage.linePointArray &amp;&amp; _lastDrawPage.linePointArray.count &gt;&#x3D; 1) &#123;</span><br><span class="line">  [_lastDrawPage.linePointArray removeLastObject];</span><br><span class="line">  [_lastDrawPage.lineColorsArray removeLastObject];</span><br><span class="line">  [self drawAllPanLine:_drawingView byDrawPage:_lastDrawPage];</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F;å½“å‰ç”»ç¬”å±‚æ‰€æœ‰çº¿éƒ½ç§»é™¤äº†çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨ç§»é™¤å½“å‰ç”»ç¬”å±‚</span><br><span class="line">      if(_lastDrawPage.linePointArray.count &#x3D;&#x3D; 0)&#123;</span><br><span class="line">          &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚</span><br><span class="line">          if(self.drawImageViews.count &gt; 1)&#123;</span><br><span class="line">              [self clearTopDrawImageView];</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">      &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚</span><br><span class="line">      if(self.drawPages.count &gt; 1)&#123;</span><br><span class="line">          [self clearTopDrawImageView];</span><br><span class="line">          [self eraserButtonDidTap:nil]; &#x2F;&#x2F;é€’å½’ç§»é™¤ç©ºçš„drawImageView</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;æ¸…é™¤é¡¶å±‚çš„ç”»ç¬” imageview</span><br><span class="line">-(void)clearTopDrawImageView&#123;</span><br><span class="line">  [self.drawPages removeLastObject];</span><br><span class="line">  [((UIImageView *)self.drawImageViews.lastObject) removeFromSuperview];</span><br><span class="line">  [self.drawImageViews removeLastObject];</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;é‡ç½®å½“å‰çš„å±‚çº§page</span><br><span class="line">  _lastDrawPage &#x3D; self.drawPages.lastObject;</span><br><span class="line">  _drawingView &#x3D; self.drawImageViews.lastObject;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¸²æŸ“ç”»ç¬”å›¾å±‚"><a href="#æ¸²æŸ“ç”»ç¬”å›¾å±‚" class="headerlink" title="æ¸²æŸ“ç”»ç¬”å›¾å±‚"></a>æ¸²æŸ“ç”»ç¬”å›¾å±‚</h3><ul><li>ç°åœ¨çš„æ¸²æŸ“é€»è¾‘æ˜¯æ¯ä¸ª DrawPage é‡Œé¢çš„ linePointArray åªä¼šæœ‰ä¸€æ¡çº¿ï¼Œå¤–å±‚ for å¾ªç¯å…¶å®å¯ä»¥çœç•¥ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ä¼ å…¥drawImageView å’Œ drawPageData è¿›è¡Œåˆ’çº¿</span><br><span class="line">-(void)drawAllPanLine:(UIImageView *)drawImageView byDrawPage:(DrawPageData *)lastDrawPage</span><br><span class="line">&#123;</span><br><span class="line">    CGSize size &#x3D; drawImageView.frame.size;</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿</span><br><span class="line">    for (int i &#x3D; 0 ; i &lt; lastDrawPage.linePointArray.count ; i ++ ) &#123;</span><br><span class="line">        NSMutableArray *pointArray &#x3D; [lastDrawPage.linePointArray objectAtIndex:i];</span><br><span class="line"></span><br><span class="line">        CGContextRef context &#x3D; UIGraphicsGetCurrentContext();</span><br><span class="line">        CGFloat strokeWidth &#x3D; 6.5;</span><br><span class="line">        CGContextSetLineWidth(context, strokeWidth);</span><br><span class="line">        CGContextSetLineJoin(context, kCGLineJoinRound);</span><br><span class="line">        CGContextSetLineCap(context, kCGLineCapRound);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        UIColor *strokeColor &#x3D; lastDrawPage.lineColorsArray[i]; &#x2F;&#x2F;å¾—å‡ºæ¯æ¡çº¿çš„é¢œè‰²</span><br><span class="line">        CGContextSetStrokeColorWithColor(context, strokeColor.CGColor);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹</span><br><span class="line">        for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123;</span><br><span class="line">            NSValue *value &#x3D; [pointArray objectAtIndex:j];</span><br><span class="line">            CGPoint p &#x3D; [value CGPointValue];</span><br><span class="line">            if (j &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                CGContextMoveToPoint(context, p.x, p.y);</span><br><span class="line">                CGContextAddLineToPoint(context, p.x, p.y);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                CGContextAddLineToPoint(context, p.x, p.y);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        CGContextStrokePath(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    drawImageView.image &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line"></span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Pan æ‰‹åŠ¿çš„äº‹ä»¶å¤„ç†</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender</span><br><span class="line">&#123;</span><br><span class="line">    if([[self.editor currentEditTool] isKindOfClass:[CLMosaicTool class]])&#123;</span><br><span class="line">       &#x2F;&#x2F;æ‰‹åŠ¿åŠŸèƒ½ä¼ é€’ï¼Œæ‰€æœ‰toolå›¾å±‚éƒ½å åœ¨ä¸€èµ·ã€‚å› é©¬èµ›å…‹å›¾å±‚åœ¨æœ€åº•å±‚ï¼Œæ¶‚é¸¦åœ¨é©¬èµ›å…‹ä¸Šå±‚ï¼Œæ–‡å­—å±‚åœ¨æœ€é¡¶å±‚ã€‚</span><br><span class="line">        CLMosaicTool *mosaicTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;];</span><br><span class="line">        [mosaicTool drawingViewDidPan:sender];</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView];</span><br><span class="line"></span><br><span class="line">    if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123;</span><br><span class="line">        _lastDrawPage.nowPointArray &#x3D; [[NSMutableArray alloc] init];</span><br><span class="line">        UIColor *currentLineStrokeColor &#x3D; _strokePreview.backgroundColor; &#x2F;&#x2F;è®°å½•å½“å‰ç”»çº¿é¢œè‰²ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½åˆ‡æ¢é¢œè‰²ã€‚</span><br><span class="line">        [_lastDrawPage.lineColorsArray addObject:currentLineStrokeColor];</span><br><span class="line">        [_lastDrawPage.linePointArray addObject:_lastDrawPage.nowPointArray];</span><br><span class="line">        _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;è®°å½•å½“å‰çš„ç‚¹</span><br><span class="line">    NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition];</span><br><span class="line">    [_lastDrawPage.nowPointArray addObject:point];</span><br><span class="line"></span><br><span class="line">    [self drawAllPanLine:_drawingView byDrawPage:_lastDrawPage];</span><br><span class="line"></span><br><span class="line">    _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line"></span><br><span class="line">    if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123;</span><br><span class="line">        &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚</span><br><span class="line">        [self generateDrawImageView]; &#x2F;&#x2F;å¦‚æœè¦åœ¨ä¸€å¼ å›¾ä¸Šç”»å¤šæ¡çº¿ï¼Œåˆ™å±è”½æ‰æ­¤å±€ã€‚</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç”»å®Œä¸€æ¡çº¿ç”Ÿæˆä¸€å¼ å›¾å±‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-(void)generateDrawImageView&#123;</span><br><span class="line">    DrawPageData *pageData &#x3D; [[DrawPageData alloc] init];</span><br><span class="line">    [self.drawPages addObject:pageData];</span><br><span class="line">    _lastDrawPage &#x3D; pageData;</span><br><span class="line"></span><br><span class="line">    UIImageView *lastDrawImageView &#x3D; [[UIImageView alloc] initWithFrame:self.editor.imageView.bounds];</span><br><span class="line">    UIPanGestureRecognizer *panGesture &#x3D; [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(drawingViewDidPan:)];</span><br><span class="line">    panGesture.maximumNumberOfTouches &#x3D; 1;</span><br><span class="line">    lastDrawImageView.userInteractionEnabled &#x3D; YES;</span><br><span class="line">    lastDrawImageView.tag &#x3D; 100 + self.drawImageViews.count;</span><br><span class="line">    [lastDrawImageView addGestureRecognizer:panGesture];</span><br><span class="line"></span><br><span class="line">    if(self.drawImageViews.count)&#123;</span><br><span class="line">        [self.editor.imageView insertSubview:lastDrawImageView aboveSubview:_drawingView];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        [self.editor.imageView addSubview:lastDrawImageView];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [self.drawImageViews addObject:lastDrawImageView];</span><br><span class="line">    _drawingView &#x3D; lastDrawImageView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›¾ç‰‡æ—‹è½¬"><a href="#å›¾ç‰‡æ—‹è½¬" class="headerlink" title="å›¾ç‰‡æ—‹è½¬"></a>å›¾ç‰‡æ—‹è½¬</h3><p> å½“å›¾ç‰‡å‘ç”Ÿæ—‹è½¬æˆ–è€…è£å‰ªæ“ä½œæ—¶å€™ï¼Œéœ€è¦ä» usedToolDic ä¸­æ‹¿å‡ºCLDrawTool å’Œ CLMosialTool ï¼Œå–å‡ºå…¶ä¸­çš„ã€drawImageViewã€‘é›†åˆï¼Œå¯¹å…¶ä¸­çš„æ¯ä¸€å¼ å›¾å±‚è¿›è¡Œæ—‹è½¬å’Œè£å‰ªï¼Œå†èµ‹å›ç»™å¯¹åº”çš„æ¯ä¸€é¡¹å›¾å±‚drawImageView. å†è°ƒæ•´æ¯ä¸€é¡¹drawImageViewçš„frame. è°ƒç”¨æ­¤æ–¹æ³•ã€‚<br> //é‡ç½®ç”»ç¬”å±‚&amp;é©¬èµ›å…‹å±‚çš„frameã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (void)resetDrawImageViewFrame:(UIImage *)image withDrawImageView:(UIImageView *)drawingView</span><br></pre></td></tr></table></figure></p><p>//ä»¥ä¸‹ä»£ç åœ¨CLClippingæ—‹è½¬æˆ–è£å‰ªæ“ä½œå®Œæˆæ—¶å€™çš„å›è°ƒéœ€è¦å¯¹æ¶‚é¸¦å›¾å±‚åšçš„imageå’Œframeå¤„ç†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CLDrawTool *_drawTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLDrawTool&quot;];</span><br><span class="line">if(_drawTool)&#123;</span><br><span class="line">    &#x2F;&#x2F;å°†å¤šå¼ ç”»ç¬”å›¾è¿›è¡Œå›¾ç‰‡æºæ—‹è½¬ã€‚</span><br><span class="line">    for(UIImageView *drawingView in _drawTool.drawImageViews)&#123;</span><br><span class="line">        UIImage *roateDrawImage &#x3D; [self buildRoteImage:drawingView.image];</span><br><span class="line">        &#x2F;&#x2F;éœ€è¦å¯¹imageviewsè¿›è¡Œæ—‹è½¬</span><br><span class="line">        CGFloat roateZoomScale &#x3D; _rotateImageView.width &#x2F; roateDrawImage.size.width;</span><br><span class="line">        CGRect roateRct &#x3D; _gridView.clippingRect;</span><br><span class="line">        roateRct.size.width  &#x2F;&#x3D; roateZoomScale;</span><br><span class="line">        roateRct.size.height &#x2F;&#x3D; roateZoomScale;</span><br><span class="line">        roateRct.origin.x    &#x2F;&#x3D; roateZoomScale;</span><br><span class="line">        roateRct.origin.y    &#x2F;&#x3D; roateZoomScale;</span><br><span class="line">        UIImage *roateCropDrawImage &#x3D; [roateDrawImage crop:roateRct];</span><br><span class="line">        drawingView.image &#x3D; roateCropDrawImage; &#x2F;&#x2F;è®¾ç½®è£å‰ªåçš„å›¾ç‰‡ã€‚</span><br><span class="line">        [self.editor resetDrawImageViewFrame:roateCropDrawImage withDrawImageView:drawingView];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="é©¬èµ›å…‹"><a href="#é©¬èµ›å…‹" class="headerlink" title="é©¬èµ›å…‹"></a>é©¬èµ›å…‹</h2><p>é©¬èµ›å…‹çš„æ€è·¯å’Œç”»ç¬”å·®ä¸å¤šï¼Œä¹Ÿæ˜¯æ ¹æ®ç”¨æˆ· pan æ‰‹åŠ¿è¿›è¡Œè§¦æ‘¸ï¼Œæ‰€ç”»çš„é¢œè‰²ä¸ºåŸå›¾ç» RGB æ¨¡ç³Šæ¢ç®—å¾—åˆ°çš„é©¬èµ›å…‹å›¾ç‰‡ï¼Œç®—æ³•ä½¿ç”¨ XRGBTool ç¬¬ä¸‰æ–¹çš„ä¸€ä¸ªç±»ã€‚</p><h3 id="é©¬èµ›å…‹åˆå§‹æ–¹æ¡ˆ"><a href="#é©¬èµ›å…‹åˆå§‹æ–¹æ¡ˆ" class="headerlink" title="é©¬èµ›å…‹åˆå§‹æ–¹æ¡ˆ"></a>é©¬èµ›å…‹åˆå§‹æ–¹æ¡ˆ</h3><p>åŸå…ˆçš„æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ª imageLayerï¼Œç„¶åæ·»åŠ åˆ° imageView çš„ layer: [self.editor.imageView.layer insertSublayer:_imageLayer atIndex:0]; //ç¡®å®šé©¬èµ›å…‹åœ¨æœ€åº•éƒ¨.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CALayer *imageLayer &#x3D; [CALayer layer];</span><br><span class="line">imageLayer.frame &#x3D; drawingView.bounds;</span><br><span class="line">imageLayer.contents &#x3D; (id)_mohuImage.CGImage;</span><br><span class="line"></span><br><span class="line">CAShapeLayer *shapeLayer &#x3D; [CAShapeLayer layer];</span><br><span class="line">shapeLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds;</span><br><span class="line">shapeLayer.lineCap &#x3D; kCALineCapRound;</span><br><span class="line">shapeLayer.lineJoin &#x3D; kCALineJoinRound;</span><br><span class="line">shapeLayer.lineWidth &#x3D; 15;</span><br><span class="line">shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor;</span><br><span class="line">shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……</span><br><span class="line">imageLayer.mask &#x3D; shapeLayer;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åœ¨panæ‰‹åŠ¿æ—¶å€™ï¼Œé€šè¿‡æ”¹å˜shareLayer.path</span><br><span class="line">CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView];</span><br><span class="line">CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);</span><br><span class="line">_shapeLayer.path &#x3D; _path;</span><br></pre></td></tr></table></figure><p>æœ€ååˆæˆå›¾ç‰‡çš„æ—¶å€™ï¼Œé€šè¿‡ imageview.layer æ¸²æŸ“åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼š [self.editor.imageView.layer renderInContext:context];</p><font color=red>å­˜åœ¨çš„é—®é¢˜(ä¸€)ï¼špath è·¯å¾„ä¸å¯æ’¤å› </font><h3 id="é©¬èµ›å…‹æ’¤å›"><a href="#é©¬èµ›å…‹æ’¤å›" class="headerlink" title="é©¬èµ›å…‹æ’¤å›"></a>é©¬èµ›å…‹æ’¤å›</h3><p>åˆ›å»ºä¸€ä¸ªå¯å˜çš„ path è·¯å¾„ CGMutablePathRef _path = CGPathCreateMutable(); å¹¶å°†æ¯æ¡çº¿è¿›è¡Œå åŠ ï¼ŒCGPathAddPath(_path, nil, _onePath);æœ€åå°†æ€»çš„_path èµ‹ç»™_shapeLayer.pathã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender</span><br><span class="line">&#123;</span><br><span class="line">    CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView];</span><br><span class="line"></span><br><span class="line">    if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123;</span><br><span class="line">        _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line">        _nowPointArray &#x3D; [[NSMutableArray alloc] init];</span><br><span class="line">        [_linePointArray addObject:_nowPointArray];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;æ— æ’¤é”€æ—¶å€™çš„å•æ¬¡é©¬èµ›å…‹æ¶‚æŠ¹</span><br><span class="line">&#x2F;&#x2F;        CGPathMoveToPoint(_path, nil, _prevDraggingPosition.x, _prevDraggingPosition.y);</span><br><span class="line">&#x2F;&#x2F;        _shapeLayer.path &#x3D; _path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    if(sender.state !&#x3D; UIGestureRecognizerStateEnded)&#123;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;        CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);</span><br><span class="line">&#x2F;&#x2F;        _shapeLayer.path &#x3D; _path;</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition];</span><br><span class="line">    [_nowPointArray addObject:point];</span><br><span class="line">    [self drawAllPanLine];</span><br><span class="line">    _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’¤é”€çš„æ“ä½œ-æ—§"><a href="#æ’¤é”€çš„æ“ä½œ-æ—§" class="headerlink" title="æ’¤é”€çš„æ“ä½œ(æ—§)"></a>æ’¤é”€çš„æ“ä½œ(æ—§)</h4><font color=red>æµç¨‹ï¼šå½“æ’¤é”€æ—¶ï¼Œä»…ç§»é™¤æ•°ç»„è®°å½•çš„æœ€åä¸€æ¡çº¿ã€‚ç„¶åè¦é‡æ–°è°ƒç”¨ä¸€éæ¸²æŸ“ã€‚æŠŠæ¯æ¡çº¿çš„æ‰€æœ‰ç‚¹è¿›è¡Œè¿æ¥ CGPathAddPathï¼Œèµ‹å€¼ç»™æ€»çš„å¯å˜_pathï¼Œæœ€åæŠŠ_path ç»™_shapeLayer.path</font><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ’¤å›ä¸Šä¸€æ­¥</span><br><span class="line">-(void)eraserButtonDidTap:(UIButton *)btn&#123;</span><br><span class="line">    if (_linePointArray &amp;&amp; _linePointArray.count &gt;&#x3D; 1) &#123;</span><br><span class="line">        [_linePointArray removeLastObject];</span><br><span class="line">        [self drawAllPanLine];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">-(void)drawAllPanLine</span><br><span class="line">&#123;</span><br><span class="line">    CGPathRelease(_path);</span><br><span class="line">    _path &#x3D; CGPathCreateMutable();</span><br><span class="line">    &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿</span><br><span class="line">    for (int i &#x3D; 0 ; i &lt; _linePointArray.count ; i ++ ) &#123;</span><br><span class="line">        NSMutableArray *pointArray &#x3D; [_linePointArray objectAtIndex:i];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹</span><br><span class="line">        CGMutablePathRef _onePath &#x3D; CGPathCreateMutable();</span><br><span class="line">        for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123;</span><br><span class="line">            NSValue *value &#x3D; [pointArray objectAtIndex:j];</span><br><span class="line">            CGPoint p &#x3D; [value CGPointValue];</span><br><span class="line">            if (j &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                CGPathMoveToPoint(_onePath, nil, p.x, p.y);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                CGPathAddLineToPoint(_onePath, nil, p.x, p.y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        CGPathAddPath(_path, nil, _onePath);</span><br><span class="line">    &#125;</span><br><span class="line">    _shapeLayer.path &#x3D; _path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIImage*)buildImage</span><br><span class="line">&#123;</span><br><span class="line">    __weak typeof(self) weakSelf &#x3D; self;</span><br><span class="line">     UIGraphicsBeginImageContextWithOptions(self.editor.imageView.frame.size, NO,  0);</span><br><span class="line"></span><br><span class="line">    CGContextRef context &#x3D; UIGraphicsGetCurrentContext();</span><br><span class="line">    [weakSelf.editor.imageView.layer renderInContext:context];</span><br><span class="line"></span><br><span class="line">    UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’¤é”€çš„æ“ä½œ-æ–°"><a href="#æ’¤é”€çš„æ“ä½œ-æ–°" class="headerlink" title="æ’¤é”€çš„æ“ä½œ(æ–°)"></a>æ’¤é”€çš„æ“ä½œ(æ–°)</h4><font color=red>æ–°æ–¹æ¡ˆçš„æ’¤é”€æ˜¯å’Œç”»ç¬”æµç¨‹è§£å†³æ–¹æ¡ˆä¸€è‡´ï¼Œéƒ½æ˜¯æ¯å®Œæˆä¸€æ¬¡è§¦æ‘¸æ¶‚æŠ¹é©¬èµ›å…‹ï¼Œåˆ™åœ¨è¡¨é¢è¦†ç›–ä¸€å¼ å›¾ç‰‡.</font><p>åœ¨MosaicPageData æ•°æ®æºåŸºç¡€ä¸Šæ–°å¢ä¸¤ä¸ªlayerå±æ€§ã€‚<br> CAShapeLayer <em>shapeLayer;<br> CALayer </em>imageLayer;</p><p> æ“ä½œåŸç†ï¼šé€šè¿‡è®¾ç½®å½“å‰PageDataçš„ shapeLayer.path æ¥å®ç°è·¯å¾„æ¶‚æŠ¹ã€‚ç„¶åå°†imageLayeræ¸²æŸ“åˆ°ç”»å¸ƒä¸Š[lastMosaicPage.imageLayer renderInContext:context];å¾—åˆ°imageèµ‹å€¼ç»™å½“å‰ä¸Šå±‚çš„drawImageView.</p><p> buildImage:å›¾ç‰‡åˆæˆã€‚<br> å…ˆå°†åŸå›¾ç»˜åˆ¶ï¼Œç„¶åå°†æ¯ä¸€å¼ é©¬èµ›å…‹å›¾å±‚çš„imageè¿›è¡Œç»˜åˆ¶ã€‚æœ€åå¾—åˆ°åˆæˆçš„é©¬èµ›å…‹å›¾ç‰‡ã€‚å…·ä½“å‚ç…§CLMosialTool buildImageæ–¹æ³•ã€‚</p><p> //å‡†å¤‡å¥½åŸå›¾çš„é©¬èµ›å…‹è™šåŒ–å›¾ç‰‡ã€‚<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"> _mohuImage &#x3D; [XRGBTool getMosaicImageWith:image level:0];</span><br><span class="line"></span><br><span class="line">_shapeLayer &#x3D; [CAShapeLayer layer];</span><br><span class="line">_shapeLayer.frame &#x3D; _drawingView.bounds;</span><br><span class="line">_shapeLayer.lineCap &#x3D; kCALineCapRound;</span><br><span class="line">_shapeLayer.lineJoin &#x3D; kCALineJoinRound;</span><br><span class="line">_shapeLayer.lineWidth &#x3D; 15;</span><br><span class="line">_shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor;</span><br><span class="line">_shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……</span><br><span class="line">_imageLayer &#x3D; [CALayer layer];</span><br><span class="line">_imageLayer.frame &#x3D; _drawingView.bounds;</span><br><span class="line">_imageLayer.contents &#x3D; (id)_mohuImage.CGImage;</span><br><span class="line">_imageLayer.mask &#x3D; _shapeLayer;</span><br><span class="line"></span><br><span class="line">- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender</span><br><span class="line">&#123;</span><br><span class="line">    CGPoint currentDraggingPosition &#x3D; [sender locationInView:_drawingView];</span><br><span class="line"></span><br><span class="line">    if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateBegan)&#123;</span><br><span class="line">        _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line">        _lastMosaicPage.nowPointArray &#x3D; [[NSMutableArray alloc] init];</span><br><span class="line">        [_lastMosaicPage.linePointArray addObject:_lastMosaicPage.nowPointArray];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;æ— æ’¤é”€æ—¶å€™çš„å•æ¬¡é©¬èµ›å…‹æ¶‚æŠ¹</span><br><span class="line">&#x2F;&#x2F;        CGPathMoveToPoint(_path, nil, _prevDraggingPosition.x, _prevDraggingPosition.y);</span><br><span class="line">&#x2F;&#x2F;        _shapeLayer.path &#x3D; _path;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    if(sender.state !&#x3D; UIGestureRecognizerStateEnded)&#123;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;        CGPathAddLineToPoint(_path, nil, currentDraggingPosition.x, currentDraggingPosition.y);</span><br><span class="line">&#x2F;&#x2F;        _shapeLayer.path &#x3D; _path;</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    NSValue *point &#x3D; [NSValue valueWithCGPoint:currentDraggingPosition];</span><br><span class="line">    [_lastMosaicPage.nowPointArray addObject:point];</span><br><span class="line">    [self drawAllPanLine:_drawingView byDrawPage:_lastMosaicPage];</span><br><span class="line">    _prevDraggingPosition &#x3D; currentDraggingPosition;</span><br><span class="line"></span><br><span class="line">    if(sender.state &#x3D;&#x3D; UIGestureRecognizerStateEnded)&#123;</span><br><span class="line">        &#x2F;&#x2F;ç»“æŸçš„æ—¶å€™ï¼Œå†åˆ›å»ºä¸€å¼ å›¾drawImageViewã€‚</span><br><span class="line">        [self generateDrawImageView]; &#x2F;&#x2F;å¦‚æœè¦åœ¨ä¸€å¼ å›¾ä¸Šç”»å¤šæ¡çº¿ï¼Œåˆ™å±è”½æ‰æ­¤å±€ã€‚</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)drawAllPanLine:(UIImageView *)drawImageView byDrawPage:(MosaicPageData *)lastMosaicPage</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    CGMutablePathRef _path &#x3D; CGPathCreateMutable();</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;éå†æ¯ä¸€æ¡çº¿</span><br><span class="line">    for (int i &#x3D; 0 ; i &lt; lastMosaicPage.linePointArray.count ; i ++ ) &#123;</span><br><span class="line">        NSMutableArray *pointArray &#x3D; [lastMosaicPage.linePointArray objectAtIndex:i];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;ä¸€æ¡çº¿çš„æ¯ä¸ªç‚¹</span><br><span class="line">        CGMutablePathRef _onePath &#x3D; CGPathCreateMutable();</span><br><span class="line">        for (int j &#x3D; 0 ; j &lt; pointArray.count ; j ++ ) &#123;</span><br><span class="line">            NSValue *value &#x3D; [pointArray objectAtIndex:j];</span><br><span class="line">            CGPoint p &#x3D; [value CGPointValue];</span><br><span class="line">            if (j &#x3D;&#x3D; 0) &#123;</span><br><span class="line">                CGPathMoveToPoint(_onePath, nil, p.x, p.y);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                CGPathAddLineToPoint(_onePath, nil, p.x, p.y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        CGPathAddPath(_path, nil, _onePath);</span><br><span class="line">    &#125;</span><br><span class="line">    lastMosaicPage.shapeLayer.path &#x3D; _path; &#x2F;* æ‰‹æŒ‡çš„æ¶‚æŠ¹è·¯å¾„ *&#x2F;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;ç”»å›¾</span><br><span class="line">    CGFloat scale &#x3D;  self.editor.imageView.image.size.width &#x2F; self.editor.imageView.width;</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(self.editor.imageView.image.size, NO, self.editor.imageView.image.scale);</span><br><span class="line">    CGContextRef context &#x3D; UIGraphicsGetCurrentContext();</span><br><span class="line">    CGContextScaleCTM(UIGraphicsGetCurrentContext(), scale, scale);</span><br><span class="line">    [lastMosaicPage.imageLayer renderInContext:context];</span><br><span class="line">    UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    drawImageView.image &#x3D; tmp;</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void)generateDrawImageView&#123;</span><br><span class="line">    MosaicPageData *pageData &#x3D; [[MosaicPageData alloc] init];</span><br><span class="line">    [self.mosaicPages addObject:pageData];</span><br><span class="line">    _lastMosaicPage &#x3D; pageData;</span><br><span class="line"></span><br><span class="line">    UIImage *_mohuImage &#x3D;  [XRGBTool getMosaicImageWith:self.editor.imageView.image level:0];</span><br><span class="line">    UIImageView *drawingView &#x3D; [[UIImageView alloc] initWithFrame:self.editor.imageView.bounds];</span><br><span class="line">    UIPanGestureRecognizer *panGesture &#x3D; [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(drawingViewDidPan:)];</span><br><span class="line">    panGesture.maximumNumberOfTouches &#x3D; 1;</span><br><span class="line">    drawingView.userInteractionEnabled &#x3D; YES;</span><br><span class="line">    drawingView.tag &#x3D; 1000 + self.drawImageViews.count;</span><br><span class="line">    [drawingView addGestureRecognizer:panGesture];</span><br><span class="line">    if(self.drawImageViews.count)&#123;</span><br><span class="line">&#x2F;&#x2F;        for(NSInteger tagIndex &#x3D; 0; tagIndex &lt; self.drawImageViews.count ; tagIndex++)&#123;</span><br><span class="line">&#x2F;&#x2F;            UIImageView *imageView &#x3D; self.drawImageViews[tagIndex];</span><br><span class="line">&#x2F;&#x2F;            [imageView removeFromSuperview];</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line"></span><br><span class="line">        [self.editor.imageView.subviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">            NSLog(@&quot;å­imageviewçš„å±‚æ¬¡tag:%d&quot;,obj.tag);</span><br><span class="line">        &#125;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        for(NSInteger tagIndex &#x3D; 0; tagIndex &lt; self.drawImageViews.count ; tagIndex++)&#123;</span><br><span class="line">&#x2F;&#x2F;            UIImageView *imageView &#x3D; self.drawImageViews[tagIndex];</span><br><span class="line">&#x2F;&#x2F;            if(tagIndex &#x3D;&#x3D; 0)&#123;</span><br><span class="line">&#x2F;&#x2F;                [self.editor.imageView insertSubview:imageView atIndex:0]; &#x2F;&#x2F;åº•å±‚ç¬¬ä¸€å¼ </span><br><span class="line">&#x2F;&#x2F;            &#125;else&#123;</span><br><span class="line">&#x2F;&#x2F;                [self.editor.imageView insertSubview:imageView aboveSubview:_drawingView];</span><br><span class="line">&#x2F;&#x2F;            &#125;</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line"></span><br><span class="line">        [self.editor.imageView insertSubview:drawingView aboveSubview:_drawingView];</span><br><span class="line"></span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        [self.editor.imageView insertSubview:drawingView atIndex:0]; &#x2F;&#x2F;åº•å±‚ç¬¬ä¸€å¼ </span><br><span class="line">    &#125;</span><br><span class="line">&#x2F;&#x2F;    [self.editor.imageView addSubview:drawingView];</span><br><span class="line">    [self.drawImageViews addObject:drawingView];</span><br><span class="line">    _drawingView &#x3D; drawingView;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;é‡æ–°åˆ›å»ºï¼Ÿæ‰‹åŠ¿åœæ­¢æ—¶å€™ï¼Œåˆ›å»ºä¸æ–­å¾€imageview.layeråˆ›å»º ã€‚æœ€ç»ˆçš„ç»“æœæ˜¯ç†æŸ“imageLayeré›†åˆæ¸²æŸ“åœ¨å›¾ç‰‡ä¸Šã€‚</span><br><span class="line">    CALayer *imageLayer &#x3D; [CALayer layer];</span><br><span class="line">    imageLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds;</span><br><span class="line">&#x2F;&#x2F;    [self.editor.imageView.layer insertSublayer:_imageLayer atIndex:0]; &#x2F;&#x2F;ç¡®å®šé©¬èµ›å…‹åœ¨æœ€åº•éƒ¨</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    [_drawingView.layer addSublayer:_imageLayer];</span><br><span class="line">    imageLayer.contents &#x3D; (id)_mohuImage.CGImage;</span><br><span class="line"></span><br><span class="line">    CAShapeLayer *shapeLayer &#x3D; [CAShapeLayer layer];</span><br><span class="line">    shapeLayer.frame &#x3D; drawingView.bounds; &#x2F;&#x2F;self.editor.imageView.bounds;</span><br><span class="line">    shapeLayer.lineCap &#x3D; kCALineCapRound;</span><br><span class="line">    shapeLayer.lineJoin &#x3D; kCALineJoinRound;</span><br><span class="line">    shapeLayer.lineWidth &#x3D; 15;</span><br><span class="line">    shapeLayer.strokeColor &#x3D; [UIColor blueColor].CGColor;</span><br><span class="line">    shapeLayer.fillColor &#x3D; nil;&#x2F;&#x2F;æ­¤å¤„å¿…é¡»è®¾ä¸ºnilï¼Œå¦åˆ™åè¾¹æ·»åŠ addLineçš„æ—¶å€™ä¼šè‡ªåŠ¨å¡«å……</span><br><span class="line">    imageLayer.mask &#x3D; shapeLayer;</span><br><span class="line">    _lastMosaicPage.shapeLayer &#x3D; shapeLayer;</span><br><span class="line">    _lastMosaicPage.imageLayer &#x3D; imageLayer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ¸…é™¤é¡¶å±‚çš„ç”»ç¬”imageview</span><br><span class="line">-(void)clearTopDrawImageView&#123;</span><br><span class="line">    [self.mosaicPages removeLastObject];</span><br><span class="line">    [((UIImageView *)self.drawImageViews.lastObject) removeFromSuperview];</span><br><span class="line">    [self.drawImageViews removeLastObject];</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;é‡ç½®å½“å‰çš„å±‚çº§page</span><br><span class="line">    _lastMosaicPage &#x3D; self.mosaicPages.lastObject;</span><br><span class="line">    _drawingView &#x3D; self.drawImageViews.lastObject;</span><br><span class="line">&#x2F;&#x2F;    [self.editor.imageView bringSubviewToFront:_drawingView]; &#x2F;&#x2F;å°†ä¸‹ä¸€å±‚æ”¾åˆ°æœ€é¡¶å±‚, ç§»é™¤æ­¤å¥ã€‚ä¼šé®æŒ¡ç”»ç¬”å±‚ã€‚</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;æ’¤å›ä¸Šä¸€æ­¥</span><br><span class="line">-(void)eraserButtonDidTap:(UIButton *)btn&#123;</span><br><span class="line"></span><br><span class="line">    if (_lastMosaicPage.linePointArray &amp;&amp; _lastMosaicPage.linePointArray.count &gt;&#x3D; 1) &#123;</span><br><span class="line">        [_lastMosaicPage.linePointArray removeLastObject];</span><br><span class="line">        [self drawAllPanLine:_drawingView byDrawPage:_lastMosaicPage];</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;å½“å‰ç”»ç¬”å±‚æ‰€æœ‰çº¿éƒ½ç§»é™¤äº†çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨ç§»é™¤å½“å‰ç”»ç¬”å±‚</span><br><span class="line">        if(_lastMosaicPage.linePointArray.count &#x3D;&#x3D; 0)&#123;</span><br><span class="line">            &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚</span><br><span class="line">            if(self.drawImageViews.count &gt; 1)&#123;</span><br><span class="line">                [self clearTopDrawImageView];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        &#x2F;&#x2F;å½“åªæœ‰ä¸€é¡µçš„æƒ…å†µä¸‹ä¸åšå¤„ç†ã€‚</span><br><span class="line">        if(self.mosaicPages.count &gt; 1)&#123;</span><br><span class="line">            [self clearTopDrawImageView];</span><br><span class="line">            [self eraserButtonDidTap:nil]; &#x2F;&#x2F;é€’å½’ç§»é™¤ç©ºçš„drawImageView</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;å•å±‚æ’¤é”€</span><br><span class="line">&#x2F;&#x2F;    if (_lastDrawPage.linePointArray &amp;&amp; _lastDrawPage.linePointArray.count &gt;&#x3D; 1) &#123;</span><br><span class="line">&#x2F;&#x2F;        [_lastDrawPage.linePointArray removeLastObject];</span><br><span class="line">&#x2F;&#x2F;        [self drawAllPanLine];</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIImage*)buildImage</span><br><span class="line">&#123;</span><br><span class="line">    CGSize originalImageSize &#x3D; self.editor.imageView.image.size;</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(originalImageSize, NO, self.editor.imageView.image.scale);</span><br><span class="line">    [self.editor.imageView.image drawAtPoint:CGPointZero];</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;å¾ªç¯_drawingViewæ•°ç»„ã€‚</span><br><span class="line">    for(UIImageView *eachDrawImageView in self.drawImageViews)&#123;</span><br><span class="line">        if(eachDrawImageView.image)&#123;</span><br><span class="line">            [eachDrawImageView.image drawInRect:CGRectMake(0, 0, originalImageSize.width, originalImageSize.height)];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡å­—å¸–"><a href="#æ–‡å­—å¸–" class="headerlink" title="æ–‡å­—å¸–"></a>æ–‡å­—å¸–</h2><h3 id="å¯Œæ–‡æœ¬æ¡†"><a href="#å¯Œæ–‡æœ¬æ¡†" class="headerlink" title="å¯Œæ–‡æœ¬æ¡†"></a>å¯Œæ–‡æœ¬æ¡†</h3><p>doneAppendNewText ç‚¹å‡»å®Œæˆçš„æ—¶å€™ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ã€‚</p><p>[_CLTextView setActiveTextView:nil]; ä½¿å½“å‰label å¤±å»ç„¦ç‚¹ã€‚</p><p>é”®ç›˜æ˜¾ç¤ºæ—¶å€™ï¼Œè°ƒæ•´textviewçš„é«˜åº¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (void)keyBoardWillShow:(NSNotification *)notificatioin</span><br><span class="line">&#123;</span><br><span class="line">    NSDictionary * info &#x3D; [notificatioin userInfo];</span><br><span class="line">    CGSize kbSize &#x3D; [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;</span><br><span class="line">    [_textView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.bottom.mas_equalTo(-kbSize.height);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="drawingViewDidPanäº‹ä»¶ç©¿é€"><a href="#drawingViewDidPanäº‹ä»¶ç©¿é€" class="headerlink" title="drawingViewDidPanäº‹ä»¶ç©¿é€"></a>drawingViewDidPanäº‹ä»¶ç©¿é€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (void)drawingViewDidPan:(UIPanGestureRecognizer*)sender</span><br><span class="line">&#123;</span><br><span class="line">    if([[self.editor currentEditTool] isKindOfClass:[CLMosaicTool class]])&#123;</span><br><span class="line">        &#x2F;&#x2F;æ­¤ä»£ç ä¸ºå½“é¡¶å±‚ä¸ºæ–‡å­—å±‚æ—¶å€™ï¼Œ æ‰“å¼€é©¬èµ›å…‹ï¼Œpanæ‰‹åŠ¿çš„ä¼ é€’ã€‚</span><br><span class="line"></span><br><span class="line">        CLMosaicTool *mosaicTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;];</span><br><span class="line">        [mosaicTool drawingViewDidPan:sender];</span><br><span class="line">        return;</span><br><span class="line">    &#125;else  if([[self.editor currentEditTool] isKindOfClass:[CLDrawTool class]])&#123;</span><br><span class="line">        &#x2F;&#x2F;æ­¤ä»£ç ä¸ºå½“é¡¶å±‚ä¸ºæ–‡å­—å±‚æ—¶å€™ï¼Œ æ‰“å¼€æ¶‚é¸¦ï¼Œpanæ‰‹åŠ¿çš„ä¼ é€’ã€‚</span><br><span class="line"></span><br><span class="line">        CLDrawTool *drawTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLDrawTool&quot;];</span><br><span class="line">        [drawTool drawingViewDidPan:sender];</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Viewå®¹å™¨layeræ¸²æŸ“åˆ°ç”»å¸ƒ"><a href="#Viewå®¹å™¨layeræ¸²æŸ“åˆ°ç”»å¸ƒ" class="headerlink" title="Viewå®¹å™¨layeræ¸²æŸ“åˆ°ç”»å¸ƒ"></a>Viewå®¹å™¨layeræ¸²æŸ“åˆ°ç”»å¸ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-(UIImage *)mergeDrawImage:(UIImage *)mergeImage</span><br><span class="line">&#123;</span><br><span class="line">    __block CALayer *layer &#x3D; nil;</span><br><span class="line">    __block CGFloat scale &#x3D; 1;</span><br><span class="line"></span><br><span class="line">    safe_dispatch_sync_main(^&#123;</span><br><span class="line">        scale &#x3D; mergeImage.size.width &#x2F; self-&gt;_workingView.width;</span><br><span class="line">        layer &#x3D; self-&gt;_workingView.layer;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(mergeImage.size, NO, mergeImage.scale);</span><br><span class="line">    [mergeImage drawAtPoint:CGPointZero];</span><br><span class="line"></span><br><span class="line">    CGContextRef context &#x3D; UIGraphicsGetCurrentContext();</span><br><span class="line">    CGContextSaveGState(context);</span><br><span class="line">    CGContextScaleCTM(context, scale, scale);</span><br><span class="line">    CGContextTranslateCTM(context, _workingView.center.x, _workingView.center.y);</span><br><span class="line">    CGContextConcatCTM(context, _workingView.transform);</span><br><span class="line">    CGContextTranslateCTM(context, -_workingView.bounds.size.width * [layer anchorPoint].x, -_workingView.bounds.size.height*[layer anchorPoint].y);</span><br><span class="line">    [layer renderInContext:context];</span><br><span class="line">    CGContextRestoreGState(context);</span><br><span class="line"></span><br><span class="line">    UIImage *tmp &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h3><p>åœ¨CLClippingTool æ—‹è½¬å®Œæˆæ—¶å€™<br>executeWithCompletionBlock:(void (^)(UIImage <em>, NSError </em>, NSDictionary *))completionBlock</p><p>å¯¹æ–‡å­—å¸–è¿›è¡Œå¤„ç†,æ ¹æ®æ—‹è½¬è£å‰ªåå¾—åˆ°çš„å›¾ç‰‡å¤§å°å†³å®šworkingViewçš„å®¹å™¨frameå¤§å°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CLTextTool *_textTool &#x3D; [self.editor.usedToolDic objectForKey:@&quot;CLTextTool&quot;];</span><br><span class="line">        if(_textTool)&#123;</span><br><span class="line">            &#x2F;&#x2F;å°†workingView è¿›è¡Œtransformæ—‹è½¬</span><br><span class="line">            CGAffineTransform transform &#x3D; CATransform3DGetAffineTransform([self rotateTransform:CATransform3DIdentity clockwise:NO]);</span><br><span class="line"></span><br><span class="line">            [self.editor resetTextWorkingViewFrame:_textTool.workingView  byResultImage:result transform:transform];</span><br></pre></td></tr></table></figure></p><p>å¯¹workingView å®¹å™¨è¿›è¡Œæ—‹è½¬ï¼Œè®¾ç½®å…¶transform.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (void)resetTextWorkingViewFrame:(UIView *)workingView byResultImage:(UIImage *)image transform:(CGAffineTransform )transform</span><br><span class="line">&#123;</span><br><span class="line">    CGRect originFrame &#x3D; workingView.frame;</span><br><span class="line">    CLTextTool *textTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLTextTool&quot;];</span><br><span class="line">    CGFloat offsetBottom &#x3D; textTool.workingViewBottomOffset;</span><br><span class="line">    originFrame.size.height +&#x3D; offsetBottom;</span><br><span class="line">    workingView.frame &#x3D; originFrame; &#x2F;&#x2F;åŠ ä¸Šåº•éƒ¨çš„èœå•åç¦»å·®</span><br><span class="line">    _textToolNeedAddBottomFlag &#x3D; NO;</span><br><span class="line">    if(offsetBottom &#x3D;&#x3D; 0)&#123;</span><br><span class="line">        _textToolNeedAddBottomFlag &#x3D; YES;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CGSize size &#x3D; image ? image.size : workingView.frame.size;</span><br><span class="line">    CGAffineTransform resultTransform &#x3D; transform;</span><br><span class="line">    if(!CGAffineTransformIsIdentity(workingView.transform))&#123;</span><br><span class="line">        &#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦è¿›è¡Œæ—‹è½¬è¿‡,ç„¶åè¿›è¡Œå åŠ </span><br><span class="line">        resultTransform &#x3D; CGAffineTransformConcat(workingView.transform,transform);</span><br><span class="line">    &#125;</span><br><span class="line">    workingView.transform &#x3D; resultTransform; &#x2F;&#x2F;692, 409,æ—‹è½¬äº†ä¸¤æ¬¡ï¼Œè¿™ä¸ªä¸å¯¹ã€‚</span><br><span class="line">    CGRect workingViewWillFrame &#x3D; workingView.frame; &#x2F;&#x2F;409 , 692</span><br><span class="line"></span><br><span class="line">    if(size.width&gt;0 &amp;&amp; size.height&gt;0)&#123;</span><br><span class="line">        CGFloat ratio &#x3D;  MIN(_scrollView.frame.size.width &#x2F; size.width, _scrollView.frame.size.height &#x2F; size.height);</span><br><span class="line">        CGFloat W &#x3D; ratio * size.width * _scrollView.zoomScale;</span><br><span class="line">        CGFloat H &#x3D; ratio * size.height * _scrollView.zoomScale;</span><br><span class="line"></span><br><span class="line">        CGFloat scaleX &#x3D; W&#x2F;workingViewWillFrame.size.width;</span><br><span class="line">        CGFloat scaleY &#x3D; H&#x2F;(workingViewWillFrame.size.height);</span><br><span class="line">        CGFloat willScale &#x3D; MIN(scaleX, scaleY); &#x2F;&#x2F;æ‹¿åˆ°æ—‹è½¬åçš„ç¼©æ”¾æ¯”</span><br><span class="line">        workingView.transform &#x3D;CGAffineTransformIdentity; &#x2F;&#x2F;æ—‹è½¬ï¼ŒåŠ ç¼©æ”¾ç³»æ•°ã€‚</span><br><span class="line">        workingView.transform &#x3D; CGAffineTransformScale(resultTransform, willScale, willScale);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h2 id="è£å‰ªæ—‹è½¬"><a href="#è£å‰ªæ—‹è½¬" class="headerlink" title="è£å‰ªæ—‹è½¬"></a>è£å‰ªæ—‹è½¬</h2><h3 id="æ—‹è½¬-1"><a href="#æ—‹è½¬-1" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h3><p>ç”¨æˆ·é€šè¿‡ç‚¹å‡»æ—‹è½¬æŒ‰é’®- (void)tappedRoteMenu:(UITapGestureRecognizer*)sender</p><p>æ—‹è½¬é€šè¿‡_rotateImageView æ¥å±•ç¤ºæ—‹è½¬çš„åŠ¨ç”»å’Œå®æ—¶æ•ˆæœï¼Œ</p><p>rotateStateDidChangeæ–¹æ³•å®ç°æ—‹è½¬åŠ¨ç”»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (void)rotateStateDidChange</span><br><span class="line">&#123;</span><br><span class="line">    CATransform3D transform &#x3D; [self rotateTransform:CATransform3DIdentity clockwise:NO];</span><br><span class="line">    _rotateImageView.layer.transform è®¾ç½®ã€‚</span><br></pre></td></tr></table></figure></p><p>æ—‹è½¬åŠ¨ç”»ç»“æŸåï¼šé‡æ–°è®¾ç½®ä¸€ä¸‹è£å‰ªæ ¼å­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> _rotateView.hidden &#x3D; YES;</span><br><span class="line"> _gridView &#x3D; [[CLClippingPanel alloc] initWithSuperview:self.editor.imageView.superview frame:_rotateImageView.frame];</span><br><span class="line">_gridView.backgroundColor &#x3D; [UIColor clearColor];</span><br><span class="line">_gridView.bgColor &#x3D; [self.editor.view.backgroundColor colorWithAlphaComponent:0.8];</span><br><span class="line">_gridView.gridColor &#x3D; [[UIColor whiteColor] colorWithAlphaComponent:0.8];</span><br><span class="line">_gridView.clipsToBounds &#x3D; NO;</span><br></pre></td></tr></table></figure></p><ul><li>å›¾ç‰‡æ—‹è½¬ï¼š<br>å°†åŸå›¾çš„CIImageæ³¨å…¥åˆ°CIFilterä¸­ï¼Œè®¾ç½®CIFilterçš„æ—‹è½¬ç³»æ•°ï¼ŒCIFilterå¯¼å‡ºæ—‹è½¬åçš„CIImage, é€šè¿‡CIContext å°†å¯¼å‡ºçš„æ–°å›¾ç‰‡CIImageè½¬æ¢æˆCGImage,æœ€åæ‹¿åˆ°UIImageã€‚</li></ul><p>å‚è€ƒä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage*)buildRoteImage:(UIImage*)image</span><br><span class="line">&#123;</span><br><span class="line">    CIImage *ciImage &#x3D; [[CIImage alloc] initWithImage:image];</span><br><span class="line">    CIFilter *filter &#x3D; [CIFilter filterWithName:@&quot;CIAffineTransform&quot; keysAndValues:kCIInputImageKey, ciImage, nil];</span><br><span class="line"></span><br><span class="line">    [filter setDefaults];</span><br><span class="line">    CGAffineTransform transform &#x3D; CATransform3DGetAffineTransform([self rotateTransform:CATransform3DIdentity clockwise:YES]);</span><br><span class="line">    [filter setValue:[NSValue valueWithBytes:&amp;transform objCType:@encode(CGAffineTransform)] forKey:@&quot;inputTransform&quot;];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    CIContext *context &#x3D; [CIContext contextWithOptions:@&#123;kCIContextUseSoftwareRenderer : @(NO)&#125;];</span><br><span class="line">    CIImage *outputImage &#x3D; [filter outputImage];</span><br><span class="line">    CGImageRef cgImage &#x3D; [context createCGImage:outputImage fromRect:[outputImage extent]];</span><br><span class="line"></span><br><span class="line">    UIImage *result &#x3D; [UIImage imageWithCGImage:cgImage];</span><br><span class="line"></span><br><span class="line">    CGImageRelease(cgImage);</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="è£å‰ª"><a href="#è£å‰ª" class="headerlink" title="è£å‰ª"></a>è£å‰ª</h3><p>è£å‰ªæ–¹æ³•crop:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage*)crop:(CGRect)rect</span><br><span class="line">&#123;</span><br><span class="line">    CGPoint origin &#x3D; CGPointMake(-rect.origin.x, -rect.origin.y);</span><br><span class="line"></span><br><span class="line">    UIImage *img &#x3D; nil;</span><br><span class="line"></span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(rect.size, NO, self.scale);</span><br><span class="line">    [self drawAtPoint:origin];</span><br><span class="line">    img &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return img;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è£å‰ªè§†å›¾:<br> CLClippingPanelï¼š<br>  subLayer: CLGridLayar -&gt; drawInContextã€‚æ¨ªç«–å„ç”»å››æ¡çº¿ã€‚<br>  CLClippingCircle-&gt;drawRect: å››ä¸ªè¾¹è§’æ¡†è§†å›¾è¿›è¡Œè¾¹è§’åˆ’çº¿æ“ä½œã€‚</p><p>  å››ä¸ªè¾¹è§’è§†å›¾æ·»åŠ panCircleViewæ‰‹åŠ¿ï¼Œå®ç°clippingRectè£å‰ªåŒºåŸŸçš„å˜æ›´ã€‚</p><p>  CLClippingPanl è‡ªèº«äº‹ä»¶panGridViewï¼Œæ‹–åŠ¨æ ¼å­è¿›è¡Œä¸Šä¸‹å·¦å³ç§»åŠ¨æ”¹å˜clippingRectåŒºåŸŸã€‚</p><h3 id="åŸå›¾æ¢å¤"><a href="#åŸå›¾æ¢å¤" class="headerlink" title="åŸå›¾æ¢å¤"></a>åŸå›¾æ¢å¤</h3><p>resetOriginImage æ–¹æ³•ã€‚<br>åŸå›¾æ¢å¤åªæ¢å¤åŸå›¾çš„frameï¼ŒåŸå›¾çš„æ–¹å‘ã€‚ å·²ç”»æ¶‚é¸¦å’Œé©¬èµ›å…‹æ“ä½œä¸è¿›è¡Œæ¢å¤ã€‚</p><p>å…ˆå°†_originalImage èµ‹å€¼ç»™_imageView,é‡æ–°è®¡ç®—æœ€æ–°originFrame. å¹¶ä¸”å°†é©¬èµ›å…‹å’Œæ¶‚é¸¦å·¥å…·å¯¹è±¡çš„[drawImageView]é›†åˆéå†æ¯ä¸€å±‚çš„drawImageViewè®¾ç½®ä¸º_imageViewæœ€æ–°frame,å¹¶å†æ¬¡æ¸²æŸ“æ¯å¼ å›¾çš„ä¸€æ¡çº¿çš„æ¶‚é¸¦å›¾ç‰‡èµ‹å€¼ç»™drawImageView,å¹¶æ›´æ”¹drawImageViewæœ€æ–°çš„frame.</p><p>æœ€åèµ°ä¸€éé‡æ–°å…³å’Œå¼€ï¼Œå±•ç¤ºæ¢å¤åçš„è£å‰ªæ ¼å’Œå›¾ç‰‡ã€‚è¿™æ ·å°±å®Œæˆäº†åŸå›¾æ¢å¤è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (void)resetOriginImage&#123;</span><br><span class="line">    _imageView.image &#x3D; _originalImage;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;è®¾ç½®å½“å‰imageviewæœ€æ–°frame</span><br><span class="line">    [self resetImageViewFrame];</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;å¯¹é©¬èµ›å…‹å±‚è¿›è¡Œframeé‡æ–°è®¾ç½®ã€‚</span><br><span class="line">    CLMosaicTool *_mosaicTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLMosaicTool&quot;];</span><br><span class="line">    if(_mosaicTool)&#123;</span><br><span class="line">        for(NSInteger i&#x3D;0; i &lt; _mosaicTool.drawImageViews.count; i++)&#123;</span><br><span class="line">            UIImageView *drawingView  &#x3D; _mosaicTool.drawImageViews[i];</span><br><span class="line">            drawingView.frame &#x3D; self.imageView.bounds;</span><br><span class="line">            [_mosaicTool drawAllPanLine:drawingView byDrawPage:_mosaicTool.mosaicPages[i]];</span><br><span class="line">            [self resetDrawImageViewFrame:drawingView.image withDrawImageView:drawingView];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;å¯¹ç”»ç¬”å±‚è¿›è¡Œframeé‡æ–°è®¾ç½®ã€‚</span><br><span class="line">    CLDrawTool *_drawTool &#x3D; [self.usedToolDic objectForKey:@&quot;CLDrawTool&quot;];</span><br><span class="line">    if(_drawTool)&#123;</span><br><span class="line">        for(NSInteger i&#x3D;0; i &lt; _drawTool.drawImageViews.count; i++)&#123;</span><br><span class="line">            UIImageView *drawingView  &#x3D; _drawTool.drawImageViews[i];</span><br><span class="line">            drawingView.frame &#x3D; self.imageView.bounds;</span><br><span class="line">            [_drawTool drawAllPanLine:drawingView byDrawPage:_drawTool.drawPages[i]];</span><br><span class="line">            [self resetDrawImageViewFrame:drawingView.image withDrawImageView:drawingView];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;é‡æ–°å¼€å¯è£å‰ªé¡µé¢åŠŸèƒ½</span><br><span class="line">    [_currentTool cleanup];</span><br><span class="line">    [_currentTool setup];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¡®å®š"><a href="#ç¡®å®š" class="headerlink" title="ç¡®å®š"></a>ç¡®å®š</h3><p>èµ°pushDoneæ–¹æ³•ï¼Œè°ƒç”¨è‡ªèº«çš„executeWithCompletionBlockæ–¹æ³•ï¼Œæ£€æŸ¥UseToolDicæ˜¯å¦å«æœ‰æ¶‚é¸¦ï¼Œé©¬èµ›å…‹ã€æ–‡å­—å¸–ç­‰ï¼Œè¿›è¡Œç›¸å…³è§†å›¾çš„æ—‹è½¬è£å‰ªè®¾ç½®frameç­‰æ“ä½œã€‚ [self.currentTool executeWithCompletionBlock:</p><h3 id="å–æ¶ˆ"><a href="#å–æ¶ˆ" class="headerlink" title="å–æ¶ˆ"></a>å–æ¶ˆ</h3><p>é‡ç½®currentTool ä¸ºnil , èµ°cleanUpæ–¹æ³•ï¼Œç§»é™¤ç›¸å…³è§†å›¾ã€‚<br>æ­¤ç¯‡æ–‡ç« ä»…ä¸ºä¸ªäººæ€»ç»“ï¼Œä»…ä¸ºå›¾ç‰‡ç¼–è¾‘ä¸­æ‰€é‡éš¾ç‚¹æä¾›å‡ ç‚¹æ€è·¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¾¤é€šçŸ¥é‡Œçš„äººå‘˜åå­—ç‚¹å‡»å‰–æ</title>
      <link href="/2021/07/02/nameClick/"/>
      <url>/2021/07/02/nameClick/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬æ¯ä¸ªäººçš„æ‰‹æœºéƒ½å®‰è£…æœ‰å¾®ä¿¡App,è‚¯å®šå¤§å®¶éƒ½ä½¿ç”¨è¿‡ä»¥ä¸‹åœºæ™¯åœ¨èŠå¤©ç¾¤ä¸­ï¼Œå½“æœ‰æ–°çš„æˆå‘˜è¿›å…¥çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ° æŸæŸé‚€è¯·äº†æŸæŸ1è¿›å…¥ç¾¤èŠï¼Œæˆ–è€…å½“ä½ æ˜¯ç¾¤ä¸»çš„æ—¶å€™ï¼ŒæŸç®¡ç†äººå‘˜é‚€è¯·äº†å‡ ä¸ªäººè¿›å…¥æ—¶å€™çœ‹åˆ° æŸæŸç®¡ç†å‘˜é‚€è¯·äº†å¼ ä¸‰ã€æå››ï¼Œç‹äº”ï¼Œå¼ ä¸‰ï¼ˆåŒåï¼‰è¿›å…¥äº†ç¾¤èŠã€‚å¯¹äºé‚€è¯·äººå‘˜æˆ–è€…è¢«é‚€è¯·äººå‘˜ï¼Œæˆ‘ä»¬å‘ç°äººå‘˜çš„åç§°æ˜¯å¯ä»¥ç‚¹å‡»çš„ï¼Œå³ä½¿åŒåçš„äººï¼Œç‚¹å‡»å…¶åå­—ä¹Ÿå¯ä»¥è·³è½¬åˆ°å„è‡ªçš„ä¸»é¡µè¯¦æƒ…ä¸­ã€‚</p><h3 id="å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿ"><a href="#å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿ" class="headerlink" title="å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿ"></a>å¦‚ä½•å­˜å‚¨äººå‘˜çš„idï¼Ÿ</h3><p>ä¸€æ¡ç¾¤æˆå‘˜å˜æ›´é€šçŸ¥å°±æ˜¯ä¸€ä¸²æ–‡æœ¬ï¼Œæˆ‘ä»¬ç‚¹å‡»çš„æ—¶å€™è‚¯å®šè¦å­˜å‚¨å¥½ä»–çš„äººå‘˜id,ç„¶åç‚¹å‡»çš„æ—¶å€™å°±èƒ½æ‹¿åˆ°å¯¹åº”äººå‘˜çš„idã€‚ä»æœ€ç®€å•çš„å­˜å‚¨æ–¹æ¡ˆæ¥çœ‹ï¼Œè¿™æ¡å†…å®¹å¯ä»¥å†™æˆä»¥ä¸‹æ ¼å¼ï¼š ç®¡ç†å‘˜<font color=blue>åˆ˜æŸæŸ</font>é‚€è¯·äº†<font color=blue>å¼ ä¸‰</font>ã€<font color=blue>æå››</font>ã€<font color=blue>ç‹äº”</font>ã€<font color=blue>å¼ ä¸‰</font>è¿›å…¥äº†ç¾¤èŠã€‚æ¢æˆä»£ç çš„æ ¼å¼å³ä¸ºï¼šâ€œç®¡ç†å‘˜\â€åˆ˜æŸæŸ::1000\â€é‚€è¯·äº†\â€å¼ ä¸‰::1001ã€æå››::1002ã€ç‹äº”::1003ã€å¼ ä¸‰::1004\â€è¿›å…¥äº†ç¾¤èŠâ€ã€‚å…¶ä¸­çš„ä»£ç æ ¼å¼ä¸ºuserName::userIdè¿™æ ·ä¸€ç§å½¢å¼è¿›è¡Œæ‹¼æ¥ï¼Œä¸­é—´çš„ç¬¦å·å¯ä»¥é‡‡ç”¨å…¶ä»–ç‰¹æ®Šç¬¦å·ä»£æ›¿ã€‚è¿™é‡Œä¸ºäº†åŒºåˆ«ç”¨æˆ·ç‰¹æ®Šæ€§è¾“å…¥ç”¨äº†åŒå†’å·ã€‚å¤šä¸ªæˆå‘˜ä¹‹é—´ç”¨é¡¿å·éš”å¼€ï¼Œäººå‘˜ä¸æ™®é€šå†…å®¹ä¹‹é—´ç”¨ç¬¦å·åŒå¼•å·\â€è¿›è¡Œåˆ†å‰²ï¼ˆæ–œæ†ä¸ºè½¬ä¹‰ç¬¦ï¼‰ã€‚ æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸€ä¸²æ–‡å­—è¡¨è¾¾å¼è¿›è¡Œè§£æè¿›è¡ŒUIæ˜¾ç¤ºï¼ŒæŠŠäººå‘˜åå­—åçš„æ‹¼æ¥ç¬¦å·ç”¨æˆ·idè¿›è¡Œè¿‡æ»¤æ‰,ç»„åˆæˆä¸å¸¦ç”¨æˆ·idçš„æ˜“æ‡‚æ–‡å­—å†…å®¹ç»™åˆ°ç”¨æˆ·ã€‚<br><a id="more"></a></p><h3 id="è§£æå¸¦ç”¨æˆ·idçš„å­—ç¬¦ä¸²è§„åˆ™ï¼Œæ‹¼è£…æˆæ­£å¸¸æ–‡æœ¬"><a href="#è§£æå¸¦ç”¨æˆ·idçš„å­—ç¬¦ä¸²è§„åˆ™ï¼Œæ‹¼è£…æˆæ­£å¸¸æ–‡æœ¬" class="headerlink" title="è§£æå¸¦ç”¨æˆ·idçš„å­—ç¬¦ä¸²è§„åˆ™ï¼Œæ‹¼è£…æˆæ­£å¸¸æ–‡æœ¬"></a>è§£æå¸¦ç”¨æˆ·idçš„å­—ç¬¦ä¸²è§„åˆ™ï¼Œæ‹¼è£…æˆæ­£å¸¸æ–‡æœ¬</h3><p>åˆ¤æ–­å¾…è§£æçš„ç›®æ ‡å†…å®¹æ˜¯å¦åŒ…å«æˆ‘ä»¬å®šä¹‰çš„ç‰¹æ®Šè¿æ¥ç¬¦å·ä¸åŒå¼•å·ï¼Œç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ç¬¬ä¸€æ­¥ä»¥åŒå¼•å·å°†æ–‡æœ¬è¿›è¡Œåˆ†å‰²ã€‚åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ã€‚</p><ol><li>åŒå¼•å·å°†æ–‡æœ¬è¿›è¡Œåˆ†å‰²æˆä¸åŒæ®µçš„æ•°ç»„ã€‚</li><li>éå†æ•°ç»„ï¼Œåˆ¤æ–­ä¸åŒæ®µä¸­æ˜¯å¦è¿˜æœ‰é¡¿å·ï¼Œå¦‚æœæœ‰åˆ™éœ€è¦å†æ ¹æ®é¡¿å·è¿›è¡Œåˆ†å‰²æˆæœ€å°ç²’åŒ–æ®µï¼ˆuserName::userIdï¼‰ï¼Œå¦åˆ™ç›´æ¥åˆ¤æ–­æ˜¯å¦æœ€å°ç²’åŒ–æ®µï¼ˆåˆ¤æ–­æ˜¯å¦åŒ…å«ç‰¹æ®Šç¬¦::ï¼‰,å¦‚æœåŒ…å«ï¼Œåˆ™ä»¥ç‰¹èˆ’ç¬¦å†å°†æ–‡æœ¬åˆ†å‰²ã€å¦åˆ™ç›´æ¥æ·»åŠ åˆ°å¯å˜å­—ç¬¦ä¸²ä¸­è¿›è¡Œæ‹¼æ¥ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿæ‹¿åˆ°userName ä»¥åŠ userId. å¦å¤–å‡†å¤‡ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨æ¯ä¸€ä¸ªè¢«åˆ†å‰²çš„æœ€å°ç²’åŒ–æ®µ {userName::userId}ã€‚</li><li>è®°å¾—æŠŠäººå‘˜ä¹‹é—´çš„é¡¿å·ï¼Œä»¥åŠæ™®é€šæ–‡æœ¬ä¸äººå‘˜ä¹‹é—´çš„åŒå¼•å·åŠ å›å»ã€‚æœ€ç»ˆçš„åˆ°äº†æ­£å¸¸æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">if([msgBody containsString:@&quot;\&quot;&quot;] &amp;&amp; [msgBody containsString:@&quot;::&quot;])&#123;</span><br><span class="line">  NSArray *descArr &#x3D; [msgBody componentsSeparatedByString:@&quot;\&quot;&quot;];</span><br><span class="line">  NSMutableString *afterFilterIdStr &#x3D;  [[NSMutableString alloc] init]; &#x2F;&#x2F;è¿‡æ»¤å‡ºIdåè¦æ˜¾ç¤ºåœ¨ç•Œé¢çš„str</span><br><span class="line">  NSMutableArray *filterEmpDicArr &#x3D;  [[NSMutableArray alloc] init]; &#x2F;&#x2F;è¿‡æ»¤å‡ºæˆå‘˜</span><br><span class="line"></span><br><span class="line">  NSInteger findIndex &#x3D; 0;</span><br><span class="line">  for (NSString *eachStr in descArr) &#123;</span><br><span class="line">      findIndex ++;</span><br><span class="line">      &#x2F;&#x2F;åŠ å…¥åŒå¼•å·</span><br><span class="line">      if(eachStr.length &gt; 0)&#123;</span><br><span class="line">          if([eachStr containsString:@&quot;ã€&quot;])&#123;</span><br><span class="line">              NSArray *namesArr &#x3D;  [eachStr componentsSeparatedByString:@&quot;ã€&quot;];</span><br><span class="line">              NSInteger otherFindIndex &#x3D; 0;</span><br><span class="line">              for(NSString *otherName in namesArr)&#123;</span><br><span class="line">                  otherFindIndex ++;</span><br><span class="line">                  if([otherName containsString:@&quot;::&quot;])&#123;</span><br><span class="line">                      &#x2F;&#x2F;éœ€åˆ†å‰²å–å¾—åå­—</span><br><span class="line">                      NSArray *itemStrArr &#x3D;  [otherName componentsSeparatedByString:@&quot;::&quot;];</span><br><span class="line">                      if(itemStrArr.count)&#123;</span><br><span class="line">                          NSString *empName &#x3D; itemStrArr.firstObject;</span><br><span class="line">                          NSString *empId &#x3D; itemStrArr.lastObject;</span><br><span class="line">                          [afterFilterIdStr appendString:empName];</span><br><span class="line">                          [filterEmpDicArr addObject:@&#123;@&quot;name&quot;:empName,@&quot;id&quot;:empId&#125;];</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">                  if(otherFindIndex &lt; namesArr.count)&#123;</span><br><span class="line">                      [afterFilterIdStr appendString:@&quot;ã€&quot;];</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">          &#125;else&#123;</span><br><span class="line">              if([eachStr containsString:@&quot;::&quot;])&#123;</span><br><span class="line">                  &#x2F;&#x2F;éœ€åˆ†å‰²å–å¾—åå­—</span><br><span class="line">                      NSArray *itemStrArr &#x3D;  [eachStr componentsSeparatedByString:@&quot;::&quot;];</span><br><span class="line">                  if(itemStrArr.count)&#123;</span><br><span class="line">                      NSString *empName &#x3D; itemStrArr.firstObject;</span><br><span class="line">                      NSString *empId &#x3D; itemStrArr.lastObject;</span><br><span class="line">                      [afterFilterIdStr appendString:empName];</span><br><span class="line"></span><br><span class="line">                      NSString * oldContainsStr &#x3D; @&quot;å°†&quot;; &#x2F;&#x2F;å…¼å®¹ç§»é™¤ç¾¤èŠçš„æ˜¾ç¤ºç»“æœ</span><br><span class="line">                      if([empId containsString:oldContainsStr])&#123;</span><br><span class="line">                          [afterFilterIdStr appendString:oldContainsStr];</span><br><span class="line">                          NSArray *oldArr &#x3D; [empId componentsSeparatedByString:oldContainsStr];</span><br><span class="line">                          empId &#x3D; oldArr.firstObject;</span><br><span class="line">                      &#125;</span><br><span class="line"></span><br><span class="line">                      [filterEmpDicArr addObject:@&#123;@&quot;name&quot;:empName,@&quot;id&quot;:empId&#125;];</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;else&#123;</span><br><span class="line">                  &#x2F;&#x2F;æ™®é€šå­—ç¬¦ä¸²</span><br><span class="line">                  [afterFilterIdStr appendString:eachStr];</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      if(findIndex &lt; descArr.count)&#123;</span><br><span class="line">          [afterFilterIdStr appendString:@&quot;\&quot;&quot;];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  NSString *realMsgBody &#x3D; [afterFilterIdStr copy];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°realMsgBodyå°±æ˜¯éœ€è¦åœ¨æ–‡æœ¬ä¸Šç›´æ¥æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦å¤–æˆ‘ä»¬è¿˜å¾—åˆ°äº†filterEmpDicArråŒ…å«äº†æˆå‘˜idçš„ä¸€ä¸ªmapã€‚</p><h3 id="æ¸²æŸ“äººå‘˜åå­—ã€å¢åŠ æ ·å¼è“è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ç‚¹å‡»"><a href="#æ¸²æŸ“äººå‘˜åå­—ã€å¢åŠ æ ·å¼è“è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ç‚¹å‡»" class="headerlink" title="æ¸²æŸ“äººå‘˜åå­—ã€å¢åŠ æ ·å¼è“è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ç‚¹å‡»"></a>æ¸²æŸ“äººå‘˜åå­—ã€å¢åŠ æ ·å¼è“è‰²ï¼Œè¡¨ç¤ºå¯ä»¥ç‚¹å‡»</h3><p>ç”±ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å¾—åˆ°å¯æ­£å¸¸æ˜¾ç¤ºåœ¨UIä¸Šçš„æ–‡å­—ï¼Œå¦å¤–è¿˜å¾—åˆ°ä¸€ä¸ªäººåidçš„å­—å…¸æ•°ç»„ã€‚æ¸²æŸ“æ˜¾ç¤ºæˆ‘ä»¬é‡‡ç”¨YYLabelè®¾ç½®Attributeçš„æ–¹å¼ã€‚å…ˆè®¾ç½®å…¨å†…å®¹å±æ€§mAttributedStringã€‚ç„¶åå¾ªç¯éå†filterEmpDicArr,æ ¹æ®äººååˆ›å»ºåå­—é«˜äº®çš„lightAttributeã€‚æ ¹æ®äººåå¾—åˆ°nameRange, æœ€åå†é‡‡ç”¨æ›¿æ¢æ–¹å¼å°†å¯¹åº”rangeè¿›è¡Œæ›¿æ¢æ‰å±æ€§ã€‚ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[mAttributedString replaceCharactersInRange:nameRange withAttributedString:lightNameAttributeStr];</span><br></pre></td></tr></table></figure><br>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“åŒ¹é…åˆ°ç¬¬å››ä¸ªäººæ—¶å€™ï¼Œå–åˆ°çš„nameRangeæ˜¯ç¬¬ä¸€ä¸ªäººå¼ ä¸‰ï¼Œç»“æœå¹¶ä¸å¯¹ã€‚æ¥çœ‹çœ‹æˆ‘ä»¬å–nameRangeçš„æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSRange range &#x3D; [realMsgBody rangeOfString:empName]; &#x2F;&#x2F;å¯èƒ½å­˜åœ¨å¤šä¸ª</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦åˆ¤æ–­åå­—æ˜¯å¦åœ¨æ–‡æœ¬ä¸­å¤šæ¬¡å‡ºç°ã€‚å½“åŒåæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåŒ¹é…åˆ°è¯¥äººåçš„rangeå…¨éƒ¨æ‰¾å‡ºæ¥ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªrangeã€‚ å½“éå†å½“å‰çš„nameæ—¶å€™ï¼Œæ£€æŸ¥è¯¥äººåå‡ºç°çš„æ¬¡æ•°ï¼Œå‡ºç°ç¬¬å‡ æ¬¡åˆ™è¿™ä¸ªå½“å‰éå†çš„äººåçš„rangeåˆ™æ˜¯å¯¹åº”ç¬¬å‡ ä¸ªrange. è¿™ä¸ªé€»è¾‘æ‰æ˜¯æ­£ç¡®çš„ï¼è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå½“å‰éå†çš„userIdå¯¹åº”çš„æ­£ç¡®çš„rangeè®°å½•ä¸‹æ¥å­˜åˆ°ä¸€ä¸ªmapä¸­ã€‚æœ€åå½“ç”¨æˆ·ç‚¹å‡»è“è‰²æŸåå­—æ—¶å€™labelç‚¹å‡»å¤„æ‰€å¯¹åº”çš„rangeä¼šè¿”å›ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®rangeæ¥å‘½ä¸­userIdäº†ã€‚å½“ç‚¹å‡»åŒåçš„æ—¶å€™ä¸çŸ¥é“ç‚¹å‡»çš„æ˜¯è°çš„é—®é¢˜å°±å¯ä»¥è¿åˆƒè€Œè§£ï¼æ­¤å¤„åº”è¯¥æœ‰ç‚¹èµï¼Œå“ˆã€‚è¿‡å¥–äº†ï¼Œåªæ˜¯ä¸€ä¸ªæŠ€å·§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">NSString *realMsgBody &#x3D; [afterFilterIdStr copy];</span><br><span class="line">NSMutableAttributedString *mAttributedString &#x3D; [[NSMutableAttributedString alloc] initWithString:realMsgBody];</span><br><span class="line">mAttributedString.yy_font &#x3D; labelFont;</span><br><span class="line">mAttributedString.yy_color &#x3D; message_centerTextColor;</span><br><span class="line">mAttributedString.yy_alignment &#x3D; NSTextAlignmentCenter;</span><br><span class="line">NSMutableDictionary *recordNameCountDic &#x3D;  [[NSMutableDictionary alloc] init]; &#x2F;&#x2F;ç¼“å­˜æ¯ä¸ªåå­—è®°å½•çš„æ¬¡æ•°</span><br><span class="line">NSMutableDictionary *recordRangeEmpIdDic &#x3D;  [[NSMutableDictionary alloc] init]; &#x2F;&#x2F;è®°å½•æ¯ä¸ªåå­—çš„rangeå¯¹åº”çš„id</span><br><span class="line">&#x2F;&#x2F;å¾ªç¯æ‰¾å‡ºåå­—ï¼Œå¹¶ä¸”æ›¿æ¢attribute;</span><br><span class="line">for (NSDictionary *empDic in filterEmpDicArr) &#123;</span><br><span class="line">    NSString *empName &#x3D; empDic[@&quot;name&quot;];</span><br><span class="line">    NSString *empId &#x3D; empDic[@&quot;id&quot;];</span><br><span class="line">   NSMutableAttributedString *lightNameAttributeStr &#x3D; [[NSMutableAttributedString alloc] initWithString:empName];</span><br><span class="line">   lightNameAttributeStr.yy_font &#x3D; labelFont;</span><br><span class="line">   lightNameAttributeStr.yy_underlineStyle &#x3D; NSUnderlineStyleNone; &#x2F;&#x2F;NSUnderlineStyleSingle;</span><br><span class="line">   lightNameAttributeStr.yy_color &#x3D; message_centerTextColor;</span><br><span class="line">    lightNameAttributeStr.yy_lineSpacing &#x3D; 2;</span><br><span class="line"></span><br><span class="line">    __weak typeof(self) weakSelf &#x3D; self;</span><br><span class="line">   [lightNameAttributeStr yy_setTextHighlightRange:lightNameAttributeStr.yy_rangeOfAll</span><br><span class="line">                           color:[UIColor colorWithRed:110&#x2F;255.0f green:121&#x2F;255.0f blue:151&#x2F;255.0f alpha:1]</span><br><span class="line">                 backgroundColor:[UIColor colorWithWhite:0.000 alpha:0.0]</span><br><span class="line">                       tapAction:^(UIView *containerView, NSAttributedString *text, NSRange range, CGRect rect)&#123;</span><br><span class="line">       &#x2F;&#x2F;ç‚¹å‡»åå­—è·³è½¬</span><br><span class="line">       &#x2F;&#x2F; NSString *empName &#x3D; [text.string substringWithRange:range];</span><br><span class="line">        NSString *empId &#x3D; [recordRangeEmpIdDic objectForKey:[NSValue valueWithRange:range]];</span><br><span class="line">       if(empId &amp;&amp; weakSelf.tappedNameBlock)&#123;</span><br><span class="line">           weakSelf.tappedNameBlock(empId);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">    NSRange range &#x3D; [realMsgBody rangeOfString:empName]; &#x2F;&#x2F;å¯èƒ½å­˜åœ¨å¤šä¸ª</span><br><span class="line">    &#x2F;&#x2F;åŒåå¯åŒ¹é…å‡ºå¤šä¸ªrange</span><br><span class="line">    NSArray *rangeArr &#x3D; [self rangeOfSubString:empName inString:realMsgBody];</span><br><span class="line">    if(rangeArr.count &amp;&amp; rangeArr.count &gt; 1)&#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;æœ‰å¤šä¸ªé‡åï¼Œæ‹¿å­—å…¸è®°å½•çš„å€¼&#123;name:count&#125; åå­—æ¬¡æ•°. countæœ‰å­˜åˆ‡å¤§äº1æ—¶ï¼Œæœ¬æ¬¡çš„rangeä¸º rangeArrã€countã€‘</span><br><span class="line">        if([recordNameCountDic objectForKey:empName])&#123;</span><br><span class="line">            NSInteger nameCount &#x3D; [[recordNameCountDic objectForKey:empName] integerValue];</span><br><span class="line">            nameCount++;  &#x2F;&#x2F;rangeArr[name]è®°å½•çš„countç´¯åŠ </span><br><span class="line">            [recordNameCountDic setObject:@(nameCount) forKey:empName];</span><br><span class="line">            NSValue * value &#x3D; rangeArr[nameCount-1];</span><br><span class="line">            range &#x3D;  [value rangeValue];</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            [recordNameCountDic setObject:@1 forKey:empName];</span><br><span class="line">            NSValue * value &#x3D; rangeArr.firstObject;</span><br><span class="line">            range &#x3D;  [value rangeValue];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;æ ¹æ®rangeæ¥è®°å½•id</span><br><span class="line">    NSValue *rangeKey &#x3D; [NSValue valueWithRange:range];</span><br><span class="line">    [recordRangeEmpIdDic setObject:empId forKey:rangeKey];</span><br><span class="line"></span><br><span class="line">   [mAttributedString replaceCharactersInRange:range withAttributedString:lightNameAttributeStr];</span><br><span class="line">&#125;</span><br><span class="line">mAttributedString.yy_lineSpacing &#x3D; 2;</span><br><span class="line">self.groupInfolabel.attributedText &#x3D; mAttributedString;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²é‡ŒåŒ…å«å­—æ®µæŸå­—ç¬¦ä¸²çš„æ‰€æœ‰range<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray*)rangeOfSubString:(NSString*)subStr inString:(NSString*)string &#123;</span><br><span class="line">    NSMutableArray *rangeArray &#x3D; [NSMutableArray array];</span><br><span class="line">    NSString*string1 &#x3D; [string stringByAppendingString:subStr];</span><br><span class="line">    NSString *temp;</span><br><span class="line">    for(int i &#x3D;0; i &lt; string.length; i ++) &#123;</span><br><span class="line">        temp &#x3D; [string1 substringWithRange:NSMakeRange(i, subStr.length)];</span><br><span class="line">        if ([temp isEqualToString:subStr]) &#123;</span><br><span class="line">            NSRange range &#x3D; &#123;i,subStr.length&#125;;</span><br><span class="line">            [rangeArray addObject: [NSValue valueWithRange:range]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return rangeArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ­£åˆ™è¿‡æ»¤å¤„ç†"><a href="#æ­£åˆ™è¿‡æ»¤å¤„ç†" class="headerlink" title="æ­£åˆ™è¿‡æ»¤å¤„ç†"></a>æ­£åˆ™è¿‡æ»¤å¤„ç†</h3><p>å°†ç¬¦åˆæ”¹æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æ‰¾å‡ºæ¥ï¼ŒNSRegularExpressionå¯ä»¥æ‹¿åˆ°NSTextCheckingResult,ç„¶åresultå¯ä»¥æ‹¿åˆ°range.æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²æˆªå–å‡ºæ¥ã€‚æœ€åå†å¾ªç¯éæ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> if([msgBody containsString:@&quot;::&quot;])&#123;</span><br><span class="line">   &#x2F;&#x2F;åŒ¹é…æ›¿æ¢æ‰::å·¥å·æ˜¾ç¤ºã€‚</span><br><span class="line">    NSMutableArray *replaceFormatStrArr &#x3D; [[NSMutableArray alloc] init];</span><br><span class="line">    NSError *error &#x3D; nil;</span><br><span class="line">    NSRegularExpression *regexp &#x3D; [NSRegularExpression regularExpressionWithPattern:@&quot;::\\d&#123;1,&#125;&quot; options:NSRegularExpressionCaseInsensitive error:&amp;error];</span><br><span class="line">    [regexp enumerateMatchesInString:msgBody options:0 range:NSMakeRange(0, msgBody.length) usingBlock:^(NSTextCheckingResult *result, __unused NSMatchingFlags flags, __unused BOOL *stop) &#123;</span><br><span class="line">        if (flags !&#x3D; NSMatchingInternalError) &#123;</span><br><span class="line">            NSRange firstHalfRange &#x3D; [result rangeAtIndex:0];</span><br><span class="line">            if (firstHalfRange.length &gt; 0) &#123;</span><br><span class="line">                NSString *resultString1 &#x3D; [msgBody substringWithRange:result.range];</span><br><span class="line">                [replaceFormatStrArr addObject:resultString1];</span><br><span class="line">                NSLog(@&quot;result1 &#x3D; %@&quot;,resultString1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;];</span><br><span class="line"></span><br><span class="line">    for(NSString *formatStr in replaceFormatStrArr)&#123;</span><br><span class="line">         msgBody &#x3D; [msgBody stringByReplacingOccurrencesOfString:formatStr  withString:@&quot;&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¾¤æ’ä»¶å¦‚ä½•å¼€å‘ï¼Ÿ</title>
      <link href="/2021/07/01/groupPlugin/"/>
      <url>/2021/07/01/groupPlugin/</url>
      
        <content type="html"><![CDATA[<h4 id="ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§"><a href="#ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§" class="headerlink" title="ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§"></a>ç¾¤æ’ä»¶çš„åŸºç¡€å±æ€§</h4><p>ç¾¤æ’ä»¶ä¸€èˆ¬æ˜¯ç”¨H5é…ç½®çš„ç½‘é¡µå°æ’ä»¶ï¼Œç„¶åå’Œç¾¤æ„é€ ä¸€ä¸ªå…¥å£ã€‚æœ¬åœ°é€šè¿‡sqliteç»´æŠ¤ä¸€ä¸ªæ’ä»¶è¡¨ï¼Œä»¥åŠç¾¤æ’ä»¶å…³ç³»è¡¨ã€‚æ’ä»¶ä¿¡æ¯å‡çº§ä¸€ä¸‹å¯åˆ†ä¸ºå¹³å°ç³»ç»Ÿå¿…é¡»æ’ä»¶ä»¥åŠä¸šåŠ¡è‡ªå®šä¹‰æ’ä»¶ã€‚å…·ä½“å¯ç”±ä¸šåŠ¡å†³å®šã€‚<br>æ’ä»¶æœ‰å…¶åŸºæœ¬å±æ€§ï¼šåç§°ï¼Œæ’ä»¶idï¼Œç±»å‹ï¼Œé»˜è®¤æ’åºå€¼ï¼Œè·³è½¬å†…å®¹(æœ¬åœ°æ¨¡å—å/h5é“¾æ¥åœ°å€)ï¼Œè·³è½¬ç±»å‹ï¼šh5/æœ¬åœ°æ¨¡å— ç­‰ç­‰ã€‚<br>æ’ä»¶å…³ç³»è¡¨ï¼š ç¾¤idï¼Œæ’ä»¶idï¼Œè§’æ ‡æ•°é‡ï¼Œæ’åºå€¼ï¼Œæ˜¯å¦æ˜¾ç¤ºï¼Œç­‰ç­‰ã€‚<br><a id="more"></a></p><h4 id="ç¾¤æ’ä»¶çš„æœ¬åœ°å­˜å‚¨ä»¥åŠä¸šåŠ¡é€»è¾‘"><a href="#ç¾¤æ’ä»¶çš„æœ¬åœ°å­˜å‚¨ä»¥åŠä¸šåŠ¡é€»è¾‘" class="headerlink" title="ç¾¤æ’ä»¶çš„æœ¬åœ°å­˜å‚¨ä»¥åŠä¸šåŠ¡é€»è¾‘"></a>ç¾¤æ’ä»¶çš„æœ¬åœ°å­˜å‚¨ä»¥åŠä¸šåŠ¡é€»è¾‘</h4><p>ç”±äºæ¯ä¸ªIMç”¨æˆ·æœ¬åœ°éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„userIdå”¯ä¸€æ•°æ®åº“ï¼Œæ’ä»¶åŸºç¡€ä¿¡æ¯å­˜å‚¨åœ¨ä¸€å¼ è¡¨ï¼Œä¿¡æ¯æ›´æ–°é¢‘ç‡è¾ƒä½ã€‚æ’ä»¶å…³ç³»ä¸€å¼ è¡¨ï¼Œå’Œç¾¤idå…³è”æ€§è¾ƒé«˜ï¼Œå³ä¸€ä¸ªç¾¤å¯ä»¥æœ‰å¤šä¸ªæ’ä»¶ã€‚<br>å½“ç”¨æˆ·ç™»å½•åï¼Œåœ¨é€‚å½“çš„æ—¶æœºè¯·æ±‚Javaæ¥å£è¿›è¡ŒåŒæ­¥æ’ä»¶ä¿¡æ¯ã€‚ï¼ˆå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ—¶é—´æˆ³å®šä¹‰ä¸€ä¸ªæ—¶é—´æ®µï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡ç™»å½•åŒæ­¥æ’ä»¶ä¿¡æ¯äº†ï¼‰ç”±ä¸šåŠ¡å†³å®šå¤šä¹…æ—¶é—´æ®µåŒæ­¥æœ€æ–°çš„æ’ä»¶ä¿¡æ¯åˆ°æœ¬åœ°ã€‚å¦‚æœåç«¯åå°é…ç½®äº†æœ€æ–°æ’ä»¶ï¼Œå®¢æˆ·å•éœ€è¦åŠæ—¶æ˜¾ç¤ºçš„è¯å°±éœ€è¦æœåŠ¡ç«¯è¿›è¡Œå®æ—¶ä¸‹å‘IMé€šçŸ¥ï¼Œè¡¨ç¤ºæœ‰æ’ä»¶æ›´æ–°æˆ–æ–°å¢ã€‚ç¾¤æ’ä»¶å½“ä¸”ä»…å½“å’Œç¾¤æŒ‚é’©æ—¶å€™æ‰ä¼šå®æ—¶ä¸‹å‘ã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°ç¾¤æ’ä»¶å˜æ›´æŒ‡ä»¤çš„æ—¶å€™ï¼Œé¦–å…ˆåˆ¤æ–­ç¾¤æ’ä»¶å˜æ›´ç±»å‹å¦‚æœæ˜¯æ’ä»¶ä¿¡æ¯å˜æ›´ï¼Œåˆ™æ ¹æ®idè¯·æ±‚æœ€æ–°çš„æŸæ’ä»¶ä¿¡æ¯ replace intoï¼ˆæ›´æ–°æˆ–æ–°å¢ï¼‰ æ’ä»¶ä¿¡æ¯çš„è®°å½•ã€‚å¦‚æœæ˜¯å…¶ä»–å˜æ›´ç±»å‹ï¼š é¦–å…ˆæ£€æŸ¥æ’ä»¶è¡¨æ˜¯å¦æœ‰è¯¥æ’ä»¶è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å­˜å‚¨åˆ°æ’ä»¶å…³ç³»è¡¨ï¼Œå®Œæˆååˆ™é€šçŸ¥ç•Œé¢å»è¯»å–ç¾¤æœ€æ–°çš„æ’ä»¶ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å…ˆè¯·æ±‚ç½‘ç»œæ’ä»¶ä¿¡æ¯ï¼Œå†replace into åˆ°æ’ä»¶è¡¨ã€‚ç„¶åå†å¤„ç†æ’ä»¶å…³ç³»è¡¨ï¼Œæœ€åé€šçŸ¥åˆ°ç•Œé¢åˆ·æ–°ã€‚ ç¾¤æ’ä»¶çš„å˜æ›´ç±»å‹ä¸€èˆ¬å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼šç»‘å®šï¼Œè§£ç»‘ï¼Œè§’æ ‡æ•°é‡ï¼Œç¾¤æ’ä»¶æ’åºï¼Œæ˜¾ç¤º/éšè—ç­‰ç­‰ã€‚å…·ä½“æ ¹æ®ä¸šåŠ¡æƒ…å†µï¼Œè¿™é‡Œåªæ˜¯ç®€å•åˆ—ä¸¾ã€‚</p><h4 id="ç•Œé¢åˆ·æ–°"><a href="#ç•Œé¢åˆ·æ–°" class="headerlink" title="ç•Œé¢åˆ·æ–°"></a>ç•Œé¢åˆ·æ–°</h4><p>å½“IMæ”¶åˆ°ç¾¤æ’ä»¶è‡ªå®šä¹‰é€šçŸ¥æ—¶ï¼Œè¿›è¡Œæ¡ä»¶å¤„ç†å¯¹åº”çš„ä¸šåŠ¡ã€‚å½“å®Œæˆç¾¤æ’ä»¶å…³ç³»è¡¨çš„å˜æ›´æ—¶ï¼Œå‘é€é€šçŸ¥åˆ°æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨æ”¶åˆ°é€šçŸ¥åï¼Œåˆ¤æ–­ä»…å½“å½“å‰ä¼šidä¸è¦æ¥æ”¶é€šçŸ¥çš„ç¾¤idç›¸ç­‰çš„æ—¶å€™ï¼Œæ‰è¿›è¡Œè°ƒç”¨daoæŸ¥è¯¢ç¾¤æ’ä»¶åˆ—è¡¨æ–¹æ³•è¿”å›ç›¸å…³çš„æ’ä»¶å…³ç³»é›†åˆã€‚æ’ä»¶å…³ç³»ModelåŒ…å«æ’ä»¶ä¿¡æ¯Modelï¼Œç„¶åç•Œé¢å°±èƒ½å®Œæ•´æ˜¾ç¤ºäº†ã€‚</p><h4 id="åŒæ­¥æ—¶æœºï¼Ÿ"><a href="#åŒæ­¥æ—¶æœºï¼Ÿ" class="headerlink" title="åŒæ­¥æ—¶æœºï¼Ÿ"></a>åŒæ­¥æ—¶æœºï¼Ÿ</h4><ol><li>å½“ç”¨æˆ·ç™»å½•åï¼Œé¦–æ¬¡ç‚¹å¼€æŸç¾¤æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨åŒæ­¥ç¾¤ä¿¡æ¯åŸºç¡€æ¥å£ï¼Œé‡Œé¢åŒ…å«æ’ä»¶é›†åˆã€‚é›†åˆé‡Œåˆ†åˆ«ä¸ºå·²å…³è”çš„æŸæ’ä»¶idåœ¨å½“å‰ç¾¤çš„æœ€ç»ˆçŠ¶æ€ã€‚æ ¹æ®existGroupFlagä¸ºtrueè¡¨ç¤ºä¸è¯¥ç¾¤å…³è”ç€ï¼Œå¦‚æœä¸ºfalse åˆ™éœ€è¦è°ƒç”¨è§£ç»‘åˆ é™¤ç¾¤æ’ä»¶å…³ç³»ã€‚</li><li>å½“ç”¨æˆ·é¦–æ¬¡å®‰è£…æˆ–å¸è½½é‡è£…æ—¶å€™ï¼Œè¿›å…¥æ¶ˆæ¯é¦–é¡µä¼šè¿›è¡Œå¤šç¾¤åŒæ­¥ï¼Œåœ¨ç¾¤ä¿¡æ¯åŒæ­¥æ—¶è¿”å›çš„åŸºç¡€ä¿¡æ¯ä¹Ÿä¼šåŒ…å«æ­¤ç¾¤æ’ä»¶é›†åˆåŸºä¿¡æ¯ã€‚</li></ol><h4 id="ä»£ç å»ºè®®"><a href="#ä»£ç å»ºè®®" class="headerlink" title="ä»£ç å»ºè®®"></a>ä»£ç å»ºè®®</h4><p>æ’ä»¶Daoæä¾›æŸ¥è¯¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ç­‰åŸºæœ¬æ–¹æ³•ã€‚æ’ä»¶Managerä¸“é—¨å¤„ç†ä¸šåŠ¡ï¼Œè°ƒç”¨Daoç›¸å…³æ–¹æ³•ç»“åˆå®Œæˆä¸šåŠ¡éœ€æ±‚ã€‚é¿å…blockå›è°ƒåœ°ç‹±,é˜²æ­¢å¤šå±‚åµŒå¥—ã€‚å†…å­˜æ’åºå’Œsqlæ’åºç›¸ç»“åˆï¼Œç»“æ„ä½“å’Œå¯¹è±¡Modelç›¸æ˜ å°„ï¼Œè§£åŒ…æ—¶å€™ç•™æ„ç»“æ„ä½“å­—æ®µç±»å‹ï¼Œè§£ç æ—¶å€™å¯¹åº”ç›¸å…³ç½‘ç»œå­—èŠ‚åºï¼Œç•™æ„æ–°å¢ä¸replace into çš„åŒºåˆ«ï¼Œç•Œé¢åˆ·æ–°ä¸¥æ ¼æ¡ä»¶è¿‡æ»¤é˜²æ­¢é€ æˆä¸å¿…è¦çš„åˆ·æ–°ã€‚æ’ä»¶åŸºæœ¬ä¿¡æ¯åŒæ­¥é¢‘ç‡çœ‹ä¸šåŠ¡ï¼Œå…³ç³»ç»‘å®šè¦å®æ—¶ï¼Œæµ‹è¯•è¦å……åˆ†ç•™æ„å¸è½½é‡è£…åçš„æ’ä»¶ä¿¡æ¯åŒæ­¥é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>èŠå¤©è¾“å…¥æ¡†@æŸäºº</title>
      <link href="/2021/07/01/input@/"/>
      <url>/2021/07/01/input@/</url>
      
        <content type="html"><![CDATA[<h3 id="èŠå¤©è¾“å…¥æ¡†-æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜"><a href="#èŠå¤©è¾“å…¥æ¡†-æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜" class="headerlink" title="èŠå¤©è¾“å…¥æ¡†@æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜"></a>èŠå¤©è¾“å…¥æ¡†@æŸäººé€»è¾‘åˆ†ç±»ç‚¹è¯´æ˜</h3><p>IM åº”ç”¨è½¯ä»¶æ— è®ºæ˜¯Appç«¯æˆ–è€…æ˜¯PCç«¯éƒ½æœ‰@æŸäººè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œç”±äºç”¨æˆ·è¾“å…¥æ¡†è¾“å…¥æ¡ä»¶çš„å¤æ‚éšæœºæ€§ç§ç±»å¤šï¼Œ@çš„é’ˆå¯¹ä¸åŒæƒ…å†µè¿›è¡Œæ‹¼æ¥æˆ–è€…æ–°å¢æ ·å¼æ˜¾ç¤ºè“è‰²å­—ä½“è¡¨ç¤ºè¯¥äººåå¯é“¾æ¥ã€‚ç”±è¾“å…¥æ¡†å¼€å§‹ï¼Œç”¨æˆ·è¾“å…¥@çš„æ–¹å¼è¿›è¡Œåˆ†ç±»ï¼š</p><ol><li>é¦–å­—æ¯ä¸ºç©ºï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥@ï¼Œç„¶åè·³è½¬åˆ°æˆå‘˜é¡µé¢è¿›è¡Œé€‰æ‹©ç›¸å…³äººå‘˜ï¼Œé€‰å®Œå³å¸¦å›äººå ç»“æœä¸ºï¼šâ€œ@æŸäººâ€</li><li>inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Š: åœ¨æœ€å‰é¢ä¸‹ç­ä¸º0çš„ç¬¬1ä¸ªä½ç½®è¿›è¡Œæ’å…¥@  ç»“æœä¸ºï¼šâ€œ@æŸäººåŸinputè¾“å…¥æ¡†çš„æ–‡å­—â€</li><li>inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æœ€åé¢ä¸‹ç­ä¸ºlength-1çš„ç¬¬åä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥@   ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥æ¡†çš„æ–‡å­—@æŸäººâ€</li><li>inputè¾“å…¥æ¡†è¾“å…¥äº†æ–‡å­—çš„åŸºç¡€ä¸Šï¼Œåœ¨æ–‡å­—å†…å®¹ä¸­è¾“å…¥@ã€‚å³æ¡ä»¶ 0 &lt; index &lt; length-1 ç»“æœä¸ºï¼šâ€œåŸinputè¾“å…¥@æŸäººæ¡†çš„æ–‡å­—â€</li></ol><p>åœ¨ä»¥ä¸Šå››ç§è¾“å…¥æƒ…å†µä¸­ï¼Œ3ï¼Œ4 è¾“å…¥æ‹¼æ¥@æŸäººçš„æ—¶å€™ï¼Œéœ€è¦åˆ¤æ–­å‰ä¸€ä¸ªå­—æ˜¯å¦ä¸º@, å¦‚æœæ˜¯,åˆ™åé¢æ‹¼æ¥çš„æ—¶å€™ç›´æ¥+æŸäººå³å¯ã€‚å¦å¤–å½“åœ¨ç¬¬4ç§æƒ…å†µæ–‡å­—ä¸­é—´è¾“å…¥çš„æ—¶å€™ï¼Œä¸­è‹±æ–‡ä¸‹è¾“å…¥å¯èƒ½é‡åˆ°æ–‡æœ¬æ¡†çš„å€¼ä¸º â€œ @@æ–‡å­—â€ï¼ŒæŒ‰ç…§ä¹‹å‰çš„é€»è¾‘å½“å…‰æ ‡è¾“å…¥åœ¨ç¬¬2ä¸ª@åæ—¶ï¼Œç„¶åé”®ç›˜è¾“å…¥@è·³è½¬é¡µé¢é€‰æ‹©æˆå‘˜ï¼Œæœ€åçš„ç»“æœåº”è¯¥æ˜¯â€œ @@æŸäººæ–‡å­—â€è¿™ä¸ªç»„åˆï¼Œä¸ºäº†æ›´å‹å¥½åœ°æ˜¾ç¤ºï¼Œè¿˜éœ€æ£€æŸ¥å½“å‰ä¸¤ä¸ªä¹Ÿæ˜¯@çš„æ—¶å€™ï¼Œå³å‡ºç°1ä¸ª@. å³ç»“æœä¸ºâ€œ @æŸäººæ–‡å­—â€ ä»¥ä¾¿æ›´å‹å¥½åœ°æ˜¾ç¤ºã€‚</p><p>æ ¸å¿ƒé€»è¾‘ï¼šæ ¹æ®æ–‡æœ¬æ¡†åŸè¾“å…¥æ–‡å­—æ˜¯å¦æœ‰å†…å®¹ï¼Œæ— å†…å®¹æ—¶å€™ç›´æ¥æ‹¼æ¥ã€‚æœ‰å†…å®¹æ—¶å€™åˆ†ä¸¤ç§æƒ…å†µï¼Œå³å…‰æ ‡çš„è¾“å…¥ä½ç½®æƒ…å†µï¼šå½“locationç­‰äº0çš„æ—¶å€™ï¼Œå³åœ¨é¦–ä½ç½®è¾“å…¥@æŸäººæ‹¼æ¥åŸæ–‡æœ¬å†…å®¹ã€‚å½“locationå¤§äº0çš„æ—¶å€™ï¼Œå³å…‰æ ‡å¯èƒ½å‡ºç°åœ¨å†…å®¹æ–‡å­—ä¹‹é—´ï¼Œä¹Ÿå¯èƒ½æ˜¯åœ¨æœ€åé¢ã€‚ä¹Ÿæ˜¯åˆ†ä¸¤ç§æƒ…å†µï¼šæ ¹æ®location+1åˆ¤æ–­æ˜¯å¦å°äºåŸæ–‡æœ¬æ¡†æ–‡å­—é•¿åº¦length.å¦‚æœå°äºï¼Œåˆ™è¡¨ç¤ºåœ¨å†…å®¹ä¹‹é—´æ’å…¥ã€‚å¦åˆ™,åœ¨å†…å®¹æœ€åå°¾éƒ¨æ’å…¥ã€‚æ— è®ºæ˜¯ä¹‹é—´è¿˜æ˜¯å°¾éƒ¨åšæ’å…¥ï¼Œéƒ½éœ€æ£€æŸ¥å‰ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸º@,å¦‚æœæ˜¯ï¼Œåˆ™åœ¨åšæ‹¼æ¥äººåæ—¶å€™å°±æ— éœ€å†è¿½åŠ @ã€‚å½“åœ¨ä¹‹é—´åšæ’å…¥çš„æ—¶å€™ï¼Œä¸ºäº†å‹å¥½æ˜¾ç¤ºï¼Œå¯é€‚å½“åˆ¤æ–­å‰ä¸¤ä¸ªå­—ç¬¦ä¸º@@æ—¶å€™è¿›è¡Œæ›¿æ¢ä¸ºä¸€ä¸ª@ã€‚<br><a id="more"></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">NSString *newNameStr &#x3D; nil;</span><br><span class="line">    if(originStr.length &gt; 1)&#123;</span><br><span class="line">        NSMutableString *mStr &#x3D; [[NSMutableString alloc] init];</span><br><span class="line">        if(_range.location &gt; 0)&#123;</span><br><span class="line">            &#x2F;&#x2F;åœ¨ä¸­é—´æˆ–è€…åœ¨æœ«å°¾æ’å…¥@,å–å‡ºä¹‹å‰çš„ï¼Œå†å–å‡ºä¹‹åçš„ã€‚</span><br><span class="line">            NSString *beforeStr &#x3D; [originStr substringWithRange:NSMakeRange(0, _range.location)];</span><br><span class="line">            [mStr appendString:beforeStr];</span><br><span class="line">            BOOL bCenterInsertFlag &#x3D; NO;</span><br><span class="line">            BOOL bNeedInsertAtFlag &#x3D; YES;</span><br><span class="line">            if(_range.location + 1 &lt; originStr.length)&#123;</span><br><span class="line">                bCenterInsertFlag &#x3D; YES;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F;ä¸­é—´æ’å…¥.åˆ¤æ–­å‰ä¸€ä¸ªæ˜¯å¦@</span><br><span class="line">                NSString *lastChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-1];</span><br><span class="line">                if([lastChar isEqualToString:@&quot;@&quot;])&#123;</span><br><span class="line">                    bNeedInsertAtFlag &#x3D; NO;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if(beforeStr.length &gt; 2 &amp;&amp; beforeStr.length-2 &gt; 0)&#123;</span><br><span class="line">                    NSString *lastTwoChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-2];</span><br><span class="line">                    if([lastTwoChar isEqualToString:@&quot;@@&quot;])&#123;</span><br><span class="line">                        [mStr replaceOccurrencesOfString:@&quot;@@&quot; withString:@&quot;@&quot; options:nil range:NSMakeRange(0, mStr.length)];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                &#x2F;&#x2F;æœ«å°¾æ’å…¥.åˆ¤æ–­å‰ä¸€ä¸ªæ˜¯å¦@</span><br><span class="line">                NSString *lastChar &#x3D; [beforeStr substringFromIndex:beforeStr.length-1];</span><br><span class="line">                if([lastChar isEqualToString:@&quot;@&quot;])&#123;</span><br><span class="line">                    bNeedInsertAtFlag &#x3D; NO;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if(bNeedInsertAtFlag)&#123;</span><br><span class="line">                [mStr appendString:@&quot;@&quot;];</span><br><span class="line">            &#125;</span><br><span class="line">            [mStr appendString:nameStr];</span><br><span class="line">            if(bCenterInsertFlag)&#123; &#x2F;&#x2F;å¦‚æœåœ¨æ–‡å­—ä¸­é—´æ’å…¥,æ‹¿åˆ°@ä¹‹åçš„å­—ç¬¦ä¸²</span><br><span class="line">                NSString *afterStr &#x3D; [originStr substringFromIndex:_range.location+1];</span><br><span class="line">                [mStr appendString:afterStr];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            &#x2F;&#x2F;é¦–å­—æ¯ä¸º@ç¬¦å·ï¼Œæˆªå–ä¹‹åçš„.</span><br><span class="line">            [mStr appendString:@&quot;@&quot;];</span><br><span class="line">            [mStr appendString:nameStr];</span><br><span class="line">            NSString *afterStr &#x3D; [originStr substringFromIndex:1];</span><br><span class="line">            [mStr appendString:afterStr];</span><br><span class="line">        &#125;</span><br><span class="line">        newNameStr &#x3D; mStr;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        newNameStr &#x3D; [NSString stringWithFormat:@&quot;%@%@&quot;,mutableStr,nameStr];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¥‡æ€ªçš„ä¾§è¾¹æ é—®é¢˜</title>
      <link href="/2021/07/01/LeftSlide/"/>
      <url>/2021/07/01/LeftSlide/</url>
      
        <content type="html"><![CDATA[<p>å¼€å‘ä¸­ç”±äºç³»ç»Ÿç‰ˆæœ¬ä»¥åŠsdkï¼Œç¬¬ä¸‰æ–¹åº“ç­‰åŸå› ï¼Œéƒ½ä¼šå½±å“æˆå‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚å½“æ—¶æ˜¯å¼•ç”¨YYTextviewæ§ä»¶è§£å†³æ¶ˆæ¯cellé•¿æ–‡æœ¬çš„å…‰æ ‡é€‰æ‹©èŒƒå›´å†…å®¹å¤åˆ¶çš„å°åŠŸèƒ½ã€‚ç”±äºYYTextviewå…‰æ ‡å¼¹å‡ºå±‚è‡ªå®šä¹‰åœ¨å¦å¤–ä¸€ä¸ªæ–°çš„Windownä¸Šï¼Œç„¶åå·¦ä¾§ä¾§æ»‘å‡ºçš„viewæ˜¯æ–°å¢åœ¨å¦ä¸€ä¸ªæ–°çš„Windownä¸­ã€‚å½“ä¾§è¾¹æ dismissçš„æ—¶å€™ï¼Œå¯èƒ½ç”±äºwindownå±‚çº§çš„å½±å“ï¼Œå½“åœ¨èŠå¤©è¾“å…¥æ¡†å†æ¬¡è¾“å…¥æ–‡å­—é•¿æŒ‰æ—¶å€™ï¼Œç³»ç»Ÿå‡ºç°çš„UIMenuå±‚çš„Buttonä¸è§äº†ã€‚å½“æ—¶æƒ³ä»æ ¹æœ¬é—®é¢˜å»æ’æŸ¥ä¸ºå•¥ç³»ç»Ÿçš„UIMenuå½“é•¿æŒ‰çš„æ—¶å€™æ“ä½œåŠŸèƒ½çš„buttonä¸ºå•¥ä¸è§å»è§£å†³ï¼ŒèŠ±è´¹äº†å°†è¿‘2ä¸ªå¤šå°æ—¶é€šè¿‡Xcodeè°ƒè¯•æŸ¥çœ‹å±‚çº§ï¼Œé˜…è¯»YYTextviewçš„å…‰æ ‡è‡ªå®šä¹‰å±‚çš„å®ç°ä»¥åŠæ·»åŠ åˆ°windownçš„å±‚çº§ï¼ŒæŸ¥çœ‹å·¦ä¾§ä¾§è¾¹æ æ·»åŠ åŠ¨ç”»å®ç°æ–¹å¼ç­‰éƒ½æœªè§£å†³ã€‚ç„¶åæƒ³åˆ°å¦‚æœä¸é€šè¿‡æ–°åˆ›å»ºwindowæ¥æ·»åŠ view å®ç°åŠ¨ç”»ï¼Œè€Œæ˜¯é€šè¿‡presentä¸€ä¸ªæ§åˆ¶å™¨å®ç°ä¾§è¾¹æ åŠ¨ç”»ã€‚æœ€ç»ˆé—®é¢˜å¾—åˆ°äº†è§£å†³ã€‚</p><h4 id="æ—§Slideä¾§æ»‘æ–¹æ¡ˆ"><a href="#æ—§Slideä¾§æ»‘æ–¹æ¡ˆ" class="headerlink" title="æ—§Slideä¾§æ»‘æ–¹æ¡ˆ"></a>æ—§Slideä¾§æ»‘æ–¹æ¡ˆ</h4><p>æ—§æœ‰çš„ä¾§æ»‘æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–°window,ç„¶åè®¾ç½®å…¶windowLevel ä¸ºæ­£å¸¸çš„+1ï¼Œè¿™æ ·å°±åœ¨æœ€é¡¶å±‚äº†ï¼Œç„¶åè®¾ç½®å…¶rootViewControllerä¸ºä¾§æ»‘çš„æ§åˆ¶å™¨ã€‚å¾ˆæœ‰å¯èƒ½æ˜¯æ–°åˆ›å»ºçš„windowä¸YYtextViewçš„å…‰æ ‡é€‰æ‹©å±‚åˆ›å»ºçš„windowæœ‰å†²çªï¼Œç„¶åé€ æˆUIMenuæŒ‰é’®æ¶ˆå¤±äº†ã€‚</p><h4 id="æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨-SlideVC"><a href="#æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨-SlideVC" class="headerlink" title="æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨ SlideVC"></a>æ”¹è¿›æ–¹æ¡ˆï¼ŒPresentä¸€ä¸ªæ§åˆ¶å™¨ SlideVC</h4><p>å®åˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¿åˆ°æœ€é¡¶å±‚æ§åˆ¶å™¨topVCï¼Œç”¨å¯¼èˆªæ§åˆ¶å™¨æŠŠSlideVCåŒ…è£¹å¥½ï¼Œè®¾ç½®å®ƒçš„ modalPresentationStyle æ¨¡å¼ä¸ºUIModalPresentationOverCurrentContextï¼Œç„¶åpresentå‡ºæ¥ .è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»Ÿçš„presentæ–¹æ³•æ˜¯å¦æœ‰è¢«runtime method swizledè¿›è¡Œæ–¹æ³•æ›¿æ¢æ¥å…¬å…±ç»Ÿä¸€å¤„ç†modelPresentStyleé—®é¢˜ï¼Œå› ä¸ºæœ‰äº›Appäº¤äº’ä¸æƒ³ä½¿ç”¨ç³»ç»Ÿçš„æŠ½å±‰å¼presentæ•ˆæœ, å¦‚æœæœ‰éœ€è¦åšç›¸å…³çš„è¿‡æ»¤ä¸šåŠ¡æ§åˆ¶å™¨é€»è¾‘åˆ¤æ–­ã€‚ ä¾§è¾¹åŠ¨ç”»çš„å®ç°ï¼šåœ¨SlideVCä¸­å®šä¹‰ä¸€ä¸ªåŠé€æ˜å±‚èƒŒæ™¯bgViewï¼Œæ·»åŠ tapæ‰‹åŠ¿ï¼Œç‚¹å‡»å³å…³é—­ã€‚å¾€bgViewæ·»åŠ ä¸€ä¸ªå·¦ä¾§å†…å®¹è§†å›¾leftView 75%å®½,å³ä¾§rightViewã€‚self.viewæ·»åŠ ä¸€ä¸ªPanæ‰‹åŠ¿ï¼Œç”¨æ¥è®¡ç®—leftViewæ‹–æ‹½æ—¶å€™Xçš„å€¼ä½ç§»å˜åŒ–ã€‚å°†å†…å®¹æ§åˆ¶å™¨äº¤ç”±SlideVCç®¡ç†ï¼š<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[self addChildViewController:self.leftVC];</span><br><span class="line">[self.leftVC didMoveToParentViewController:self];</span><br></pre></td></tr></table></figure><br>å½“slideVCæ§åˆ¶å™¨ViewDidApperæ˜¾ç¤ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å³åšåŠ¨ç”»ï¼ˆå¯ä»¥åŠ ä¸€ä¸ªå¼€å…³çŠ¶æ€åˆ¤æ–­å…¶æ˜¯å¦æ‰“å¼€ï¼‰ã€‚æ ¹æ®ä¾§æ»‘æ‰‹æŒ‡ç§»åŠ¨è·ç¦»æ˜¯å¦ä½¿å†…å®¹Viewåˆ°å±å¹•çš„ä¸€åŠï¼Œå¦åˆ™å¤ä½ã€‚ç„¶åå¯ä»¥é€‚å½“åšä¸€ç‚¹å¼¹æ€§åŠ¨ç”»ã€‚é€šè¿‡UIviewçš„animateWithDuration: usingSpringWithDamping:æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (void)showAnimation &#123;</span><br><span class="line">    self.view.userInteractionEnabled &#x3D; NO;</span><br><span class="line">    self.menuOpenFlag &#x3D; YES;</span><br><span class="line">    if(!self.hasMoreThenHalf)&#123;</span><br><span class="line">        CGAffineTransform translate &#x3D; CGAffineTransformMakeTranslation(-300, 0);</span><br><span class="line">        CGAffineTransform scale &#x3D; CGAffineTransformMakeScale(3.0, 1.0);</span><br><span class="line">        self.modalView.transform &#x3D; CGAffineTransformConcat(translate, scale);</span><br><span class="line">    &#125;</span><br><span class="line">    CGFloat time &#x3D; fabs(self.modalView.frame.origin.x &#x2F; self.modalView.frame.size.width) * animationTime;</span><br><span class="line"></span><br><span class="line">    [UIView animateWithDuration:time delay:0.0 usingSpringWithDamping:0.85 initialSpringVelocity:0.7 options:UIViewAnimationOptionCurveLinear animations:^&#123;</span><br><span class="line">        if(self.hasMoreThenHalf)&#123;</span><br><span class="line">            self.modalView.frame &#x3D;  CGRectMake(0, 0, MenuWidth, [UIScreen mainScreen].bounds.size.height);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">           self.modalView.transform &#x3D; CGAffineTransformIdentity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        self.view.userInteractionEnabled &#x3D; YES;</span><br><span class="line">        self.menuOpenFlag &#x3D; YES;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“å…³é—­çš„æ—¶å€™ï¼šè¿›è¡Œè§†å›¾çš„å¤ä½åŠ¨ç”»ï¼Œç„¶ådismissæ§åˆ¶å™¨ã€‚è¿™ä¸ªæ˜¯ä¸»åŠ¨å…³é—­ã€‚å¦å¤–éœ€è¦é¢„ç•™å¥½è¢«åŠ¨å…¶ä»–ä¸šåŠ¡æƒ…å†µä¸‹éœ€è¦å…³é—­ä¾§è¾¹æ çš„æƒ…å†µï¼Œæ³¨å†Œå¥½ç›¸å…³çš„é€šçŸ¥ï¼Œå½“æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œå°±è‡ªåŠ¨å…³é—­äº†ä¾§è¾¹æ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (void)closeAnimation &#123;</span><br><span class="line">    self.view.userInteractionEnabled &#x3D; NO;</span><br><span class="line">    self.hasMoreThenHalf &#x3D; NO;</span><br><span class="line">    &#x2F;&#x2F; æ ¹æ®å½“å‰xï¼Œè®¡ç®—éšè—æ—¶é—´</span><br><span class="line">    CGFloat time &#x3D; (1 - fabs(self.modalView.frame.origin.x &#x2F; self.modalView.frame.size.width)) * animationTime;</span><br><span class="line">    [UIView animateWithDuration:time animations:^&#123;</span><br><span class="line">        self.modalView.frame &#x3D; CGRectMake(-self.modalView.frame.size.width, 0, self.modalView.frame.size.width, [UIScreen mainScreen].bounds.size.height);</span><br><span class="line">        self.bgView.alpha &#x3D; 0.0;</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">        self.menuOpenFlag &#x3D; NO;</span><br><span class="line">        [self dismissViewControllerAnimated:false completion:nil];</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Panæ‰‹åŠ¿çš„äº‹ä»¶æ§åˆ¶LeftView Xåæ ‡ä½ç§»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">- (void)moveViewWithGesture:(UIPanGestureRecognizer *)panGes &#123;</span><br><span class="line">    &#x2F;&#x2F; å¼€å§‹ä½ç½®</span><br><span class="line">    static CGFloat startX;</span><br><span class="line">    &#x2F;&#x2F; ç»“æŸä½ç½®</span><br><span class="line">    static CGFloat lastX;</span><br><span class="line">    &#x2F;&#x2F; æ”¹å˜å¤šå°‘</span><br><span class="line">    static CGFloat durationX;</span><br><span class="line"></span><br><span class="line">    CGPoint touchPoint &#x3D; [panGes locationInView:self.view];</span><br><span class="line">    &#x2F;&#x2F; æ‰‹åŠ¿å¼€å§‹</span><br><span class="line">    if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateBegan) &#123;</span><br><span class="line">        startX &#x3D; touchPoint.x;</span><br><span class="line">        lastX &#x3D; touchPoint.x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateChanged) &#123;</span><br><span class="line">        CGFloat currentX &#x3D; touchPoint.x;</span><br><span class="line">        durationX &#x3D; currentX - lastX;</span><br><span class="line">        lastX &#x3D; currentX;</span><br><span class="line">        self.hasMoreThenHalf &#x3D; NO;</span><br><span class="line">        CGFloat leftVC_X &#x3D; durationX + self.modalView.x;</span><br><span class="line">        if (leftVC_X &lt;&#x3D; -self.modalView.width) &#123;</span><br><span class="line">            leftVC_X &#x3D; - self.modalView.width;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;å¦‚æœæ˜¯å‘å³æ»‘åŠ¨</span><br><span class="line">        if (leftVC_X &gt; 0) &#123;</span><br><span class="line">            leftVC_X &#x3D; 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        self.bgView.alpha &#x3D; (1 + leftVC_X &#x2F; self.modalView.frame.size.width) * 0.5;</span><br><span class="line"></span><br><span class="line">        [self.modalView setFrame:CGRectMake(leftVC_X, 0, _modalView.frame.size.width, _modalView.frame.size.height)];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (panGes.state &#x3D;&#x3D; UIGestureRecognizerStateEnded) &#123;</span><br><span class="line">        &#x2F;&#x2F; è¶…è¿‡ä¸€åŠå±å¹•</span><br><span class="line">        if (_modalView.x &gt; - _modalView.frame.size.width + [UIScreen mainScreen].bounds.size.width &#x2F; 2) &#123;</span><br><span class="line">            self.hasMoreThenHalf &#x3D; YES;</span><br><span class="line">            [self showAnimation];</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            [self closeAnimation];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="H5é¡µé¢å¥‡æ€ªçš„UIDocumentMenuViewController"><a href="#H5é¡µé¢å¥‡æ€ªçš„UIDocumentMenuViewController" class="headerlink" title="H5é¡µé¢å¥‡æ€ªçš„UIDocumentMenuViewController"></a>H5é¡µé¢å¥‡æ€ªçš„UIDocumentMenuViewController</h4><p>åœ¨è¾¹æ æ§åˆ¶å™¨ç‚¹å‡»èœå•è¿›å…¥è¿›å…¥æ„è§åé¦ˆæ¨¡å—ï¼Œé€šè¿‡inputæ ‡ç­¾æ‰“å¼€åŸç”Ÿå›¾ç‰‡é€‰æ‹©å™¨å‡ºç°é—ªé€€ã€‚æ­¤æ—¶ç³»ç»Ÿçš„presentä¼šç»è¿‡ä¸¤å±‚ã€‚ç¬¬ä¸€å±‚æ˜¯UIDocumentMenuViewController,ç¬¬äºŒå±‚æ‰åˆ°ç³»ç»Ÿé€‰æ‹©ç›¸å†Œé‚£ä¸ªæ§åˆ¶å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„å¯¼èˆªæ§åˆ¶å™¨ä¸­é‡å†™dismissæ–¹æ³•ï¼Œæ ¹æ®presentedViewControlleræ˜¯å¦ä¸ºUIDocumentMenuViewControlleråšä¸€ä¸ªæ ‡è®°documentFlag, éœ€è¦æ‰‹åŠ¨æ§åˆ¶å½“ç¬¬äºŒæ¬¡ç³»ç»Ÿè°ƒç”¨dismissæ—¶å€™å°±æ— éœ€å›è°ƒçˆ¶ç±»çš„dismissæ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-(void) dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion&#123;</span><br><span class="line">    if(self.presentedViewController !&#x3D; nil &amp;&amp; [self.presentedViewController isKindOfClass:[NSClassFromString(@&quot;UIDocumentMenuViewController&quot;) class]])&#123;</span><br><span class="line">        self.documentFlag &#x3D; YES;</span><br><span class="line">        [super dismissViewControllerAnimated:flag completion:completion];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        &#x2F;&#x2F;ç¬¬äºŒæ¬¡dismissé˜»æ­¢æ‰ã€‚</span><br><span class="line">        if(!self.documentFlag)&#123;</span><br><span class="line">            [super dismissViewControllerAnimated:flag completion:completion];</span><br><span class="line">        &#125;</span><br><span class="line">        self.documentFlag &#x3D; NO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><font color=green>æ€»ç»“ï¼šé—®é¢˜æœ¬èº«ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯ä¸æ„¿æ„å°è¯•ä»å½±å“è¯¥é—®é¢˜ç‚¹å»ç»•å¼€è¯¥ç‚¹æ‰€å¯¼è‡´çš„é—®é¢˜ã€‚è¿™æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æ·å¾„æ–¹æ¡ˆã€‚å½“äº§ç”Ÿæ–°çš„é—®é¢˜ç‚¹æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è€å¿ƒè°ƒè¯•ï¼Œæ­¥æ­¥ç»†å¿ƒï¼Œå‘ç°é€ æˆé—®é¢˜ç‚¹çš„ç›´æ¥åŸå› ã€‚</font>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2020å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹</title>
      <link href="/2021/06/29/2020iOS/"/>
      <url>/2021/06/29/2020iOS/</url>
      
        <content type="html"><![CDATA[<h3 id="2020-å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹-tips"><a href="#2020-å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹-tips" class="headerlink" title="2020 å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹ tips"></a>2020 å¹´ä¸‹åŠå¹´iOSå·¥ä½œæŠ€æœ¯ç‚¹ tips</h3><p>èƒŒæ™¯ï¼šç–«æƒ…åŸå› å¯¼è‡´ä¹‹å‰äº‘å–µå·¥ä½œä¸èƒ½å¤Ÿç»§ç»­ï¼Œ2020å¹´6æœˆè¿˜æ˜¯é¢è¯•æ‰¾äº†ä¸€ä»½ç›¸å¯¹ç¨³å®šçš„å·¥ä½œï¼Œå»äº†å—èˆªçš„ä¸€å®¶å¤–åŒ…ä¾›åº”å•†ã€‚</p><p>E App æ˜¯ä¸€ä¸ªä¼ä¸šå†…éƒ¨OAå³æ—¶é€šè®¯App. é©»åœºå—èˆªåä¸»è¦æ˜¯é’ˆå¯¹æ­¤é¡¹ç›®è¿›è¡ŒåŠŸèƒ½è¿­ä»£æ•æ·å¼€å‘ã€‚ä¸»è¦è¯´ä¸€ä¸‹å‡ ä¸ªæŠ€æœ¯ä»»åŠ¡ç‚¹ï¼š</p><ol><li>é¦–è¦ä»»åŠ¡å°±æ˜¯å°†æ—§æœ‰MRCå†…å­˜è¿è¡Œç¯å¢ƒæ”¹æˆARCè¿è¡Œç¯å¢ƒã€‚<br> ä»»åŠ¡åˆ°ä¸æ˜¯å¤æ‚ï¼Œä¸»è¦ä¿®æ”¹ç‚¹æ˜¯å¤šï¼Œä½“åŠ›åŠ³åŠ¨ã€‚å°†ARCç›¸å…³çš„ä¿®é¥°å…³é”®è¯ï¼Œæ§åˆ¶å™¨çš„dealloc æ–¹æ³•ä»¥åŠè®¾ç½®çš„ä»£ç†delegate, é…ç½®æ–‡ä»¶-fno-objc ç›¸å…³é…ç½®å¹²æ‰ã€‚<br>é‡åˆ°çš„é—®é¢˜ï¼Ÿ<br> æœŸé—´ç”±äºä¹‹å‰æ˜¯MRCæ‰‹åŠ¨å†…å­˜å›æ”¶æœºåˆ¶ï¼Œç”±äºå¼€å‘äººå‘˜ä»£ç æŸäº›å˜é‡æ²¡æœ‰å›æ”¶æˆ–è€…æ³„éœ²è´®å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“æ”¹æˆARCä¹‹åä¼šè‡ªåŠ¨é‡Šæ”¾å¯¼è‡´å†æ¬¡ä½¿ç”¨è¯¥å˜é‡çš„æ—¶å€™å‡ºç°nilå€¼å´©æºƒæˆ–è€…ä¸šåŠ¡çš„ä¸­æ–­å¼€ï¼<br>C++ä»£ç å—Clientç±»æŸæ–¹æ³•çš„å˜é‡è¢«é‡Šæ”¾é€ æˆå´©æºƒï¼Ÿ<br> å½“æ—¶é—®é¢˜ç‚¹æŠ›å‘å¦‚ä½•åœæ­¢æŸçº¿ç¨‹çš„è§£å†³æ–¹æ¡ˆä¸Šå»äº†ï¼Œè€Œä¸æ˜¯ç»ˆæ­¢æŸæ¡ä»¶ç„¶åè®©çº¿ç¨‹è‡ªç„¶åœæ­¢ã€‚å½“ç¨‹åºè¿›å…¥åå°applicationWillTerminateçš„æ—¶å€™ï¼Œæ‰‹åŠ¨é€€å‡ºIM.ç„¶åè¿›å…¥é”€æ¯è¿æ¥é˜¶æ®µã€‚ä¸ºäº†ä½¿alive_thread , recv_thread ä¸¤çº¿ç¨‹é€€å‡º,åœ¨CLIENT_Disconnect é”€æ¯é˜¶æ®µï¼Œé€šè¿‡æ”¹å˜alivethreadçš„æ¡ä»¶è®©whileæ¡ä»¶ä¸­æ­¢ï¼Œçº¿ç¨‹å¿…ç„¶é€€å‡ºã€‚</li><li>h5ç½‘é¡µæ‰“å¡æœ‰æ—¶å€™å®šä½ä¸åˆ°æˆ–è€…å´©æºƒã€‚å› Appç¨‹åºä½¿ç”¨äº†ç™¾åº¦åœ°å›¾sdk,æ‰€ä»¥ç›´æ¥å‡çº§ç™¾åº¦åœ°å›¾sdkå³å¯ã€‚sdkç¼–è¯‘åˆ†xcode11.3 æˆ– xcode 12 ã€‚å…·ä½“çœ‹Eé¡¹ç›®å¦‚æœé‡‡å–xcode11.3 ç¼–è¯‘æ‰“åŒ…ä¸Šçº¿ï¼Œé‚£ä¹ˆéœ€è¦æ‰¾åˆ°é€‚åº”çš„.aåŒ…æˆ–è€…framework è¿›è¡Œç¼–è¯‘ã€‚</li><li><p>å°†ASIç½‘ç»œæ–‡ä»¶ä¸‹è½½æ”¹æˆAFNetwrokingç½‘ç»œæ–‡ä»¶ä¸‹è½½ï¼Œå°†é•¿è¿›åº¦æ¡æ”¹æˆæ‰‡å½¢è¿›åº¦æ¡ã€‚<br>ASIé‚£å¥—ç½‘ç»œè¯·æ±‚æ¯”è¾ƒè€æ—§ï¼Œå½“æ—¶è¿˜æ˜¯ç”¨NSURLConnnectionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸”éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä¸ªç½‘ç»œçº¿ç¨‹é•¿æœŸè´®å­˜åˆ°å†…å­˜ä¸­ã€‚AFN é‡‡å–NSURLSessionæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œçº¿ç¨‹å³ç”¨å³å›æ”¶ã€‚<br>AFNè¯·æ±‚æ—¶è®¾ç½®æ”¯æŒSSLå®‰å…¨ç­–ç•¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AFSecurityPolicy *securityPolicy &#x3D; [[AFSecurityPolicy alloc] init];</span><br><span class="line">securityPolicy &#x3D; [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];</span><br><span class="line">securityPolicy.allowInvalidCertificates &#x3D; YES;</span><br><span class="line">securityPolicy.validatesDomainName &#x3D; NO;</span><br><span class="line">[_manager setSecurityPolicy:securityPolicy];</span><br></pre></td></tr></table></figure><p>ç„¶åé€šè¿‡NSURLSessionDownloadTask è¿›è¡Œä¸‹è½½request,è¿”å›å¯¹åº”çš„è¿›åº¦ï¼Œé€šè¿‡KVOè¿›è¡Œè¿›åº¦æ¡çš„UIæ˜¾ç¤º,ä¹Ÿå¯é€šè¿‡Blockä¼ é€’åˆ°æ§åˆ¶å™¨è¿›è¡Œæ˜¾ç¤ºã€‚</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> NSURLSessionDownloadTask *downloadTask &#x3D; [_manager downloadTaskWithRequest:request progress:^(NSProgress * _Nonnull downloadProgress) &#123;</span><br><span class="line">     dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">         if(progressBlock)&#123;</span><br><span class="line">             progressBlock(downloadProgress);</span><br><span class="line">         &#125;</span><br><span class="line">         downloadModel.progress &#x3D; downloadProgress.fractionCompleted;</span><br><span class="line">     &#125;);</span><br><span class="line">&#125; destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) &#123;</span><br><span class="line">        return [NSURL fileURLWithPath:downloadModel.pathName]; &#x2F;&#x2F;è¿™é‡Œç›´æ¥è¿”å›éœ€è¦å­˜å‚¨çš„æœ¬åœ°æ²™ç›’è·¯å¾„</span><br><span class="line">&#125; completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) &#123;</span><br><span class="line">   if (error) &#123;</span><br><span class="line">       if (failedBlock) &#123;</span><br><span class="line">           downloadModel.progress &#x3D; 1;</span><br><span class="line">           failedBlock(error);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">       if(successBlock)&#123;</span><br><span class="line">           NSHTTPURLResponse * successRes &#x3D; (NSHTTPURLResponse *)response;</span><br><span class="line">           successBlock(successRes,downloadModel);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;];</span><br><span class="line">[downloadTask resume];</span><br><span class="line">downloadModel.task &#x3D; downloadTask;</span><br></pre></td></tr></table></figure><p>æ‰‡å½¢è§†å›¾çš„å®šä¹‰ç¼–å†™å‚è€ƒTZImagePickerå›¾ç‰‡é€‰æ‹©å™¨å¼€æºUIæ¡†æ¶ä¸­çš„TZProgressViewï¼ŒåæœŸçš„èŠå¤©å›¾ç‰‡é¢„è§ˆä¹Ÿå¾ˆå¤§å‚è€ƒäº†TZçš„å›¾ç‰‡ã€gifï¼Œè§†é¢‘æ··åˆé¢„è§ˆæ§ä»¶ã€‚åæœŸè¿˜ä¼šè®²åˆ°åŸºäºTZImagePickerçš„å›¾ç‰‡å…¥å£è¿›è¡Œå›¾ç‰‡ç¼–è¾‘ç­‰åŠŸèƒ½æ‰©å±•ã€‚<br>å›åˆ°æ‰‡å½¢è¿›åº¦è§†å›¾ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªPieProgressViewï¼Œ ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#define Hollow_Circle_Radius 0 &#x2F;&#x2F;ä¸­é—´ç©ºå¿ƒåœ†åŠå¾„ï¼Œé»˜è®¤ä¸º0å®å¿ƒ</span><br><span class="line">#define KOffsetRadius 10 &#x2F;&#x2F;åç§»è·ç¦»</span><br><span class="line">#define KMargin 0 &#x2F;&#x2F;è¾¹ç¼˜é—´è·</span><br><span class="line"></span><br><span class="line">@interface PieProgressView ()&#123;</span><br><span class="line">    CGFloat _radius;</span><br><span class="line">    CGPoint _center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) CAShapeLayer *pieLayer;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation PieProgressView</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame&#123;</span><br><span class="line"></span><br><span class="line">    self &#x3D; [super initWithFrame:frame];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.backgroundColor &#x3D; UIColor.clearColor;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;çº¿çš„åŠå¾„ä¸ºæ‰‡å½¢åŠå¾„çš„ä¸€åŠï¼Œçº¿å®½æ˜¯æ‰‡å½¢åŠå¾„-&gt;åŠå¾„+çº¿å®½çš„ä¸€åŠ&#x3D;çœŸå®åŠå¾„ï¼Œè¿™æ ·å°±èƒ½ç”»å‡ºåœ†å½¢äº†</span><br><span class="line">        _radius &#x3D; (frame.size.width - KMargin*2)&#x2F;4.f;</span><br><span class="line">        _center &#x3D; CGPointMake(_radius*2 + KMargin, _radius*2 + KMargin);</span><br><span class="line"></span><br><span class="line">         _pieLayer &#x3D; [CAShapeLayer layer];</span><br><span class="line">         _pieLayer.strokeStart &#x3D; 0;</span><br><span class="line">        _pieLayer.lineWidth &#x3D; _radius*2 - Hollow_Circle_Radius;</span><br><span class="line">        _pieLayer.strokeColor &#x3D;  [[UIColor colorWithWhite:0 alpha:0.5] CGColor];</span><br><span class="line">        _pieLayer.fillColor &#x3D; [UIColor clearColor].CGColor;</span><br><span class="line">        _pieLayer.strokeEnd &#x3D; 0.98;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark -- Publish Methods</span><br><span class="line"></span><br><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line"></span><br><span class="line">    _radius &#x3D; (rect.size.width - KMargin*2)&#x2F;4.f;</span><br><span class="line">    _center &#x3D; CGPointMake(_radius*2 + KMargin, _radius*2 + KMargin);</span><br><span class="line">    _pieLayer.frame &#x3D; self.bounds;</span><br><span class="line">    UIBezierPath *piePath &#x3D; [UIBezierPath bezierPathWithArcCenter:_center radius:_radius + Hollow_Circle_Radius startAngle:M_PI_2*3 endAngle:-M_PI_2 clockwise:false];</span><br><span class="line"></span><br><span class="line">    _pieLayer.strokeEnd &#x3D; 1.0-_progress;</span><br><span class="line">    _pieLayer.path &#x3D; piePath.CGPath;</span><br><span class="line">   [_pieLayer removeFromSuperlayer];</span><br><span class="line">    [self.layer addSublayer:_pieLayer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setProgress:(float)progress &#123;</span><br><span class="line"></span><br><span class="line">    _progress &#x3D; progress;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><p>è®¾ç½®è§†å›¾è¿›åº¦å±æ€§çš„æ—¶å€™ï¼Œé€šè¿‡è°ƒç”¨setNeedsDisplayå‘Šè¯‰ç³»ç»Ÿéœ€è¦è¿›è¡Œè§†å›¾æ¸²æŸ“ï¼Œç³»ç»Ÿè°ƒç”¨drawRectæ–¹æ³•,å¾€self.layeræ·»åŠ ä¸€ä¸ªpieLayer, pieLayerçš„pathé€šè¿‡è´å¡å°”æ›²çº¿è¿›è¡Œè®¾ç½®ï¼ŒpiePathç›¸å½“äºä»ç”»äº†ä¸€ä¸ªåœ†å¼§åº¦ï¼Œé€šè¿‡strokeEndæ§åˆ¶ç»“æŸç‚¹ï¼Œéœ€è¦å’Œclosewiseé…åˆæ§åˆ¶é€†æ—¶é’ˆã€‚pieLayeréœ€è¦æ¯æ¬¡ç§»é™¤å†å¾€é‡Œæ·»åŠ ã€‚<br>åœ¨æ§åˆ¶å™¨åˆ—è¡¨cellForçš„æ—¶å€™, è®¾ç½®progressçš„èµ·åˆå€¼ä¸º0.0001å¾ˆå°ï¼Œå‡ ä¹æ¥è¿‘0ï¼Œè¿™æ ·åœ¨ç‚¹å‡»çš„æ—¶å€™å¦‚æœå»ä¸‹è½½ï¼Œåˆ™ç°è‰²é€æ˜è’™ç‰ˆå€¼è¾¾åˆ°0.999æ¥è¿‘1.0 ï¼Œç»™äººå¾ˆé€¼çœŸçš„æ„Ÿè§‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if(_convRecord.msg_type &#x3D;&#x3D; type_file)&#123;</span><br><span class="line">    PieProgressView *pieProgressView &#x3D; (PieProgressView *) [cell.contentView viewWithTag:pic_progress_circle_tag];</span><br><span class="line">    pieProgressView.superview.hidden &#x3D; NO;</span><br><span class="line">    if(pieProgressView) &#123;</span><br><span class="line">         if(_convRecord.download_flag &#x3D;&#x3D; state_download_success) &#123;</span><br><span class="line">             pieProgressView.hidden &#x3D; YES;</span><br><span class="line">         &#125;else &#123;</span><br><span class="line">              pieProgressView.hidden &#x3D; YES;</span><br><span class="line">              pieProgressView.alpha &#x3D; 1.0;</span><br><span class="line">              pieProgressView.progress &#x3D; 0.0001; &#x2F;&#x2F;åˆå§‹åŒ–é…ç½®è¿›åº¦ã€‚</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºuiéœ€æ±‚éœ€æ˜¾ç¤ºåœ†æ‰‡å½¢è¿›åº¦ï¼Œéœ€è¦å°†pieProgressViewæ·»åŠ åˆ°ä¸€ä¸ªèƒŒæ™¯viewä¸­ï¼Œå†è®¾ç½®å…¶circleBackViewçš„èƒŒæ™¯é¢œè‰²ä¸ºé€æ˜ï¼Œlayerçš„masksToBoundsä¸ºYES,è¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬éœ€è¦çš„åœ†æ‰‡å½¢äº†ã€‚</p></li><li><p>Xcode12 Runtimeçš„æ–¹æ³•è°ƒç”¨ã€‚ç”±äºä¸»å·¥ç¨‹æ˜¯å¤šä¸ªprojectå·¥ç¨‹ç›¸äº’ä¾èµ–ä¸²è¡Œè€Œæˆçš„å·¥ç¨‹ï¼Œåº•å·¥ç¨‹éœ€è¦ä¾èµ–ä¸»å·¥ç¨‹ç±»æ—¶å€™ï¼Œå¯é€šè¿‡runtime obj_msgSendæ¶ˆæ¯å‘é€æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id cls &#x3D; ((id (*) (id, SEL)) objc_msgSend)(objc_getClass(&quot;HttpTool&quot;),sel_registerName(&quot;tool&quot;));</span><br><span class="line">SEL sel &#x3D; sel_registerName(&quot;POST:paramDic:Success:Failure:&quot;);</span><br><span class="line">((void (*)(id,SEL,NSString *,NSDictionary *, id, id))objc_msgSend)(cls, sel, urlStr, dic, finishSuccessBlock,FailureBlock);</span><br></pre></td></tr></table></figure></li><li><p>å´©æºƒé—®é¢˜ï¼š</p><ul><li>æ•°ç»„è¶Šç•Œã€‚å°¤å…¶åœ¨ä½¿ç”¨tableviewçš„beginUpdate çš„æ—¶å€™ï¼Œå±€éƒ¨åˆ·æ–°æ“ä½œçš„æ•°æ®æºå’Œè¯»å–çš„æ•°æ®æºä¸ªæ•°ä¸ä¸€è‡´å¯¼è‡´ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åœ¨å­çº¿ç¨‹ä¸­æ“ä½œäº†è¯¥æ•°æ®ï¼Œå¯¼è‡´åˆ·æ–°çš„æ—¶å€™å’Œè¯¥æ•°æ®æºä¸ä¸€è‡´å¯¼è‡´å´©æºƒã€‚æˆ–è€…æ˜¯æ•°æ®æºé­åˆ°æ±¡æŸ“ï¼Œå˜ç›¸è¢«æ”¹å˜ã€‚</li><li>å­—ç¬¦ä¸²æˆªå–å´©æºƒã€‚ åœ¨ä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•æˆªå–range çš„æ—¶å€™æ²¡æœ‰åˆ¤æ–­é•¿åº¦è¶Šç•Œæƒ…å†µã€‚</li><li>åœ¨é›†åˆcopyçš„æ—¶å€™ï¼Œè¦æ³¨æ„æ˜¯å¦å˜åŒ–ä¸ºä¸å¯å˜é›†åˆï¼Œå¦åˆ™è°ƒç”¨ç±»ä¼¼addObjectç­‰æ–¹æ³•æ—¶å€™å®¹æ˜“å´©æºƒã€‚</li><li>å¯¹è±¡é‡Šæ”¾ã€‚åœ¨ä½¿ç”¨SDWebImageä¸‹è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœç”¨ä¸€ä¸ªä¸´æ—¶çš„imageViewå»ä¸‹è½½ä¸€ä¸ªå›¾ç‰‡ï¼Œè€Œè¿™ä¸ªimageViewåˆæ²¡æœ‰è¢«ç•Œé¢å¼•ç”¨å°±å‡ºç°å¯¹è±¡è¢«é‡Šæ”¾äº†ã€‚ä»è€Œå¯¼è‡´imageView sd_downloadçš„æ—¶å€™complateBlockä¸€ç›´æ²¡æœ‰å›è°ƒã€‚</li><li>å¯¹è±¡å…³é”®å­—çš„ä½¿ç”¨ã€‚æ¯”å¦‚blockæ²¡æœ‰ä½¿ç”¨copy, delegateæ²¡æœ‰ä½¿ç”¨weakç­‰ã€‚</li><li>åœ¨å­çº¿ç¨‹ä¸­å‘é€äº†é€šçŸ¥ï¼Œç„¶ååœ¨ä¸»çº¿ç¨‹æ›´æ”¹äº†UIå¯¼è‡´å´©æºƒã€‚</li></ul></li><li><p>ä¸šåŠ¡å¼‚å¸¸ï¼š</p><ul><li>åˆ‡æ¢ç™»å½•ç”¨æˆ·ï¼Œå¯¼è‡´å‘é€æ¶ˆæ¯å¤±è´¥æˆ–è€…ä¸¢å¤±ã€‚åŸå› ï¼šåˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œæ•°æ®åº“å¼€å…³ä¸æ­£ç¡®å¯¼è‡´sqläº‹åŠ¡æ²¡æœ‰æäº¤ã€‚ è§£å†³æ–¹æ¡ˆï¼šé¦–å…ˆsqlliteæ¨¡å¼ä¸ºä¸²è¡Œæ¨¡å¼ï¼Œå…¨å±€Appåªæœ‰ä¸€ä¸ªå…±äº«çš„å¥æŸ„handleã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå˜é‡å®šä¹‰åœ¨LCLSqliteä¸­è®¾ç½®ä¸ºåªè¯»ã€‚ å»ºç«‹ä¸€ä¸ªå•ä¾‹dbManagerç±»,åªè´Ÿè´£åˆ›å»ºæ•°æ®åº“å’Œå…³é—­æ•°æ®åº“ä»¥åŠæ•°æ®åº“ç‰ˆæœ¬çš„ç®¡ç†ã€‚ å®šä¹‰BaseSqliteç±».æä¾›å…¬å…±çš„æ“çºµæ•°æ®åº“sqlçš„è¯»å†™æ–¹æ³•ï¼Œå­ç±»ä¸šåŠ¡DAOéƒ½ç»§æ‰¿äºBaseSqliteç±»ï¼Œå­ç±»Daoå¯ä»¥ä½¿ç”¨handle(åªè¯»),ä½†ä¸å¯æ›´æ”¹handle. åœ¨æ•°æ®åº“sqliteå…³é—­çš„æ—¶å€™ï¼Œä¸ºé˜²æ­¢é—ç•™ä¸è¯­å¥æ± statementè¿˜åœ¨ä½¿ç”¨, éœ€å¾ªç¯æ‹¿å‡ºæœªå¤„ç†çš„è¯­å¥æ± è¿›è¡Œå…³é—­ã€‚è¿™æ ·å†æ‰“å¼€æ•°æ®åº“å°±èƒ½æˆåŠŸã€‚</li><li>æ­£åœ¨æŸä¼šè¯èŠå¤©çš„æ—¶å€™ï¼Œè¾“å…¥æ–‡å­—å‘é€åã€‚çªç„¶æ€æ‰è¿›ç¨‹ï¼Œå†æ¬¡æ‰“å¼€ä¼šè¯å‘ç°æ¶ˆæ¯æ¶ˆå¤±ã€‚è§£å†³æ–¹æ¡ˆï¼šAppçº¿ç¨‹å¹²æ‰ä¼šèµ°applicationWillTerminateæ–¹æ³•ï¼Œåœ¨æ­¤éœ€è¦å°†æ•°æ®åº“å…³é—­ã€‚</li><li>ç”¨æˆ·ç™»å½•åæ”¶åˆ°å¾ˆå¤šç¦»çº¿æ¶ˆæ¯ï¼Œå¦‚æœå¤„ç†æ¶ˆæ¯å…¥åº“çš„çº¿ç¨‹æ± å¼€è¾Ÿæ•°é‡å¤§äº2ï¼Œåˆ™ä¼šå‡ºç°å¤šä¸ªä¸šåŠ¡å…ˆåé¡ºåºçš„é—®é¢˜ï¼ˆé—®é¢˜åœºæ™¯ï¼šæ¶ˆæ¯åœ¨ä¼šè¯é¡µé¢æ’¤é”€äº†ï¼Œä½†æœªåœ¨æ¶ˆæ¯åˆ—è¡¨é¡µé¢æ’¤é”€æ‰ï¼‰ã€‚å¿…é¡»æ§åˆ¶çº¿ç¨‹æ•°ä¸º1ï¼Œä¿è¯Operationä»»åŠ¡ä¾èµ–æœ‰åºæ’å…¥ï¼Œå¦‚æœè¦å¤„ç†å…¥åº“çš„æ•ˆç‡ã€‚å¯å°†æ¶ˆæ¯æ•°æ®è®°å½•è¿›è¡Œæ‰¹é‡äº‹åŠ¡å…¥åº“ã€‚</li></ul></li><li><p>çº¿ç¨‹é—®é¢˜ï¼š</p><ul><li>æ¶ˆæ¯æ•°æ®è®°å½•å…¥åº“åï¼Œéƒ½ä¼šå†™ä¸€æ®µä»£ç æ¥å‘é€é€šçŸ¥åˆ°æ§åˆ¶å™¨è¿›è¡Œé¡µé¢çš„åˆ·æ–°æ“ä½œã€‚å½“å¤§é‡æ¶ˆæ¯å…¥åº“åå‘é€é€šçŸ¥æ—¶å€™ï¼Œä¼šé€ æˆä¸»ç•Œé¢ä»£ç å—å¦‚æœå¼€è¾Ÿäº†GCDçº¿ç¨‹ï¼Œä¼šé€ æˆå¤§é‡æµªè´¹å’Œå†…å­˜å¼€è¾Ÿçš„æµªè´¹ã€‚éœ€è¦ä¸¥æ ¼æ§åˆ¶å¥½çº¿ç¨‹çš„æ•°é‡ï¼Œå¯é€šè¿‡çº¿ç¨‹æ± ç­‰æ–¹é¢å»æ§åˆ¶ã€‚</li><li>ä¸è¦ä¸€å‘³åœ°æƒ³å½“ç„¶ç”¨å¼‚æ­¥å»å¤„ç†è€—æ—¶é•¿çš„ä»»åŠ¡ç„¶åç›´æ¥ä¸‹ä¸€æ­¥ä¸šåŠ¡æ“ä½œã€‚æ¯”å¦‚å‘é€ä¸€æ®µè¯­éŸ³ï¼Œéœ€è¦å­˜å‚¨åˆ°æ²™ç›’ï¼Œéœ€è¦ä¸Šä¼ ï¼Œéœ€è¦æŠŠæ•°æ®è®°å½•å­˜åˆ°æ•°æ®åº“ã€‚å­˜åˆ°æ•°æ®åº“æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨åç«¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„fileTokenï¼Œçº¿ç¨‹çš„æ‰§è¡Œæœ‰å…ˆåï¼Œæ–‡ä»¶çš„fileTokenå–åˆ°çš„æ˜¯å¦æ­£ç¡®çš„ï¼Ÿå€¼å¾—è€ƒé‡ã€‚æˆ–è€…é‡‡å–Blockæ–¹å¼å½“çœŸæ­£æ‹¿åˆ°fileTokenæ—¶å€™æ‰è¿›è¡Œä¸‹ä¸€æ­¥çš„ä¸šåŠ¡æ“ä½œã€‚</li><li>å¦‚ä½•ä¿è¯åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„æ•°æ®æºå®‰å…¨ï¼ŸåŸå­æ€§ï¼ŸåŠ åŒæ­¥é”ï¼Ÿä¿¡å·é‡ï¼Ÿæ …æ å‡½æ•°ï¼Ÿ å€¼å¾—ä½ å»æ¢ç´¢? å½’æ ¹ç»“åº•æ˜¯å¼•ç”¨ç±»å‹é€ æˆçš„é—®é¢˜ï¼ŒSwift Struct å€¼ç±»å‹å€¼å¾—ä½ æ‹¥æœ‰ã€‚</li></ul></li><li><p>ä¸šåŠ¡æ‡’åŠ è½½ï¼š</p><ul><li>åœºæ™¯1ï¼šæŸæ¶ˆæ¯ç±»å‹ä¸ºç¾¤å¾…åŠæˆ–è€…ç¾¤å…¬å‘Šã€‚ä»–ä»¬é‡ç”¨çš„æ¶ˆæ¯Cellå¯èƒ½ä¸€ç›´ï¼Œåªæ˜¯å±€éƒ¨UIçš„ä¸åŒã€‚ cellçš„æ˜¾ç¤ºéœ€è¦å®æ—¶æ˜¾ç¤ºæ­£ç¡®çš„æ¶ˆæ¯ç±»å‹å¯¹åº”çš„UI,è¿™ä¸ªæ—¶å€™å¯èƒ½é€šè¿‡æŸ¥æ•°æ®åº“æ‹¿åˆ°å€¼åå†æ›´æ–°UI. ä½†åœ¨è®¡ç®—cellé«˜åº¦çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯ç¾¤å¾…åŠè¿˜æ˜¯ç¾¤å…¬å‘Šï¼Œå®ƒä»¬çš„é«˜åº¦æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥æ— éœ€å¤šä½™çš„æŸ¥è¯¢ï¼Œåªéœ€loadæ•°æ®æºçš„æ—¶å€™æå‰ä¸€æ¬¡æŸ¥è¯¢å³å¯ã€‚</li><li>å½“æ¶‰åŠåˆ°å¯¹è±¡çš„copyçš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯å½“å¯¹è±¡é‡ŒæŸå±æ€§é‡å†™äº†getåˆå»æŸ¥è¯¢æ•°æ®åº“çš„æ—¶å€™ï¼Œæ€§èƒ½æŸè€—è¾ƒå¤§ï¼Œåœ¨copyWithZoneçš„æ–¹æ³•é‡Œèµ‹å€¼çš„æ—¶å€™å¯æ ¹æ®æƒ…å†µå°†self.propA æ”¹æˆ_propA è¿™æ ·å°±ä¸ä¼šè§¦å‘è€—æ—¶çš„æŸ¥è¯¢ã€‚</li><li>åœ¨æ¶ˆæ¯é¦–é¡µä¸æ–­åœ°æŸ¥è¯¢è®¡ç®—æ€»å¾—æœªè¯»æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶å½“æ¶ˆæ¯æ•°99+çš„æ—¶å€™ï¼Œç»ˆæ­¢æ²¡å¿…è¦çš„æŸ¥è¯¢æœºåˆ¶ã€‚å½“åœ¨æ”¶åˆ°é€šçŸ¥éœ€è¦æŸ¥è¯¢æœªè¯»æ•°ä¸šåŠ¡æ—¶å€™å¯æ§åˆ¶ä¸“é—¨çš„çº¿ç¨‹å»æŸ¥è¯¢è¯¥æœªè¯»æ•°ã€‚</li><li>ä¸ºäº†å‡å°‘é€šçŸ¥ä¹‹åçš„åˆ·æ–°ç‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¶ˆæ¯å…¥åº“ä¹‹åå‘å‡ºé€šçŸ¥ä¹‹å‰ï¼Œç”¨ä¸€ä¸ªä¸­è½¬å™¨ç›¸å½“äºä¸€ä¸ªå®šæ—¶æ—¶é—´å†…å»æ£€æŸ¥æœ‰è®°å½•åˆ™å³é€šçŸ¥åˆ·æ–°ä¸€æ¬¡ï¼ˆå¸¦å‚å°†æ¶ˆæ¯æ•°æ®å‘å‡ºå»ï¼‰ã€‚</li></ul></li><li><p>æ€§èƒ½é—®é¢˜ï¼š</p><ul><li>å¤§éƒ¨åˆ†æ€§èƒ½æŸè€—å…¶å®è¿˜æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹è¿›è¡ŒIOè¯»å–ä¸Šï¼Œåº”è¯¥å°½é‡å»æ§åˆ¶IOçš„è¯»å–é¢‘æ¬¡ï¼Œä»¥åŠæ ¹æ®ä¸šåŠ¡æƒ…å†µæŒ‰å®é™…éœ€è¦å®ƒæ”¾åœ¨å­çº¿ç¨‹ä¸­å¤„ç†ï¼Œå†é€šè¿‡Blockå½¢å¼å»è¿”å›ã€‚è€Œblockå½¢å¼ä¼šç»™ç¼–å†™çš„ä»£ç é€ æˆblockåµŒå¥—ï¼Œå°¤å…¶æ˜¯å±‚æ¬¡å¤šçš„æ—¶å€™ï¼Œç»™é˜…è¯»ä¸Šé€ æˆä¸€å®šçš„å¹²æ‰°ã€‚æ‰€ä»¥åº”è¯¥æ§åˆ¶åµŒå¥—å±‚æ¬¡æ•°ï¼Œä¸¤è€…ç»“åˆã€‚ä¸šç•Œä¹Ÿæœ‰coobjcåç¨‹è§£å†³æ–¹æ¡ˆã€‚æˆ–è€…å‚è€ƒPromiseKit ç±»ä¼¼å‰ç«¯webçš„promiseæ–¹æ¡ˆã€‚</li><li>Sqliteä¸²è¡Œæ¨¡å¼ä¸‹æ•°æ®åº“è¯»å†™åœ¨å¤§é‡ç¦»çº¿æ¶ˆæ¯æ”¶åˆ°æ—¶å€™æ¯”è¾ƒå®¹æ˜“å‡ºç°å¡é¡¿çš„é—®é¢˜ï¼Œå› ä¸ºæ‰€è§¦å‘çš„è¯»å’Œå†™éƒ½æ˜¯ç©¿æ’æ’é˜Ÿã€‚å¹¶ä¸èƒ½å¾ˆå¥½åœ°å®ç°è¯»å†™å¹¶å‘ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥æ§åˆ¶å¤§é‡æ•°æ®å†™çš„æ—¶å€™å°½é‡å‰¥ç¦»å‡ºå†—åˆçš„ä¸šåŠ¡ï¼Œå°†æ•°æ®æ‰¹é‡äº‹åŠ¡å…¥åº“ï¼Œè¿™æ ·åœ¨æ€§èƒ½ä¸Šä¹Ÿä¸è‡³äºé‚£ä¹ˆå¡ã€‚å½“ç„¶æ­¤æ–¹æ¡ˆä¹Ÿéœ€è¦åå°é…åˆï¼Œçœ‹åå°æœåŠ¡å™¨æ˜¯ä¸€æ¡æ¡ä¸‹å‘ç»™å®¢æˆ·ç«¯è¿˜æ˜¯æ‰¹é‡å¤šæ¡ä¸‹å‘ç»™å®¢æˆ·ç«¯ã€‚</li><li>å½“åœ¨ç¾¤ä¼šè¯å‘é€ä¸€æ¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œæœ¬åœ°æœ‰ä¸€å¼ æ•°æ®å·²è¯»å›æ‰§è¡¨è®°å½•ç€æ¶ˆæ¯id, ç”¨æˆ·id,é˜…è¯»çŠ¶æ€ï¼Œåˆ›å»ºæ—¶é—´ï¼Œé˜…è¯»æ—¶é—´ç­‰ã€‚é¦–å…ˆéœ€è¦å°†ç¾¤é‡Œæ‰€æœ‰äººæ‰¹é‡å…¥åº“åˆå§‹ä¸ºæœªé˜…è¯»çŠ¶æ€ã€‚å½“æœ‰æ”¶åˆ°å›æ‰§æ¶ˆæ¯æ—¶ï¼Œå³æ›´æ–°å¯¹åº”çš„é˜…è¯»çŠ¶æ€ã€‚è¿™æ ·ç»™æ­¤è¡¨é€ æˆæ•°æ®é‡çš„åºå¤§å’Œè‡ƒè‚¿ã€‚è§£å†³æ–¹æ¡ˆï¼šå¯æ ¹æ®æ—¶é—´æˆ³åˆ é™¤ä¸€ä¸ªæœˆä¹‹å‰çš„åºŸè®°å½•ã€‚åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¯æ ¹æ®ä¸€ä¸ªç¾¤ä¸€ä¸ªå›æ‰§è®°å½•è¡¨ã€‚è¿™æ ·æœ‰åˆ©äºæ¶ˆæ¯çš„å¤šè¡¨è¿æ¥ä¸å¿«é€ŸæŸ¥è¯¢ã€‚</li><li>å½“æœ‰å¤§é‡æ•°æ®åœ¨å†…å­˜ä¸­æ’åºçš„æ—¶å€™ï¼Œå¦‚æœèƒ½ä»æ•°æ®åº“ä¸­æ’åºå°½é‡é€šè¿‡sqlæ’åºï¼Œæ•ˆç‡è¿œè¿œå¤§äºå†…å­˜æ’åºã€‚</li><li>å¦‚æœæœåŠ¡å™¨æ˜¯ä¸€æ¡æ¡ç¦»çº¿æ¶ˆæ¯ä¸‹å‘ï¼Œå¯æ ¹æ®æ¶ˆæ¯çš„ç±»å‹å±äºèŠå¤©æ¶ˆæ¯ä¸“é—¨é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—æ¥ç»´æŠ¤ï¼Œåå°çº¿ç¨‹getMessageå¾ªç¯å»å–çš„æ—¶å€™ï¼Œä¸€æ¬¡å°±å¯ä»¥æ‹¿å¤šä¸ªè¿›è¡Œæ‰¹é‡å…¥åº“ã€‚</li></ul></li><li>å…³äºIM App æ¶ˆæ¯å­˜å‚¨é—®é¢˜ï¼š<br>ç›®å‰æ˜¯æ‰€æœ‰æ¶ˆæ¯éƒ½å­˜å‚¨åœ¨æœ¬åœ°å®¢æˆ·ç«¯ã€‚è™½ç„¶èŠ‚çœäº†æœåŠ¡å™¨èµ„æºï¼Œå¦‚æœä¸æ‰¹é‡ä¸‹å‘ï¼Œå®¢æˆ·ç«¯æ€§èƒ½ä¸Šå¤„ç†å¯èƒ½æœ‰ç‚¹é—®é¢˜ã€‚å¯èƒ½ä¼šæœ‰è½»å¾®å¡é¡¿ï¼Œå¦‚æœé‡å¤§ï¼Œé‚£å°±å¾ˆæ˜æ˜¾äº†ã€‚è™½ç„¶è¿›å…¥ä¼šè¯éƒ½æ˜¯ä»æœ¬åœ°æ‹‰æ•°æ®ï¼ŒæŸ¥è¯¢æ•°æ®ä¹Ÿéƒ½æ˜¯æœ¬åœ°è¿›è¡Œæœç´¢ï¼Œæ¯”è¾ƒå…¨ã€‚ä½†æ˜¯å¦‚æœåæœŸè¦åšå¤šç«¯æ•°æ®åŒæ­¥[æ¼«æ¸¸]ã€‚é‚£å…¶å®æœåŠ¡å™¨è¿˜æ˜¯è¦å­˜å‚¨ä¸€å®šæ—¶é—´æ®µçš„ç”¨æˆ·èŠå¤©æ¶ˆæ¯çš„ã€‚ç½‘ä¸ŠæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œè¿˜æœ‰ä¸€ç§åšæ³•æ˜¯è¿™æ ·ï¼šç”¨æˆ·æ¯æ¬¡ç™»å½•åï¼ŒIMæœåŠ¡ç«¯ä¼šä¸‹å‘æ¯ä¸ªä¼šè¯çš„è¿‘50æ¡æ¶ˆæ¯ï¼Œ10ä¸ªä¼šè¯ä¹Ÿæ‰500æ¡ï¼Œå…¶å®æ•°æ®é‡å¾ˆå°äº†ã€‚å½“ç”¨æˆ·ç‚¹å‡»æŸä¼šè¯æ—¶å€™ï¼Œå…ˆæ˜¾ç¤ºæœ€è¿‘çš„æ¶ˆæ¯ï¼Œå½“å¾€ä¸Šç¿»é¡µçš„æ—¶å€™ï¼Œæœ¬åœ°æ•°æ®åº“å¦‚æœæœ‰åˆ™æœ¬åœ°åŠ è½½å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¯·æ±‚ç½‘ç»œè¿›è¡Œæ‹‰æ•°æ®ã€‚è¿™æ ·æ¨æ‹‰ç»“åˆèƒ½å‡è½»å®¢æˆ·ç«¯å¾ˆå¤šé—®é¢˜ã€‚å®¢æˆ·ç«¯æ ¹æ®éœ€è¦è¿›è¡Œæ¶ˆæ¯å­˜å‚¨ã€‚</li></ol><p>æ¥ä¸‹æ¥å°†ä¼šå†™ä¸€äº›åŠŸèƒ½ç‚¹ä¸Šçš„æŠ€æœ¯å¿ƒå¾—ï¼š<br>[å›¾ç‰‡ç¼–è¾‘ï¼šæ¶‚é¸¦ï¼Œè£å‰ªï¼Œæ–‡å­—å¸–ï¼Œé©¬èµ›å…‹]<br>[èŠå¤©å›¾ç‰‡æµè§ˆï¼šå›¾ç‰‡ï¼Œgifï¼Œè§†é¢‘]<br>[æ¶ˆæ¯æ”¶è—]<br>[YYTextViewå¯Œæ–‡æœ¬éƒ¨åˆ†æ–‡å­—å…‰æ ‡é€‰æ‹©]<br>[æ­£åˆ™åŒ¹é…è§£å†³ç¾¤å†…é‚€è¯·æ–°æˆå‘˜ç‚¹å‡»é—®é¢˜]<br>[å¥‡æ€ªçš„ä¾§è¾¹æ é—®é¢˜]<br>[@æŸäººåœ¨æ–‡å­—å‰ä¸­åçš„å¤„ç†è§„åˆ™]<br>[ç¾¤æ’ä»¶å¦‚ä½•å¼€å‘ï¼Ÿ]<br>[æ•°æ®æºçš„çº¿ç¨‹å®‰å…¨]<br>[å›¾ç‰‡çš„è½¬å‘]</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è¿™ä¸¤ä¸ªæœˆå­¦çš„å‰ç«¯çŸ¥è¯†</title>
      <link href="/2020/04/25/webSummary/"/>
      <url>/2020/04/25/webSummary/</url>
      
        <content type="html"><![CDATA[<p>æ¡†æ¶æ–¹é¢ç›®å‰ä¸»è¦æŒæ¡ Vue ã€‚å¯ç‹¬ç«‹å¼€å‘ H5 é¡¹ç›®ï¼ŒPC Web åå°ç³»ç»Ÿ, å°ç¨‹åºå¼€å‘ã€‚</p><p>UI æ¡†æ¶ï¼šç”¨è¿‡ element-UI, iView, WeUI, WeUIJs. MiniUI</p><p>ç¬¬ä¸‰æ–¹æ’ä»¶ï¼šä½¿ç”¨è¿‡ Moment æ—¥æœŸå¤„ç†,Echart å›¾è¡¨ç»Ÿè®¡, VueDraggable æ‹–åŠ¨ã€‚</p><p>ç½‘ç»œè¯·æ±‚ï¼šAxios</p><p>å›¾ç‰‡ä¸Šä¼ : Weui-Uploader, Blob æˆ– base64 ä¸Šä¼ .</p><p>IM: ä½¿ç”¨è¿‡ç½‘æ˜“äº‘ä¿¡ã€‚</p><p>ç§»åŠ¨ App: ç”¨ Swift å¼€å‘è¿‡ iOS é¡¹ç›®,Sass åº”ç”¨ã€‚(äº‘å–µ)</p><p>ç†Ÿæ‚‰ Webpack, Sass, NodeJs, vue-Cli, Router, VueX.</p><p><a href="https://github.com/GaoYingQiu/Vue-Draggable-AppTemplate" target="_blank" rel="noopener">ä¸ªäºº Github Page æ¼”ç¤º</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿæ­å»ºå‰ç«¯ç½‘ç»œè¯·æ±‚</title>
      <link href="/2020/02/06/webBegain/"/>
      <url>/2020/02/06/webBegain/</url>
      
        <content type="html"><![CDATA[<h3 id="HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚"><a href="#HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚" class="headerlink" title="HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚"></a>HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚</h3><h4 id="TCP-ä¸‰æ¬¡æ¡æ‰‹ã€‚"><a href="#TCP-ä¸‰æ¬¡æ¡æ‰‹ã€‚" class="headerlink" title="TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚"></a>TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚</h4><p>   1ã€å®¢æˆ·ç«¯ å‘synè¯¢é—® ç»™ æœåŠ¡å™¨<br>   2ã€æœåŠ¡å™¨  å›åº”è¯¢é—®syn,å¹¶å‘é€ä¸€ä¸ªæŒ‡ä»¤ack å®¢æˆ·ç«¯<br>   3ã€å®¢æˆ·ç«¯ å› ack  æœåŠ¡å™¨ã€‚ æ­£å¼è¿æ¥æˆåŠŸã€‚ å¼€å§‹å®¢æˆ·ç«¯è¯·æ±‚HttpæŠ¥æ–‡ ï¼ŒæœåŠ¡å™¨å“åº”æŠ¥æ–‡ã€‚<br><a id="more"></a><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/tcp_threeBegin.png" alt="ä¸‰æ¬¡æ¡æ‰‹"></p><h4 id="å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹"><a href="#å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹"></a>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</h4><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/tcp_fourEnd.png" alt="å››æ¬¡æŒ¥æ‰‹"></p><h3 id="å‘é€ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ—¥å¿—è®°å½•"><a href="#å‘é€ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ—¥å¿—è®°å½•" class="headerlink" title="å‘é€ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ—¥å¿—è®°å½•"></a>å‘é€ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ—¥å¿—è®°å½•</h3><h4 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:method: POST</span><br><span class="line">:scheme: https</span><br><span class="line">:authority: vendor-api-prod.gaoying.com</span><br><span class="line">:path: &#x2F;customer&#x2F;logs&#x2F;</span><br><span class="line"></span><br><span class="line">Accept: application&#x2F;json, text&#x2F;plain, *&#x2F;*</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded  &#x2F;&#x2F;è¡¨å•æäº¤æ–¹å¼</span><br><span class="line">Origin: http:&#x2F;&#x2F;h5-vendor-dev.gaoying.com</span><br><span class="line">Content-Length: 236</span><br><span class="line">Accept-Language: zh-cn</span><br><span class="line">Host: vendor-api-dev.gaoying.com</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (iPhone; CPU iPhone OS 13_3 like Mac OS X) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) Mobile&#x2F;15E148</span><br><span class="line">Referer: http:&#x2F;&#x2F;h5-vendor-dev.gaoying.com&#x2F;page&#x2F;customerMain.html?customerId&#x3D;172821&amp;userId&#x3D;15243265&amp;token&#x3D;41cadcb70eed35378a92379871a51181</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure><h4 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">status: 200</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Content-Type: application&#x2F;json;charset&#x3D;UTF-8  &#x2F;&#x2F;jsonå“åº”æ ¼å¼</span><br><span class="line">Date: Fri, 27 Dec 2019 05:58:18 GMT</span><br><span class="line">Server: Tengine</span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#è¯·æ±‚æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="è¯·æ±‚æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>è¯·æ±‚æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">METHODS: [</span><br><span class="line">   'ACL',         'BIND',       'CHECKOUT',</span><br><span class="line">   'CONNECT',     'COPY',       'DELETE',</span><br><span class="line">   'GET',         'HEAD',       'LINK',</span><br><span class="line">   'LOCK',        'M-SEARCH',   'MERGE',</span><br><span class="line">   'MKACTIVITY',  'MKCALENDAR', 'MKCOL',</span><br><span class="line">   'MOVE',        'NOTIFY',     'OPTIONS',</span><br><span class="line">   'PATCH',       'POST',       'PROPFIND',</span><br><span class="line">   'PROPPATCH',   'PURGE',      'PUT',</span><br><span class="line">   'REBIND',      'REPORT',     'SEARCH',</span><br><span class="line">   'SOURCE',      'SUBSCRIBE',  'TRACE',</span><br><span class="line">   'UNBIND',      'UNLINK',     'UNLOCK',</span><br><span class="line">   'UNSUBSCRIBE'</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure><h4 id="å“åº”ç æœ‰å“ªäº›ï¼Ÿ"><a href="#å“åº”ç æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å“åº”ç æœ‰å“ªäº›ï¼Ÿ"></a>å“åº”ç æœ‰å“ªäº›ï¼Ÿ</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">STATUS_CODES: &#123;</span><br><span class="line">  '100': 'Continue',</span><br><span class="line">  '101': 'Switching Protocols',</span><br><span class="line">  '102': 'Processing',</span><br><span class="line">  '103': 'Early Hints',</span><br><span class="line">  '200': 'OK',</span><br><span class="line">  '201': 'Created',</span><br><span class="line">  '202': 'Accepted',</span><br><span class="line">  '203': 'Non-Authoritative Information',</span><br><span class="line">  '204': 'No Content',</span><br><span class="line">  '205': 'Reset Content',</span><br><span class="line">  '206': 'Partial Content',</span><br><span class="line">  '207': 'Multi-Status',</span><br><span class="line">  '208': 'Already Reported',</span><br><span class="line">  '226': 'IM Used',</span><br><span class="line">  '300': 'Multiple Choices',</span><br><span class="line">  '301': 'Moved Permanently',</span><br><span class="line">  '302': 'Found',</span><br><span class="line">  '303': 'See Other',</span><br><span class="line">  '304': 'Not Modified',</span><br><span class="line">  '305': 'Use Proxy',</span><br><span class="line">  '307': 'Temporary Redirect',</span><br><span class="line">  '308': 'Permanent Redirect',</span><br><span class="line">  '400': 'Bad Request',</span><br><span class="line">  '401': 'Unauthorized',</span><br><span class="line">  '402': 'Payment Required',</span><br><span class="line">  '403': 'Forbidden',</span><br><span class="line">  '404': 'Not Found',</span><br><span class="line">  '405': 'Method Not Allowed',</span><br><span class="line">  '406': 'Not Acceptable',</span><br><span class="line">  '407': 'Proxy Authentication Required',</span><br><span class="line">  '408': 'Request Timeout',</span><br><span class="line">  '409': 'Conflict',</span><br><span class="line">  '410': 'Gone',</span><br><span class="line">  '411': 'Length Required',</span><br><span class="line">  '412': 'Precondition Failed',</span><br><span class="line">  '413': 'Payload Too Large',</span><br><span class="line">  '414': 'URI Too Long',</span><br><span class="line">  '415': 'Unsupported Media Type',</span><br><span class="line">  '416': 'Range Not Satisfiable',</span><br><span class="line">  '417': 'Expectation Failed',</span><br><span class="line">  '418': "I'm a Teapot",</span><br><span class="line">  '421': 'Misdirected Request',</span><br><span class="line">  '422': 'Unprocessable Entity',</span><br><span class="line">  '423': 'Locked',</span><br><span class="line">  '424': 'Failed Dependency',</span><br><span class="line">  '425': 'Unordered Collection',</span><br><span class="line">  '426': 'Upgrade Required',</span><br><span class="line">  '428': 'Precondition Required',</span><br><span class="line">  '429': 'Too Many Requests',</span><br><span class="line">  '431': 'Request Header Fields Too Large',</span><br><span class="line">  '451': 'Unavailable For Legal Reasons',</span><br><span class="line">  '500': 'Internal Server Error',</span><br><span class="line">  '501': 'Not Implemented',</span><br><span class="line">  '502': 'Bad Gateway',</span><br><span class="line">  '503': 'Service Unavailable',</span><br><span class="line">  '504': 'Gateway Timeout',</span><br><span class="line">  '505': 'HTTP Version Not Supported',</span><br><span class="line">  '506': 'Variant Also Negotiates',</span><br><span class="line">  '507': 'Insufficient Storage',</span><br><span class="line">  '508': 'Loop Detected',</span><br><span class="line">  '509': 'Bandwidth Limit Exceeded',</span><br><span class="line">  '510': 'Not Extended',</span><br><span class="line">  '511': 'Network Authentication Required'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡å™¨å“åº”æºå¸¦çš„httpsè¯ä¹¦"><a href="#å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡å™¨å“åº”æºå¸¦çš„httpsè¯ä¹¦" class="headerlink" title="å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡å™¨å“åº”æºå¸¦çš„httpsè¯ä¹¦"></a>å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡å™¨å“åº”æºå¸¦çš„httpsè¯ä¹¦</h4><p>HTTPS:<br>åœ¨HTTPä¸TCPä¹‹é—´ åŠ å…¥SSLå±‚ï¼Œä¸€ä¸ªåŠ å¯†/èº«ä»½éªŒè¯å±‚ï¼Œç”¨äºå®‰å…¨çš„HTTPæ•°æ®ä¼ è¾“ã€‚ å®ƒæ˜¯ä¸€ä¸ªURI schemeï¼ˆæŠ½è±¡æ ‡è¯†ç¬¦ä½“ç³»ï¼‰ã€‚<br>SSL : å®‰å…¨å¥—æ¥å±‚ ï¼Œ åœ¨ç½‘ç»œä¼ è¾“å±‚åŸºç¡€ä¸Šå¯¹ç½‘ç»œè¿æ¥è¿›è¡Œæ•°æ®åŠ å¯†ï¼› å…·æœ‰æ ¡éªŒæœºåˆ¶ï¼Œé…å¤‡èº«ä»½è¯ä¹¦ã€‚<br>å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥å¯¹æ•°æ®åŠ å¯†ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åŠ å¯†æ•°æ®å å¯¹æ•°æ®è¿›è¡Œè§£å¯†ï¼›</p><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/https_cer.png" alt="httpsè¯ä¹¦"></p><p>Https æœåŠ¡å™¨ç«¯å£æ˜¯443, Https å…¬å…±å¯†é’¥é‡‡ç”¨ RSAç®—æ³•åŠ å¯†ï¼Œ è¯ä¹¦ä¿¡æ¯å°†åœ¨è¯·æ±‚å“åº”ä¹‹å‰å›å¤ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ ¹æ®è¯ä¹¦ä¿¡æ¯ æœ¬åœ°åšä¸€ä¸ªå®‰å…¨æ ¡éªŒï¼Œé€šè¿‡åå†å…è®¸æœåŠ¡ç«¯å“åº”è¿”å›æ•°æ®ï¼Œå¦åˆ™å–æ¶ˆæœ¬æ¬¡è¯·æ±‚å“åº”ã€‚<br>ç­¾åç®—æ³•ï¼šSHA-256 ECDSA</p><h4 id="å¸¸ç”¨åŠ å¯†ç®—æ³•"><a href="#å¸¸ç”¨åŠ å¯†ç®—æ³•" class="headerlink" title="å¸¸ç”¨åŠ å¯†ç®—æ³•"></a>å¸¸ç”¨åŠ å¯†ç®—æ³•</h4><h5 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h5><ul><li>å•å‘æ•£åˆ—å‡½æ•°<br>MD5 æ˜¯ä¸€ç§ ä¸å¯é€†çš„ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œä¸¥æ ¼æ¥è¯´ä¸æ˜¯åŠ å¯†ã€‚<br>å•å‘æ•£åˆ—å‡½æ•°æ˜¯ä¸€ç§ä¸å¯é€†çš„ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼Œæ— æ³•é€šè¿‡å¯†æ–‡è¿˜åŸæˆæ˜æ–‡ï¼ˆæ³¨æ„ï¼šæ˜¯ç®—æ³•ä¸Šä¸èƒ½å®ç°ï¼‰ï¼Œå¯¹äºç®€å•çš„ MD5 åŠ å¯†ï¼ˆè¿™é‡Œçš„ç®€å•æ˜¯æŒ‡ï¼šæ˜æ–‡é•¿åº¦çŸ­ï¼Œä¸”å­—ç¬¦å•ä¸€ï¼Œå¹¶ä¸”è¿›è¡Œ HASH æ“ä½œçš„æ—¶å€™æ²¡æœ‰è¿›è¡ŒåŠ ç›å¤„ç†ï¼‰ï¼Œæ˜¯å¯ä»¥é€šè¿‡ä¸€äº›åœ¨çº¿å·¥å…·ç½‘ç«™è§£å¯†å‡ºæ¥ï¼Œå®åˆ™æ˜¯åˆ©ç”¨äº†å½©è™¹è¡¨çš„æŠ€æœ¯ã€‚</li><li>AES åŠ å¯†<br>  åŠ å¯†åŸç†ï¼š å­—èŠ‚ä»£æ¢ï¼Œè¡Œä½ç§»ï¼Œåˆ—æ··åˆï¼šï¼ˆçŸ©é˜µç›¸ä¹˜ï¼šçŠ¶æ€çŸ©é˜µ å’Œ å›ºå®šçŸ©é˜µç›¸ä¹˜ï¼‰ ï¼Œè½®é’¥åŠ å¯†ï¼šè½®é’¥åŠ å¯†æ˜¯å°†128ä½è½®å¯†é’¥KiåŒçŠ¶æ€çŸ©é˜µä¸­çš„æ•°æ®è¿›è¡Œé€ä½å¼‚æˆ–æ“ä½œ</li><li>DES åŠ å¯†</li></ul><h5 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h5><ul><li>RSA åŠ å¯†<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/http_rsa_aes.png" alt="httpsåŠ å¯†æµç¨‹"></li></ul><h3 id="å¿«é€Ÿæ­å»ºVue-æ™®é€šh5é¡¹ç›®é¡µé¢çš„ç½‘ç»œè¯·æ±‚"><a href="#å¿«é€Ÿæ­å»ºVue-æ™®é€šh5é¡¹ç›®é¡µé¢çš„ç½‘ç»œè¯·æ±‚" class="headerlink" title="å¿«é€Ÿæ­å»ºVue æ™®é€šh5é¡¹ç›®é¡µé¢çš„ç½‘ç»œè¯·æ±‚"></a>å¿«é€Ÿæ­å»ºVue æ™®é€šh5é¡¹ç›®é¡µé¢çš„ç½‘ç»œè¯·æ±‚</h3><p>åœ¨å­¦ä¹ è¯·æ±‚ä¹‹å‰ï¼Œéœ€è¦æŒæ¡å¥½Javascriptè¯­è¨€ã€‚æœ€åŸºç¡€çš„çŸ¥è¯†é¦–å…ˆè¦äº†è§£å’ŒæŒæ¡å˜é‡ä¿®é¥°ç¬¦ï¼ŒFunction å’Œ Objectå¯¹è±¡ã€‚</p><h4 id="js-å˜é‡ä¿®é¥°ç¬¦"><a href="#js-å˜é‡ä¿®é¥°ç¬¦" class="headerlink" title="js å˜é‡ä¿®é¥°ç¬¦"></a>js å˜é‡ä¿®é¥°ç¬¦</h4><p>let æ˜¯å±€éƒ¨å˜é‡ï¼Œéå¸¸é€‚åˆå¾ªç¯çš„æ—¶å€™ï¼›<br>const æ˜¯åªè¯»å˜é‡ï¼Œ åˆå§‹åŒ–çš„æ—¶å€™å°±è¦èµ‹å€¼ï¼›åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼›<br>var æ˜¯å…¨å±€å˜é‡ï¼Œå…¨å±€éƒ½å¯ä»¥ç”¨ã€‚</p><h4 id="å‡½æ•°-Function"><a href="#å‡½æ•°-Function" class="headerlink" title="å‡½æ•° Function"></a>å‡½æ•° Function</h4><p> <img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/javascript_function.png" alt="javascript_function"><br> ä»ä¸Šå›¾æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸ªåä¸ºopençš„å‡½æ•°ï¼ŒåŒ…å«å‚æ•°ï¼Œè°ƒç”¨è€…ï¼Œé•¿åº¦ï¼Œåå­—ï¼Œä»¥åŠ <strong>Proto</strong> å¯¹è±¡ã€‚è¯¥å¯¹è±¡é‡Œé¢æœ‰ apply ,bind, call å‡½æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªcontructoræ„é€ å™¨ã€‚</p><ul><li>Functionå±æ€§ï¼š length,name,prototype</li><li><p>Functionæ–¹æ³•:</p><ul><li>Function.prototype.apply(),  //è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¹¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ã€‚ å¯ä»¥å°†å‚æ•°ä½œä¸ºArrayå¯¹è±¡ä¼ é€’</li><li>Function.prototype.bind(), //åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥æ–°å‡½æ•°åœ¨è°ƒç”¨æ—¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ï¼Œå¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶åœ¨æä¾›çš„ä»»ä½•å‚æ•°ä¹‹å‰æ·»åŠ ç»™å®šçš„å‚æ•°åºåˆ—ã€‚</li><li>Function.prototype.call(), //è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¹¶å°†å…¶è®¾ç½®ä¸ºæä¾›çš„å€¼ã€‚ å¯ä»¥æŒ‰åŸæ ·ä¼ é€’å‚æ•°ã€‚</li><li>Function.prototype.toString() //è¿”å›è¡¨ç¤ºå‡½æ•°æºä»£ç çš„å­—ç¬¦ä¸²ã€‚</li></ul><p>//é¢˜å¤–è¯ï¼Œapply å’Œ bind å¢å¼ºä»£ç çš„æ‰©å±•æ€§ï¼Œç±»ä¼¼iOS çš„category;<br>â‘ åŠ¨æ€æ”¹å˜thisçš„æŒ‡å‘ï¼Œä¹Ÿå°±æ˜¯thisä»callObjectåŠ¨æ€åˆ‡æ¢ä¸ºthisArgã€‚<br>â‘¡callObject.method.apply(thisArg,thisArray)ï¼Œå¯ä»¥å°†thisArrayè½¬åŒ–ä¸ºargumentsï¼Œä¼ å…¥åˆ°callObject.methodå†…éƒ¨ã€‚<br>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä»£ç æ¥æµ‹è¯•bind çš„ç”¨æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¨‹åºå‘˜çš„é»„é‡‘å¹´é¾„ 18 ~ 35</span></span><br><span class="line"><span class="keyword">var</span> checkProgramerAgeRange = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">typeof</span> value !== <span class="string">'number'</span>)</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">return</span> value &gt;= <span class="keyword">this</span>.minimum &amp;&amp; value &lt;= <span class="keyword">this</span>.maximum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> programmerRange = &#123; <span class="attr">minimum</span>: <span class="number">18</span>, <span class="attr">maximum</span>: <span class="number">35</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠå‡½æ•°å†…éƒ¨çš„thisä¿®æ”¹ä¸ºrangeå¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="keyword">let</span> boundCheckProgramerAgeRange = checkProgramerAgeRange.bind(programmerRange);</span><br><span class="line"><span class="built_in">console</span>.log(boundCheckProgramerAgeRange(<span class="number">12</span>));</span><br></pre></td></tr></table></figure></li></ul><h4 id="Object-å¯¹è±¡"><a href="#Object-å¯¹è±¡" class="headerlink" title="Object å¯¹è±¡"></a>Object å¯¹è±¡</h4><p>Object ç»§æ‰¿Function, æ‰©å±•äº†è‡ªå·±çš„è®¸å¤šæ–¹æ³•ã€‚</p><pre><code>Object çš„å±æ€§æ„é€ å™¨ Object.prototypeObject.assign()   å°†æ‰€æœ‰å¯æšä¸¾çš„è‡ªèº«å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚Object.create()  ç”¨æŒ‡å®šçš„åŸå‹å¯¹è±¡å’Œå±æ€§åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚Object.defineProperty()  å®šä¹‰ä¸€ä¸ªpropertyç»™æŒ‡å®šå¯¹è±¡Object.defineProperties() å®šä¹‰ä¸€ä¸ªå±æ€§ ç»™æŒ‡å®šå¯¹è±¡Object.entries() è¿”å›ä¸€ä¸ªè£…æœ‰mapçš„æ•°ç»„ã€‚Object.getOwnPropertyNames() å¾—åˆ°è¿™ä¸ªå¯¹è±¡è‡ªå·±çš„å±æ€§åObject.getPrototypeOf() å¾—åˆ°æŒ‡å®šç±»å‹çš„å±æ€§Object.is() æ¯”è¾ƒå¯¹è±¡Object.keys() å­—ç¬¦çªœå±æ€§Object.values()</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stuObj = &#123;<span class="attr">room</span>:<span class="string">"english"</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(stuObj,&#123;</span><br><span class="line">    stuName:&#123;</span><br><span class="line">        value:<span class="string">"qiugaoying"</span>,</span><br><span class="line">        writable:<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         configurable, enumerable, </span></span><br><span class="line"><span class="comment">         value, writable, get, set</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">        value:<span class="number">18</span>,</span><br><span class="line">        writable:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ç›´æ¥è¦†ç›–æŸå¯¹è±¡çš„å±æ€§ï¼›</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(stuObj,<span class="string">"stuName"</span>,&#123;</span><br><span class="line">    value:<span class="string">"gaogao"</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">stuObj.age = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(stuObj.stuName); <span class="comment">//gaogao</span></span><br><span class="line"><span class="built_in">console</span>.log(stuObj.age); <span class="comment">//20</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(stuObj)); <span class="comment">//room å–å¾—å…¬å…±å±æ€§</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(stuObj)); <span class="comment">//room å–å¾—å…¬å…±å±æ€§å€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(stuObj)); <span class="comment">//room,age,stuName å–å¾—å¯¹è±¡æ‰€æœ‰å±æ€§</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(stuObj)); <span class="comment">//è·å–å±æ€§æè¿°å™¨</span></span><br><span class="line"><span class="built_in">console</span>.log(stuObj[<span class="string">"stuName"</span>]); <span class="comment">//gaogao</span></span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡çš„å®šä¹‰"><a href="#å¯¹è±¡çš„å®šä¹‰" class="headerlink" title="å¯¹è±¡çš„å®šä¹‰"></a>å¯¹è±¡çš„å®šä¹‰</h4><h5 id="ä¼ ç»Ÿæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡"><a href="#ä¼ ç»Ÿæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡"></a>ä¼ ç»Ÿæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.name = name;</span><br><span class="line">   <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡å‡½æ•°çš„prototypeå…¬å…±ç©ºé—´å­˜å‚¨æ–¹æ³•</span></span><br><span class="line">Person.prototype.introduce = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello,my name is "</span>+<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Person().introduce();</span><br></pre></td></tr></table></figure><h5 id="Classæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡"><a href="#Classæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="Classæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡"></a>Classæ–¹å¼å®šä¹‰ä¸€ä¸ªå¯¹è±¡</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(name,age)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    introduce()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"æˆ‘çš„åå­—æ˜¯ï¼š"</span>+<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»çš„æœ¬è´¨æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ç»§æ‰¿Function; æ‰€ä»¥introduceæ–¹æ³•è¿˜æ˜¯å­˜å‚¨åœ¨prototype å…¬å…±ç©ºé—´ä¸­ã€‚æ“ä½œç±»å‡½æ•°ä¹Ÿå¯é€šè¿‡Person.prototype å»åŠ¨æ€æ–°å¢æ–°çš„æ–¹æ³•ã€‚å¦å¤–è¦æ³¨æ„ä¸€ç‚¹ç±»çš„æ‰€æœ‰å®åˆ—å…±äº«åŸå‹çš„prototypeã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> student = <span class="keyword">new</span> Person(<span class="string">"qiugaoying"</span>,<span class="number">18</span>);</span><br><span class="line"><span class="keyword">let</span> student2 = <span class="keyword">new</span> Person(<span class="string">"lihua"</span>,<span class="number">22</span>);</span><br><span class="line"> <span class="built_in">console</span>.log(student.__proto__ == student2.__proto__); <span class="comment">//ç»“æœä¸ºtrueã€‚ ç±»çš„æ‰€æœ‰å®åˆ—å…±äº«åŸå‹çš„prototype</span></span><br></pre></td></tr></table></figure></p><h4 id="Ajax-è¯·æ±‚"><a href="#Ajax-è¯·æ±‚" class="headerlink" title="Ajax è¯·æ±‚"></a>Ajax è¯·æ±‚</h4><p>é€šå¸¸ï¼Œå‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œéœ€è¦ä¼ å…¥åŸºç¡€å‚æ•°ï¼Œä¸šåŠ¡url,  ä¸šåŠ¡å‚æ•°ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼Œå’Œå“åº”æ–¹å¼ã€‚ æ¥ç€å¯¹å“åº”æˆåŠŸå’Œå¤±è´¥çš„å¤„ç†ï¼›<br>å‰ç«¯é€šå¸¸çš„è¯·æ±‚æ–¹å¼æœ‰ è¡¨å•æäº¤ï¼ŒAjaxå¼‚æ­¥è¯·æ±‚ï¼ŒJqueryä¹Ÿæä¾›äº†ajaxå°è£…çš„å¿«æ·apiã€‚å¦å¤–ä¹Ÿæœ‰è¾ƒæ–°çš„æ¡†æ¶Axiosã€‚</p><p>ajax çš„å‡ºç°æ˜¯è§£å†³å±€éƒ¨æ•°æ®åˆ·æ–°çš„é—®é¢˜ã€‚å¯é€šè¿‡åå°å¼‚æ­¥è°ƒç”¨æ¥å£ å®ç°é¡µé¢å±€éƒ¨åˆ·æ–°ã€‚æµè§ˆå™¨åŸç”Ÿæœ‰ä¸ªXMLHttpRequestå¯¹è±¡ã€‚<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/js_window_xmlHttpRequest.png" alt="xmlHttpRequest"><br>jQuery å‡ºæ¥ä¹‹åï¼Œajaxçš„è°ƒç”¨ç®€åŒ–äº†å¥½å¤š </p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ajax(&#123;</span><br><span class="line">    type: <span class="string">'POST'</span>,</span><br><span class="line">    dataType: <span class="string">'json'</span>, <span class="comment">//æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ç±»å‹</span></span><br><span class="line">    contentType: <span class="string">'application/json'</span> ,<span class="comment">//å‚æ•°ç±»å‹</span></span><br><span class="line">    url : <span class="string">"http://127.0.0.1/log/list/"</span>,</span><br><span class="line">    headers:&#123;<span class="string">'Content-Type'</span>:<span class="string">'application/json'</span>&#125;,<span class="comment">//è¯·æ±‚å¤´, å†…å®¹ç¼–ç ç±»å‹ é»˜è®¤ "application/x-www-form-urlencoded"</span></span><br><span class="line">    data: <span class="built_in">JSON</span>.stringify(&#123;<span class="string">"name"</span>:<span class="string">"qiugaoying"</span>&#125;), <span class="comment">//ä¼ å‚</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">result,status,xhr</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result); <span class="comment">//è·å–ç»“æœ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params">xhr,status,error</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="Axios-æ¡†æ¶"><a href="#Axios-æ¡†æ¶" class="headerlink" title="Axios æ¡†æ¶"></a>Axios æ¡†æ¶</h4><p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­. æˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹ åœ¨axios çš„api æ–¹æ³•ã€‚<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/http_axios.png" alt="axios"></p><ul><li>ä»å›¾å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸ªé»˜è®¤å±æ€§ä¸­æœ‰ä¸ªxmlHttpRequetç½‘ç»œé€‚é…å™¨ã€‚</li><li>å¯è®¾ç½®åŸºç¡€baseURL , ä»¥åŠè¯·æ±‚å¤´ï¼Œè¯·æ±‚è¶…æ—¶ç­‰ä¸€äº›åŸºç¡€è®¾ç½®ã€‚</li><li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ï¼Œæ”¯æŒé˜²å¾¡ XSRFã€‚</li><li>æä¾›äº†å¸¸ç”¨çš„get,post ç­‰è¯·æ±‚ã€‚è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®ã€‚è¿˜æä¾›è¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªå™¨ã€‚</li></ul><h5 id="scriptæ ‡ç­¾å¼•å…¥axios-çš„js"><a href="#scriptæ ‡ç­¾å¼•å…¥axios-çš„js" class="headerlink" title="scriptæ ‡ç­¾å¼•å…¥axios çš„js"></a>scriptæ ‡ç­¾å¼•å…¥axios çš„js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://unpkg.com/axios/dist/axios.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/æ„å»ºä¸€ä¸ªaxioså®åˆ—åªè¯»å˜é‡ï¼Œè®¾ç½®åŸºç¡€url</span></span><br><span class="line"><span class="regexp">const http = axios.create(&#123;</span></span><br><span class="line"><span class="regexp">    baseURL: 'https:/</span><span class="regexp">/vendor-api-prod.qiugaoying.com',</span></span><br><span class="line"><span class="regexp">    timeout: 1000,</span></span><br><span class="line"><span class="regexp">    transformRequest: [function(data) &#123;</span></span><br><span class="line"><span class="regexp">        // Do whatever you want to transform the data</span></span><br><span class="line"><span class="regexp">        let ret = ''</span></span><br><span class="line"><span class="regexp">        for (let it in data) &#123;</span></span><br><span class="line"><span class="regexp">            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&amp;'</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        return ret</span></span><br><span class="line"><span class="regexp">    &#125;]</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br></pre></td></tr></table></figure><h5 id="å°è£…åŸºç¡€å‚æ•°ï¼Œæ’åº-åŠ å¯†ç­‰"><a href="#å°è£…åŸºç¡€å‚æ•°ï¼Œæ’åº-åŠ å¯†ç­‰" class="headerlink" title="å°è£…åŸºç¡€å‚æ•°ï¼Œæ’åº åŠ å¯†ç­‰"></a>å°è£…åŸºç¡€å‚æ•°ï¼Œæ’åº åŠ å¯†ç­‰</h5><p>å¯¹è¯·æ±‚çš„åŸºç¡€å‚æ•°åšä¸€ä¸ªå°è£…ã€‚ å¤§éƒ¨åˆ†è¯·æ±‚éƒ½éœ€è¦å¸¦ä¸Šä¸€äº›åŸºç¡€å‚æ•°å’ŒuserId,token ç­‰å­—æ®µã€‚æœ€åå¯¹æ‰€æœ‰å­—æ®µkeyæ’åº,æœ€åè½¬æˆJson å­—ç¬¦ä¸²å†åŠ å¯†ã€‚ä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> netManager = &#123;</span><br><span class="line">    getRequestParams: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> userId = localStorage.getItem(<span class="string">"userId"</span>);</span><br><span class="line">        <span class="keyword">let</span> token = localStorage.getItem(<span class="string">"token"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// var userInfo = JSON.parse(userInfoStr);</span></span><br><span class="line">        <span class="keyword">var</span> obj = <span class="built_in">Object</span>.assign(params, &#123;</span><br><span class="line">            api_version: <span class="number">1</span>, <span class="comment">//æ¥å£ç‰ˆæœ¬</span></span><br><span class="line">            platform: <span class="number">2</span>, <span class="comment">//å¹³å°ç±»å‹</span></span><br><span class="line">            terminal: <span class="number">1</span>, <span class="comment">//ç»ˆç«¯ç±»å‹</span></span><br><span class="line">            nonce: (<span class="built_in">Math</span>.random().toFixed(<span class="number">8</span>) + <span class="string">''</span>).replace(<span class="string">'0.'</span>, <span class="string">''</span>), <span class="comment">//éšæœºæ•°;</span></span><br><span class="line">            timestamp: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime(), <span class="comment">//å½“å‰æ—¶é—´æˆ³ æ¯«ç§’</span></span><br><span class="line">            user_id:<span class="number">123</span>, <span class="comment">//userId</span></span><br><span class="line">            token: <span class="string">"ec29c3af0dd998yjhgd22f9y867ws6512"</span>, <span class="comment">//token</span></span><br><span class="line">            version_code: <span class="number">100</span> <span class="comment">//å½“å‰ç‰ˆæœ¬å·</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">let</span> sign = MD5(<span class="keyword">this</span>.strKeySort(obj)).toUpperCase(); <span class="comment">//md5åŠ å¯†</span></span><br><span class="line">        obj[<span class="string">"Sign"</span>] = sign;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//keyæ’åº</span></span><br><span class="line">    strKeySort: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> newkey = <span class="built_in">Object</span>.keys(obj).sort();</span><br><span class="line">        <span class="keyword">const</span> newArr = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newkey.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obj[newkey[i]] === <span class="string">'undefined'</span> || obj[newkey[i]] === <span class="string">'null'</span>) &#123;</span><br><span class="line">                obj[newkey[i]] = <span class="string">''</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            newArr.push(<span class="string">`<span class="subst">$&#123;newkey[i]&#125;</span>=<span class="subst">$&#123;obj[newkey[i]]&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> newStr = newArr.join(<span class="string">'&amp;'</span>) + <span class="string">'&amp;secret_key=gaoyingAESKey'</span>;</span><br><span class="line">        <span class="keyword">return</span> newStr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è·å–url åé¢å¸¦çš„å‚æ•°;</span></span><br><span class="line">    getUrlKey: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>((<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'[?|&amp;]'</span> + name + <span class="string">'='</span> + <span class="string">'([^&amp;;]+?)(&amp;|#|;|$)'</span>).exec(location.href) || [, <span class="string">""</span>])[<span class="number">1</span>].replace(<span class="regexp">/\+/g</span>, <span class="string">'%20'</span>)) || <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="axioså®åˆ—å‘èµ·ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹"><a href="#axioså®åˆ—å‘èµ·ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹" class="headerlink" title="axioså®åˆ—å‘èµ·ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹"></a>axioså®åˆ—å‘èµ·ä¸€ä¸ªè¯·æ±‚ç¤ºä¾‹</h5><p>è¿™é‡Œæ‹¿è¯·æ±‚ç”¨æˆ·ä¸ªäººä¸»é¡µåŸºç¡€ä¿¡æ¯ä¸ºæ ·ä¾‹ï¼ŒæŠŠä¸‹é¢æ–¹æ³•æ”¾å…¥ Vue çš„ methods ä¸­ã€‚ åŠ è½½loadingç”¨åˆ°çš„æ˜¯weiui.js.<br>ä»¥ä¸‹å¯ä»¥å®ç°ä¸€ä¸ªåˆ†é¡µåŠ è½½çš„è¯·æ±‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#PageContainer1'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        <span class="comment">//åˆ†é¡µæ•°æ®</span></span><br><span class="line">        pageNumber: <span class="number">1</span>,</span><br><span class="line">        pageSize: <span class="number">10</span>,</span><br><span class="line">        gyPageListStart: <span class="number">0</span>,</span><br><span class="line">        hasMoreDataFlag: <span class="literal">false</span>,</span><br><span class="line">        dataSource: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        execBaseCustomerRequest: <span class="function"><span class="keyword">function</span>(<span class="params">url, listKey</span>) </span>&#123;</span><br><span class="line">             <span class="keyword">var</span> loading = <span class="literal">null</span>;</span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">this</span>.pageNumber == <span class="number">1</span>) &#123;</span><br><span class="line">                  loading = weui.loading(<span class="string">'åŠ è½½ä¸­'</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">let</span> pageVue = <span class="keyword">this</span>; <span class="comment">//thisåœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æŒ‡å‘çš„å¯¹è±¡ä¸åŒï¼›ä¸´æ—¶å­˜å‚¨vueå¯¹è±¡</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">this</span>.pageNumber == <span class="number">1</span>) &#123;</span><br><span class="line">                  <span class="keyword">this</span>.gyPageListStart = <span class="number">0</span>;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              http.post(url, netManager.getRequestParams(&#123;</span><br><span class="line">                  customer_id: <span class="keyword">this</span>.customerId,</span><br><span class="line">                  start: <span class="keyword">this</span>.gyPageListStart,</span><br><span class="line">                  size: <span class="number">10</span>,</span><br><span class="line">              &#125;)).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">if</span> (loading) &#123;</span><br><span class="line">                      loading.hide();</span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">                  <span class="keyword">let</span> dataDic = response.data;</span><br><span class="line"></span><br><span class="line">                  <span class="keyword">if</span> (dataDic.status == <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">                      <span class="keyword">var</span> arr = pageVue.dataSource;</span><br><span class="line">                      <span class="keyword">if</span> (pageVue.pageNumber == <span class="number">1</span>) &#123;</span><br><span class="line">                          arr = [];</span><br><span class="line">                      &#125;</span><br><span class="line"></span><br><span class="line">                      <span class="keyword">var</span> dataArr = dataDic.data[listKey];</span><br><span class="line">                      arr = arr.concat(dataArr);</span><br><span class="line"></span><br><span class="line">                      pageVue.gyPageListStart = dataDic.data.start;</span><br><span class="line">                      vm.$data.hasMoreDataFlag = (dataDic.data.more == <span class="number">1</span>);</span><br><span class="line">                      vm.$data.dataSource = arr;</span><br><span class="line">                  &#125;</span><br><span class="line">                  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                      pageVue.requestLoadingFinished = <span class="literal">true</span>;</span><br><span class="line">                  &#125;, <span class="number">800</span>);</span><br><span class="line">                  <span class="comment">//é‡ç½®åŠ è½½å®Œæˆçš„çŠ¶æ€ï¼›</span></span><br><span class="line"></span><br><span class="line">              &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(error);</span><br><span class="line">              &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>å…¶ä»–ï¼š url é€šå¸¸ä¼šæ”¾åˆ°ä¸€ä¸ªå…¨å±€æ–‡ä»¶ä¸­é…ç½®<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gaoyingAPI = &#123;</span><br><span class="line">    customerList: <span class="string">"/customer/list/"</span>,</span><br><span class="line">    customerLogs: <span class="string">"/customer/logs/"</span>,</span><br><span class="line">    customerCoupons: <span class="string">"/customer/coupons/"</span>,</span><br><span class="line">    customerOrders: <span class="string">"/customer/orders/"</span>,</span><br><span class="line">    customerDetail: <span class="string">"/customer/detail/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h5 id="Promise-ç”¨æ³•ç®€è¦è®²è§£"><a href="#Promise-ç”¨æ³•ç®€è¦è®²è§£" class="headerlink" title="Promise ç”¨æ³•ç®€è¦è®²è§£"></a>Promise ç”¨æ³•ç®€è¦è®²è§£</h5><p>ä»ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°httpå‘é€post æ–¹æ³•è¯·æ±‚ä¹‹åï¼Œé€šè¿‡promiseè¯­æ³• thençš„å›è°ƒç›‘å¬å“åº”ç»“æœï¼Œé€šè¿‡catchæ–¹æ³• æ¥æ•æ‰å¼‚å¸¸é”™è¯¯å¤„ç†ã€‚ES6 å°±æ”¯æŒäº†Promiseçš„ç”¨æ³•ã€‚<br>Promiseä¸­æ–‡ä¸ºæ‰¿è¯ºã€‚æœ‰ä¸‰ç§çŠ¶æ€ï¼špending(è¿›è¡Œä¸­)ã€fulfilled(å·²æˆåŠŸ)ã€rejected(å·²å¤±è´¥)ã€‚ å³çŠ¶æ€ä¸€æ—¦æ›´æ”¹å°±ä¸èƒ½å†æ¬¡æ”¹å˜èµ‹å€¼ã€‚è¿™ä¹Ÿæ˜¯æ‰¿è¯ºçš„æ„ä¹‰ã€‚<br>Promiseå®åˆ—é€šè¿‡.thenæ–¹æ³•æˆ–è€….catchæ–¹æ³• è¿”å›ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹æ¥å®ç°é“¾å¼è°ƒç”¨ã€‚.thenæ–¹æ³•å¯ä»¥è¿”å›æ™®é€šå€¼æˆ–è€…ä¸€ä¸ªæ–°çš„promiseã€‚ä¸è®¾ç½®è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›nullã€‚<br>Promiseæœ‰å¾ˆå¤šç”¨æ³•ï¼Œä½†ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç”¨åˆ°Promiseå‘¢ï¼Ÿ åœ¨éœ€è¦å¤„ç†å¼‚æ­¥è€—æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ç”¨PromiseåŒ…è£…åè¿›è¡Œè¿”å›ã€‚Promiseç”¨çš„æ—¶å€™ä¼šé‡åˆ°å¾ˆå¤šç§æƒ…å†µï¼ŒPromiseä¹Ÿæä¾›äº†å¯¹åº”çš„è§£å†³æ–¹æ³•ã€‚</p><ul><li>å½“Promise.thenæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseæ—¶å€™ï¼Œä¸‹ä¸€çº§çš„then å°†åœ¨ æ–°çš„Promise then æ‰§è¡Œ ä¹‹åæ‰§è¡Œã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Promise then åµŒå¥— æ–¹å¼ä¸€</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡"</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">"qiu"</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡2"</span>);</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(<span class="string">"qiugao"</span>);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">        <span class="comment">//è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event1:"</span> + value);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"qiugaoying"</span>;</span><br><span class="line"></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event2:"</span> + value);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello, my name is qiugaoying"</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">consoleè¾“å‡ºç»“æœ:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="comment">step1-result:qiu</span></span><br><span class="line"><span class="comment">step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡2</span></span><br><span class="line"><span class="comment">step2-1-result-event1:qiugao</span></span><br><span class="line"><span class="comment">step2-1-result-event2:qiugaoying</span></span><br><span class="line"><span class="comment">step1-result:hello, my name is qiugaoying</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Promise then åµŒå¥—ï¼Œæ–¹å¼äºŒï¼š æŠŠthenç§»åˆ°åŒä¸€çº§å±•å¼€ã€‚æ‰§è¡Œæ‰“å°ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡"</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">"qiu"</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡"</span>);</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(<span class="string">"qiugao"</span>);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">        <span class="comment">//è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event1:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"qiugaoying"</span>;</span><br><span class="line"></span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event2:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello, my name is qiugaoying"</span>;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>then æ–¹æ³•æä¾›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯é€‰ã€‚ä¸€ä¸ªæ˜¯åä¸ºresolveçš„æˆåŠŸå›è°ƒ å’Œ å¦ä¸€ä¸ªåä¸ºreject çš„å¤±è´¥å›è°ƒã€‚é€šå¸¸å¤„ç†ä¸€ä¸ªå¤±è´¥å›è°ƒæˆ‘ä»¬ä¼šç”¨catchæ–¹æ³•å»æ•æ‰å¼‚å¸¸å’Œå¤±è´¥ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡"</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">"qiu"</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªæ¥å£è¯·æ±‚æˆåŠŸæ‹¿åˆ°qiu</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1:å¼‚æ­¥è¯·æ±‚å¤„ç†è€—æ—¶ä»»åŠ¡"</span>);</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(<span class="string">"qiugao"</span>);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">        <span class="comment">//è§¦å‘ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬ä¸€ä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> hasError = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (hasError) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"step2-1-result-event1-erroræŠ¥å¼‚å¸¸"</span>);</span><br><span class="line">        <span class="comment">//æŠ›å‡ºå¼‚å¸¸ å°†ä¸å†ç»§ç»­æ‰§è¡Œthen, ç›´æ¥åˆ°catchå¼‚å¸¸ï¼›ä¸­é€”å¦‚æœæ²¡æœ‰é‡åˆ°catch å°†ç›´æ¥åˆ°æœ€åçš„catch.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event1:"</span> + value);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"qiugaoying"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*.catch(err =&gt; &#123;</span></span><br><span class="line"><span class="comment">    console.log("ä¸­é€”catchErrorä¼šç»§ç»­å¾€ä¸‹èµ°:" + err);</span></span><br><span class="line"><span class="comment">    return "qiugaoying"</span></span><br><span class="line"><span class="comment">    //ä¹Ÿä¼šè¿”å›ä¸€ä¸ªpromiseå®ä¾‹ï¼Œå¹¶ä¸”æ˜¯resolvedçŠ¶æ€ï¼Œä¸ä¼šè¢«æœ€åä¸€ä¸ªcatch æ•æ‰</span></span><br><span class="line"><span class="comment">&#125;)*/</span></span><br><span class="line">.then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒä¸ªæ¥å£è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°id2 åšç¬¬äºŒä»¶äº‹æƒ…ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step2-1-result-event2:"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello, my name is "</span>+value;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æœ€åå…¨éƒ¨è¯·æ±‚å®Œæˆï¼Œè§¦å‘æ±‡æ€»åˆ·æ–°ã€‚</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"step1-result:"</span> + value);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"end error:"</span> + error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>finally æ–¹æ³•æ˜¯æœ€ç»ˆæ‰§è¡Œçš„æ–¹æ³•ï¼ˆæ— å‚ï¼‰ ï¼Œæ— è®ºçŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒæˆåŠŸ or å¤±è´¥ éƒ½ä¼šæ‰§è¡Œæ”¶å°¾ã€‚</li><li><p>Promise è¿˜æä¾›all æ–¹æ³•(æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢å€¼å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ï¼Œæˆ–è€…Promiseå¯¹è±¡)ï¼Œå¯ç”¨æ¥åšä¸€ä¸ªç±»ä¼¼æ‰¹é‡å¤„ç†ä¹‹åæ±‡æ€»çš„ä¸šåŠ¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"> testPromiseAll() &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">washFood</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬ä¸€æ­¥ï¼šæ´—èœ'</span>);</span><br><span class="line">        <span class="keyword">let</span> hasError = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(hasError)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"å‘ç°äº†ä¸€åªè™«å­ï¼æ´—æ‰å®ƒã€‚"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'èœæ´—å¹²å‡€äº†ã€‚'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cutFood</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬äºŒæ­¥ï¼šåˆ‡èœ'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">let</span> cutFoodHasError = <span class="literal">true</span>;  <span class="comment">//æ§åˆ¶é»˜å¥‘åˆ‡èœæ—¶ æ˜¯å¦å‘ç”Ÿå¼‚å¸¸</span></span><br><span class="line">                <span class="keyword">if</span>(cutFoodHasError)&#123;</span><br><span class="line">                    reject(<span class="string">"å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼"</span>)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    resolve(<span class="string">'åˆ‡å¥½äº†èœã€‚'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">/* è¯•è¯•æ‰“å¼€è¿™é‡Œçš„æ³¨é‡Š</span></span><br><span class="line"><span class="comment">        .catch(error=&gt;&#123;</span></span><br><span class="line"><span class="comment">            console.log("åˆ‡èœå¼‚å¸¸:"+error); //å¼‚å¸¸æœ¬èº«å°±æ˜¯è¿”å›resolveçŠ¶æ€ï¼Œå€¼æ˜¯null</span></span><br><span class="line"><span class="comment">            console.log("ç”¨åˆ›å£è´´æ­¢è¡€ï¼Œç»§ç»­åšèœã€‚");</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cooking</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬ä¸‰æ­¥ï¼šç‚’èœ'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                resolve(<span class="string">'èœå·²åšå¥½!'</span>);</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•°ç»„é‡Œï¼Œå¦‚æœæ”¾Promise ä¸€å®šè¦è¿”å›çŠ¶æ€ã€‚ </span></span><br><span class="line">    <span class="built_in">Promise</span>.all([washFood(), cutFood(),cooking()])</span><br><span class="line">        .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼š'</span>+result);</span><br><span class="line">            <span class="built_in">console</span>.log(result);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:"</span>+error);</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">     ç»“æœï¼š</span></span><br><span class="line"><span class="comment">     1. å½“cutFoodHasError = trueï¼›æ‰“å°å¦‚ä¸‹ç»“æœï¼š</span></span><br><span class="line"><span class="comment">        èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼</span></span><br><span class="line"><span class="comment">     2. å½“cutFoodHasError = true ä¸” cutFoodæ–¹æ³•é‡Œçš„Promiseæœ‰å¼‚å¸¸æ•æ‰æ—¶ï¼š </span></span><br><span class="line"><span class="comment">        åˆ‡èœå¼‚å¸¸:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼</span></span><br><span class="line"><span class="comment">        ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¹²å‡€äº†ï¼,,èœå·²åšå¥½</span></span><br><span class="line"><span class="comment">     3. å½“cutFoodHasError = false </span></span><br><span class="line"><span class="comment">        ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¥½äº†ã€‚åˆ‡å¥½äº†èœã€‚èœå·²åšå¥½ï¼</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    Promise.allä½¿ç”¨æ€»ç»“ï¼š</span></span><br><span class="line"><span class="comment">    æ•°ç»„é‡Œå¯ä»¥æ˜¯Promiseå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„å€¼ï¼Œåªæœ‰Promiseä¼šç­‰å¾…çŠ¶æ€æ”¹å˜</span></span><br><span class="line"><span class="comment">    å½“æ‰€æœ‰çš„å­Promiseéƒ½å®Œæˆï¼Œè¯¥Promiseå®Œæˆï¼Œè¿”å›å€¼æ˜¯å…¨éƒ¨å€¼å¾—æ•°ç»„</span></span><br><span class="line"><span class="comment">    æœ‰ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œè¯¥Promiseå¤±è´¥ï¼Œè¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ˆå¤±è´¥çš„å­Promiseç»“æœ </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>Promise å¦å¤–ä¸€ä¸ªrace æ–¹æ³•ä¸all ä¸åŒçš„æ˜¯ï¼Œrace ç±»ä¼¼ç«èµ›ï¼Œå‚æ•°ä¸­çš„Promiseå®ä¾‹åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€å°±ä¼šè§¦å‘ç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°ç»“æœï¼š å…”å­èµ¢äº†</span></span><br><span class="line">testPromiseRace() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rabbit</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å…”å­é€‰æ‰‹'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                resolve(<span class="string">'å…”å­èµ¢äº†'</span>);</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;) .catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å…”å­è·‘æ­¥ä¸­å‡ºç°å¼‚å¸¸:"</span>+error);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">tortoise</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ä¹Œé¾Ÿé€‰æ‰‹'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                resolve(<span class="string">'ä¹Œé¾Ÿèµ¢äº†'</span>);</span><br><span class="line">            &#125;, <span class="number">3000</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Promise</span>.race([rabbit(),tortoise()])</span><br><span class="line">        .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"æ¯”èµ›ç»“æœ:"</span>+result);</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Vue-Cli-è„šæ‰‹æ¶é¡¹ç›®è¯·æ±‚æ¨¡å—çš„æ­å»º"><a href="#Vue-Cli-è„šæ‰‹æ¶é¡¹ç›®è¯·æ±‚æ¨¡å—çš„æ­å»º" class="headerlink" title="Vue Cli è„šæ‰‹æ¶é¡¹ç›®è¯·æ±‚æ¨¡å—çš„æ­å»º"></a>Vue Cli è„šæ‰‹æ¶é¡¹ç›®è¯·æ±‚æ¨¡å—çš„æ­å»º</h3><p>åœ¨vueçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡vue cliæ¥ç®¡ç†æˆ‘ä»¬çš„é¡¹ç›®ã€‚vue cli æ–¹å¼çš„ä¼˜åŠ¿åœ¨äºæ¨¡å—ä¹‹é—´å¯ä»¥å¾ˆå¥½åœ°ç›¸äº’å¼•ç”¨ï¼Œé€šè¿‡package åŒ…æ¥ç®¡ç†é…ç½®ç›¸å…³çš„æ¡†æ¶ä¾èµ–ã€‚ç”Ÿæ€éå¸¸ä¸°å¯Œï¼Œå¯è½»æ¾è¿ç”¨vue-router æ¥è§£å†³è·¯ç”±è·³è½¬ç­‰é—®é¢˜ã€‚<br>é¦–å…ˆç¬¬ä¸€æ­¥æ˜¯è¦åˆ›å»ºä¸€ä¸ª vue clié¡¹ç›®ã€‚</p><h4 id="åŸºç¡€å®‰è£…ç¯å¢ƒ"><a href="#åŸºç¡€å®‰è£…ç¯å¢ƒ" class="headerlink" title="åŸºç¡€å®‰è£…ç¯å¢ƒ"></a>åŸºç¡€å®‰è£…ç¯å¢ƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue&#x2F;cli</span><br><span class="line">vue create helloworld æ–¹å¼åˆ›å»ºé¡¹ç›®</span><br><span class="line">ä¹Ÿå¯ä»¥ ä½¿ç”¨GUI vue ui æ¥é€šè¿‡ç½‘é¡µ æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®æ“ä½œ æ¥åˆ›å»ºé¡¹ç›®</span><br></pre></td></tr></table></figure><h4 id="package-json-é…ç½®"><a href="#package-json-é…ç½®" class="headerlink" title="package.json é…ç½®"></a>package.json é…ç½®</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"gaoying-cli"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"serve"</span>: <span class="string">"vue-cli-service serve"</span>,</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"vue-cli-service build"</span>,</span><br><span class="line">    <span class="attr">"lint"</span>: <span class="string">"vue-cli-service lint"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"animate.css"</span>: <span class="string">"^3.7.2"</span>,</span><br><span class="line">    <span class="attr">"core-js"</span>: <span class="string">"^3.4.3"</span>,</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"^2.6.10"</span>,</span><br><span class="line">    <span class="attr">"vue-axios"</span>: <span class="string">"^2.1.5"</span>,</span><br><span class="line">    <span class="attr">"vue-router"</span>: <span class="string">"^3.1.3"</span>,</span><br><span class="line">    <span class="attr">"vuex"</span>: <span class="string">"^3.1.2"</span>,</span><br><span class="line">    <span class="attr">"weui.js"</span>: <span class="string">"^1.2.1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@vue/cli-plugin-babel"</span>: <span class="string">"^4.1.0"</span>,</span><br><span class="line">    <span class="attr">"@vue/cli-plugin-router"</span>: <span class="string">"^4.1.1"</span>,</span><br><span class="line">    <span class="attr">"@vue/cli-plugin-vuex"</span>: <span class="string">"^4.1.1"</span>,</span><br><span class="line">    <span class="attr">"@vue/cli-service"</span>: <span class="string">"^4.1.0"</span>,</span><br><span class="line">    <span class="attr">"axios"</span>: <span class="string">"^0.19.0"</span>,</span><br><span class="line">    <span class="attr">"vue-template-compiler"</span>: <span class="string">"^2.6.10"</span>,</span><br><span class="line">    <span class="attr">"weui"</span>: <span class="string">"^2.1.3"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"eslintConfig"</span>: &#123;</span><br><span class="line">    <span class="attr">"root"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"env"</span>: &#123;</span><br><span class="line">      <span class="attr">"node"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"extends"</span>: [</span><br><span class="line">      <span class="string">"plugin:vue/essential"</span>,</span><br><span class="line">      <span class="string">"eslint:recommended"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"parserOptions"</span>: &#123;</span><br><span class="line">      <span class="attr">"parser"</span>: <span class="string">"babel-eslint"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"browserslist"</span>: [</span><br><span class="line">    <span class="string">"&gt; 1%"</span>,</span><br><span class="line">    <span class="string">"last 2 versions"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®main-js"><a href="#é…ç½®main-js" class="headerlink" title="é…ç½®main.js"></a>é…ç½®main.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span> <span class="comment">//è¯·æ±‚ç½‘ç»œ</span></span><br><span class="line"><span class="keyword">import</span> VueAxios <span class="keyword">from</span> <span class="string">'vue-axios'</span> </span><br><span class="line"><span class="keyword">import</span> weui <span class="keyword">from</span> <span class="string">'weui.js'</span> <span class="comment">//weuiJs</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'weui'</span> <span class="comment">//weuiæ ·å¼</span></span><br><span class="line"><span class="keyword">import</span> ymAPI <span class="keyword">from</span> <span class="string">'@/assets/js/urlConfig.js'</span> <span class="comment">//Api</span></span><br><span class="line"><span class="keyword">import</span> netManager <span class="keyword">from</span> <span class="string">'@/assets/js/netManager.js'</span> <span class="comment">//è¯·æ±‚åŸºç¡€å‚æ•°æ‹¼æ¥</span></span><br><span class="line"><span class="keyword">import</span> ymNativeBridge <span class="keyword">from</span> <span class="string">'@/assets/js/ymNativeBridge.js'</span> <span class="comment">//åŸç”Ÿäº‹ä»¶äº¤äº’</span></span><br><span class="line"><span class="keyword">import</span> animate <span class="keyword">from</span> <span class="string">'animate.css'</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> ymHttp = axios.create(&#123;</span><br><span class="line">    </span><br><span class="line">    baseURL: <span class="string">'https://vendor-api-prod.gaoying.com'</span>, </span><br><span class="line">    timeout: <span class="number">1000</span>,</span><br><span class="line">    transformRequest: [<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// Do whatever you want to transform the data</span></span><br><span class="line">        <span class="keyword">let</span> ret = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> it <span class="keyword">in</span> data) &#123;</span><br><span class="line">            ret += <span class="built_in">encodeURIComponent</span>(it) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[it]) + <span class="string">'&amp;'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$weui = weui</span><br><span class="line">Vue.prototype.$ymAPI = ymAPI</span><br><span class="line">Vue.prototype.$netManager = netManager</span><br><span class="line">Vue.prototype.$ymNativeBridge = ymNativeBridge</span><br><span class="line">Vue.use(VueAxios, ymHttp,animate)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚Demoç¤ºä¾‹"><a href="#è¯·æ±‚Demoç¤ºä¾‹" class="headerlink" title="è¯·æ±‚Demoç¤ºä¾‹"></a>è¯·æ±‚Demoç¤ºä¾‹</h4><p>//å’Œæ™®é€šh5 è¯·æ±‚ç½‘ç»œç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯é€šè¿‡æŒ‚è½½åˆ°Vueä¸Šçš„axios ï¼Œå¯ä»¥é€šè¿‡this.$http å–å¾—ã€‚this.$netManager ä¹Ÿç±»ä¼¼ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">execBaseCustomerRequest: <span class="function"><span class="keyword">function</span>(<span class="params">url, listKey</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> loading = <span class="literal">null</span>;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">this</span>.pageNumber == <span class="number">1</span>) &#123;</span><br><span class="line">       loading = <span class="keyword">this</span>.$weui.loading(<span class="string">'åŠ è½½ä¸­'</span>);</span><br><span class="line">       <span class="keyword">this</span>.gyPageListStart = <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">let</span> pageVue = <span class="keyword">this</span>; <span class="comment">//thisåœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸­æŒ‡å‘çš„å¯¹è±¡ä¸åŒï¼›ä¸´æ—¶å­˜å‚¨vueå¯¹è±¡</span></span><br><span class="line">    </span><br><span class="line">   <span class="keyword">this</span>.$http.post(url, <span class="keyword">this</span>.$netManager.getRequestParams(&#123;</span><br><span class="line">       customer_id: <span class="keyword">this</span>.customerId,</span><br><span class="line">       start: <span class="keyword">this</span>.gyPageListStart,</span><br><span class="line">       size: <span class="number">10</span>,</span><br><span class="line">   &#125;)).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (loading) &#123;</span><br><span class="line">           loading.hide();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">let</span> dataDic = response.data;         </span><br><span class="line">       <span class="keyword">if</span> (dataDic.status == <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">var</span> arr = pageVue.dataSource;</span><br><span class="line">           <span class="keyword">if</span> (pageVue.pageNumber == <span class="number">1</span>) &#123;</span><br><span class="line">               arr = [];</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">var</span> dataArr = dataDic.data[listKey];</span><br><span class="line">           arr = arr.concat(dataArr);</span><br><span class="line"></span><br><span class="line">           pageVue.gyPageListStart = dataDic.data.start;</span><br><span class="line">           pageVue.hasMoreDataFlag = (dataDic.data.more == <span class="number">1</span>);</span><br><span class="line">           pageVue.dataSource = arr;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           pageVue.$weui.topTips(dataDic.errorMsg);</span><br><span class="line">       &#125;</span><br><span class="line">       setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           pageVue.requestLoadingFinished = <span class="literal">true</span>;</span><br><span class="line">       &#125;, <span class="number">800</span>);</span><br><span class="line">       <span class="comment">//é‡ç½®åŠ è½½å®Œæˆçš„çŠ¶æ€ï¼›</span></span><br><span class="line"></span><br><span class="line">   &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(error);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œå¯¼å‡º"><a href="#æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œå¯¼å‡º" class="headerlink" title="æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œå¯¼å‡º"></a>æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å’Œå¯¼å‡º</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MD5 <span class="keyword">from</span> <span class="string">'./md5.js'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    getRequestParams: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> userId = localStorage.getItem(<span class="string">"userId"</span>);</span><br><span class="line">        <span class="keyword">let</span> token = localStorage.getItem(<span class="string">"token"</span>);</span><br><span class="line">        ......</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//md5.js æ–‡ä»¶ä¸­ </span></span><br><span class="line"><span class="keyword">var</span> MD5 = <span class="function"><span class="keyword">function</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = MD5</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å£é…ç½®urlConfig.js æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="keyword">const</span> ymAPI = &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å®¢æˆ·ä¿¡æ¯ </span></span><br><span class="line">    customerList: <span class="string">"/customer/list/"</span>,</span><br><span class="line">    customerLogs: <span class="string">"/customer/logs/"</span>,</span><br><span class="line">    customerCoupons: <span class="string">"/customer/coupons/"</span>,</span><br><span class="line">    customerOrders: <span class="string">"/customer/orders/"</span>,</span><br><span class="line">    customerDetail: <span class="string">"/customer/detail/"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = ymAPI</span><br></pre></td></tr></table></figure><p>export åœ¨jsæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ª.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//testExport.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">"qiugaoying"</span>,<span class="attr">sex</span>:<span class="number">1</span>, <span class="attr">job</span>:<span class="string">"software Programmer"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addressInfo = &#123;<span class="attr">province</span>:<span class="string">"å¹¿ä¸œçœ"</span>, <span class="attr">city</span>:<span class="string">"guangzhou"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> introduct = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"my name is qiugaoying"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>export æœ‰å¤šä¸ªçš„æ—¶å€™ ï¼Œå¯¼å…¥å¿…é¡»ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;person,addressInfo&#125; <span class="keyword">from</span> <span class="string">"../../utils/testExport.js"</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span>  allExp <span class="keyword">from</span> <span class="string">"../../utils/testExport.js"</span>  <span class="comment">//åŠ è½½å…¨éƒ¨export,å–ä¸ªåˆ«å</span></span><br></pre></td></tr></table></figure><br><strong> æ€»ç»“ </strong></p><ol><li>export default åªèƒ½å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ã€‚import å’Œ export åŒä¸€jsæ–‡ä»¶ä¸­å¯ä»¥å¯¼å…¥æˆ–å¯¼å‡ºå¤šæ¬¡ã€‚</li><li>module.exports å’Œ exports éƒ½æ˜¯ node ç«¯åœ¨ç”¨ï¼Œä¸¤è€…æŒ‡å‘åŒä¸€å†…å­˜å—ï¼Œå¯ä»¥å¯¼å‡ºå˜é‡ æˆ– å‡½æ•°ï¼Œå¯¹è±¡ã€‚</li><li>exports å˜é‡æ˜¯åœ¨æ¨¡å—çš„æ–‡ä»¶çº§ä½œç”¨åŸŸå†…å¯ç”¨çš„ï¼Œä¸”åœ¨æ¨¡å—æ‰§è¡Œä¹‹å‰èµ‹å€¼ç»™ module.exportsã€‚</li></ol><h3 id="H5-å’Œ-App-åŸç”Ÿäº¤äº’"><a href="#H5-å’Œ-App-åŸç”Ÿäº¤äº’" class="headerlink" title="H5 å’Œ App åŸç”Ÿäº¤äº’"></a>H5 å’Œ App åŸç”Ÿäº¤äº’</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//åŸç”Ÿè°ƒç”¨app</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    callApp:<span class="function"><span class="keyword">function</span>(<span class="params">handlerMethod, parameters</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">window</span>.WeixinJSBridge || !WeixinJSBridge.invoke) &#123;</span><br><span class="line">            <span class="keyword">var</span> handlerInterface = <span class="string">'YunMiaoNative'</span>;</span><br><span class="line">            <span class="keyword">var</span> dic = &#123;</span><br><span class="line">                <span class="string">'handlerInterface'</span>: handlerInterface,</span><br><span class="line">                <span class="string">'function'</span>: handlerMethod, <span class="comment">//è°ƒç”¨åŸç”Ÿçš„æŒ‡ä»¤</span></span><br><span class="line">                <span class="string">'parameters'</span>: parameters <span class="comment">//ä¼ é€’çš„å‚æ•°ï¼›</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (<span class="regexp">/(iPhone|iPad|iPod|iOS)/i</span>.test(navigator.userAgent)) &#123;</span><br><span class="line">                <span class="built_in">window</span>.webkit.messageHandlers[handlerInterface].postMessage(dic);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//å®‰å“  </span></span><br><span class="line">                app.ymAppWebClick(); <span class="comment">//dic</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//åŒ…å«å¾®ä¿¡åŠŸèƒ½ï¼Œæ¯”å¦‚å¯å”¤èµ·å°ç¨‹åºã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//åŸç”Ÿè°ƒç”¨app å¹¶ä¼ é€’å‚æ•°ç»™H5</span></span><br><span class="line">    callbackH5: <span class="function"><span class="keyword">function</span>(<span class="params">handlerMethod, parameters, callbackMethod</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">window</span>.WeixinJSBridge || !WeixinJSBridge.invoke) &#123;</span><br><span class="line">            <span class="keyword">var</span> handlerInterface = <span class="string">'YunMiaoH5'</span>;</span><br><span class="line">            <span class="keyword">var</span> dic = &#123;</span><br><span class="line">                <span class="string">'handlerInterface'</span>: handlerInterface,</span><br><span class="line">                <span class="string">'function'</span>: handlerMethod, <span class="comment">//è°ƒç”¨åŸç”Ÿçš„æŒ‡ä»¤</span></span><br><span class="line">                <span class="string">'parameters'</span>: parameters, <span class="comment">//ä¼ é€’çš„å‚æ•°ï¼›</span></span><br><span class="line">                <span class="string">'callbackMethod'</span>: callbackMethod <span class="comment">//å›è°ƒçš„å‡½æ•°</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (<span class="regexp">/(iPhone|iPad|iPod|iOS)/i</span>.test(navigator.userAgent)) &#123;</span><br><span class="line">                <span class="built_in">window</span>.webkit.messageHandlers[handlerInterface].postMessage(dic);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//å®‰å“  </span></span><br><span class="line">                app.ymAppWebClick(<span class="built_in">JSON</span>.stringify(dic));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//åŒ…å«å¾®ä¿¡åŠŸèƒ½ï¼Œæ¯”å¦‚å¯å”¤èµ·å°ç¨‹åºã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é€’å½’ï¼Œåˆ†æ²»ï¼Œæ ‡è®°</title>
      <link href="/2020/02/02/algorithmExercises/"/>
      <url>/2020/02/02/algorithmExercises/</url>
      
        <content type="html"><![CDATA[<h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ol><li>æ‰“å°å›¾æ¡ˆ<ol><li>ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•</li><li>ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€ï¼šä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥</li><li>ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼šå¯¹è§’çº¿ç›¸ç­‰</li><li>æ¨è¾‰ä¸‰è§’</li><li>èºæ—‹çŸ©é˜µ</li><li>è›‡å½¢çŸ©é˜µ 1</li><li>è›‡å½¢çŸ©é˜µ 2</li></ol></li><li>è¶£å‘³ä¹ é¢˜<ol><li>æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ</li><li>æ‰¾å‡ºæœ€é•¿çš„å•è¯</li><li>é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­</li><li>é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬</li><li>ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°</li><li>ç»Ÿè®¡ç­çº§æˆç»©æ’å Java ç‰ˆæœ¬</li><li>ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬</li><li>æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬</li><li>æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬</li><li>æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„</li></ol></li><li>åŸºç¡€æ’åº<ol><li>æ’å…¥æ’åº</li><li>é€‰æ‹©æ’åº</li><li>å†’æ³¡æ’åº</li><li>å¿«é€Ÿæ’åº</li><li>äºŒåˆ†æ³•æŸ¥æ‰¾</li></ol></li><li>Json æ ¼å¼çš„æ ¡éªŒ</li></ol><a id="more"></a><h3 id="æ‰“å°å›¾æ¡ˆ"><a href="#æ‰“å°å›¾æ¡ˆ" class="headerlink" title="æ‰“å°å›¾æ¡ˆ"></a>æ‰“å°å›¾æ¡ˆ</h3><h4 id="ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•"><a href="#ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•" class="headerlink" title="ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•"></a>ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰è…°ä¸‰è§’å½¢ä¹‹å­—æ¯æ‰©å±•</span></span><br><span class="line"><span class="keyword">void</span>  printThreeCornerRect1()</span><br><span class="line">&#123;</span><br><span class="line">    int i,j,row;</span><br><span class="line">    printf(<span class="string">"è¾“å…¥è¡Œï¼š"</span>);</span><br><span class="line">    scanf(<span class="string">"%d"</span>,&amp;row);</span><br><span class="line">    int col=<span class="number">2</span>*row<span class="number">-1</span>;</span><br><span class="line">    char words[<span class="number">27</span>]=<span class="string">" ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;</span><br><span class="line">    int center = col/<span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    printf(<span class="string">"center:%d\n"</span>,center);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=row;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=col;j++)&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(j&lt;=row-i||j&gt;col-(row-i))</span><br><span class="line">                printf(<span class="string">" "</span>);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(j==center &amp;&amp; i &gt;<span class="number">1</span>)&#123;</span><br><span class="line">                    printf(<span class="string">"%c"</span>,words[i+<span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    printf(<span class="string">"%c"</span>,words[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰“å°ç»“æœï¼š</span><br><span class="line">è¾“å…¥è¡Œï¼š<span class="number">9</span></span><br><span class="line">        A        </span><br><span class="line">       BCB       </span><br><span class="line">      CCDCC      </span><br><span class="line">     DDDEDDD     </span><br><span class="line">    EEEEFEEEE    </span><br><span class="line">   FFFFFGFFFFF   </span><br><span class="line">  GGGGGGHGGGGGG  </span><br><span class="line"> HHHHHHHIHHHHHHH </span><br><span class="line">IIIIIIIIJIIIIIIII</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š </p><ol><li>æ ¹æ®è¾“å…¥è¡Œæ•°ï¼Œå…ˆè¾“å‡ºä¸€ä¸ªçŸ©å½¢å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ </li><li>ç¡®å®šæ¯ä¸€è¡Œå­—æ¯çš„ä¸ªæ•°ä¸º 2 n - 1ã€‚</li><li>æ¯è¡Œæ˜¾ç¤ºçš„æ—¶å€™æ ¹æ®æ¡ä»¶å¯¹æ˜¾ç¤ºå­—æ¯é™¤å¤–çš„åœ°æ–¹æŒ–ç©ºï¼Œç”¨ * è¡¨ç¤º</li><li>æ‰“å°å­—æ¯å–æ•°ç»„å¯¹åº”ä¸‹æ ‡è¡Œæ•°çš„å­—æ¯ã€‚æ­£ä¸­é—´çš„ä½ç½®ä¸ºä¸‹æ ‡åŠ  1 è¾“å‡ºä¸‹ä¸€ä¸ªå­—æ¯ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">********A********</span><br><span class="line">*******BCB*******</span><br><span class="line">******CCDCC******</span><br><span class="line">*****DDDEDDD*****</span><br><span class="line">****EEEEFEEEE****</span><br><span class="line">***FFFFFGFFFFF***</span><br><span class="line">**GGGGGGHGGGGGG**</span><br><span class="line">*HHHHHHHIHHHHHHH*</span><br><span class="line">IIIIIIIIJIIIIIIII</span><br></pre></td></tr></table></figure><h4 id="ç©ºå¿ƒè±å½¢-æ–¹æ³•ä¸€-ä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥"><a href="#ç©ºå¿ƒè±å½¢-æ–¹æ³•ä¸€-ä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥" class="headerlink" title="ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€: ä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥"></a>ç©ºå¿ƒè±å½¢ æ–¹æ³•ä¸€: ä¸¤ä¸ªç­‰è…°ä¸‰è§’å½¢æ‹¼æ¥</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç©ºå¿ƒè±å½¢</span></span><br><span class="line"><span class="keyword">void</span> printLingxingRect()</span><br><span class="line">&#123;</span><br><span class="line">    int i,j,e,f;</span><br><span class="line">    int c;</span><br><span class="line">    char word[<span class="number">10</span>] = <span class="string">"*"</span>;</span><br><span class="line">    printf(<span class="string">"è¯·è¾“ä»£è¡¨å›¾æ¡ˆ:"</span>);</span><br><span class="line">    scanf(<span class="string">"%s"</span>,&amp;word);</span><br><span class="line">    printf(<span class="string">"è¯·è¾“å…¥è¡Œ:"</span>);</span><br><span class="line">    scanf(<span class="string">"%d"</span>,&amp;c);</span><br><span class="line">    printf(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=c;i++)  <span class="comment">//æ‰“å°ä¸ŠåŠéƒ¨åˆ†</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=c+<span class="number">1</span>-i;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            printf(<span class="string">" "</span>); <span class="comment">//å·¦è¾¹æŒ–ç©º</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=(<span class="number">2</span>*i<span class="number">-1</span>);j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;<span class="number">1</span>&amp;&amp;j&lt;(<span class="number">2</span>*i<span class="number">-1</span>))</span><br><span class="line">                printf(<span class="string">" "</span>); <span class="comment">//ä¸­é—´æŒ–ç©º</span></span><br><span class="line">            <span class="keyword">else</span> printf(<span class="string">"%s"</span>, word);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(e=<span class="number">2</span>;e&lt;=c;e++) <span class="comment">//æ‰“å°ä¸‹åŠéƒ¨åˆ†</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(f=<span class="number">1</span>;f&lt;=e;f++)</span><br><span class="line">        &#123;</span><br><span class="line">            printf(<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(f=<span class="number">1</span>;f&lt;=<span class="number">2</span>*c+<span class="number">1</span><span class="number">-2</span>*e;f++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(f&gt;<span class="number">1</span>&amp;&amp;f&lt;<span class="number">2</span>*c+<span class="number">1</span><span class="number">-2</span>*e)</span><br><span class="line">                printf(<span class="string">" "</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                printf(<span class="string">"%s"</span>,word);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>æ•ˆæœå¦‚ä¸‹ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“ä»£è¡¨å›¾æ¡ˆ:*</span><br><span class="line">è¯·è¾“å…¥è¡Œ:<span class="number">9</span></span><br><span class="line"></span><br><span class="line">         *</span><br><span class="line">        * *</span><br><span class="line">       *   *</span><br><span class="line">      *     *</span><br><span class="line">     *       *</span><br><span class="line">    *         *</span><br><span class="line">   *           *</span><br><span class="line">  *             *</span><br><span class="line"> *               *</span><br><span class="line">  *             *</span><br><span class="line">   *           *</span><br><span class="line">    *         *</span><br><span class="line">     *       *</span><br><span class="line">      *     *</span><br><span class="line">       *   *</span><br><span class="line">        * *</span><br><span class="line">         *</span><br></pre></td></tr></table></figure>æ€è·¯åˆ†æï¼š</li><li>ç”±ä¸€ä¸ªæ­£ç­‰è…°ä¸‰è§’å½¢å’Œå€’ç­‰è…°ä¸‰è§’å½¢ç»„æˆã€‚</li><li>å¯¹ä¸ŠåŠéƒ¨åˆ†ç­‰è…°ä¸‰è§’å½¢å·¦è¾¹æŒ–ç©ºï¼Œä¸­é—´æŒ–ç©ºã€‚</li><li>å¯¹ä¸‹åŠéƒ¨åˆ†å€’ç­‰è…°ä¸‰è§’å½¢å·¦è¾¹æŒ–ç©ºï¼Œä¸­é—´æŒ–ç©ºã€‚ä¸‹å›¾ä¸ºæ•°å­— 0 æ›¿ä»£æŒ–ç©ºä½ç½®çš„åˆ†ææ€è·¯ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">000000000</span>*</span><br><span class="line"><span class="number">00000000</span>*<span class="number">0</span>*</span><br><span class="line"><span class="number">0000000</span>*<span class="number">000</span>*</span><br><span class="line"><span class="number">000000</span>*<span class="number">00000</span>*</span><br><span class="line"><span class="number">00000</span>*<span class="number">0000000</span>*</span><br><span class="line"><span class="number">0000</span>*<span class="number">000000000</span>*</span><br><span class="line"><span class="number">000</span>*<span class="number">00000000000</span>*</span><br><span class="line"><span class="number">00</span>*<span class="number">0000000000000</span>*</span><br><span class="line"><span class="number">0</span>*<span class="number">000000000000000</span>*</span><br><span class="line"><span class="number">00</span>*<span class="number">0000000000000</span>*</span><br><span class="line"><span class="number">000</span>*<span class="number">00000000000</span>*</span><br><span class="line"><span class="number">0000</span>*<span class="number">000000000</span>*</span><br><span class="line"><span class="number">00000</span>*<span class="number">0000000</span>*</span><br><span class="line"><span class="number">000000</span>*<span class="number">00000</span>*</span><br><span class="line"><span class="number">0000000</span>*<span class="number">000</span>*</span><br><span class="line"><span class="number">00000000</span>*<span class="number">0</span>*</span><br><span class="line"><span class="number">000000000</span>*</span><br></pre></td></tr></table></figure></li></ol><h4 id="ç©ºå¿ƒè±å½¢-æ–¹æ³•äºŒï¼š-å¯¹è§’çº¿ç›¸ç­‰"><a href="#ç©ºå¿ƒè±å½¢-æ–¹æ³•äºŒï¼š-å¯¹è§’çº¿ç›¸ç­‰" class="headerlink" title="ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼š å¯¹è§’çº¿ç›¸ç­‰"></a>ç©ºå¿ƒè±å½¢ æ–¹æ³•äºŒï¼š å¯¹è§’çº¿ç›¸ç­‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> printLingxingRect2()</span><br><span class="line">&#123;</span><br><span class="line">    int r,c,row;</span><br><span class="line">    printf(<span class="string">"è¯·è¾“å…¥è±å½¢çš„å¯¹è§’çº¿çš„é•¿åº¦:"</span>);</span><br><span class="line">    scanf(<span class="string">"%d"</span>,&amp;row);</span><br><span class="line">    <span class="keyword">for</span>(r=<span class="number">1</span>;r&lt;=row*<span class="number">2</span><span class="number">-1</span>;r++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(c=<span class="number">1</span>;c&lt;=row*<span class="number">2</span><span class="number">-1</span>;c++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((r&lt;=row &amp;&amp; (c==row+<span class="number">1</span>-r)) || c==row<span class="number">-1</span>+r)</span><br><span class="line">                printf(<span class="string">"*"</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((r&gt;=row &amp;&amp; (c==r-row+<span class="number">1</span>)) || (c==row+row*<span class="number">2</span><span class="number">-1</span>-r))</span><br><span class="line">                printf(<span class="string">"*"</span>);</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                printf(<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ€è·¯åˆ†æï¼š</p><ol><li>æ ¹æ®è±å½¢çš„å¯¹è§’çº¿ç›¸ç­‰çš„æ•°æ®çŸ¥è¯†ï¼Œé¦–å…ˆç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªçŸ©å½¢å›¾æ¡ˆå¦‚å›¾æ‰€ç¤º: æ•°å­— 0 ä¸ºæŒ–ç©ºé¡¹ã€‚</li><li>ç¬¬ä¸€ä¸ªæ¡ä»¶å…ˆåˆ¤æ–­ä¸ŠåŠéƒ¨åˆ†å·¦è¾¹å’Œå³è¾¹æ˜Ÿæ˜Ÿä½ç½®ã€‚</li><li>ç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­ä¸‹åŠéƒ¨åˆ†å·¦è¾¹å’Œå³è¾¹æ˜Ÿæ˜Ÿçš„ä½ç½®ã€‚</li><li>ä»¥ä¸ŠåŠéƒ¨åˆ†ä¸ºåˆ—  â€œc == row-1+râ€  å’Œ å·¦è¾¹ â€œrow+1-râ€ å¯¹ç§°ã€‚ </li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥è±å½¢çš„å¯¹è§’çº¿çš„é•¿åº¦:<span class="number">9</span></span><br><span class="line"><span class="number">00000000</span>*<span class="number">00000000</span></span><br><span class="line"><span class="number">0000000</span>*<span class="number">0</span>*<span class="number">0000000</span></span><br><span class="line"><span class="number">000000</span>*<span class="number">000</span>*<span class="number">000000</span></span><br><span class="line"><span class="number">00000</span>*<span class="number">00000</span>*<span class="number">00000</span></span><br><span class="line"><span class="number">0000</span>*<span class="number">0000000</span>*<span class="number">0000</span></span><br><span class="line"><span class="number">000</span>*<span class="number">000000000</span>*<span class="number">000</span></span><br><span class="line"><span class="number">00</span>*<span class="number">00000000000</span>*<span class="number">00</span></span><br><span class="line"><span class="number">0</span>*<span class="number">0000000000000</span>*<span class="number">0</span></span><br><span class="line">*<span class="number">000000000000000</span>*</span><br><span class="line"><span class="number">0</span>*<span class="number">0000000000000</span>*<span class="number">0</span></span><br><span class="line"><span class="number">00</span>*<span class="number">00000000000</span>*<span class="number">00</span></span><br><span class="line"><span class="number">000</span>*<span class="number">000000000</span>*<span class="number">000</span></span><br><span class="line"><span class="number">0000</span>*<span class="number">0000000</span>*<span class="number">0000</span></span><br><span class="line"><span class="number">00000</span>*<span class="number">00000</span>*<span class="number">00000</span></span><br><span class="line"><span class="number">000000</span>*<span class="number">000</span>*<span class="number">000000</span></span><br><span class="line"><span class="number">0000000</span>*<span class="number">0</span>*<span class="number">0000000</span></span><br><span class="line"><span class="number">00000000</span>*<span class="number">00000000</span></span><br></pre></td></tr></table></figure><h4 id="æ¨è¾‰ä¸‰è§’"><a href="#æ¨è¾‰ä¸‰è§’" class="headerlink" title="æ¨è¾‰ä¸‰è§’"></a>æ¨è¾‰ä¸‰è§’</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¨è¾‰ä¸‰è§’</span></span><br><span class="line"><span class="keyword">void</span> yanghui_Corner()</span><br><span class="line">&#123;</span><br><span class="line">    int arr[<span class="number">15</span>][<span class="number">15</span>];</span><br><span class="line">    int i,j;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        arr[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        arr[i][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä»ç¬¬ä¸‰è¡Œå¼€å§‹å‡ºç°è§„å¾‹</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">            arr[i][j]=arr[i<span class="number">-1</span>][j]+arr[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=i;j++)&#123;</span><br><span class="line">            printf(<span class="string">"%d\t"</span>,arr[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">3</span>    <span class="number">3</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">4</span>    <span class="number">6</span>    <span class="number">4</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">5</span>    <span class="number">10</span>    <span class="number">10</span>    <span class="number">5</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">6</span>    <span class="number">15</span>    <span class="number">20</span>    <span class="number">15</span>    <span class="number">6</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">7</span>    <span class="number">21</span>    <span class="number">35</span>    <span class="number">35</span>    <span class="number">21</span>    <span class="number">7</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">8</span>    <span class="number">28</span>    <span class="number">56</span>    <span class="number">70</span>    <span class="number">56</span>    <span class="number">28</span>    <span class="number">8</span>    <span class="number">1</span>    </span><br><span class="line"><span class="number">1</span>    <span class="number">9</span>    <span class="number">36</span>    <span class="number">84</span>    <span class="number">126</span>    <span class="number">126</span>    <span class="number">84</span>    <span class="number">36</span>    <span class="number">9</span>    <span class="number">1</span></span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š</p><ol><li>ä»å›¾ä¸­è§‚å¯Ÿåˆ°è§„å¾‹ï¼Œç¬¬äºŒè¡Œå¼€å§‹ï¼Œæ•°å­— 2 æ˜¯å‰ä¸€è¡Œçš„å¯¹åº”åˆ—å’Œå‰ä¸€ä¸ªä½ç½®ç›¸åŠ æ‰€å¾—ç»“æœã€‚</li><li>æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªä½ç½®éƒ½æ˜¯ 1ï¼Œæ¯ä¸€è¡Œçš„æœ€åä¸€ä¸ªä½ç½®éƒ½æ˜¯ 1ã€‚</li><li>ç¬¬ä¸€æ­¥ï¼š å»ºç«‹äºŒç»´æ•°ç»„ã€‚å…ˆç»™æ¯ä¸€è¡Œçš„çš„ç¬¬ä¸€ä¸ªä½ç½®å’Œ n è¡Œçš„ç¬¬ n ä¸ªä½ç½®èµ‹å€¼1ã€‚</li><li>ç¬¬äºŒæ­¥ï¼šä»ç¬¬ 3 è¡Œå¼€å§‹å‡ºç°è§„å¾‹å¯å¾—å‡º â€œarr[i][j]=arr[i-1][j]+arr[i-1][j-1]â€  è¡¨è¾¾å¼ã€‚<h4 id="èºæ—‹çŸ©é˜µ"><a href="#èºæ—‹çŸ©é˜µ" class="headerlink" title="èºæ—‹çŸ©é˜µ"></a>èºæ—‹çŸ©é˜µ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#define len 9</span><br><span class="line"><span class="keyword">void</span> luoxuan()&#123;</span><br><span class="line">    int arr[len][len];</span><br><span class="line">    <span class="comment">//å¼€å§‹åˆå§‹åŒ–ï¼Œç»™æ•°ç»„èµ‹å€¼0</span></span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(int j=<span class="number">0</span>;j&lt;len;j++)&#123;</span><br><span class="line">            arr[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">//é¡¶è§’ç¡®å®šäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºç¬¬ä¸€è¡Œå³è¾¹çš„æ•°å­—</span></span><br><span class="line">    int circleTimes = len/<span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    int circelIndex = <span class="number">0</span>; <span class="comment">//åœˆçš„æ•°é‡</span></span><br><span class="line">    <span class="comment">//èµ‹å€¼è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">while</span>(circleTimes&gt;<span class="number">0</span>)&#123;  <span class="comment">//æµ‹è¯•æ—¶å€™ï¼Œæ¯ä¸€åœˆç»“æŸå¯ä»¥æ‰“å°å‡ºçœ‹ä¸€ä¸‹ï¼š&amp;&amp; circelIndex &lt;1</span></span><br><span class="line">        circelIndex ++;</span><br><span class="line">        printf(<span class="string">"ç¬¬%dåœˆ\n"</span>,circelIndex);</span><br><span class="line">        <span class="keyword">for</span>(int column = <span class="number">1</span>;column &lt;= len-circelIndex; column++)&#123;  <span class="comment">//å¾€å³æ’åˆ—</span></span><br><span class="line">            <span class="keyword">if</span>(column &gt;= circelIndex<span class="number">-1</span>)&#123;</span><br><span class="line">                arr[circelIndex<span class="number">-1</span>][column] = arr[circelIndex <span class="number">-1</span>][column<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(int row = circelIndex; row&lt;= len-circelIndex; row++)&#123; <span class="comment">//å¾€ä¸‹æ’åˆ—ï¼Œä»ç¬¬äºŒè¡Œï¼Œç¬¬X-i åˆ—å¼€å§‹</span></span><br><span class="line">            arr[row][len-circelIndex] = arr[row<span class="number">-1</span>][len-circelIndex] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(int column = len-circelIndex<span class="number">-1</span>; column &gt;= circelIndex<span class="number">-1</span>; column--)&#123; <span class="comment">//å¾€å·¦æ’ï¼Œä¸‹æ ‡é€’å‡1ï¼Œå€¼ä¸ºåä¸€ä¸ª + 1</span></span><br><span class="line">            arr[len-circelIndex][column] = arr[len-circelIndex][column+<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(int row =len-circelIndex<span class="number">-1</span>; row &gt; circelIndex<span class="number">-1</span>; row--)&#123; <span class="comment">//å¾€ä¸Šæ’åˆ—</span></span><br><span class="line">            arr[row][circelIndex<span class="number">-1</span>] = arr[row+<span class="number">1</span>][circelIndex<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        circleTimes--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¾“å‡ºäºŒç»´æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(int j=<span class="number">0</span>;j&lt;len;j++)&#123;</span><br><span class="line">            printf(<span class="string">"%d\t"</span>,arr[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\n\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/luoxun_line.png" width="375px"></li></ol><p>æ€è·¯åˆ†æï¼š<br>ç”±ä¸Šå›¾ï¼Œå½“æˆ‘ä»¬æ‰“å° 9 è¡Œçš„æ—¶å€™ï¼Œåˆ—ä¹Ÿæ˜¯ 9 åˆ—ã€‚ç¡®å®šäºŒç»´æ•°ç»„çš„é•¿åº¦ã€‚ä¸ºäº†æ–¹ä¾¿è§†è§‰ä¸Šå¯ä»¥è§‚å¯Ÿå‡ºæ¯ä¸€æ¬¡ç»•åœˆèµ‹å€¼çš„æ•ˆæœï¼Œå¯å°†äºŒç»´æ•°ç»„æ¯ä¸€ä¸ªä½ç½®åˆå§‹åŒ–èµ‹å€¼ä¸º 0ã€‚æ ¹æ® 9 è¡Œï¼Œæˆ‘ä»¬ç¡®å®šç»•åœˆæ•°ä¸º circleTimes = 5ã€‚ç¡®å®šå¾ªç¯æ¡ä»¶ä¹‹åï¼Œä¸ºæ¯ä¸€æ¬¡ç»•åœˆçš„äºŒç»´æ•°ç»„æŸäº›ä½ç½®èµ‹å€¼ã€‚ä¾æ¬¡ä»å‘å³ã€å‘ä¸‹ã€å‘å·¦ã€å‘ä¸Šè¿›è¡Œèµ‹å€¼ã€‚circleTimes åœˆæ•°ç›¸å¯¹åº”å‡ 1ã€‚</p><ol><li><p>å¾€å³æ’åˆ—ï¼šåˆ—çš„èµ·å§‹ä½ç½®ä¸º1ï¼Œæ¡ä»¶ä¸º len - circleIndexï¼Œå€¼ä¸ºç›¸åŒè¡Œçš„å‰ä¸€åˆ—çš„å€¼åŠ  1ã€‚èµ‹å€¼çš„æ—¶å€™è¿˜éœ€æ§åˆ¶åˆ—å¤§äºç­‰äº circleIndex å‡ 1ã€‚å¦‚å›¾æ‰€ç¤ºæ§åˆ¶ 32ï¼Œ56ï¼Œ72ï¼Œ80ï¼Œ81 çš„åˆ—èµ·å§‹ä½ç½®ã€‚</p></li><li><p>å¾€ä¸‹æ’åˆ—ï¼šè¡Œçš„èµ·å§‹ä½ç½®ä¸ºç¬¬å‡ åœˆçš„ç´¢å¼•ï¼Œ å€¼ä¸ºå‰ä¸€è¡Œçš„ç›¸åŒåˆ—çš„å€¼åŠ  1ã€‚</p></li><li><p>å¾€å·¦æ’åˆ—ï¼šåˆ—èµ·å§‹ä½ç½®ä¸º len - ç¬¬å‡ åœˆ - 1ï¼Œå€¼ä¸ºåŒè¡Œçš„åä¸€åˆ—å€¼åŠ  1ã€‚</p></li><li><p>å¾€ä¸Šæ’åˆ—ï¼šè¡Œçš„èµ·å§‹ä½ç½®ä¸º len - ç¬¬å‡ åœˆ -1ï¼Œå€¼ä¸ºç›¸åŒåˆ—çš„åä¸€è¡Œå€¼åŠ  1ã€‚</p></li></ol><h4 id="è›‡å½¢çŸ©é˜µ1"><a href="#è›‡å½¢çŸ©é˜µ1" class="headerlink" title="è›‡å½¢çŸ©é˜µ1"></a>è›‡å½¢çŸ©é˜µ1</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    1 3 6 10 15</span></span><br><span class="line"><span class="comment">    2 5 9 14  </span></span><br><span class="line"><span class="comment">    4 8 13  </span></span><br><span class="line"><span class="comment">    7 12  </span></span><br><span class="line"><span class="comment">    11</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    </span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        Test3 t=<span class="keyword">new</span> Test3();</span><br><span class="line">        t.test(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public <span class="keyword">void</span> test(int n)  &#123;</span><br><span class="line">        int arr[][]=<span class="keyword">new</span> int[n][n]; </span><br><span class="line">        arr[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        int column=n;</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; column; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(j==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="keyword">if</span>(i&gt;<span class="number">0</span>)</span><br><span class="line">                     arr[i][j]=arr[i<span class="number">-1</span>][j]+i;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    arr[i][j]=arr[i][j<span class="number">-1</span>]+(i+<span class="number">1</span>+j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">           column-=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i][j]!=<span class="number">0</span>)</span><br><span class="line">                System.out.print(arr[i][j]+<span class="string">" "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š</p><ol><li>ç¬¬nè¡Œç¬¬ä¸€åˆ—å€¼ä¸ºå‰ä¸€è¡Œçš„ç¬¬ä¸€åˆ—å€¼åŠ  nã€‚</li><li>å…¶ä»–åˆ—èµ‹å€¼ä¸ºå‰ä¸€åˆ—å€¼åŠ è¡Œ i å’Œåˆ— j å†åŠ  1ã€‚</li><li>æ§åˆ¶ç¬¬äºŒå±‚å¾ªç¯åˆ—çš„èŒƒå›´ï¼Œåˆ—éšè¡Œå˜åŒ–é€’å‡ã€‚</li></ol><h4 id="è›‡å½¢çŸ©é˜µ2"><a href="#è›‡å½¢çŸ©é˜µ2" class="headerlink" title="è›‡å½¢çŸ©é˜µ2"></a>è›‡å½¢çŸ©é˜µ2</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å°ç»“æœï¼š</span><br><span class="line"><span class="number">1</span>    <span class="number">2</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">15</span>    <span class="number">16</span>    <span class="number">28</span>    <span class="number">29</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">3</span>    <span class="number">5</span>    <span class="number">8</span>    <span class="number">14</span>    <span class="number">17</span>    <span class="number">27</span>    <span class="number">30</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">4</span>    <span class="number">9</span>    <span class="number">13</span>    <span class="number">18</span>    <span class="number">26</span>    <span class="number">31</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">10</span>    <span class="number">12</span>    <span class="number">19</span>    <span class="number">25</span>    <span class="number">32</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">11</span>    <span class="number">20</span>    <span class="number">24</span>    <span class="number">33</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">21</span>    <span class="number">23</span>    <span class="number">34</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">22</span>    <span class="number">35</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">36</span>   </span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        Test4 t=<span class="keyword">new</span> Test4();</span><br><span class="line">        t.printData(t.test2(<span class="number">8</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int[][] test2(int n)&#123;</span><br><span class="line">        int arr[][]=<span class="keyword">new</span> int[n][n];</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (int j=<span class="number">0</span>,c=i;j&lt;=i&amp;&amp;c&gt;=<span class="number">0</span>;j++,c--) &#123;</span><br><span class="line">                <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="keyword">if</span>(c==i)&#123;</span><br><span class="line">                         <span class="keyword">if</span>(c==<span class="number">0</span>)</span><br><span class="line">                            arr[c][j]=<span class="number">1</span>; <span class="comment">//arr[0][0] = 1</span></span><br><span class="line">                         <span class="keyword">else</span></span><br><span class="line">                           arr[c][j]=arr[c<span class="number">-1</span>][j]+<span class="number">1</span>; <span class="comment">//å‰ä¸€è¡ŒåŠ 1</span></span><br><span class="line">                     &#125;</span><br><span class="line">                     <span class="keyword">else</span> </span><br><span class="line">                        arr[c][j]=arr[c+<span class="number">1</span>][j<span class="number">-1</span>]+<span class="number">1</span>; <span class="comment">//åä¸€è¡Œå‰ä¸€åˆ—åŠ 1</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                     <span class="keyword">if</span>(c==i)</span><br><span class="line">                        arr[j][c]=arr[j][c<span class="number">-1</span>]+<span class="number">1</span>; <span class="comment">//å‰ä¸€åˆ—åŠ 1</span></span><br><span class="line">                     <span class="keyword">else</span></span><br><span class="line">                       arr[j][c]=arr[j<span class="number">-1</span>][c+<span class="number">1</span>]+<span class="number">1</span>;<span class="comment">//å‰ä¸€è¡Œåä¸€åˆ—åŠ 1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">void</span> printData(int arr[][])&#123;</span><br><span class="line">        int n=arr.length;</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (int j = <span class="number">0</span>; j &lt; n; j++) &#123;    </span><br><span class="line">                <span class="keyword">if</span>(arr[i][j]&gt;=<span class="number">10</span>)</span><br><span class="line">                  System.out.print(arr[i][j]+<span class="string">" "</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                  <span class="keyword">if</span>(arr[i][j]!=<span class="number">0</span>)</span><br><span class="line">                  System.out.print(<span class="string">"0"</span>+arr[i][j]+<span class="string">" "</span>);</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š<br>æ ¹æ®è§„å¾‹ï¼Œæ ¹æ®è¡Œä¸‹æ ‡å¥‡å¶æ•°æ‹†åˆ†èµ‹å€¼ã€‚</p><ul><li>æ•°å­— {02,07,16,29} ä¸ºåœ¨å‰ä¸€åˆ—åŠ  1ã€‚æ•°å­— {03,08,17,30} ä¸ºå‰ä¸€è¡Œçš„åä¸€åˆ—åŠ  1ã€‚</li><li>æ•°å­— {05,06,15,28} ä¸ºåä¸€è¡Œçš„å‰ä¸€åˆ—åŠ  1ã€‚æ•°å­— 4 ä¸ºå‰ä¸€è¡ŒåŠ  1ã€‚</li></ul><h4 id="è›‡å½¢çŸ©é˜µ2-1"><a href="#è›‡å½¢çŸ©é˜µ2-1" class="headerlink" title="è›‡å½¢çŸ©é˜µ2"></a>è›‡å½¢çŸ©é˜µ2</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   1 </span></span><br><span class="line"><span class="comment">   5     2</span></span><br><span class="line"><span class="comment">   8     6     3</span></span><br><span class="line"><span class="comment">   10    9     7      4</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">   è§‚å¯Ÿ</span></span><br><span class="line"><span class="comment">     arr[1][0]  arr[3][3] </span></span><br><span class="line"><span class="comment">     arr[2][0]  arr[3][2]          </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        Test5 t=<span class="keyword">new</span> Test5();</span><br><span class="line">        t2.printData(t.test(<span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public int[][] test(int n)&#123;</span><br><span class="line">        int arr[][]=<span class="keyword">new</span> int[n][n];</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (int j = <span class="number">0</span>,c=i;j&lt;n&amp;&amp;c&lt;n; j++,c++) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(c==i)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(c==<span class="number">0</span>)</span><br><span class="line">                           arr[c][j]=<span class="number">1</span>; <span class="comment">//arr[0][0] = 1</span></span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                           arr[c][<span class="number">0</span>]=arr[n<span class="number">-1</span>][n-c]+<span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;</span><br><span class="line">                        arr[c][j]=arr[c<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">                    &#125;    </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¶£å‘³ä¹ é¢˜"><a href="#è¶£å‘³ä¹ é¢˜" class="headerlink" title="è¶£å‘³ä¹ é¢˜"></a>è¶£å‘³ä¹ é¢˜</h3><h4 id="æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ"><a href="#æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ" class="headerlink" title="æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ"></a>æ‰“å°æŸå¹´æŸæœˆæ—¥å†æ’ç‰ˆ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> showDateBookDetail()</span><br><span class="line">&#123;</span><br><span class="line">    int year, month;</span><br><span class="line">    int sumYearDays = <span class="number">0</span>;  <span class="comment">//è¯¥å˜é‡æ˜¯ç»Ÿè®¡åˆ°ç°åœ¨çš„æ€»å¹´æ•°å¤©æ•°</span></span><br><span class="line">    int sumMonthDays = <span class="number">0</span>; <span class="comment">//æœˆä»½æ€»å¤©æ•°</span></span><br><span class="line">    int sumDays = <span class="number">0</span>;<span class="comment">//æ€»å¤©æ•°</span></span><br><span class="line">    int week; <span class="comment">//æ˜ŸæœŸ</span></span><br><span class="line">    int y, i;</span><br><span class="line">    int monthArr[] = &#123;<span class="number">31</span>, <span class="number">28</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>&#125;;  <span class="comment">//12ä¸ªæœˆçš„å¤©æ•°</span></span><br><span class="line">    printf(<span class="string">"è¯·è¾“å…¥ä¸€ä¸ªæ—¥æœŸ(åˆ—å¦‚ 2019-10):"</span>);</span><br><span class="line">    scanf(<span class="string">"%d-%d"</span>, &amp;year, &amp;month);  <span class="comment">//å¹´-æœˆ-æ—¥</span></span><br><span class="line">    <span class="comment">//æ€è·¯: 1900å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸä¸€</span></span><br><span class="line">    <span class="keyword">for</span>(y = <span class="number">1900</span>; y &lt; year; y++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y % <span class="number">400</span> == <span class="number">0</span> || (y %  <span class="number">4</span> == <span class="number">0</span> &amp;&amp; y % <span class="number">100</span> != <span class="number">0</span>))&#123;</span><br><span class="line">            sumYearDays += <span class="number">366</span>;     <span class="comment">//é—°å¹´ åŠ 366å¤©</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            sumYearDays += <span class="number">365</span>; <span class="comment">//å¹³å¹´ åŠ 365å¤©</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é—°å¹´çš„äºŒæœˆä»½</span></span><br><span class="line">    <span class="keyword">if</span>(year % <span class="number">400</span> == <span class="number">0</span> || (year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) )&#123;</span><br><span class="line">        monthArr[<span class="number">1</span>] = <span class="number">29</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç´¯åŠ ä»Šå¹´çš„æœˆä»½å¤©æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i &lt; month<span class="number">-1</span>; i++)&#123;</span><br><span class="line">        sumMonthDays += monthArr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    sumDays = sumYearDays + sumMonthDays + <span class="number">1</span>;  <span class="comment">//æ€»å¤©æ•°= å¹´å¾—æ€»å¤©æ•°+æœˆã€å·å¾—æ€»å¤©æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ±‚æœ¬æœˆçš„ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡  ä½™æ•°</span></span><br><span class="line">    week = sumDays % <span class="number">7</span>;</span><br><span class="line">    </span><br><span class="line">    printf(<span class="string">"æ—¥\tä¸€\täºŒ\tä¸‰\tå››\täº”\tå…­\n\n"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; week; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(<span class="string">"\t"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= monthArr[month - <span class="number">1</span>]; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(<span class="string">"%d\t"</span> , i);</span><br><span class="line">        <span class="keyword">if</span>((i + week) % <span class="number">7</span> == <span class="number">0</span>)</span><br><span class="line">            printf(<span class="string">"\n\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥ä¸€ä¸ªæ—¥æœŸ(åˆ—å¦‚ <span class="number">2020</span><span class="number">-01</span>):<span class="number">2020</span><span class="number">-01</span></span><br><span class="line">æ—¥    ä¸€    äºŒ    ä¸‰    å››    äº”    å…­</span><br><span class="line"></span><br><span class="line">            <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>    <span class="number">10</span>    <span class="number">11</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">12</span>    <span class="number">13</span>    <span class="number">14</span>    <span class="number">15</span>    <span class="number">16</span>    <span class="number">17</span>    <span class="number">18</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">19</span>    <span class="number">20</span>    <span class="number">21</span>    <span class="number">22</span>    <span class="number">23</span>    <span class="number">24</span>    <span class="number">25</span>    </span><br><span class="line"></span><br><span class="line"><span class="number">26</span>    <span class="number">27</span>    <span class="number">28</span>    <span class="number">29</span>    <span class="number">30</span>    <span class="number">31</span>    </span><br><span class="line"></span><br><span class="line">Program ended <span class="keyword">with</span> exit code: <span class="number">0</span></span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š</p><ol><li>æ‰“å°æ—¥å†é¦–å…ˆè¦ç¡®å®šæŸä¸ªæœˆçš„ 1 å·æ˜¯æ˜ŸæœŸå‡ ã€‚</li><li>æ ¹æ® 1900 å¹´ 1 æœˆ 1 æ—¥è‡³æŸæœˆ 1 æ—¥çš„æ€»å¤©æ•° %7 æ‰€å¾—ä½™æ•°å°±å¾—çŸ¥æŸæœˆ 1 å·æ˜¯æ˜ŸæœŸå‡ ã€‚</li><li>å¾ªç¯å½“æœˆæ€»å¤©æ•° %7 è¿›è¡Œæ¢è¡Œï¼Œä¾æ¬¡æ‰“å°æ¯ä¸€å¤©çš„æ’ç‰ˆã€‚</li></ol><h4 id="æ‰¾å‡ºæœ€é•¿çš„å•è¯"><a href="#æ‰¾å‡ºæœ€é•¿çš„å•è¯" class="headerlink" title="æ‰¾å‡ºæœ€é•¿çš„å•è¯"></a>æ‰¾å‡ºæœ€é•¿çš„å•è¯</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> countWords()&#123;</span><br><span class="line">    </span><br><span class="line">    char str[<span class="number">100</span>] = <span class="string">"hello, my name is gaogaoProgramer, welcome to come here!"</span>;</span><br><span class="line">    int index;</span><br><span class="line">    long len = strlen(str);</span><br><span class="line">    int spaceIndex = <span class="number">0</span>;  <span class="comment">//ä»ç¬¬ä¸€ä¸ªä¸‹æ ‡å¼€å§‹ç®—</span></span><br><span class="line">    int recordMax = <span class="number">0</span>; <span class="comment">//å•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®å³ä¸ºæœ€é•¿å•è¯</span></span><br><span class="line">    int beforeIndex = <span class="number">0</span>,afterIndex = <span class="number">0</span>; <span class="comment">//å®šä¹‰æœ€é•¿å•è¯çš„å‰ç©ºæ ¼ï¼Œåç©ºæ ¼</span></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; len; index++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(str[index] == <span class="number">32</span>)&#123; <span class="comment">//åˆ¤æ–­ç©ºæ ¼</span></span><br><span class="line">            <span class="keyword">if</span>(index - spaceIndex &gt; recordMax)&#123;</span><br><span class="line">                recordMax = index - spaceIndex;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//è®°å½•å‰ä¸‹æ ‡å’Œåä¸‹æ ‡ã€‚</span></span><br><span class="line">                beforeIndex = spaceIndex;</span><br><span class="line">                afterIndex = index;</span><br><span class="line">            &#125;</span><br><span class="line">            spaceIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    printf(<span class="string">"åŸå§‹å•è¯ä¸ºï¼š%s"</span>,str);</span><br><span class="line">    printf(<span class="string">"\nå•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®:%d å‰ä¸‹æ ‡:%d,åä¸‹æ ‡:%d"</span>,recordMax,beforeIndex,afterIndex);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡ºæ‰¾åˆ°çš„å•è¯ï¼›</span></span><br><span class="line">    printf(<span class="string">"\n\næ‰¾åˆ°çš„æœ€é•¿åº¦å•è¯ä¸ºï¼š"</span>);</span><br><span class="line">    int charIndex;</span><br><span class="line">    <span class="keyword">for</span>(charIndex = beforeIndex; charIndex&lt; afterIndex ; charIndex++)&#123;</span><br><span class="line">        printf(<span class="string">"%c"</span>,str[charIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯ä¸ªå•è¯çš„åˆ’åˆ†ç®€å•è§„å®šè®¤ä¸ºæ˜¯ç©ºæ ¼åˆ†éš”å³ä¸ºä¸€ä¸ªå•è¯ã€‚æ‰€ä»¥æˆ‘ä»¬ç»Ÿè®¡æ¯ä¸€ä¸ªç©ºæ ¼çš„ä¸‹æ ‡ï¼Œè®°å½•ç©ºæ ¼ä¸‹æ ‡çš„æœ€å¤§å·®å€¼ã€‚è®°å½•èµ·å§‹ä¸‹æ ‡å’Œç»ˆæ­¢ä¸‹æ ‡ã€‚è¿™æ ·å°±æ‰¾åˆ°äº†ä¸€ä¸ªæœ€é•¿çš„å•è¯ã€‚</p><h4 id="é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­"><a href="#é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­" class="headerlink" title="é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­"></a>é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> revertString()</span><br><span class="line">&#123;</span><br><span class="line">    int i,start=<span class="number">0</span>;</span><br><span class="line">    char str[<span class="number">4096</span>] = <span class="string">"I am a SoftWare Programer"</span>;</span><br><span class="line">    char min1 = str[<span class="number">0</span>];</span><br><span class="line">    char t;</span><br><span class="line">    printf(<span class="string">"ç»“æœï¼š%d \n"</span>,min1);</span><br><span class="line">    </span><br><span class="line">    int len = strlen(str);</span><br><span class="line">    int end = len<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(start&lt;=end) <span class="comment">//é¢ å€’æ•´ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    &#123;</span><br><span class="line">        t=str[start];</span><br><span class="line">        str[start]=str[end];</span><br><span class="line">        str[end]=t;</span><br><span class="line">        start++;</span><br><span class="line">        end--;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(<span class="string">"é¢ å€’åçš„å­—ç¬¦ä¸²æ˜¯ï¼š%s"</span>,str);</span><br><span class="line">    </span><br><span class="line">    start=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)  <span class="comment">//é¢ å€’ä¸€ä¸ªå•è¯</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(str[i]==<span class="number">32</span>||str[i+<span class="number">1</span>]==<span class="number">0</span>)  <span class="comment">//å¦‚æœæ˜¯ç©ºæ ¼ æˆ–æ˜¯ç»“å°¾</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==len<span class="number">-1</span>)  <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ€åä¸€ä¸ª</span></span><br><span class="line">                end=i;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                end=i<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">while</span>(start&lt;=end)  <span class="comment">//è°ƒæ¢ç©ºæ ¼ä¸ç©ºæ ¼ä¹‹é—´</span></span><br><span class="line">            &#123;</span><br><span class="line">                t=str[start];</span><br><span class="line">                str[start]=str[end];</span><br><span class="line">                str[end]=t;</span><br><span class="line">                start++;</span><br><span class="line">                end--;</span><br><span class="line">            &#125;</span><br><span class="line">            start=i+<span class="number">1</span>; <span class="comment">//èµ·å§‹ä½ç½®</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    printf(<span class="string">"\nè¾“å‡ºï¼š"</span>);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(<span class="string">"%c"</span>,str[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šC è¯­è¨€ç‰ˆæœ¬é¦–å…ˆæˆ‘ä»¬æƒ³åˆ°çš„æ˜¯å€’è½¬æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åå†æ ¹æ®ç©ºæ ¼åˆ†å‰²å¾ªç¯ä¾æ¬¡å†å€’è½¬æ¯ä¸€ä¸ªå•è¯ï¼Œè¿™æ ·å°±å®ç°äº†å€’è½¬æ•´ä¸ªå¥å­ã€‚</p><h4 id="é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­-Javaç‰ˆæœ¬"><a href="#é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­-Javaç‰ˆæœ¬" class="headerlink" title="é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬"></a>é¢ å€’ä¸€ä¸²è‹±æ–‡å¥å­ Javaç‰ˆæœ¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">reverseString</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ—‹è½¬å­—ç¬¦ä¸²  å¦‚ï¼š I am a student  </span></span><br><span class="line"><span class="comment">     * ç»“æœä¸ºï¼š student a am I </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> reverse(<span class="built_in">String</span> arr[])</span><br><span class="line">    &#123;</span><br><span class="line">        int start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (int end = arr.length - <span class="number">1</span>; start &lt; end; end--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">String</span> temp = arr[start];</span><br><span class="line">            arr[start] = arr[end];</span><br><span class="line">            arr[end] = temp;</span><br><span class="line">            start++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"\né¢ å€’åçš„ç»“æœä¸ºï¼š"</span>);</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; arr.length; i++)</span><br><span class="line">     System.out.print((<span class="keyword">new</span> StringBuilder(<span class="built_in">String</span>.valueOf(arr[i]))).append(<span class="string">" "</span>).toString());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        System.out.println(<span class="string">"è¯·è¾“å…¥ä¸€ä¸²å­—ç¬¦"</span>);</span><br><span class="line">        Scanner input=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="built_in">String</span> str=input.nextLine();</span><br><span class="line">        <span class="built_in">String</span> arr[]=str.split(<span class="string">" "</span>);</span><br><span class="line">         reverse(arr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šJava ç‰ˆæœ¬çš„å€’è½¬æ€è·¯æ¯”è¾ƒç®€å•ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨å­—ç¬¦çªœæ–¹æ³•æ ¹æ®ç©ºæ ¼åˆ†å‰²æˆä¸€ä¸ªå­—ç¬¦çªœæ•°ç»„ã€‚ç„¶åå†é’ˆå¯¹æ•°ç»„å…ƒç´ è¿›è¡Œå€’è½¬è°ƒæ¢ä½ç½®ã€‚</p><h4 id="ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°"><a href="#ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°" class="headerlink" title="ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°"></a>ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ‡è®°æ³•</span></span><br><span class="line">public <span class="keyword">void</span> randomTest2()&#123;</span><br><span class="line">    Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    long[] arr =<span class="keyword">new</span> long[<span class="number">15</span>];</span><br><span class="line">    boolean flag[] = <span class="keyword">new</span> boolean[<span class="number">15</span>];</span><br><span class="line">    flag[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(int index=<span class="number">1</span>; index&lt;flag.length; index++)&#123;</span><br><span class="line">        flag[index] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">0</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">        int num = r.nextInt(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">if</span>(!flag[num])&#123; <span class="comment">//åªéœ€åˆ¤æ–­æ ‡è®°æ•°ç»„ä¸­å¯¹åº”çš„æ•°å­—ä½ç½®å­˜å‚¨çš„çŠ¶æ€å°±å¯ä»¥çŸ¥é“æ˜¯å¦äº§ç”Ÿè¿‡è¯¥éšæœºæ•°</span></span><br><span class="line">            arr[i] = num;</span><br><span class="line">            flag[num] = <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡º15ä¸ªæ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š ç”Ÿæˆä¸é‡å¤çš„å°èŒƒå›´æ•°å­—ï¼Œæˆ‘æƒ³åˆ°æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ </p><ul><li>ç¬¬ä¸€ç§æ˜¯æ¯ä¸€æ¬¡ç”Ÿæˆï¼Œè¦å¾ªç¯å»æ£€éªŒå·²ç”Ÿæˆçš„éšæœºæ•°æ•°ç»„ä¸­æ˜¯å¦åŒ…å«è¯¥æ•°å­—ã€‚</li><li>ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯ç”¨å¦å¤–ä¸€ä¸ªæ•°ç»„å¸ƒå°”å€¼æ¥å­˜å‚¨ï¼Œå½“å·²ç”ŸæˆéšæœºæŸæ•°æ—¶ï¼Œå°±æŠŠå¯¹åº”çš„å¸ƒå°”å€¼æ•°ç»„è®¾ç½®éšæœºä¸‹æ ‡æ•°å€¼ä¸º trueã€‚å½“ä¸‹æ¬¡å†ç”Ÿæˆçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥å‘½ä¸­æ— éœ€æŸ¥æ‰¾æ•°ç»„å…ƒç´ ã€‚ è¿™ä¹Ÿæ˜¯å€Ÿé‰´ map å­˜å–æ•°æ®çš„æ–¹å¼ï¼Œç›´æ¥æ ¹æ® key å‘½ä¸­æ•°æ®ã€‚key åˆ™ç›¸å½“äºé‚£ä¸ªéšæœºæ•°ã€‚</li></ul><h4 id="ç»Ÿè®¡ç­çº§æˆç»©æ’å-javaç‰ˆæœ¬"><a href="#ç»Ÿè®¡ç­çº§æˆç»©æ’å-javaç‰ˆæœ¬" class="headerlink" title="ç»Ÿè®¡ç­çº§æˆç»©æ’å javaç‰ˆæœ¬"></a>ç»Ÿè®¡ç­çº§æˆç»©æ’å javaç‰ˆæœ¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">SameSCore</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»Ÿè®¡åŒæˆç»©çš„äººæ•°</span></span><br><span class="line"><span class="comment">     * æ¨æ–­è¿‡ç¨‹ï¼š ç¬¬ä¸€åæ‰¾å‡ºå ï¼Œç»Ÿè®¡å’Œç¬¬ä¸€åç›¸ç­‰çš„åˆ†æ•°æœ‰å‡ ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="variable">args</span></span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line"></span><br><span class="line">        int arr[] = &#123; <span class="number">65</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">50</span>, <span class="number">70</span>, <span class="number">80</span> &#125;;</span><br><span class="line">        Arrays.sort(arr); <span class="comment">// å‡åºæ’åˆ—</span></span><br><span class="line">        int len = arr.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"è¯·è¾“å…¥å‰å¤šå°‘å?"</span>);</span><br><span class="line">        Scanner input=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        int num=input.nextInt();</span><br><span class="line">        </span><br><span class="line">        int count[] = <span class="keyword">new</span> int[num+<span class="number">1</span>];  <span class="comment">//ç”±äºç¬¬1ä¸ªä¸å–ï¼Œæ‰€ä»¥é•¿åº¦æ¯”å®é™…çš„åŠ 1 ï¼Œå­˜å‚¨ç¬¬å¤šå°‘åçš„   æ•°æ® </span></span><br><span class="line">        int score[]=<span class="keyword">new</span> int[len+<span class="number">1</span>];   <span class="comment">//æˆç»© </span></span><br><span class="line">        <span class="comment">//ç¬¬å‡ å å¤šå°‘ä¸ªåŒå­¦</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (int k = <span class="number">1</span>; k &lt;= count.length<span class="number">-1</span>; k++) &#123;</span><br><span class="line">            int hasCount=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(int j=<span class="number">1</span>;j&lt;=k;j++)&#123;</span><br><span class="line">                hasCount+=count[j];   <span class="comment">//å·²ç»ç»Ÿè®¡çš„ä¸ªæ•°</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (int i = len - hasCount; i &gt;= <span class="number">0</span>; i--) &#123; <span class="comment">//ç»Ÿè®¡ç¬¬å‡ åé‡å¤äº†å‡ ä¸ª</span></span><br><span class="line">                <span class="keyword">if</span> (arr[i] == arr[len - hasCount]) &#123;</span><br><span class="line">                    score[k]=arr[len - hasCount];  <span class="comment">//ç¬¬å‡ åçš„åˆ†æ•°</span></span><br><span class="line">                    count[k]++;  <span class="comment">//ç¬¬å‡ åçš„ä¸ªæ•°</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç»“æœï¼š</span></span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">1</span>; i &lt;count.length; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"ç¬¬"</span> + i + <span class="string">"å,æˆç»©ä¸º"</span>+score[i]+<span class="string">"ï¼š"</span> + count[i]);</span><br><span class="line">            &#125;<span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">                    System.out.println(<span class="string">"ç¬¬"</span>+i+<span class="string">"åè¶…å‡ºèŒƒå›´å“¦!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»Ÿè®¡ç­çº§æˆç»©æ’å-C-ç‰ˆæœ¬"><a href="#ç»Ÿè®¡ç­çº§æˆç»©æ’å-C-ç‰ˆæœ¬" class="headerlink" title="ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬"></a>ç»Ÿè®¡ç­çº§æˆç»©æ’å C ç‰ˆæœ¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> statisticsScoreDescCount ()&#123;</span><br><span class="line"></span><br><span class="line">    int arr[<span class="number">10</span>]=&#123;<span class="number">20</span>,<span class="number">30</span>,<span class="number">50</span>,<span class="number">60</span>,<span class="number">60</span>,<span class="number">76</span>,<span class="number">85</span>,<span class="number">85</span>,<span class="number">96</span>,<span class="number">96</span>&#125;;  <span class="comment">//å·²ç»å‡åºçš„æ•°ç»„</span></span><br><span class="line">    char names[<span class="number">10</span>][<span class="number">20</span>]=&#123;<span class="string">"jack"</span>,<span class="string">"running"</span>,<span class="string">"lucy"</span>,<span class="string">"mary"</span>,<span class="string">"hong"</span>,<span class="string">"liu"</span>,<span class="string">"wike"</span>,<span class="string">"smith"</span>,<span class="string">"boss"</span>,<span class="string">"younth"</span>&#125;;</span><br><span class="line">    int hasCount=<span class="number">0</span>; <span class="comment">//å·²ç»ç»Ÿè®¡äº†çš„ä¸ªæ•°</span></span><br><span class="line">    int count[ScoreSystemArrLen+<span class="number">1</span>]=&#123;<span class="number">0</span>&#125;;  <span class="comment">//ç¬¬ä¸€ä¸ªnum[0]ä¸è¦ï¼Œè®°å½•ç¬¬å‡ åçš„ä¸ªæ•°ã€‚</span></span><br><span class="line">    int score[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;  <span class="comment">//ç»Ÿè®¡æˆç»©  score[1]=96  score[2]=85  è®°å½•ç¬¬å‡ åçš„æˆç»©</span></span><br><span class="line">    int k,j,i,c=<span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=ScoreSystemArrLen;k++)  <span class="comment">//å¤„ç†è¿‡ç¨‹</span></span><br><span class="line">    &#123;</span><br><span class="line">        hasCount=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            hasCount+=count[j];  <span class="comment">// ç»Ÿè®¡å‰é¢å‡ºç°çš„æ€»ä¸ªæ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">9</span>-hasCount; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == arr[<span class="number">9</span> - hasCount])</span><br><span class="line">            &#123;</span><br><span class="line">                score[k]=arr[<span class="number">9</span> - hasCount];  <span class="comment">//è®°å½•å…·ä½“ç¬¬å‡ åçš„åˆ†æ•°</span></span><br><span class="line">                count[k]++;  <span class="comment">//è®°å½•å…·ä½“ç¬¬å‡ åçš„ä¸ªæ•°</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;ScoreSystemArrLen+<span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        hasCount=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)<span class="comment">// ç»Ÿè®¡å‰é¢å‡ºç°çš„æ€»ä¸ªæ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            hasCount+=count[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count[i] ==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(<span class="string">"\nç¬¬ %d å,ä¸ªæ•°%d,æˆç»©ä¸º:%d\n"</span>,i,count[i],score[i]);</span><br><span class="line">        <span class="keyword">for</span>(c=<span class="number">1</span>,k=<span class="number">10</span>-hasCount;c&lt;=count[i];k++,c++)    <span class="comment">//count[i] æ˜¯ å½“å‰ç¬¬å‡ åçš„ä¸ªæ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            printf(<span class="string">"åå­—ï¼š%s\n"</span>,names[k]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬ <span class="number">1</span> å,ä¸ªæ•°<span class="number">2</span>,æˆç»©ä¸º:<span class="number">96</span></span><br><span class="line">åå­—ï¼šboss</span><br><span class="line">åå­—ï¼šyounth</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">2</span> å,ä¸ªæ•°<span class="number">2</span>,æˆç»©ä¸º:<span class="number">85</span></span><br><span class="line">åå­—ï¼šwike</span><br><span class="line">åå­—ï¼šsmith</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">3</span> å,ä¸ªæ•°<span class="number">1</span>,æˆç»©ä¸º:<span class="number">76</span></span><br><span class="line">åå­—ï¼šliu</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">4</span> å,ä¸ªæ•°<span class="number">2</span>,æˆç»©ä¸º:<span class="number">60</span></span><br><span class="line">åå­—ï¼šmary</span><br><span class="line">åå­—ï¼šhong</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">5</span> å,ä¸ªæ•°<span class="number">1</span>,æˆç»©ä¸º:<span class="number">50</span></span><br><span class="line">åå­—ï¼šlucy</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">6</span> å,ä¸ªæ•°<span class="number">1</span>,æˆç»©ä¸º:<span class="number">30</span></span><br><span class="line">åå­—ï¼šrunning</span><br><span class="line"></span><br><span class="line">ç¬¬ <span class="number">7</span> å,ä¸ªæ•°<span class="number">1</span>,æˆç»©ä¸º:<span class="number">20</span></span><br><span class="line">åå­—ï¼šjack</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šå‡è®¾æœ‰ 10 ä¸ªåŒå­¦ï¼Œåˆ™å¤§å¾ªç¯ 10 æ¬¡ã€‚æ¯æ¬¡æ£€æŸ¥ï¼Œåˆ†åˆ«å°†å·²ç»Ÿè®¡çš„å­¦ç”Ÿä¸ªæ•° hasCount è®¡ç®—å‡ºæ¥ï¼Œç„¶åä»å‰©ä¸‹çš„åŒå­¦ä¸­å–å¾—å…¶æˆç»©æ ‡è®°ä¸ºä¸‹ä¸€åçš„åˆ†æ•°ã€‚å†…å¾ªç¯ä¾æ¬¡åˆ¤æ–­å‰©ä¸‹åŒå­¦çš„åˆ†æ•°æ˜¯å¦å’Œæœ¬æ¬¡åæ•°çš„åˆ†ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™ä¸ºé‡å¤åˆ†æ•°ï¼Œè®°å½•é‡å¤åˆ†æ•°çš„ä¸ªæ•° count[k]++ , k å˜é‡ä¸ºæ’åã€‚</p><h4 id="æŠ¥æ•°123ï¼ŒæŠ¥æ•°3çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚-Java-ç‰ˆæœ¬"><a href="#æŠ¥æ•°123ï¼ŒæŠ¥æ•°3çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚-Java-ç‰ˆæœ¬" class="headerlink" title="æŠ¥æ•°123ï¼ŒæŠ¥æ•°3çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬"></a>æŠ¥æ•°123ï¼ŒæŠ¥æ•°3çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ Java ç‰ˆæœ¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">TheLastPerson</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span> args[])</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"æŠ¥æ•°123ï¼ŒæŠ¥3çš„åŒå­¦é€€å‡ºï¼Œæœ€åä¸€ä¸ªç•™ä¸‹çš„åŒå­¦"</span>);</span><br><span class="line">        System.out.println(<span class="string">"è¯·è¾“å…¥æ€»å…±æœ‰å‡ ä¸ªåŒå­¦"</span>);</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        int num = input.nextInt();</span><br><span class="line"></span><br><span class="line">        boolean bl[] = <span class="keyword">new</span> boolean[num];</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; bl.length; i++)&#123;</span><br><span class="line">            bl[i] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        int index = <span class="number">0</span>;</span><br><span class="line">        int lastnum = num;</span><br><span class="line">        int countNum = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (lastnum &gt; <span class="number">1</span>)  <span class="comment">//æœ€åç•™ä¸‹æ¥çš„äºº</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (bl[index] &amp;&amp; ++countNum == <span class="number">3</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                countNum = <span class="number">0</span>; <span class="comment">//æŠ¥æ•°3åéœ€å›å½’</span></span><br><span class="line">                bl[index] = <span class="literal">false</span>; <span class="comment">//å°†æŠ¥æ•°ä¸º3çš„äººçŠ¶æ€æ ‡è®°ä¸ºfalse</span></span><br><span class="line">                lastnum--; <span class="comment">//æŠŠé˜Ÿåˆ—äººæ•°å‡1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (++index == num)  <span class="comment">//å½“æŠ¥æ•°åˆ°æ’åœ¨æœ€åä¸€ä¸ªä½ç½®çš„äººï¼Œç¬¬ä¸€ä¸ªæ¥ç€æœ€åä¸€ä¸ªæŠ¥æ•°</span></span><br><span class="line">                index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; num; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (bl[i])</span><br><span class="line">                System.out.println((<span class="keyword">new</span> StringBuilder(<span class="string">"æœ€åç•™ä¸‹çš„æ˜¯ç¬¬"</span>)).append(i + <span class="number">1</span>).append(<span class="string">"ä¸ªåŒå­¦"</span>).toString());</span><br><span class="line">        &#125;</span><br><span class="line">     &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š</p><ol><li>æ ¹æ®å…¨é˜Ÿå‘˜äººæ•°å®šä¹‰ä¸€ä¸ªæ ‡è®°å¸ƒå°”ç±»å‹çš„æ•°ç»„ã€‚æ ‡è®°æ‰€æœ‰äººä¸º true éƒ½åœ¨é˜Ÿåˆ—çš„æ„æ€ã€‚</li><li>å½“æŠ¥æ•° 3 çš„äººæ ‡è®°ä¸º false.  äººæ•°å‡ºé˜Ÿï¼Œå‰©ä½™äººæ•°å‡ 1ã€‚æ¥ç€ç´§é‚»ä¸‹ä¸€ä¸ªé˜Ÿå‘˜æŠ¥æ•° 1ã€‚ æ¯ä¸€æ¬¡æŠ¥æ•°åˆ°æœ€åå½“å‰é˜Ÿå‰©ä½™äººæ•°çš„æœ€åä¸€ä¸ªäººçš„æ—¶å€™ï¼Œæ¥ç€å†ä»ä¸‹æ ‡ä¸º 0 çš„é˜Ÿå‘˜æŠ¥æ•°ã€‚ç›´åˆ°æœ€åé˜Ÿåˆ—å‰©ä½™äººæ•°ä¸º 1ã€‚</li><li>æœ€åå†ä»å¸ƒå°”ç±»å‹çš„æ•°ç»„ä¸­æ‰¾å‡ºæ ‡è®°ä¸º true çš„ä½ç½®ï¼Œå³å¯æ‰¾åˆ°æ˜¯å“ªä¸€ä¸ªåŒå­¦ã€‚</li></ol><h4 id="æŠ¥æ•°-123ï¼ŒæŠ¥æ•°-3-çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚-C-è¯­è¨€ç‰ˆæœ¬"><a href="#æŠ¥æ•°-123ï¼ŒæŠ¥æ•°-3-çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚-C-è¯­è¨€ç‰ˆæœ¬" class="headerlink" title="æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬"></a>æŠ¥æ•° 123ï¼ŒæŠ¥æ•° 3 çš„ç«¥é‹é€€å‡ºï¼Œæœ€åç•™ä¸‹çš„æ˜¯å“ªä¸ªåŒå­¦ã€‚ C è¯­è¨€ç‰ˆæœ¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#define N 28</span><br><span class="line">#define ScoreSystemArrLen 10</span><br><span class="line">#define MaxLen 50</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> findStudentWhichAskNumber()</span><br><span class="line">&#123;</span><br><span class="line">    char S1S8[N][<span class="number">15</span>]=&#123;</span><br><span class="line">        <span class="string">"å»–åŒå­¦"</span>, <span class="string">"å´åŒå­¦"</span>, <span class="string">"é™ˆèªåŒå­¦"</span>, <span class="string">"é¢œåŒå­¦"</span>, <span class="string">"æ¢…åŒå­¦"</span>, <span class="string">"æ˜ŒåŒå­¦"</span>,</span><br><span class="line">        <span class="string">"åˆ˜åŒå­¦"</span>, <span class="string">"é’ŸåŒå­¦"</span>, <span class="string">"é»„åŒå­¦"</span>, <span class="string">"ç”ŸåŒå­¦"</span>, <span class="string">"ä¼ŸåŒå­¦"</span>, <span class="string">"å¹³åŒå­¦"</span>,</span><br><span class="line">        <span class="string">"ä½™å¹¿åŒå­¦"</span>, <span class="string">"æœ±å®åŒå­¦"</span>, <span class="string">"é™ˆé¸¿åŒå­¦"</span>, <span class="string">"ç‹åŒå­¦"</span>, <span class="string">"ä¸œåŒå­¦"</span>, <span class="string">"é›„åŒå­¦"</span>,</span><br><span class="line">        <span class="string">"å¼ åŒå­¦"</span>, <span class="string">"æ—åŒå­¦"</span>, <span class="string">"æ¢åŒå­¦"</span>, <span class="string">"å©·åŒå­¦"</span>, <span class="string">"ç»´åŒå­¦"</span>, <span class="string">"è‹±åŒå­¦"</span>,</span><br><span class="line">        <span class="string">"é»„åŒå­¦1"</span>, <span class="string">"æ–ŒåŒå­¦"</span>, <span class="string">"å…¨åŒå­¦"</span>, <span class="string">"æˆ´åŒå­¦"</span>&#125;;</span><br><span class="line">    printf(<span class="string">"ã€æŠ¥æ•°æ¸¸æˆã€‘è§„åˆ™ï¼šä¸€ç¾¤åŒå­¦æ’é˜Ÿï¼Œä»è§„å®šçš„ç¬¬å‡ ä¸ªåŒå­¦å¼€å§‹æŠ¥æ•°1ï¼Œä¾æ¬¡2ï¼Œ3ã€‚æŠ¥æ•°3çš„åŒå­¦å‡ºé˜Ÿã€‚æ±‚æœ€åå‰©ä¸‹çš„äººæ˜¯è°ï¼Ÿ\n\n"</span>);</span><br><span class="line">    char bl[N];</span><br><span class="line">    int i,n;</span><br><span class="line">    int index;     <span class="comment">//ç´¢å¼•ï¼Œè½®åˆ°ç¬¬å‡ ä¸ªäººäº†</span></span><br><span class="line">    int lastnum=N;  <span class="comment">//å‰©ä½™äººæ•°</span></span><br><span class="line">    int countNum=<span class="number">0</span>; <span class="comment">//æŠ¥çš„æ•°å­—</span></span><br><span class="line">    <span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(<span class="string">"%s\t"</span>,S1S8[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123; bl[i]=<span class="number">1</span>;  &#125; <span class="comment">//28ä¸ªäººéƒ½å‚ä¸æŠ¥æ•°</span></span><br><span class="line">    </span><br><span class="line">    printf(<span class="string">"\r\rè¯·è¾“å…¥ä»ç¬¬å‡ ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼š"</span>);</span><br><span class="line">    scanf(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    printf(<span class="string">"\nä»%så¼€å§‹æŠ¥æ•°,"</span>,S1S8[n<span class="number">-1</span>]);</span><br><span class="line">    index=n<span class="number">-1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(lastnum&gt;<span class="number">1</span>)  <span class="comment">//å¦‚æœå‰©ä½™äººæ•°å¤§äº1 è¯´æ˜è¿˜è¦ç»§ç»­æŠ¥æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(bl[index]) <span class="comment">//è¡¨ç¤ºè¿˜æ²¡æŠ¥3çš„äººã€‚</span></span><br><span class="line">        &#123;</span><br><span class="line">            countNum++;</span><br><span class="line">            <span class="keyword">if</span>(countNum==<span class="number">3</span>)</span><br><span class="line">            &#123;   countNum=<span class="number">0</span>;</span><br><span class="line">                bl[index]=<span class="number">0</span>; <span class="comment">//æ ‡è®°æŠ¥äº†3</span></span><br><span class="line">                lastnum--;  <span class="comment">//å‰©ä½™äººæ•°-1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        index++; <span class="comment">//ä¸‹ä¸€ä¸ªäºº</span></span><br><span class="line">        <span class="keyword">if</span>(index==N)  <span class="comment">//æŠ¥åˆ°æœ€åï¼Œå›æ¥ç»§ç»­æŠ¥æ•°</span></span><br><span class="line">            index=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(bl[i])</span><br><span class="line">            printf(<span class="string">"æœ€åç•™ä¸‹æ¥çš„æ˜¯ï¼š%s"</span>,S1S8[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ã€æŠ¥æ•°æ¸¸æˆã€‘è§„åˆ™ï¼šä¸€ç¾¤åŒå­¦æ’é˜Ÿï¼Œä»è§„å®šçš„ç¬¬å‡ ä¸ªåŒå­¦å¼€å§‹æŠ¥æ•°<span class="number">1</span>ï¼Œä¾æ¬¡<span class="number">2</span>ï¼Œ<span class="number">3</span>ã€‚æŠ¥æ•°<span class="number">3</span>çš„åŒå­¦å‡ºé˜Ÿã€‚æ±‚æœ€åå‰©ä¸‹çš„äººæ˜¯è°ï¼Ÿ</span><br><span class="line"></span><br><span class="line">å»–åŒå­¦    å´åŒå­¦    é™ˆèªåŒå­¦    é¢œåŒå­¦    æ¢…åŒå­¦    æ˜ŒåŒå­¦    åˆ˜åŒå­¦    é’ŸåŒå­¦    é»„åŒå­¦    ç”ŸåŒå­¦    ä¼ŸåŒå­¦    å¹³åŒå­¦    ä½™å¹¿åŒå­¦    æœ±å®åŒå­¦    é™ˆé¸¿åŒå­¦    ç‹åŒå­¦    ä¸œåŒå­¦    é›„åŒå­¦    å¼ åŒå­¦    æ—åŒå­¦    æ¢åŒå­¦    å©·åŒå­¦    ç»´åŒå­¦    è‹±åŒå­¦    é»„åŒå­¦<span class="number">1</span>    æ–ŒåŒå­¦    å…¨åŒå­¦    æˆ´åŒå­¦    </span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥ä»ç¬¬å‡ ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼š<span class="number">6</span></span><br><span class="line"></span><br><span class="line">ä»æ˜ŒåŒå­¦å¼€å§‹æŠ¥æ•°,æœ€åç•™ä¸‹æ¥çš„æ˜¯ï¼šæˆ´åŒå­¦</span><br><span class="line"></span><br><span class="line">Program ended <span class="keyword">with</span> exit code: <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„"><a href="#æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„" class="headerlink" title="æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„"></a>æ¨¡æ‹Ÿå¯¹è±¡å±‚çº§æ ‘ç»“æ„</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * æŸ¥æ‰¾æ ‘èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">LookWord</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    private ArrayList&lt;TreeBean&gt; treeList = <span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        LookWord lw = <span class="keyword">new</span> LookWord();</span><br><span class="line">        lw.init();</span><br><span class="line"><span class="comment">//      lw.findAll(lw.treeList); //æŸ¥æ‰¾æ‰€æœ‰</span></span><br><span class="line">        lw.findWho(<span class="string">"111"</span>,lw.treeList); <span class="comment">//æŸ¥æ‰¾æŸä¸€ä¸ªæ ‘èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public <span class="keyword">void</span> findWho(<span class="built_in">String</span> id,ArrayList&lt;TreeBean&gt; ts) &#123;</span><br><span class="line">        <span class="keyword">for</span> (TreeBean t : ts) &#123;</span><br><span class="line">            <span class="keyword">if</span>(t.getId().equals(id)&amp;&amp;t.getChildren()!=<span class="literal">null</span>)&#123;</span><br><span class="line">                  findAll(t.getChildren());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(t.getChildren()!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    findWho(id,t.getChildren());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public <span class="keyword">void</span> findAll(ArrayList&lt;TreeBean&gt; findList) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; findList.size(); i++) &#123;</span><br><span class="line">            TreeBean tb = findList.get(i);</span><br><span class="line">            System.out.println(tb.toString());</span><br><span class="line">            <span class="keyword">if</span> (tb.getChildren() != <span class="literal">null</span>) &#123;</span><br><span class="line">                findAll(tb.getChildren());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹æ•°æ®</span></span><br><span class="line">    private <span class="keyword">void</span> init() &#123;</span><br><span class="line">        ArrayList&lt;TreeBean&gt; children111 = <span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line">        TreeBean tb111 = <span class="keyword">new</span> TreeBean(<span class="string">"1111"</span>, <span class="string">"one1111"</span>, <span class="string">"111"</span>);</span><br><span class="line">        TreeBean tb112 = <span class="keyword">new</span> TreeBean(<span class="string">"1112"</span>, <span class="string">"one1112"</span>, <span class="string">"111"</span>);</span><br><span class="line">        children111.add(tb111);</span><br><span class="line">        children111.add(tb112);</span><br><span class="line">        TreeBean tb11 = <span class="keyword">new</span> TreeBean(<span class="string">"111"</span>, <span class="string">"one111"</span>, <span class="string">"11"</span>);</span><br><span class="line">        tb11.setChildren(children111);</span><br><span class="line">        TreeBean tb12 = <span class="keyword">new</span> TreeBean(<span class="string">"112"</span>, <span class="string">"one112"</span>, <span class="string">"11"</span>);</span><br><span class="line">        TreeBean tb13 = <span class="keyword">new</span> TreeBean(<span class="string">"113"</span>, <span class="string">"one113"</span>, <span class="string">"11"</span>);</span><br><span class="line">        ArrayList&lt;TreeBean&gt; children11 = <span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line">        children11.add(tb11);</span><br><span class="line">        children11.add(tb12);</span><br><span class="line">        children11.add(tb13);</span><br><span class="line"></span><br><span class="line">        TreeBean tp11 = <span class="keyword">new</span> TreeBean(<span class="string">"11"</span>, <span class="string">"one1"</span>, <span class="string">"1"</span>);</span><br><span class="line">        tp11.setChildren(children11);</span><br><span class="line">        TreeBean tp12 = <span class="keyword">new</span> TreeBean(<span class="string">"12"</span>, <span class="string">"one2"</span>, <span class="string">"1"</span>);</span><br><span class="line">        ArrayList&lt;TreeBean&gt; children1 = <span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line">        children1.add(tp11);</span><br><span class="line">        children1.add(tp12);</span><br><span class="line"></span><br><span class="line">        TreeBean tb1 = <span class="keyword">new</span> TreeBean(<span class="string">"1"</span>, <span class="string">"one"</span>, <span class="string">"0"</span>);</span><br><span class="line">        tb1.setChildren(children1);</span><br><span class="line">        ArrayList&lt;TreeBean&gt; children2 = <span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line">        children2.add(<span class="keyword">new</span> TreeBean(<span class="string">"21"</span>, <span class="string">"two1"</span>, <span class="string">"2"</span>));</span><br><span class="line">        children2.add(<span class="keyword">new</span> TreeBean(<span class="string">"22"</span>, <span class="string">"two2"</span>, <span class="string">"2"</span>));</span><br><span class="line"></span><br><span class="line">        TreeBean tb2 = <span class="keyword">new</span> TreeBean(<span class="string">"2"</span>, <span class="string">"two"</span>, <span class="string">"0"</span>);</span><br><span class="line">        tb2.setChildren(children2);</span><br><span class="line">        treeList.add(tb1);</span><br><span class="line">        treeList.add(tb2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TreeBean çš„æ ‘ç»“æ„æ¨¡å‹</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">TreeBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    private <span class="built_in">String</span> id;</span><br><span class="line">    private <span class="built_in">String</span> text;</span><br><span class="line">    private <span class="built_in">String</span> pid;</span><br><span class="line">    private ArrayList&lt;TreeBean&gt; children=<span class="keyword">new</span> ArrayList&lt;TreeBean&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š æ ‘ç»“æ„æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯é€’å½’æ€æƒ³ã€‚æ— è®ºæŸ¥æ‰¾å…¨éƒ¨è¿˜æ˜¯æŸ¥æ‰¾å•ç‹¬æŸä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œéƒ½éœ€å¾—åˆ°ä»–çš„å­èŠ‚ç‚¹ã€‚éå†å­èŠ‚ç‚¹æ—¶å€™æ ¹æ® children å¯å¾—åˆ°æ˜¯å¦è¿˜æœ‰ä¸‰çº§å­èŠ‚ç‚¹ æœ‰åˆ™é€’å½’è°ƒç”¨ã€‚æ³¨æ„çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹çš„ç»‘å®šå…³ç³»å³å¯ã€‚</p><h3 id="åŸºç¡€æ’åº"><a href="#åŸºç¡€æ’åº" class="headerlink" title="åŸºç¡€æ’åº"></a>åŸºç¡€æ’åº</h3><h4 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/</span><br><span class="line">* æ’å…¥æ’åºï¼Œæ•ˆç‡å¤§äºé€‰æ‹©æ’åºã€‚</span><br><span class="line">* æ–¹æ³•ï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²æ’å¥½åºçš„æœ‰åºè¡¨ï¼ˆæœ‰å¯èƒ½æ˜¯ç©ºè¡¨ï¼‰ä¸­</span><br><span class="line">*  æ¯æ¬¡å’Œæœ€åä¸€ä¸ªæ¯”è¾ƒï¼Œè‹¥æ¯”å‰é¢å°åˆ™å†æ¢ä½ç½®ï¼Œç›´åˆ°ä¸æ¯”å‰é¢å°ã€‚</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">public static void insert(int arr[])</span></span><br><span class="line"><span class="regexp">&#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    int count=0;</span></span><br><span class="line"><span class="regexp">    int pos ;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    for ( int i = 1; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="regexp">        pos=count; /</span><span class="regexp">/ä¸€å¼€å§‹è¿›æ¥å°±æ˜¯å’Œæœ€åä¸€ä¸ªæ•°æ¯”</span></span><br><span class="line"><span class="regexp">        int index=i;</span></span><br><span class="line"><span class="regexp">        while( arr[index]&lt;arr[pos ]&amp;&amp;pos&gt;=0)&#123; /</span><span class="regexp">/æ’åºæ•° å¦‚æœæ¯”å·²ç»æ’å¥½çš„æœ€åä¸€ä¸ªæ•°å°åˆ™ï¼Œå’Œå‰ä¸€ä¸ªæ¯”è¾ƒ</span></span><br><span class="line"><span class="regexp">            int t=arr [pos];</span></span><br><span class="line"><span class="regexp">            arr[pos ]=arr[index];</span></span><br><span class="line"><span class="regexp">            arr[index]=t;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            index-=1;  /</span><span class="regexp">/æ³¨æ„ï¼šè¿™æ˜¯ä¸ªæ¢äº†ä½ç½®çš„æ•°</span></span><br><span class="line"><span class="regexp">            pos--; /</span><span class="regexp">/å‡†å¤‡å’Œå‰ä¸€ä¸ªæ¯”è¾ƒ</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        count++;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²æ’å¥½åºçš„æœ‰åºè¡¨ï¼ˆæœ‰å¯èƒ½æ˜¯ç©ºè¡¨ï¼‰ä¸­<br>æ¯æ¬¡å’Œæœ€åä¸€ä¸ªæ¯”è¾ƒï¼Œè‹¥æ¯”å‰é¢å°åˆ™å†æ¢ä½ç½®ï¼Œç›´åˆ°ä¸æ¯”å‰é¢å°ã€‚</p><h4 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ç›´æ¥é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment">* æ–¹æ³•ï¼šæ¯ä¸€è¶Ÿä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œ</span></span><br><span class="line"><span class="comment">* é¡ºåºæ”¾åœ¨å·²æ’å¥½åºçš„æ•°åˆ—çš„æœ€åï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">public <span class="keyword">static</span> <span class="keyword">void</span> directChoose(int[] arr) &#123;</span><br><span class="line">    int index;</span><br><span class="line">    int temp;</span><br><span class="line">    <span class="keyword">for</span>(int i=<span class="number">1</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        index=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(int j=<span class="number">1</span>;j&lt;=arr.length-i;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j]&lt;arr[index])&#123;</span><br><span class="line">                index=j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        temp=arr[arr.length-i];</span><br><span class="line">        arr[arr.length-i]=arr[index];</span><br><span class="line">        arr[index]=temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šæ¯ä¸€è¶Ÿä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œ<br>é¡ºåºæ”¾åœ¨å·²æ’å¥½åºçš„æ•°åˆ—çš„æœ€åï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚</p><h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¯ä¸€è¶Ÿæ’åº éƒ½å¯ä»¥æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°å€¼ï¼Œä¸‹ä¸€è¶Ÿæ’åºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æ’é™¤æœ€åå·²ç­›é€‰å‡ºçš„æ•°ï¼Œå’Œå‰©ä¸‹çš„æ•°æ¯”è¾ƒã€‚å†’æ³¡æ’åºæ¯ä¸€è½®éƒ½æ˜¯ç›¸é‚»çš„ä¸¤æ•°åœ¨æ¯”è¾ƒã€‚</span></span><br><span class="line">public <span class="keyword">static</span> <span class="keyword">void</span> maopao(int arr[])</span><br><span class="line">&#123;</span><br><span class="line">    int temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (int j = i + <span class="number">1</span>; j &lt; arr.length; j++) <span class="comment">//nä¸ªæ•°  æ¯”è¾ƒn-1è½®   ç¬¬nè½® æ¯”è¾ƒn-1æ¬¡ï¼Œ ç¬¬ä¸€è½®å¯æ‰¾å‡ºæœ€å¤§å€¼ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (arr[i] &lt; arr[j])</span><br><span class="line">            &#123;</span><br><span class="line">                temp = arr[i];</span><br><span class="line">                arr[i] = arr[j];</span><br><span class="line">                arr[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šæ¯ä¸€è¶Ÿæ’åº éƒ½å¯ä»¥æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°å€¼ï¼Œä¸‹ä¸€è¶Ÿæ’åºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æ’é™¤æœ€åå·²ç­›é€‰å‡ºçš„æ•°ï¼Œå’Œå‰©ä¸‹çš„æ•°æ¯”è¾ƒã€‚å†’æ³¡æ’åºæ¯ä¸€è½®éƒ½æ˜¯ç›¸é‚»çš„ä¸¤æ•°åœ¨æ¯”è¾ƒã€‚</p><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        long start=System.currentTimeMillis();</span><br><span class="line">        int arr[] =&#123;<span class="number">12</span>,<span class="number">34</span>,<span class="number">11</span>,<span class="number">99</span>,<span class="number">54</span>,<span class="number">21</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">101</span>&#125;;</span><br><span class="line">        QuickSort t=<span class="keyword">new</span> QuickSort();</span><br><span class="line">        t.quicksort(arr,<span class="number">0</span>,arr.length<span class="number">-1</span>);</span><br><span class="line">        t.print(arr);</span><br><span class="line">        System.out.println(<span class="string">"å¿«é€Ÿæ’åº:"</span>+(System.currentTimeMillis()-start));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    public <span class="keyword">void</span> quicksort(int arr[], int left, int right)&#123;</span><br><span class="line">        <span class="keyword">if</span>(left &lt; right)&#123;</span><br><span class="line">            int key = arr[left];</span><br><span class="line">            int low = left;</span><br><span class="line">            int high = right;</span><br><span class="line">            <span class="keyword">while</span>(low &lt; high)&#123;</span><br><span class="line">                    <span class="keyword">while</span>(low &lt; high &amp;&amp; arr[high] &gt; key)&#123;</span><br><span class="line">                            high--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    arr[low] = arr[high];</span><br><span class="line">                    <span class="keyword">while</span>(low &lt; high &amp;&amp; arr[low] &lt; key)&#123;</span><br><span class="line">                            low++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    arr[high] = arr[low];</span><br><span class="line">             &#125;</span><br><span class="line">              arr[low] = key;</span><br><span class="line">              quicksort(arr,left,low<span class="number">-1</span>);</span><br><span class="line">              quicksort(arr,low+<span class="number">1</span>,right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    public <span class="keyword">void</span> print(int arr[]) &#123;</span><br><span class="line">        <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼š<br>æ¯æ¬¡æ’åºçš„æ—¶å€™è®¾ç½®ä¸€ä¸ªåŸºå‡†ç‚¹ï¼Œå°†å°äºç­‰äºåŸºå‡†ç‚¹çš„æ•°å…¨éƒ¨æ”¾åˆ°åŸºå‡†ç‚¹çš„å·¦è¾¹ï¼Œå°†å¤§äºç­‰äºåŸºå‡†ç‚¹çš„æ•°å…¨éƒ¨æ”¾åˆ°åŸºå‡†ç‚¹çš„å³è¾¹ã€‚å·§å¦™è¿ç”¨åˆ†æ²»æ€æƒ³ã€‚</p><h4 id="äºŒåˆ†æ³•æŸ¥æ‰¾"><a href="#äºŒåˆ†æ³•æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æ³•æŸ¥æ‰¾"></a>äºŒåˆ†æ³•æŸ¥æ‰¾</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HalfSelect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äºŒåˆ†æ³•æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment">     *            æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="variable">num</span></span></span></span><br><span class="line"><span class="comment">     *            è¦æŸ¥æ‰¾çš„æ•°å­—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return </span>è¿”å›ä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    private <span class="keyword">static</span> int halfLook(int[] arr, int num) &#123;<span class="comment">// äºŒåˆ†æ³•æŸ¥æ‰¾</span></span><br><span class="line">        int middle;</span><br><span class="line">        int start = <span class="number">0</span>, last = arr.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (num &lt; arr[start] || num &gt; arr[last])</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            middle = (last + start) / <span class="number">2</span>; <span class="comment">// æ±‚ä¸­é—´ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> (start &gt; last) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (num &gt; arr[middle]) &#123;</span><br><span class="line">                start = middle + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; arr[middle]) &#123;</span><br><span class="line">                last = middle - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> middle; <span class="comment">// ç›¸ç­‰åˆ™è¿”å›</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> halfShow(int arr[]) &#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">"è¯·è¾“å…¥ä½ è¦æŸ¥æ‰¾çš„æ•°:"</span>);</span><br><span class="line">        int n = input.nextInt();</span><br><span class="line">        int w = halfLook(arr, n);</span><br><span class="line">        <span class="keyword">if</span> (w &gt;= <span class="number">0</span>)</span><br><span class="line">            System.out.println((<span class="keyword">new</span> StringBuilder(<span class="string">"ä½ç½®ï¼š"</span>)).append(w).toString());</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            System.out.println(<span class="string">"æ²¡æœ‰è¯¥æ•°ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€è·¯åˆ†æï¼šäºŒåˆ†æ³•æŸ¥æ‰¾å‰ææ˜¯æ•°æ®è¦å…ˆæ’å¥½åºï¼Œç„¶åæ‰èƒ½æŠ˜åŠæŸ¥æ‰¾ã€‚ä¸æ–­å–å¾—ä¸­é—´ä½ç½®çš„æ•°å­—è¿›è¡Œæ¯”è¾ƒæŸ¥è¯¢å‡ºç›®æ ‡æ•°ã€‚</p><h3 id="Json-æ ¼å¼çš„æ ¡éªŒ"><a href="#Json-æ ¼å¼çš„æ ¡éªŒ" class="headerlink" title="Json æ ¼å¼çš„æ ¡éªŒ"></a>Json æ ¼å¼çš„æ ¡éªŒ</h3><p>åœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç†Ÿæ‚‰ä¸€ä¸‹ Promise.all()æ–¹æ³•çš„ç”¨æ³•ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"> testPromiseAll() &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">washFood</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬ä¸€æ­¥ï¼šæ´—èœ'</span>);</span><br><span class="line">        <span class="keyword">let</span> hasError = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(hasError)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"å‘ç°äº†ä¸€åªè™«å­ï¼æ´—æ‰å®ƒã€‚"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'èœæ´—å¹²å‡€äº†ã€‚'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cutFood</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬äºŒæ­¥ï¼šåˆ‡èœ'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">let</span> cutFoodHasError = <span class="literal">true</span>;  <span class="comment">//æ§åˆ¶é»˜å¥‘åˆ‡èœæ—¶ æ˜¯å¦å‘ç”Ÿå¼‚å¸¸</span></span><br><span class="line">                <span class="keyword">if</span>(cutFoodHasError)&#123;</span><br><span class="line">                    reject(<span class="string">"å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼"</span>)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    resolve(<span class="string">'åˆ‡å¥½äº†èœã€‚'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">/* è¯•è¯•æ‰“å¼€è¿™é‡Œçš„æ³¨é‡Š</span></span><br><span class="line"><span class="comment">        .catch(error=&gt;&#123;</span></span><br><span class="line"><span class="comment">            console.log("åˆ‡èœå¼‚å¸¸:"+error); //å¼‚å¸¸æœ¬èº«å°±æ˜¯è¿”å›resolveçŠ¶æ€ï¼Œå€¼æ˜¯null</span></span><br><span class="line"><span class="comment">            console.log("ç”¨åˆ›å£è´´æ­¢è¡€ï¼Œç»§ç»­åšèœã€‚");</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cooking</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åšé¥­ç¬¬ä¸‰æ­¥ï¼šç‚’èœ'</span>);</span><br><span class="line">        <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123; <span class="comment">//åšä¸€äº›å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                resolve(<span class="string">'èœå·²åšå¥½!'</span>);</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•°ç»„é‡Œï¼Œå¦‚æœæ”¾Promise ä¸€å®šè¦è¿”å›çŠ¶æ€ã€‚ </span></span><br><span class="line">    <span class="built_in">Promise</span>.all([washFood(), cutFood(),cooking()])</span><br><span class="line">        .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼š'</span>+result);</span><br><span class="line">            <span class="built_in">console</span>.log(result);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:"</span>+error);</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">     ç»“æœï¼š</span></span><br><span class="line"><span class="comment">     1. å½“cutFoodHasError = trueï¼›æ‰“å°å¦‚ä¸‹ç»“æœï¼š</span></span><br><span class="line"><span class="comment">        èœæ²¡åšæˆï¼Œå‡ºç°äº†å°äº‹æ•…:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼</span></span><br><span class="line"><span class="comment">     2. å½“cutFoodHasError = true ä¸” cutFoodæ–¹æ³•é‡Œçš„Promiseæœ‰å¼‚å¸¸æ•æ‰æ—¶ï¼š </span></span><br><span class="line"><span class="comment">        åˆ‡èœå¼‚å¸¸:å‘œå‘œ~ å‰²åˆ°æ‰‹äº†ï¼Œæµè¡€ï¼</span></span><br><span class="line"><span class="comment">        ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¹²å‡€äº†ï¼,,èœå·²åšå¥½</span></span><br><span class="line"><span class="comment">     3. å½“cutFoodHasError = false </span></span><br><span class="line"><span class="comment">        ä¸Šæ¡Œï¼Œåƒé¥­äº†ï¼šèœæ´—å¥½äº†ã€‚åˆ‡å¥½äº†èœã€‚èœå·²åšå¥½ï¼</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    Promise.allä½¿ç”¨æ€»ç»“ï¼š</span></span><br><span class="line"><span class="comment">    æ•°ç»„é‡Œå¯ä»¥æ˜¯Promiseå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„å€¼ï¼Œåªæœ‰Promiseä¼šç­‰å¾…çŠ¶æ€æ”¹å˜</span></span><br><span class="line"><span class="comment">    å½“æ‰€æœ‰çš„å­Promiseéƒ½å®Œæˆï¼Œè¯¥Promiseå®Œæˆï¼Œè¿”å›å€¼æ˜¯å…¨éƒ¨å€¼å¾—æ•°ç»„</span></span><br><span class="line"><span class="comment">    æœ‰ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œè¯¥Promiseå¤±è´¥ï¼Œè¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ˆå¤±è´¥çš„å­Promiseç»“æœ </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong> æœåŠ¡è¿”å› json å­—ç¬¦ä¸² result </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»¥ä¸‹æ³¨é‡Šå¾ˆé‡è¦ï¼šé‡‡ç”¨åˆ†æ²»å’Œé€’å½’çš„æ€æƒ³ã€‚å¦å¤–ç»“åˆPromise.allæ–¹æ³• åšä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—æ§åˆ¶ã€‚</span></span><br><span class="line">boolean isJsonFlag =  checkJsonObject(result);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkJsonObject</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> jsonFlag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ€è·¯åˆ†æï¼š</p><ol><li>è·å–æ¯ä¸€ä¸ª key, å’Œå¯¹åº” value ã€‚</li><li>å¯¹ value è¿›è¡Œç±»å‹åˆ¤æ–­,å¦‚æœæ˜¯ [ ] æ•°ç»„ç±»å‹ï¼Œforeach æ¯ä¸€é¡¹åˆ¤æ–­æ˜¯å¦ä¸º { }  å¯¹è±¡ ï¼Œå¦‚æœæ˜¯ é€’å½’è°ƒç”¨ checkObject(itemObject)  æ–¹æ³•ï¼›å¯¹äº value ä¸ºæ™®é€šç±»å‹æ—¶ï¼Œåªéœ€æ›´å…·æ­£åˆ™æˆ–ç®—æ³•åŒ¹é…æ˜¯å¦ç¬¦åˆ key: value æ ¼å¼ã€‚</li><li>æ ¹æ®æœåŠ¡ç«¯è¿”å›çš„ result å­—ç¬¦çªœåˆ†å‰²åä¾æ® ç¬¬ä¸€å±‚çº§çš„ valueç±»å‹ä¸º [] æ•°ç»„ç±»å‹çš„ä¸ªæ•°çš„å¤šå°‘ï¼Œåˆ†æ‰¹ç”¨ç±»ä¼¼ Promise.all æ–¹æ³• å¼‚æ­¥æ‰§è¡Œå¤šä¸ª Promiseï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªæ ¡éªŒè¿”å› rejectï¼Œåˆ™ç«‹å³æ˜¯è¿”å› falseã€‚åˆ¤æ–­ä¸åŒ¹é…ã€‚æ— éœ€ç­‰å¾…æ‰€æœ‰çš„ Promise ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚è€Œå…¨éƒ¨ Promise æ ¡éªŒæ­£ç¡®æ‰ä¼šè¿”å› true;</li></ol><p>æ€»ç»“ï¼šé€šè¿‡æœ¬ chat çš„å­¦ä¹ å’Œæ‰‹åŠ¨æ•²ç å®è·µï¼Œä½ å°†æ”¶è·åˆ°å¯¹åˆ†æ²»å’Œé€’å½’çš„æ€æƒ³çš„ç†è§£ã€‚å¯¹çŠ¶æ€çš„æ ‡è®°æ€æƒ³ï¼Œä»¥åŠå¯¹å›¾å½¢çš„è§‚å¯Ÿåˆ†ææ€è·¯ã€‚é‡ç‚¹æ˜¯ä½ çš„æ€ç»´é€»è¾‘å¾—åˆ°äº†æå‡ï¼ å¦‚æœæœ¬ chat å¯¹ä½ æœ‰ç”¨ï¼Œé‚£æˆ‘å°±å¤ªé«˜å…´äº†ã€‚æœ€åï¼Œæ„Ÿè°¢å¤§ä¼™çš„æ”¯æŒï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼</title>
      <link href="/2020/01/07/iOSRuntime/"/>
      <url>/2020/01/07/iOSRuntime/</url>
      
        <content type="html"><![CDATA[<h3 id="Runtime-åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ"><a href="#Runtime-åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ" class="headerlink" title="Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ"></a>Runtime åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ</h3><p>Runtimeæ˜¯Objective-Cä¸­åº•å±‚çš„ä¸€å¥—Cè¯­è¨€APIï¼Œæ˜¯ä¸€ä¸ªå°†Cè¯­è¨€è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡è¯­è¨€çš„æ‹“å±•ã€‚Runtimeçš„ä¸€åˆ‡éƒ½å›´ç»•ä¸¤ä¸ªä¸­å¿ƒï¼š<strong>ç±»çš„åŠ¨æ€é…ç½®</strong> å’Œ <strong>æ¶ˆæ¯ä¼ é€’</strong></p><h4 id="èƒ½å¹²å•¥ï¼Ÿ"><a href="#èƒ½å¹²å•¥ï¼Ÿ" class="headerlink" title="èƒ½å¹²å•¥ï¼Ÿ"></a>èƒ½å¹²å•¥ï¼Ÿ</h4><ul><li>åŠ¨æ€çš„åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªç±»</li><li>ç»™ç±»å¢åŠ ä¸€ä¸ªå±æ€§</li><li>ç»™ç±»å¢åŠ ä¸€ä¸ªåè®®å®ç°</li><li>ç»™ç±»å¢åŠ ä¸€ä¸ªæ–¹æ³•å®ç°IMP</li><li>éå†ä¸€ä¸ªç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ã€å±æ€§å’Œæ–¹æ³•ç­‰</li></ul><ul><li>æ‹¦æˆªç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•è°ƒç”¨ï¼ˆMethod Swizzlingé»‘é­”æ³•ï¼‰</li><li>å°†æŸäº›OCä»£ç è½¬åŒ–ä¸ºRuntimeä»£ç ï¼Œæ¢ç©¶åº•å±‚ã€‚å¦‚blockçš„å®ç°åŸç†</li><li>å®ç°ç»™åˆ†ç±»å¢åŠ å±æ€§</li><li>å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œæ¥æ¡£</li><li>å®ç°å­—å…¸çš„æ¨¡å‹å’Œè‡ªåŠ¨è½¬æ¢</li></ul><a id="more"></a><h6 id="åŸºæœ¬å…ƒç´ çš„è®¤è¯†"><a href="#åŸºæœ¬å…ƒç´ çš„è®¤è¯†" class="headerlink" title="åŸºæœ¬å…ƒç´ çš„è®¤è¯†"></a>åŸºæœ¬å…ƒç´ çš„è®¤è¯†</h6><ol><li>class å’Œ id  éƒ½è¢«ç§°ä¸ºç±»å¯¹è±¡ã€‚</li><li>selector å¯ä»¥ç†è§£ä¸ºæ–¹æ³•çš„ID, é€šè¿‡ @selector å¯ä»¥æ‰¾åˆ°æ–¹æ³•çš„åœ°å€ã€‚</li><li>IMPæ˜¯implementation  è¢«ç§°ä¸º å‡½æ•°æŒ‡é’ˆã€‚</li><li>Method ä»£è¡¨ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ç±»å‹ã€‚</li><li>lvar ä»£è¡¨ å®ä¾‹å˜é‡ç±»å‹ã€‚</li><li>objc_property_t æ˜¯å±æ€§ã€‚ å®šä¹‰ä¸€ä¸ªå±æ€§ï¼štypedef struct objc_property *objc_property_t;</li><li>Category åˆ†ç±»ã€‚ å¯åŠ¨æ€ä¸ºå·²çŸ¥ç±»æ·»åŠ æ–°çš„æ–¹æ³•ã€‚</li></ol><h5 id="æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹"><a href="#æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹" class="headerlink" title="æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹"></a>æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹</h5><p>è°ƒç”¨å®ä¾‹æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé¦–å…ˆåœ¨è‡ªèº«isaæŒ‡é’ˆæŒ‡å‘çš„ç±»ï¼ˆclassï¼‰methodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¼šé€šè¿‡classçš„super_classæŒ‡é’ˆæ‰¾åˆ°çˆ¶ç±»çš„ç±»å¯¹è±¡ç»“æ„ä½“ï¼Œç„¶åä»methodListsä¸­æŸ¥æ‰¾è¯¥æ–¹æ³•ï¼Œå¦‚æœä»æ‰¾ä¸åˆ°åˆ™ç»§ç»­é€šè¿‡super_classå‘ä¸ŠæŸ¥æ‰¾çŸ¥é“metaclass</p><h5 id="å®ç°ä¾‹å­"><a href="#å®ç°ä¾‹å­" class="headerlink" title="å®ç°ä¾‹å­"></a>å®ç°ä¾‹å­</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; éå†ç±»ä¸­æ‰€æœ‰çš„å˜é‡</span><br><span class="line">-(void) getALLVariable&#123; </span><br><span class="line"></span><br><span class="line">    unsigned int count &#x3D; 0;</span><br><span class="line">    Ivar *allVariables &#x3D; class_copyIvarList([Student class], &amp;count);</span><br><span class="line"></span><br><span class="line">    for (int i &#x3D; 0 ; i&lt; count; i++) &#123;</span><br><span class="line">            &#x2F;&#x2F;éå†æ¯ä¸€ä¸ªå˜é‡,åŒ…æ‹¬åç§°å’Œç±»å‹</span><br><span class="line">        Ivar ivar &#x3D; allVariables[i];</span><br><span class="line">        const char *VariableName &#x3D; ivar_getName(ivar);</span><br><span class="line">        const char *VariableType &#x3D; ivar_getTypeEncoding(ivar);</span><br><span class="line">        NSLog(@&quot;(Name:%s)-------(Type:%s)&quot;,VariableName,VariableType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥æ˜¯æƒ³éå†å±æ€§åˆ—è¡¨å¯ä»¥å°†<code>class_copyIvarList</code>æ›¿æ¢ä¸º<code>class_copyPropertyList</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;éå†ç±»çš„æ–¹æ³•</span><br><span class="line">-(void) getAllMethod&#123;</span><br><span class="line">    unsigned int count &#x3D; 0;</span><br><span class="line">    Method *AllMethods &#x3D; class_copyMethodList([Student class], &amp;count);</span><br><span class="line"></span><br><span class="line">    for (int i &#x3D; 0 ; i&lt;count; i++) &#123;</span><br><span class="line"></span><br><span class="line">        Method method &#x3D; AllMethods[i];</span><br><span class="line">        &#x2F;&#x2F;è·å–SELï¼šSELç±»å‹,å³è·å–æ–¹æ³•é€‰æ‹©å™¨@selector()</span><br><span class="line">        SEL sel &#x3D; method_getName(method);</span><br><span class="line">        &#x2F;&#x2F;å¾—åˆ°selçš„æ–¹æ³•åï¼šä»¥å­—ç¬¦ä¸²æ ¼å¼è·å–selçš„nameï¼Œä¹Ÿå³@selector()ä¸­çš„æ–¹æ³•åç§°</span><br><span class="line">        const char *methodName &#x3D; sel_getName(sel);</span><br><span class="line">        NSLog(@&quot;-------the method :%s&quot;,methodName);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€æ”¹å˜ä¸€ä¸ªç±»å˜é‡çš„æ•°å€¼"><a href="#åŠ¨æ€æ”¹å˜ä¸€ä¸ªç±»å˜é‡çš„æ•°å€¼" class="headerlink" title="åŠ¨æ€æ”¹å˜ä¸€ä¸ªç±»å˜é‡çš„æ•°å€¼"></a>åŠ¨æ€æ”¹å˜ä¸€ä¸ªç±»å˜é‡çš„æ•°å€¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ”¹å˜Personå˜é‡çš„æ•°å€¼</span><br><span class="line">-(void) changeVariable&#123;</span><br><span class="line">    NSLog(@&quot;before change person : %@ -------&quot;,_person);</span><br><span class="line"></span><br><span class="line">    unsigned int count &#x3D; 0;</span><br><span class="line">    Ivar *allList &#x3D; class_copyIvarList([Person class], &amp;count);</span><br><span class="line">    for (int i &#x3D; 0; i&lt; count; i++) &#123;</span><br><span class="line">        Ivar var &#x3D; allList[i];</span><br><span class="line">        const char *varName &#x3D; ivar_getName(var);</span><br><span class="line">        NSString *name &#x3D; [NSString stringWithUTF8String:varName];</span><br><span class="line"></span><br><span class="line">        if ([name isEqualToString:@&quot;_name&quot;]) &#123;</span><br><span class="line">            object_setIvar(_person, var, @&quot;lannis&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NSLog(@&quot;after change person : %@ -------&quot;,_person);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€æ·»åŠ æ–¹æ³•"><a href="#åŠ¨æ€æ·»åŠ æ–¹æ³•" class="headerlink" title="åŠ¨æ€æ·»åŠ æ–¹æ³•"></a>åŠ¨æ€æ·»åŠ æ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-(void) addMethod&#123;</span><br><span class="line">    class_addMethod([self class], @selector(addfunc3), (IMP)func3, &quot;v@:&quot;);</span><br><span class="line"></span><br><span class="line">    if ([self respondsToSelector:@selector(addfunc3)]) &#123;</span><br><span class="line">        [self performSelector:@selector(addfunc3)];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        NSLog(@&quot;add method error&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void func3(id self,SEL _cmd)&#123;</span><br><span class="line">    NSLog(@&quot;%s&quot;,__func__);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨<code>class_addMethod(__unsafe_unretained Class cls, SEL name, IMP imp, const char *types)</code>æ–¹æ³•ç»™æŒ‡å®šç±»æ·»åŠ æ–¹æ³•ã€‚<br>impå‚æ•°ï¼šå®ç°è¢«æ·»åŠ æ–¹æ³•çš„å‡½æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­func3æ˜¯æŒ‡func3çš„åœ°å€æŒ‡é’ˆï¼›<br>typeså‚æ•°ï¼šä¸€ä¸ªå®šä¹‰è¯¥å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå‚æ•°ç±»å‹çš„å­—ç¬¦ä¸²ã€‚æœ¬ä¾‹ä¸­â€v@:â€æ„æ€æ˜¯vä»£è¡¨æ— è¿”å›å€¼voidï¼Œ@ä»£è¡¨id selï¼›ï¼šä»£è¡¨SEL _cmdï¼›<br>è¦æ³¨æ„çš„æ˜¯ï¼šfunc3æ–¹æ³•å‰çš„voidä¸åŠ +ã€-å·ï¼Œå› ä¸ºè¿™æ˜¯Cçš„ä»£ç ï¼›å¿…é¡»æœ‰æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼ˆid selfï¼ŒSEL _cmdï¼‰ï¼›</p><h4 id="åŠ¨æ€äº¤æ¢æ–¹æ³•"><a href="#åŠ¨æ€äº¤æ¢æ–¹æ³•" class="headerlink" title="åŠ¨æ€äº¤æ¢æ–¹æ³•"></a>åŠ¨æ€äº¤æ¢æ–¹æ³•</h4><p>å°†å­˜åœ¨çš„ä¸¤ä¸ªæ–¹æ³•çš„å®ç°è¿›è¡Œäº¤æ¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-(void) exchangeImplementations&#123;</span><br><span class="line">    Method m1 &#x3D; class_getInstanceMethod([Person class], @selector(func1));</span><br><span class="line">    Method m2 &#x3D; class_getInstanceMethod([Person class], @selector(func2));</span><br><span class="line"></span><br><span class="line">    method_exchangeImplementations(m1, m2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>TextViewå¯Œæ–‡æœ¬æ’å…¥å›¾ç‰‡</title>
      <link href="/2020/01/07/textViewPicture/"/>
      <url>/2020/01/07/textViewPicture/</url>
      
        <content type="html"><![CDATA[<p>welcome look this NoteTextView Small Demo l., you can use NoteTextView insertPicture that you can process the data to your server.  also, it will not be hide TextView â€˜s point position  by keyboard . ok , just try . you can find it on my github.com/gaoyingqiu.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="å›¾ç‰‡æ’å…¥textViewä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ã€‚è§£å†³textViewåœ¨tableView-ä¸­é”®ç›˜é®æŒ¡é—®é¢˜ã€‚"><a href="#å›¾ç‰‡æ’å…¥textViewä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ã€‚è§£å†³textViewåœ¨tableView-ä¸­é”®ç›˜é®æŒ¡é—®é¢˜ã€‚" class="headerlink" title="å›¾ç‰‡æ’å…¥textViewä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ã€‚è§£å†³textViewåœ¨tableView ä¸­é”®ç›˜é®æŒ¡é—®é¢˜ã€‚"></a>å›¾ç‰‡æ’å…¥textViewä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ã€‚è§£å†³textViewåœ¨tableView ä¸­é”®ç›˜é®æŒ¡é—®é¢˜ã€‚</h3><p> show you screen photos . </p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/IMG_1032.jpg" alt="å›¾ç‰‡1"></p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/IMG_1031.jpg" alt="å›¾ç‰‡1"></p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/IMG_1030.jpg" alt="å›¾ç‰‡1"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯Œæ–‡æœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSä¸­é«˜çº§é˜¶æ®µè·¯çº¿å›¾</title>
      <link href="/2020/01/07/iOSAdvancedRoute/"/>
      <url>/2020/01/07/iOSAdvancedRoute/</url>
      
        <content type="html"><![CDATA[<p>1ã€iOS 11ä¹‹å‰çš„å¯¼èˆªæ çš„é«˜åº¦æ˜¯64pxï¼ˆçŠ¶æ€æ¡+å¯¼èˆªæ ï¼‰ï¼ŒiOS11ä¹‹åå¦‚æœè®¾ç½®äº†prefersLargeTitles = YESï¼ˆé»˜è®¤NOï¼‰åˆ™ä¸º96ptã€‚æ‰€ä»¥ä¸€èˆ¬ä¸ç”¨ç®¡ã€‚</p><p>2ã€åœ¨iOS 11ä¸Šè¿è¡ŒtableViewå‘ä¸‹åç§»64pxæˆ–è€…20pxï¼Œå› ä¸ºiOS 11åºŸå¼ƒäº†automaticallyAdjustsScrollViewInsetsï¼Œè€Œæ˜¯ç»™UIScrollViewå¢åŠ äº†contentInsetAdjustmentBehaviorå±æ€§ã€‚é¿å…è¿™ä¸ªå‘çš„æ–¹æ³•æ˜¯è¦åˆ¤æ–­</p><p>3ã€tableViewçš„sectionHeaderã€sectionFooteré«˜åº¦ä¸è®¾ç½®ä¸ç¬¦ï¼Œå› ä¸ºtableViewçš„estimatedRowHeightã€estimatedSectionHeaderHeightã€ estimatedSectionFooterHeightä¸‰ä¸ªé«˜åº¦ä¼°ç®—å±æ€§ç”±é»˜è®¤çš„0å˜æˆäº†UITableViewAutomaticDimensionã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è®¾ç½®ä¸º0ã€‚</p><p>4ã€iPhone XçŠ¶æ€æ¡ç”±20pxå˜æˆäº†44pxï¼ŒUITabBarç”±49pxå˜æˆäº†83pxã€‚è®¾ç½®å¸ƒå±€æ—¶yç›´æ¥å†™æˆ64çš„å°±è¦æ ¹æ®æœºå‹è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å®</p><p>#define Device_Is_iPhoneX ([UIScreen instancesRespondToSelector:@selector(currentMode)] ? CGSizeEqualToSize(CGSizeMake(1125, 2436), [[UIScreen mainScreen] currentMode].size) : NO)ï¼Œ</p><p> æ¨é€æ¨¡å—ï¼Œæ¨é€æ¶ˆæ¯å­˜å‚¨</p><p>H5 çš„webView è·³è½¬ ä¸åŸç”Ÿäº¤äº’ã€‚</p><p>å›¾ç‰‡å‹ç¼©ç¼“å­˜ã€‚ å‘è¡¨è¯é¢˜ã€‚</p><a id="more"></a><hr><p>ï¼ˆè‡ªå®šä¹‰æ§ä»¶ï¼‰</p><p>1ï¼‰å›¾ç‰‡ç¼–è¾‘ï¼Œ å¯Œæ–‡æœ¬æ“ä½œ</p><p>3ï¼‰è¯é¢˜å¤„ç†ï¼› (æ­£åˆ™è¡¨è¾¾å¼)</p><hr><p>ï¼ˆåª’ä½“åº“æ“ä½œï¼‰ </p><p>2ï¼‰éŸ³é¢‘ï¼Œç›´æ’­ ,ç›¸æœºç¾é¢œç­‰æŠ€æœ¯</p><p>3)   è“ç‰™ æ“ä½œ</p><p>4ï¼‰è®¾è®¡æ¨¡å¼</p><p>é˜…è¯»<a href="https://github.com/ChenYilong/CYLTabBarController" target="_blank" rel="noopener">CYLTabBarController</a></p><p>YYCache</p><hr><p>ä¸­çº§çŸ¥è¯†ç‚¹</p><ul><li><p>è®¾è®¡æ¨¡å¼</p></li><li><p>UIScrollView/UITableView/UICollectionView çš„åµŒå¥—</p></li><li><p>åŠ¨æ€è¡Œé«˜</p></li><li><p>é€šçŸ¥/ä»£ç†/block</p></li><li><p>ç¨‹åºå¯åŠ¨åŸç†</p></li><li><p>è§¦æ‘¸äº‹ä»¶/æ‰‹åŠ¿</p></li><li><p>å›¾æ–‡æ··ç¼–</p></li><li><p>Runtime</p></li><li><p>NSRunLoop</p></li><li><p>GCD</p></li><li><p>ReactiveCocoaå¼€å‘</p></li><li><p>3DTouch</p></li><li><p>ç•Œé¢æ¸²æŸ“</p></li><li><p>CharlesèŠ±ç“¶æŠ“åŒ…</p></li><li><p>åŒºåˆ†æ¨¡æ‹Ÿå™¨/çœŸæœºé¡¹ç›®</p></li><li><p>å¸¸ç”¨çŸ¥è¯†</p><ul><li>å¤šçº¿ç¨‹ ï¼Œç½‘ç»œè¯·æ±‚ï¼›ï¼›æ¨é€/è¿œç¨‹æ¨é€</li><li>æºä»£ç ç®¡ç†Git</li><li>è‹¹æœå†…è´­/å¹¿å‘Š</li><li>éŸ³é¢‘/è§†é¢‘/äºŒç»´ç </li><li>è“ç‰™/ä¼ æ„Ÿå™¨</li><li>ç‰©ç†ä»¿çœŸå™¨UIDynamic</li></ul></li></ul><p><strong>iOS</strong>é«˜çº§çŸ¥è¯†ç‚¹</p><ul><li><p>iOSé«˜çº§çŸ¥è¯†ç‚¹</p></li><li><ul><li><p>Socket</p></li><li><p>XMPP</p></li><li><p>åŠ å¯†</p></li><li><ul><li>MD5è¯¦è§£</li><li>Base64åŠ å¯†è§£å¯†</li><li>RSAéå¯¹ç§°åŠ å¯†</li><li>AESå¯¹ç§°åŠ å¯†</li></ul></li><li><p>éŸ³é¢‘</p></li><li><ul><li>åŸºç¡€</li><li>Core Audio</li><li>Audio Toolbox</li><li>OpenAL</li><li>AVFoundation</li><li>Speexè¯­éŸ³èŠå¤©</li><li>AudioQueue/AudioSession</li><li>Speexç®€ä»‹</li></ul></li><li><p>è§†é¢‘</p></li><li><ul><li>AACè§†é¢‘.H264æ¨æµ</li><li>P2Pä¼ è¾“</li></ul></li><li><p>ç›´æ’­</p></li><li><ul><li>ç›´æ’­çš„æŠ€æœ¯åˆ†æä¸å®ç°</li><li>RTMPåè®®</li><li>RTMPç›´æ’­åº”ç”¨ä¸å»¶æ—¶åˆ†æ</li><li>å¦‚æœåšä¸€æ¬¾inkeç‰ˆçš„App</li><li>æ¨æµå‘å¸ƒå’Œæ’­æ”¾RTMP</li><li>FFmpeg</li><li>åŸºäºFFmpegçš„æ¨æµå™¨</li><li>HLSæµåª’ä½“ä¼ è¾“åè®®(HTTP Live Streaming)</li><li>FFmpeg</li><li>ijkPlayer</li></ul></li><li><p>ç®—æ³•</p></li><li><ul><li>ç®€ä»‹</li><li>å†’æ³¡æ’åº</li><li>å¿«é€Ÿæ’åº</li><li>æ’å…¥æ’åº</li><li>å½’å¹¶æ’åº</li><li>äºŒåˆ†æŸ¥æ‰¾</li><li>å¸Œå°”æ’åº</li><li>åŠ¨æ€è§„åˆ’</li><li>å †æ’åº</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HTTPåè®®è¯¦è§£</title>
      <link href="/2020/01/07/http/"/>
      <url>/2020/01/07/http/</url>
      
        <content type="html"><![CDATA[<ul><li><p><strong>è¯·æ±‚å¤´</strong> </p><blockquote><p>è¯·æ±‚å¤´éƒ¨ï¼Œç´§æ¥ç€è¯·æ±‚è¡Œï¼ˆå³ç¬¬ä¸€è¡Œï¼‰ä¹‹åçš„éƒ¨åˆ†ï¼Œç”¨æ¥è¯´æ˜æœåŠ¡å™¨è¦ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ï¼Œå¦‚<strong>Host</strong>: ä¸»æœºåï¼Œ <strong>Use-Agent</strong>: æµè§ˆå™¨åŸºæœ¬èµ„æ–™ï¼Œ <strong>Accept</strong>: æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„å“åº”ç±»å‹ï¼Œ <strong>Accept-Language</strong>: æµè§ˆå™¨é»˜è®¤è¯­è¨€ï¼Œ <strong>Accept-Encoding</strong>: æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„å‹ç¼©æ–¹å¼ï¼Œ <strong>Referer</strong>: æ¥è·¯é¡µé¢ï¼Œ<strong> Connecton</strong>ï¼šæ˜¯å¦ä¿æŒè¿æ¥ã€‚</p></blockquote></li><li><p>GET</p><blockquote><p>GETæäº¤ï¼Œè¯·æ±‚çš„æ•°æ®ä¼šé™„åœ¨URLä¹‹åï¼ˆå°±æ˜¯æŠŠæ•°æ®æ”¾ç½®åœ¨HTTPåè®®å¤´ä¸­ï¼‰ï¼Œå¦‚æœæ•°æ®æ˜¯è‹±æ–‡å­—æ¯/æ•°å­—ï¼ŒåŸæ ·å‘é€ï¼›å¦‚æœæ˜¯ç©ºæ ¼ï¼Œè½¬æ¢ä¸º+ï¼›å¦‚æœæ˜¯ä¸­æ–‡/å…¶ä»–å­—ç¬¦ï¼Œåˆ™ç›´æ¥æŠŠå­—ç¬¦ä¸²ç”¨BASE64åŠ å¯†ï¼Œå¾—å‡ºå¦‚ï¼š %E4%BD%A0%E5%A5%BDï¼Œå…¶ä¸­ï¼…XXä¸­çš„XXä¸ºè¯¥ç¬¦å·ä»¥16è¿›åˆ¶è¡¨ç¤ºçš„ASCIIã€‚</p></blockquote></li></ul><h3 id="é™åˆ¶"><a href="#é™åˆ¶" class="headerlink" title="é™åˆ¶"></a>é™åˆ¶</h3><p>GET:ç‰¹å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹URLé•¿åº¦æœ‰é™åˆ¶.</p><p>POST:ç”±äºä¸æ˜¯é€šè¿‡URLä¼ å€¼ï¼Œç†è®ºä¸Šæ•°æ®ä¸å— é™ã€‚ä½†å®é™…å„ä¸ªWEBæœåŠ¡å™¨ä¼šè§„å®šå¯¹postæäº¤æ•°æ®å¤§å°è¿›è¡Œé™åˆ¶ï¼ŒApacheã€IIS6éƒ½æœ‰å„è‡ªçš„é…ç½®</p><h3 id="httpè¯·æ±‚content-Type"><a href="#httpè¯·æ±‚content-Type" class="headerlink" title="httpè¯·æ±‚content-Type"></a>httpè¯·æ±‚content-Type</h3><p>application/x-www-form-urlencodedï¼šæ•°æ®è¢«ç¼–ç ä¸ºåç§°/å€¼å¯¹ã€‚è¿™æ˜¯æ ‡å‡†çš„ç¼–ç æ ¼å¼ã€‚è¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå¤šã€‚</p><p>multipart/form-dataï¼š æ•°æ®è¢«ç¼–ç ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œé¡µä¸Šçš„æ¯ä¸ªæ§ä»¶å¯¹åº”æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚ä¸€èˆ¬ä¸Šä¼ æ–‡ä»¶æ‰ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><p>text/plainï¼š æ•°æ®ä»¥çº¯æ–‡æœ¬å½¢å¼(text/json/xml/html)è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­ä¸å«ä»»ä½•æ§ä»¶æˆ–æ ¼å¼å­—ç¬¦ã€‚ä¸€èˆ¬å‘æœåŠ¡ç«¯å‘é€jsonæ•°æ®ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><h3 id="HTTPSæ•°æ®åŠ å¯†"><a href="#HTTPSæ•°æ®åŠ å¯†" class="headerlink" title="HTTPSæ•°æ®åŠ å¯†"></a>HTTPSæ•°æ®åŠ å¯†</h3><p> HTTPåè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨HTTPåè®®ä¼ è¾“éšç§ä¿¡æ¯éå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼Œäºæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†SSLï¼ˆSecure Sockets Layerï¼‰åè®®ç”¨äºå¯¹HTTPåè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œå°±è¯ç”Ÿäº†HTTPS</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSåˆçº§é˜¶æ®µ</title>
      <link href="/2020/01/07/iOSPrimaryRoute/"/>
      <url>/2020/01/07/iOSPrimaryRoute/</url>
      
        <content type="html"><![CDATA[<ul><li>è‹¹æœè‡ªå¸¦æ¡†æ¶</li><li><p>ç¬¬ä¸‰æ–¹æ¡†æ¶</p><ul><li>AFNetworking</li><li>SDAutoLayout</li><li>YYKit</li><li>SDWebImage</li><li>MJRefresh</li><li>MJExtension</li><li>Bugly</li><li></li><li>Qiniu</li><li>Masonry</li><li>TZImagePickerController</li><li>Hyphenate_CN<a id="more"></a>åŸºç¡€UIæ§ä»¶</li></ul></li><li><p>UILabel  æ ‡é¢˜æ </p></li><li>UIButton  æŒ‰é’®</li><li>UIImageView  å›¾ç‰‡è§†å›¾</li><li>UITextField  æ–‡æœ¬è¾“å…¥æ¡†</li><li>UITextView  æ–‡æœ¬å±•ç¤ºè§†å›¾</li><li>UIProgressView  è¿›åº¦æ¡</li><li>UISlider  æ»‘åŠ¨å¼€å…³</li><li>UIGesture æ‰‹åŠ¿</li><li>UIActivityIndicator  èŠèŠ±æ§ä»¶</li><li>UIAlertView(iOS8åºŸé™¤) è­¦å‘Šæ¡†</li><li>UIActionSheet(iOS8åºŸé™¤) æ“ä½œè¡¨å•</li><li>UIAlertController(iOS8å‡ºç°) è­¦å‘Šè§†å›¾æ§åˆ¶å™¨</li><li>UIScrollView æ»šåŠ¨è§†å›¾</li><li>UIPageControl é¡µé¢æ§åˆ¶å™¨</li><li>UISearchBar æœç´¢æ¡†</li><li>UITableView è¡¨è§†å›¾</li><li>UICollectionViewé›†åˆè§†å›¾</li><li>UIWebViewç½‘é¡µæµè§ˆå™¨</li><li>UISwitchå¼€å…³</li><li>UISegmentControlé€‰æ‹©æŒ‰é’®</li><li>UIPickerViewé€‰æ‹©å™¨</li><li>UIDatePickeræ—¥æœŸé€‰æ‹©å™¨</li><li>UIToolbarå·¥å…·æ </li><li>UINavigationBaré€šçŸ¥æ </li><li>UINavigationControlleré€šçŸ¥è§†å›¾æ§åˆ¶å™¨</li><li>UITabbarControlleré€‰æ‹©è§†å›¾æ§åˆ¶å™¨</li><li>UIImagePickerControllerç›¸å†Œ</li><li><p>UIImageå›¾ç‰‡</p><p>Xcodeçš„ä½¿ç”¨</p></li><li><p>åŸºç¡€æ“ä½œ çŠ¶æ€æ </p></li><li>åå¥½è®¾ç½®</li><li>Xcode Source Control æºä»£ç ç®¡ç†å™¨</li><li>Xcode workSpaceå·¥ä½œç»„</li><li>Xcode Scheme è®¡åˆ’</li><li>Xcode AutoLayout çº¦æŸ</li><li>Xcode CoreDataæ•°æ®åº“</li><li>LLDB æ–­ç‚¹è°ƒè¯•</li><li>StoryBoard</li><li>ç•Œé¢é¢„è§ˆ</li><li>ç•Œé¢é€‚é…</li><li>å†…å­˜ç›‘æµ‹</li><li>å…¨å±€æ–­ç‚¹</li><li><p>å…¨å±€æœç´¢æ›¿æ¢</p><p>æ•°æ®å­˜å‚¨</p></li><li><p>plist</p></li><li>NSKeyedArchiver</li><li>SQLite</li><li>FMDB</li><li>CoreData</li><li>NSUserDefault</li><li>æ²™ç›’å­˜å‚¨</li><li><p>NSDictionaryå½’æ¡£</p><p>Appç”Ÿå‘½å‘¨æœŸ</p></li><li><p>åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</p></li><li>æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸ<ul><li>alloc</li><li>init</li><li>åˆ›å»ºView</li><li>ViewDidLoad</li><li>ViewWillAppear</li><li>ViewDidAppear</li><li>ViewWillDisappear<ul><li>è§†å›¾å°†è¦æ¶ˆå¤± (åšä¸€äº›è§†å›¾å°†è¦æ¶ˆå¤±æ—¶çš„UIçš„å¤„ç†)</li></ul></li><li>ViewDidDisappear<ul><li>è§†å›¾å·²ç»æ¶ˆå¤± (åšä¸€äº›è§†å›¾æ¶ˆå¤±ä¹‹åæ•°æ®çš„å¤„ç†)</li><li>viewDidDisappearé”€æ¯å®šæ—¶å™¨</li></ul></li><li>dealloc</li><li>didReceiveMemoryWarning</li></ul></li></ul><ul><li>é€šä¿¡</li><li>NSç³»åˆ—</li><li>å®å®šä¹‰</li><li>è§†å›¾å±‚æ¬¡</li><li>åˆ‡æ¢è§†å›¾</li><li>æ·±æµ…æ‹·è´</li><li>å¯¹è±¡åºåˆ—åŒ–</li><li>å†™å…¥æ–‡ä»¶</li><li>è·å–æ²™ç›’è·¯å¾„</li><li>ç¿»è½¬è§†å›¾</li><li>å»¶ä¼¸è§†å›¾</li><li>ä¹å¤§åŸºæœ¬æ•°æ®ç±»å‹</li><li>ä¹å®«æ ¼</li><li>åæ ‡æ¯”è¾ƒ</li><li>UIColor ã€CIColorå’ŒCGColor ä¹‹é—´çš„å…³ç³»</li><li>ç”»å›¾</li><li>é™æ€å˜é‡</li><li>tagå€¼</li><li>å»¶æ—¶æ‰§è¡Œæ–¹æ³•</li><li>ç•Œé¢æ—‹è½¬+çŠ¶æ€æ éšè—</li><li>plistæ–‡ä»¶</li><li>KVC/KVO</li><li>è°“è¯NSPredicate</li><li>å¸§åŠ¨ç”»</li><li>AutoLayout</li><li>isKindOfClass ä¸ isMemberOfClass</li><li>Return/Break/Continue</li><li>Core Animation</li><li>CALayer</li><li>Quartz2D</li><li>çœŸæœºè°ƒè¯•</li><li>é™æ€åº“</li><li>å†…å­˜ç®¡ç†</li><li>iPadä¸iPhoneçš„åŒºåˆ«</li><li>å“åº”é“¾</li><li>å¼‚å¸¸æ•æ‰</li><li>å›½é™…åŒ–</li><li>ä»£ç æ¨¡å—åŒ–</li><li>ç±»åˆ«/æ‰©å±•</li></ul>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ‰¾å‡ºå­—ç¬¦ä¸²æœ€é•¿å•è¯</title>
      <link href="/2019/12/10/longWord/"/>
      <url>/2019/12/10/longWord/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">countWords</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">100</span>] = <span class="string">"hello, my name is gaogaoProgramer, welcome to come here!"</span>;</span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">long</span> len = <span class="built_in">strlen</span>(str);</span><br><span class="line">    <span class="keyword">int</span> spaceIndex = <span class="number">0</span>;  <span class="comment">//ä»ç¬¬ä¸€ä¸ªä¸‹æ ‡å¼€å§‹ç®—</span></span><br><span class="line">    <span class="keyword">int</span> recordMax = <span class="number">0</span>; <span class="comment">//å•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®å³ä¸ºæœ€é•¿å•è¯</span></span><br><span class="line">    <span class="keyword">int</span> beforeIndex = <span class="number">0</span>,afterIndex = <span class="number">0</span>; <span class="comment">//å®šä¹‰æœ€é•¿å•è¯çš„å‰ç©ºæ ¼ï¼Œåç©ºæ ¼</span></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; len; index++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(str[index] == <span class="number">32</span>)&#123; <span class="comment">//åˆ¤æ–­ç©ºæ ¼</span></span><br><span class="line">            <span class="keyword">if</span>(index - spaceIndex &gt; recordMax)&#123;</span><br><span class="line">                recordMax = index - spaceIndex;</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//è®°å½•å‰ä¸‹æ ‡å’Œåä¸‹æ ‡ã€‚</span></span><br><span class="line">                beforeIndex = spaceIndex;</span><br><span class="line">                afterIndex = index;</span><br><span class="line">            &#125;</span><br><span class="line">            spaceIndex = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"åŸå§‹å•è¯ä¸ºï¼š%s"</span>,str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nå•è¯ç©ºæ ¼ä¹‹é—´ä¸‹æ ‡æœ€å¤§å·®:%d å‰ä¸‹æ ‡:%d,åä¸‹æ ‡:%d"</span>,recordMax,beforeIndex,afterIndex);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¾“å‡ºæ‰¾åˆ°çš„å•è¯ï¼›</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n\næ‰¾åˆ°çš„æœ€é•¿åº¦å•è¯ä¸ºï¼š"</span>);</span><br><span class="line">    <span class="keyword">int</span> charIndex;</span><br><span class="line">    <span class="keyword">for</span>(charIndex = beforeIndex; charIndex&lt; afterIndex ; charIndex++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c"</span>,str[charIndex]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿ƒé”€æ–¹å¼</title>
      <link href="/2019/12/10/promotionMethod/"/>
      <url>/2019/12/10/promotionMethod/</url>
      
        <content type="html"><![CDATA[<p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sale_style1.jpeg" alt="å›¾ç‰‡"><br><a id="more"></a><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sale_style2.jpeg" alt="å›¾ç‰‡"><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sale_style3.jpeg" alt="å›¾ç‰‡"><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sale_style4.jpeg" alt="å›¾ç‰‡"><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sale_style5.jpeg" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>èŒåœºç¡¬æ ¸ä¸è½¯å®åŠ›</title>
      <link href="/2019/12/09/softPower/"/>
      <url>/2019/12/09/softPower/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬çš„ä»äº‹çš„å¤§å¤šæ•°éƒ½æ˜¯å¹³å‡¡å·¥ä½œã€‚æ²¡æœ‰ç§‘å­¦å®¶åœ¨å®éªŒå®¤ç§‘ç ”çš„é«˜ç§‘æŠ€åˆ›æ–°ï¼Œæ²¡æœ‰å®‡å®™èˆªå¤©ç§‘æŠ€æ¢ç´¢çš„å¥¥ç§˜ã€‚æˆ–è®¸æ¯å¤©éƒ½åšç€é‡å¤å•ä¸€çš„å·¥ä½œï¼Œæˆ–è®¸å¾ˆå¤šå²—ä½éƒ½è¢«æ™ºèƒ½è‡ªåŠ¨åŒ–æœºå™¨ç»™æ›¿ä»£ã€‚14å¹´ä¹‹åï¼Œå¾ˆå¤šä¼ä¸šéƒ½è½¬å‹æˆç§»åŠ¨äº’è”ç½‘ä¼ä¸šï¼Œå¾ˆå¤šçº¿ä¸‹åº—é“ºéƒ½å®ç°äº†çº¿ä¸Šæ”¯ä»˜åŠŸèƒ½ã€‚æˆ‘ä»¬ä¸æ–­æ¥è§¦ç€æ–°äº‹ç‰©å’Œè¢«æ–°äº‹ç‰©æ´—ç¤¼ã€‚ é‚£äº›ä¸æ„¿æ„æ”¹å˜ï¼Œä¸æ„¿æ„å­¦ä¹ æ–°äº‹ç‰©çš„ä¼ä¸šå’Œä¸ªäºº éƒ½æ…¢æ…¢é€€å‡ºäº†å†å²èˆå°ã€‚</p><a id="more"></a><p>å°¤å…¶æ˜¯ITè¡Œä¸šä»ä¸šäººå‘˜ï¼ŒåŸºæœ¬æ¯å¹´éƒ½æœ‰ä¸€æ¬¡æŠ€æœ¯é©æ–°ã€‚æ–°äº§ç‰©ï¼Œæ–°å·¥ç§ä¹Ÿé€æ¸ç”Ÿå­˜åœ¨è¿™ä¸ªå¸‚åœºä¸­ã€‚æˆ‘ä»¬æ¯å¤©éƒ½è¦ä¸æ–­åœ°å­¦ä¹ æ–°çŸ¥è¯†ï¼Œä¸ºæå‡æŠ€æœ¯ï¼Œä¸ºå‡èŒåŠ è–ªå«å®šåŸºç¡€ï¼›å¦‚æœä¸å­¦ä¹ ï¼Œæˆ‘ä»¬å°†å’Œæ–°æ—¶ä»£æŠ€æœ¯æ‹–è½¨ï¼Œè¢«æ—¶ä»£æŠ›å¼ƒã€‚  </p><p>é™¤äº†åœ¨ä¸“ä¸šæŠ€æœ¯è¿‡ç¡¬ä»¥å¤–ï¼Œåœ¨è½¯æŠ€èƒ½æ–¹é¢æˆ‘ä»¬é€šè¿‡è¿™èŠ‚Chatè°ˆä¸€è°ˆã€‚</p><h3 id="ä¿¡èµ–åº¦"><a href="#ä¿¡èµ–åº¦" class="headerlink" title="ä¿¡èµ–åº¦"></a>ä¿¡èµ–åº¦</h3><p>ä¾æ®ï¼šè¦æ±‚ä»»ä½•äººåšäº‹ï¼Œä¸è®ºå¯¹ä¸Š/å¯¹ä¸‹è¿˜æ˜¯å¹³è¡Œï¼Œåœ¨æ²¡æœ‰å“è¶Šçš„è¡¨ç°å¯ä»¥é¢„æœŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±åªèƒ½å¸Œæœ›ä»–/å¥¹â€œå¯é â€</p><p>1ã€å¯ä»¥ä¸¥æ ¼è¦æ±‚è‡ªå·±æŒ‰ç…§æŒ‡ä»¤æˆ–éœ€æ±‚ï¼Œå®Œæˆä»–äººäº¤ä»˜çš„ä»»åŠ¡æˆ–å·¥ä½œã€‚ç”¨å¿ƒæŠŠäº‹æƒ…åšåˆ°å®Œç¾ã€‚<br>2ã€åœ¨æ‰§è¡Œä»»åŠ¡æˆ–å·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¤šæ³¨æ„ç»†èŠ‚ï¼Œèƒ½ä¸»åŠ¨å‘ç°å¹¶æŠ¥å‘Šâ€œåå·®â€ã€‚<br>3ã€åœ¨ä»»åŠ¡æˆ–å·¥ä½œæ²¡æœ‰å®Œå…¨ç»“æŸä»¥å‰ï¼Œèƒ½å§‹ç»ˆä¿æŒæ³¨æ„åŠ›ï¼Œä¸ä¼šæ¾æ‡ˆã€‚<br>4ã€ä»»åŠ¡æˆ–å·¥ä½œç»“æŸæ—¶ï¼Œå°½å¿«å‘ŠçŸ¥å¯¹æ–¹å¹¶å¾è¯¢æ„è§ï¼Œå¦‚æœæœ‰ç–å¿½æˆ–å·®é”™ï¼Œå…ˆé“æ­‰ï¼Œå¹¶è¯´æ˜ä»¥åçš„é˜²èŒƒæ–¹æ³•ã€‚<br>5ã€å¯¹æ‰€æœ‰ä¸è¶³æˆ–ä¸æ‡‚çš„åœ°æ–¹ï¼Œä¼šä¸æ–­åœ°é—®ï¼Œä¸æ–­åœ°å­¦ã€‚</p><h3 id="æ´å‡€åº¦"><a href="#æ´å‡€åº¦" class="headerlink" title="æ´å‡€åº¦"></a>æ´å‡€åº¦</h3><p>ç¾å’Œæ•´æ´ç¡®å®å¯ä»¥ç»™è‡ªå·±ä¸ªäººå½¢è±¡åŠ åˆ†ã€‚ä½†æˆ‘ä»¬åœ¨å·¥ä½œçš„æ´å‡€åº¦ä¸Šä¹Ÿå¯ä»¥ç»™è‡ªå·±å¸¦æ¥åŠ åˆ†ã€‚</p><p>1ã€äº¤ä»˜å‡ºå»çš„æ–‡ä»¶/æ¡£æ¡ˆ/ç‰©å“/å·¥ä½œå†…å®¹ï¼Œä¸€å®šè¦æ¸…æ¸…æ¥šæ¥šï¼Œä¸€å®šè¦æœ‰æ¡ç†ï¼Œä¸€å®šè¦ä»”ç»†ã€‚<br>2ã€ä¸è®ºä»»ä½•ä¸œè¥¿ï¼Œåªè¦ä»æˆ‘æ‰‹ä¸­å‡ºå»ï¼Œè‡ªå·±å…ˆæ£€æŸ¥ï¼Œå…ˆæ ¡å¯¹ï¼Œå…ˆç¡®è®¤ã€‚<br>3ã€æ¯æœˆï¼Œæ¯å‘¨ï¼Œæ¯å¤©åšäº†ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç»“æœï¼Œè‡ªå·±æ€ä¹ˆæƒ³çš„ï¼Œä»»ä½•å·¥ä½œé¡¹è‡ªå·±éƒ½è¦æœ‰æ•°æ®è®°å½•ã€‚</p><h3 id="è¯šä¿¡åº¦"><a href="#è¯šä¿¡åº¦" class="headerlink" title="è¯šä¿¡åº¦"></a>è¯šä¿¡åº¦</h3><p>ä¸“ä¸šå’Œé«˜æ•ˆå¯ä»¥æå‡æˆ‘ä»¬çš„ä¸šç»©ã€‚çœŸè¯šä¿¡ä»»å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥æ›´å¤šçš„ç”¨æˆ·å’Œä¼™ä¼´ã€‚é€šè¿‡ä¿¡ä»»çš„ç»´æŒï¼Œæˆ‘ä»¬å¯ä»¥æŠŠäº§å“åšå¾—æ›´å¥½ã€‚ç®¡ç†å±‚äººå‘˜çš„ç­›é€‰åŸºæœ¬ä¹Ÿæ˜¯ä»æœ€äº²ä¸´çš„ä¸‹å±æ¥è¿›è¡Œææ‹”ã€‚å› ä¸ºåŸºäºä¿¡ä»»ï¼ŒåŸºäºäº†è§£ã€‚</p><p>1ã€éšæ—¶æ³¨æ„è‡ªå·±åº”è¯¥è´Ÿè´£çš„å·¥ä½œï¼Œå®šæœŸè®©éƒ¨é—¨ä¸»ç®¡çŸ¥é“ã€‚<br>2ã€å¯¹ä¸è‡ªå·±æœ‰å…³çš„ä¸€åˆ‡å·¥ä½œï¼Œç»å¸¸æ€è€ƒå¦‚ä½•èƒ½æŠŠå®ƒåšå¾—æ›´å¥½ã€‚<br>3ã€ä¸è¦å…»æˆä¸å¥½çš„å·¥ä½œä¹ æƒ¯ï¼Œä»¥å…ä»–äººæ€€ç–‘ä½ çš„ä¸“ä¸šæ€§ã€‚<br>4ã€ä¸è¦æ€»åœ¨èƒŒåè®®è®ºï¼Œæœ‰è¯å¿ƒå¹³æ°”å’Œå¹¶å¤§èƒ†çš„è¯´ï¼Œçœ¼ç›æ²¡æœ‰çœ‹åˆ°çš„ä¸œè¥¿è®®è®ºä¹…äº†æŠŠè‡ªå·±å®¹æ˜“æŠŠè‡ªå·±éƒ½éª—äº†ã€‚</p><h3 id="å¤šé¢æ‰‹"><a href="#å¤šé¢æ‰‹" class="headerlink" title="å¤šé¢æ‰‹"></a>å¤šé¢æ‰‹</h3><p>1ã€é™¤äº†åº”æœ‰çš„ä¸“ä¸šçŸ¥è¯†ï¼Œè¿˜è¦å¹¿æ³›åœ°æ¶‰çŒä¸€äº›å’Œå·¥ä½œã€æœ‰å…³çš„å„ç§ä¿¡æ¯ï¼Œå¹¶å»ºç«‹è‡ªå·±çš„çŸ¥è¯†åº“ã€‚<br>2ã€åœ¨é€‚å½“çš„æ—¶æœºï¼Œå¯¹å·¥ä½œç›¸å…³çš„å¸‚åœºï¼Œäº§å“ã€æŠ€æœ¯ç­‰é—®é¢˜ï¼Œæå‡ºå¤šå…ƒåŒ–çš„åæ€ã€‚<br>3ã€å·¥ä½œä¹‹ä½™åŸ¹å…»å…¶ä»–çš„å…´è¶£å’Œèƒ½åŠ›ï¼Œæ¯”å¦‚å½±è§†ï¼ŒåŠ¨æ¼«ï¼Œè¿è¡Œï¼Œå·¥è‰ºï¼Œå†™ä½œç­‰ã€‚å®Œå…¨æ²¡æœ‰çˆ±å¥½çš„äººï¼Œå¾ˆéš¾æœ‰çªç ´æ€§çš„åˆ›é€ åŠ›ã€‚<br>4ã€å°½é‡è®©äººè§‰å¾—ä¸åº¸ä¿—ï¼Œä¸å¸‚ä¾©ï¼Œä¸çŸ­è§†ï¼Œä¸è‚¤æµ…ï¼ˆä¸è¦éšéšä¾¿ä¾¿çš„æé—®ï¼Œéšéšä¾¿ä¾¿çš„è®¨è®ºï¼Œå¤šåšåŠŸè¯¾ï¼Œå¤šäº†è§£æ¸…æ¥šï¼‰ã€‚</p><h3 id="èº«è¾¹å…¸èŒƒ"><a href="#èº«è¾¹å…¸èŒƒ" class="headerlink" title="èº«è¾¹å…¸èŒƒ"></a>èº«è¾¹å…¸èŒƒ</h3><p>å°‘çœ‹æˆåŠŸå­¦ï¼Œå¤šå»äº†è§£ä½ èº«è¾¹æˆåŠŸçš„äººæˆåŠŸçš„äº‹æ˜¯æ€ä¹ˆä¸€ç‚¹ä¸€ç‚¹èµ·æ¥çš„ã€‚ä»–ä»¬éƒ½ä¸æ˜¯å•çº¯é è¿æ°”ï¼Œä»”ç»†çš„æ‰¾æ€»ä¼šæ‰¾åˆ°ä¸€ä¸¤ä¸ªç‰¹è´¨ï¼Œæ˜¯ä½ æ²¡æœ‰çš„ã€‚æœ‰ä¸€äº›ä½ ä¸å»çœ‹ï¼Œä¸å»æ‰¾ï¼Œæ˜¯æ— çŸ¥ã€‚æœ‰ä¸€äº›ä½ æ‰¾åˆ°äº†ï¼Œä½ åšä¸åˆ°ï¼Œæ˜¯æ— èƒ½ã€‚ä½ ä¸åšï¼Œæ°¸è¿œæ˜¯0ï¼Œä½ åšäº†è‡³å°‘èƒ½æˆä¸º1ï¼Œæ²¡æœ‰å¾ˆå¤šçš„1ï¼Œæ°¸è¿œä¸å¯èƒ½åˆ°10ã€‚</p><p>äººæ‰æ˜¯ä»€ä¹ˆï¼Ÿä½ ç»™ä»–ä¸€ä»¶äº‹ï¼Œä»–æŠŠå®ƒå¹²å¥½äº†ï¼›ä½ åˆç»™ä»–ä¸€ä»¶äº‹ä»–åˆæŠŠä»–å¹²å¥½äº†â€¦â€¦ </p><h4 id="å­¦ä¼šæ‰¿æ‹…ä¸ªäººè´£ä»»"><a href="#å­¦ä¼šæ‰¿æ‹…ä¸ªäººè´£ä»»" class="headerlink" title="å­¦ä¼šæ‰¿æ‹…ä¸ªäººè´£ä»»"></a>å­¦ä¼šæ‰¿æ‹…ä¸ªäººè´£ä»»</h4><p>ä¸ºäº‹æƒ…çš„ç»“æœè´Ÿè´£ï¼Œå±äºè‡ªå·±ç®¡è¾–åŒºåŸŸçš„å·¥ä½œä»»åŠ¡è¦èƒ½å¤Ÿæ•°æ®è¿½è¸ªï¼Œå¯¹æˆåŠŸçš„ç»“æœè¦æ€»ç»“ï¼Œå¯¹å¤±è´¥çš„ç»“æœè¦åæ€ã€‚åœ¨èŒåœºä¸è¦â€åŠªåŠ›åœ°è¡¨ç°â€ï¼Œå‡è£…å¾ˆåŠªåŠ›ï¼›ä¸è¦å»è¾©è§£æˆ–ç”©é”…ã€‚è¦è®¤è¯†åˆ°è‡ªå·±çš„é”™è¯¯ï¼Œå¤šè§‚å¯Ÿåˆ«äººçš„ä¼˜ç‚¹ã€‚</p><h4 id="è®©è‡ªå·±æˆé•¿"><a href="#è®©è‡ªå·±æˆé•¿" class="headerlink" title="è®©è‡ªå·±æˆé•¿"></a>è®©è‡ªå·±æˆé•¿</h4><p>æ€»æ˜¯è¯´è‡ªå·±æ²¡æœ‰ æ¡ä»¶(æ—¶é—´\ç¯å¢ƒ\æœºä¼š)å»æé«˜ã€‚è¿™äº›éƒ½æ˜¯ç»™è‡ªå·±æ‡’æƒ°æ‰¾çš„å€Ÿå£ã€‚<br>ä¸æ–­æŒ¤å‡ºæ—¶é—´å»å­¦ä¹ ã€‚â€œåŠªåŠ›åœ°è¯·æ•™â€ï¼Œä¸æ–­çš„é€¼è‡ªå·±å»ä¸äººäº¤æµå­¦ä¹ ã€‚<br>ç»“æ„åŒ–è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œç¦»ç›®æ ‡è¿˜å·®å¤šå°‘ã€‚é‡åŒ–åˆ°æ¯ä¸€å¤©ï¼Œæ¯ä¸€å‘¨ï¼Œæ¯ä¸€æœˆçš„è®¡åˆ’ä¸­å»ã€‚<br>é”»ç‚¼è‡ªå·±å„æ–¹é¢çš„èƒ½åŠ›ï¼šåŒ…æ‹¬å­¦ä¹ èƒ½åŠ›ï¼Œäº¤æµèƒ½åŠ›ï¼Œç»„ç»‡èƒ½åŠ›ï¼Œæ‰§è¡Œèƒ½åŠ›ã€‚</p><h4 id="æ³¨é‡è¿‡ç¨‹ï¼Œå…³æ³¨ç»“æœ"><a href="#æ³¨é‡è¿‡ç¨‹ï¼Œå…³æ³¨ç»“æœ" class="headerlink" title="æ³¨é‡è¿‡ç¨‹ï¼Œå…³æ³¨ç»“æœ"></a>æ³¨é‡è¿‡ç¨‹ï¼Œå…³æ³¨ç»“æœ</h4><p>å¹³åº¸æ··æ—¥å­çš„äººæ€»è®¤ä¸ºè‡ªå·±ç‰›é€¼ï¼Œæƒ³è¦é«˜æ”¶å…¥ï¼Œæƒ³è¦é«˜èŒä½ï¼Œæƒ³è¦é«˜åœ°ä½ã€‚<br>å®å¹²çš„äººæ€»æ˜¯åœ¨ä¸æ–­æ€è€ƒï¼Œä¸æ–­æ”¶é›†æƒ…æŠ¥ï¼Œä¸æ–­çš„å­¦ä¹ ï¼Œä¸æ–­è®¡åˆ’ï¼Œä¸æ–­å®è·µï¼Œä¸æ–­ç”¨ç»“æœå‘æ‰€æœ‰äººè¯æ˜è‡ªå·±çš„èƒ½åŠ›ã€‚<br>ä½ çš„æƒ³æ³•å†³å®šäº†ä½ çš„è¡ŒåŠ¨ï¼›ä½ çš„è¡ŒåŠ¨ å–å†³äºä½ çš„ä¹ æƒ¯ï¼›ä½ çš„ä¹ æƒ¯æ¥æºäºä½ çš„æ€§æ ¼ï¼›</p><h4 id="å­¦ç€ç”¨ä¸åŒçš„æ–¹æ³•å»å¤„ç†äº‹æƒ…ï¼š"><a href="#å­¦ç€ç”¨ä¸åŒçš„æ–¹æ³•å»å¤„ç†äº‹æƒ…ï¼š" class="headerlink" title="å­¦ç€ç”¨ä¸åŒçš„æ–¹æ³•å»å¤„ç†äº‹æƒ…ï¼š"></a>å­¦ç€ç”¨ä¸åŒçš„æ–¹æ³•å»å¤„ç†äº‹æƒ…ï¼š</h4><p>å¯¹äº‹ä¸å¯¹äºº æˆ–è®¸80% éƒ½æ˜¯å¯¹çš„ï¼Œä½†æœ‰æ—¶å€™çš„ç¡®éœ€è¦å¯¹äººå¯¹äº‹å»å¤„ç†ï¼›<br>å½“ä½ æ˜¯èŒåœºç®¡ç†è€…æ—¶ï¼Œç®¡ç†ä¸åŒæ€§æ ¼çš„äººå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ²Ÿé€šæ–¹æ³•ã€‚æœ‰çš„äººå¿ƒç†æ¯”è¾ƒè„†å¼±ï¼Œå¤šæ¬¡æ‰¹è¯„ç”šè‡³éƒ½ä¼šç¦»èŒèµ°äººã€‚ æ¯ä»¶äº‹ï¼ˆäººï¼‰éƒ½ä¸ä¸€æ ·ï¼Œä¸è¦ç”¨åŒä¸€ç§æ–¹å¼å»å¤„ç†æ‰€æœ‰çš„äº‹ï¼ˆäººï¼‰</p><h4 id="åˆ›é€ ä»·å€¼"><a href="#åˆ›é€ ä»·å€¼" class="headerlink" title="åˆ›é€ ä»·å€¼"></a>åˆ›é€ ä»·å€¼</h4><p>ä¸ä»¥å·¥ä½œæ—¶é•¿ä¸ºä»·å€¼è®¡ç®—ï¼Œä»¥äº§å‡ºç»“æœä¸ºä»·å€¼è®¡ç®—ã€‚<br>å½¢æˆè‡ªæˆ‘ç®¡ç†ï¼Œä¸»åŠ¨å­¦ä¹ ï¼Œè®©ä¹‹å‰çš„åšäº‹æ–¹æ³•æ›´åŠ é«˜æ•ˆï¼Œåˆ›é€ æ›´å¤šçš„ä»·å€¼ã€‚<br>ä¸è¦æ€»è®¤ä¸ºè‡ªå·±åªèƒ½å¹²ä¸€ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªæ—¶ä»£è¦çš„æ˜¯å¤šå…ƒåŒ–å¤åˆå‹äººæ‰ã€‚è¦å¥½å¥½å­¦ä¹ ï¼ŒåšæŒå……ç”µè¡¥å……è‡ªå·±çš„çŸ­æ¿ã€‚</p><h4 id="ç´§çœ‹ç›®æ ‡ï¼Œè§£å†³é—®é¢˜"><a href="#ç´§çœ‹ç›®æ ‡ï¼Œè§£å†³é—®é¢˜" class="headerlink" title="ç´§çœ‹ç›®æ ‡ï¼Œè§£å†³é—®é¢˜"></a>ç´§çœ‹ç›®æ ‡ï¼Œè§£å†³é—®é¢˜</h4><p>ä¸è¦æ€»æè¿°å›°éš¾ï¼Œç„¶åæœ€åè¢«å›°éš¾ç»™å“è¶´äº†è€Œæ”¾å¼ƒè‡ªå·±çš„ç›®æ ‡ã€‚<br>è¦å»å…‹æœå›°éš¾ï¼Œç„¶åæŠŠäº‹æƒ…å¹²å¥½ã€‚<br>å‹¿å¿˜è‡ªå·±çŸ­ã€ä¸­ã€é•¿æœŸç›®æ ‡ï¼Œå¹¶æ—¶åˆ»è¯¢é—®è‡ªå·±ã€‚ï¼ˆä½ çš„é•¿æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä¸­æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼ŸçŸ­æœŸç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿï¼‰<br>åä¸ºåœ¨ä¸­ç¾è´¸æ˜“æˆ˜çš„æ—¶å€™æ²¡æœ‰å¤©å¤©å¼ºè°ƒå›°éš¾ï¼Œè€Œæ˜¯è‡ªå·±åˆ¶é€ èŠ¯ç‰‡ã€‚åˆ©ç”¨è¿™æ¬¡æœºä¼šæ‰­è½¬å…¨çƒç«äº‰çš„æ ¼å±€å¹¶çœŸçš„å–å¾—æˆåŠŸã€‚å¦‚æœæ²¡æœ‰è¿™æ¬¡è´¸æ˜“æˆ˜ï¼Œå¯èƒ½è¿˜è¦è½åä¸šç•Œå¤§è…•æ›´å¤šå¹´ä»½ã€‚</p><h4 id="ç«‹åœºé²œæ˜"><a href="#ç«‹åœºé²œæ˜" class="headerlink" title="ç«‹åœºé²œæ˜"></a>ç«‹åœºé²œæ˜</h4><p> ç«‹åœºé²œæ˜ï¼Œä»¥äº‹å®ç»“æœä¸ºå¯¼å‘ã€‚<br> åœ¨å·¥ä½œä¸Šè¦æœ‰ç«‹åœºï¼Œå·¥ä½œä¸ç”Ÿæ´»è¦åˆ†å¼€ï¼Œå¦åˆ™è°ä¸ºç›®æ ‡è´Ÿè´£ï¼Ÿå·¥ä½œçš„æ—¶å€™å±•ç°å‡ºä½ çš„ä¸“ä¸šåº¦ï¼Œå¯¹å·¥ä½œè´Ÿè´£ï¼Œå¯¹å®¢æˆ·è´Ÿè´£ã€‚ </p><h4 id="ä¸è¦çºµå®¹è‡ªå·±èƒ½åŠ›ä¸è¶³"><a href="#ä¸è¦çºµå®¹è‡ªå·±èƒ½åŠ›ä¸è¶³" class="headerlink" title="ä¸è¦çºµå®¹è‡ªå·±èƒ½åŠ›ä¸è¶³"></a>ä¸è¦çºµå®¹è‡ªå·±èƒ½åŠ›ä¸è¶³</h4><p>ä¸æ˜¯è¦å»æ¯”è°æœ€å—æ¬¢è¿ï¼Œè°èµ„å†è€ï¼Œæ˜¯è¦æ¯”è°èƒ½åˆ›é€ æ›´å¤§çš„ä»·å€¼ã€‚<br>æ‹’ç»å­¦ä¹ çš„äººç«™åœ¨é‡è¦çš„ä½ç½®ä¸Šï¼Œå¯¹ç»„ç»‡æœ‰æ¬ å…¬å¹³ã€‚<br>å¯¹è‡ªå·±è¦æ±‚ä½ï¼Œç¤¾ä¼šå¯¹ä½ çš„å›é¦ˆä¼šä½“ç°åˆ°ä½ çš„æ”¶å…¥ä½ï¼Œåœ°ä½ä½ï¼ŒèŒä½ä½ã€‚å°±ç®—ä½ èµ°äº†ç‹—å±è¿ï¼Œä¹Ÿéš¾ä»¥æœä¼—ã€‚</p><h4 id="ä»€ä¹ˆæ—¶å€™æ±‚åŠ©å¤§ç¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™æ±‚åŠ©å¤§ç¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™æ±‚åŠ©å¤§ç¥ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™æ±‚åŠ©å¤§ç¥ï¼Ÿ</h4><p>é‡åˆ°éš¾ä¸€ç‚¹çš„å·¥ä½œä»»åŠ¡ï¼Œå¦‚æœæ€»æ˜¯ç­‰å¾…ä¸Šå¸æ¥æŒ‡å¯¼ã€‚é‚£å°±ç›¸å½“äºæ”¾å¼ƒäº†æˆé•¿ã€‚å¦‚æœä¸æƒ³è®©åˆ«äººçš„æ€æƒ³ä¸»åŠ¨ä½ çš„æ€ç»´ï¼Œé‚£ä½ åªæœ‰ä¸æ–­åŠªåŠ›è®­ç»ƒè‡ªå·±çš„æ€ç»´ï¼Œç”¨ç»“æœå»è¯æ˜è‡ªå·±ã€‚</p><p>æ€è€ƒçš„è¿‡ç¨‹ï¼š<br>1 ã€è‡ªå·±æ€è€ƒï¼Œåˆ†æ¨¡å— è¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚<br>2ã€ ä¸æ‡‚çš„é—®é¢˜æŸ¥æ‰¾èµ„æ–™ï¼Œå†æ‰‹åŠ¨å®è·µã€‚<br>3ã€æŸ¥æ‰¾ç½‘ä¸Šåˆ«äººåšè¿‡çš„ï¼Œå‚è€ƒã€‚<br>4ã€æ€»ç»“ã€‚ å½’ç±»ï¼Œæ•´ç†ã€‚  è®°å½•ï¼ˆç¬”è®°ï¼Œå¤§è„‘ï¼‰ï¼Œè¾“å‡ºï¼ˆæ–‡ç« ï¼Œåšå®¢ï¼‰ã€‚</p><p>åªè¦ä½ ä¸æ–­çš„åŠªåŠ›çš„æ€è€ƒï¼ŒåŠªåŠ›çš„å­¦ä¹ ï¼ŒåŠªåŠ›çš„åˆ›é€ ä»·å€¼ï¼Œç»ˆæœ‰ä¸€å¤©ä½ ä¼šæŠŠæ‰€æœ‰äººç”©å‡ºå‡ æ¡è¡—ï¼Œä½ è‡ªç„¶æˆäº†ä¼ä¸šçš„ä¼˜ç§€äººæ‰ã€‚</p><p>æˆåŠŸæ˜¯ä¸æ–­çš„åŠªåŠ›åŠ ä¸Šæœºä¼šï¼Œæœºä¼šæ¥äº†ä½ æ˜¯ä¸æ˜¯æŠŠæ¡å¾—ä½ã€‚è€ŒæŠŠæ¡æœºä¼šçš„å®åŠ›ä½ æ˜¯å¦å‚¨å­˜è¶³å¤Ÿï¼Ÿ<br>ä½ æ„¿æ„åŠªåŠ›å¤šä¹…ï¼Œ3å¹´ï¼Ÿ5å¹´ï¼Ÿ10å¹´ï¼Ÿä¸€è¾ˆå­ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯å®åŠ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èºæ—‹çŸ©é˜µ</title>
      <link href="/2019/12/08/spiralMatrix/"/>
      <url>/2019/12/08/spiralMatrix/</url>
      
        <content type="html"><![CDATA[<p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/luoxunmap.jpeg" alt="å›¾ç‰‡"><br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> len 9</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">luoxuan</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[len][len];</span><br><span class="line">    <span class="comment">//å¼€å§‹åˆå§‹åŒ–ï¼Œç»™æ•°ç»„èµ‹å€¼0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len;j++)&#123;</span><br><span class="line">            arr[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">//é¡¶è§’ç¡®å®šäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºç¬¬ä¸€è¡Œå³è¾¹çš„æ•°å­—</span></span><br><span class="line">    <span class="keyword">int</span> circleTimes = len/<span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> circelIndex = <span class="number">0</span>; <span class="comment">//åœˆçš„æ•°é‡</span></span><br><span class="line">    <span class="comment">//èµ‹å€¼è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">while</span>(circleTimes&gt;<span class="number">0</span>)&#123;  <span class="comment">//æµ‹è¯•æ—¶å€™ï¼Œæ¯ä¸€åœˆç»“æŸå¯ä»¥æ‰“å°å‡ºçœ‹ä¸€ä¸‹ï¼š&amp;&amp; circelIndex &lt;1</span></span><br><span class="line">        circelIndex ++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"ç¬¬%dåœˆ\n"</span>,circelIndex);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> column = <span class="number">1</span>;column &lt;= len-circelIndex; column++)&#123;  <span class="comment">//å¾€å³æ’åˆ—</span></span><br><span class="line">            <span class="keyword">if</span>(column &gt;= circelIndex<span class="number">-1</span>)&#123;</span><br><span class="line">                arr[circelIndex<span class="number">-1</span>][column] = arr[circelIndex <span class="number">-1</span>][column<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> row = circelIndex; row&lt;= len-circelIndex; row++)&#123; <span class="comment">//å¾€ä¸‹æ’åˆ—ï¼Œä»ç¬¬äºŒè¡Œï¼Œç¬¬X-i åˆ—å¼€å§‹</span></span><br><span class="line">            arr[row][len-circelIndex] = arr[row<span class="number">-1</span>][len-circelIndex] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> column = len-circelIndex<span class="number">-1</span>; column &gt;= circelIndex<span class="number">-1</span>; column--)&#123; <span class="comment">//å¾€å·¦æ’ï¼Œä¸‹æ ‡é€’å‡1ï¼Œå€¼ä¸ºåä¸€ä¸ª + 1</span></span><br><span class="line">            arr[len-circelIndex][column] = arr[len-circelIndex][column+<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> row =len-circelIndex<span class="number">-1</span>; row &gt; circelIndex<span class="number">-1</span>; row--)&#123; <span class="comment">//å¾€ä¸Šæ’åˆ—</span></span><br><span class="line">            arr[row][circelIndex<span class="number">-1</span>] = arr[row+<span class="number">1</span>][circelIndex<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        circleTimes--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¾“å‡ºäºŒç»´æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len;j++)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\t"</span>,arr[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ²ªæ±Ÿ-Cè¯­è¨€è¯¾ç¨‹ç²¾é€‰32è®²</title>
      <link href="/2019/12/06/hujiang_classC/"/>
      <url>/2019/12/06/hujiang_classC/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¼–ç¨‹é€»è¾‘ç²¾é€‰32è®²"><a href="#ç¼–ç¨‹é€»è¾‘ç²¾é€‰32è®²" class="headerlink" title="ç¼–ç¨‹é€»è¾‘ç²¾é€‰32è®²"></a>ç¼–ç¨‹é€»è¾‘ç²¾é€‰32è®²</h3><p>æ²ªæ±Ÿè¯¾ç¨‹ï¼š<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/cctalk_classC.jpeg" alt="å›¾ç‰‡1"></p><p>æ‰“å¡é¸­ï¼š<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/dakaya.png" alt="å›¾ç‰‡1"></p><p>å…¬ä¼—å·ï¼š é«˜é«˜ç¼–ç¨‹å°å±‹<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/gagao_gongzhonghao.jpeg" alt="å›¾ç‰‡1"></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSå¼€å‘å•†å“è§„æ ¼è®¾ç½®æ¨¡å—</title>
      <link href="/2019/12/06/iOSSku/"/>
      <url>/2019/12/06/iOSSku/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>SKUç™¾åº¦ç™¾ç§‘ä¸º åº“å­˜ä¿æœ‰å•ä½ ï¼ˆStock keeping Unit æˆ–è€…SKUï¼‰æ˜¯å¯¹æ¯ä¸€ä¸ªäº§å“å’ŒæœåŠ¡çš„å”¯ä¸€æ ‡ç¤ºç¬¦ã€‚  ä¹Ÿå°±æ˜¯è¯´sku ä¸ºå•†å“å¯¹åº”çš„å¾ˆå¤šç§ç±»è§„æ ¼æƒ…å†µä¸‹çš„ åº“å­˜ï¼Œä»·æ ¼  å„æœ‰ä¸åŒã€‚éœ€è¦é€šè¿‡sku è¿™æ ·ä¸€ç§ç»„åˆç»“æ„å­˜å‚¨è¿™äº›è®¡é‡å€¼ã€‚<br>åœ¨ç§»åŠ¨ç”µå•†æ—¶ä»£ï¼Œç½‘è´­å·²ç„¶æˆä¸ºæ½®æµã€‚æ›´æ˜¯å…¨æ°‘å‚ä¸ã€‚æ¯ä¸€å¹´éƒ½æœ‰è´­ç‰©èŠ‚ ï¼š äº¬ä¸œ618 , æ·˜å®å¤©çŒ«åŒ11, åŒ12 ã€‚ ä¸€ä¸ªæ·˜å®åº—å®¶æœˆé”€å”®é¢30ä¸‡èƒŒå ï¼Œä»–çš„å•†å“skuæœ‰ä¸Šåƒç§ã€‚  ä¸€ä¸ªå–æ©±æŸœçš„ï¼Œå°åˆ°æŠ½å±‰ï¼Œæ‹‰ç¯®ï¼Œäº”é‡‘ ï¼ŒæŠŠæ‰‹ï¼Œèºä¸é’‰ éƒ½å¯ä»¥ç»†åˆ†æˆå¾ˆå°çš„SKUã€‚ç§»åŠ¨ç”µå•†å•†å“èƒŒåçš„SKUç§ç±»çš„å¤æ‚æ€§ã€‚å¯æ­£æ˜¯å› ä¸ºå•†å“SKUçš„å¤šæ ·åŒ–ï¼Œæ‰èƒ½å•†å®¶å¸¦æ¥å·¨é‡çš„é”€å”®é¢ã€‚</p><h3 id="ä»è¯¦æƒ…é¡µè®¤è¯†SKU"><a href="#ä»è¯¦æƒ…é¡µè®¤è¯†SKU" class="headerlink" title="ä»è¯¦æƒ…é¡µè®¤è¯†SKU"></a>ä»è¯¦æƒ…é¡µè®¤è¯†SKU</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/chat_sku2.PNG" alt="Cç«¯skué€‰æ‹©"><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">è¿™ä¸ªå•†å“åŒ…å«çš„SKUä¿¡æ¯:&#123;</span><br><span class="line">    è§„æ ¼ç±»å‹:[&#123;</span><br><span class="line">            å°ºå¯¸:[XS, Sï¼Œ M, Lï¼ŒXLï¼Œ XXL]</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            é¢œè‰²: [ç™½è‰²ï¼ŒçŠç‘šç²‰ï¼Œè‰æœ¨ç»¿]</span><br><span class="line">        &#125;],</span><br><span class="line">    è§„æ ¼æ˜ç»†ç»„åˆæè¿°: &#123;</span><br><span class="line">        XS-ç™½è‰²:&#123;</span><br><span class="line">            å›¾ç‰‡: å›¾ç‰‡url,</span><br><span class="line">            ä»·æ ¼: ï¿¥328,</span><br><span class="line">            åº“å­˜: 188ä»¶,</span><br><span class="line">            æ‰©å±•..å­—æ®µ: å€¼</span><br><span class="line">        &#125;,</span><br><span class="line">        å…¶ä»–è§„æ ¼ç»„åˆ:&#123; </span><br><span class="line">            å›¾ç‰‡: å›¾ç‰‡url,</span><br><span class="line">            ä»·æ ¼: ä»·æ ¼..,</span><br><span class="line">            åº“å­˜: åº“å­˜æ•°é‡..,</span><br><span class="line">            æ‰©å±•..å­—æ®µ: å€¼</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><h3 id="SKUåŠŸèƒ½æ“ä½œæµç¨‹å›¾"><a href="#SKUåŠŸèƒ½æ“ä½œæµç¨‹å›¾" class="headerlink" title="SKUåŠŸèƒ½æ“ä½œæµç¨‹å›¾"></a>SKUåŠŸèƒ½æ“ä½œæµç¨‹å›¾</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/chat_sku_intro.png" alt="å›¾ç‰‡1"><br><span style="color:purple">è¯´æ˜</span></p><h4 id="æ–°å¢å•†å“SKU"><a href="#æ–°å¢å•†å“SKU" class="headerlink" title="æ–°å¢å•†å“SKU"></a>æ–°å¢å•†å“SKU</h4><p>1) ä»è§„æ ¼å®¹å™¨ä¸­é€‰æ‹©éœ€è¦çš„è§„æ ¼ã€‚å·²é€‰æ‹©çš„è§„æ ¼ç±»å‹ä¹Ÿå¯ç§»é™¤ã€‚<br>2) åœ¨å·²é€‰è§„æ ¼ç±»å‹ä¸‹ å¯æ–°å¢è§„æ ¼å±æ€§ã€‚å·²æ–°å¢çš„è§„æ ¼å±æ€§å¯é€‰ä¸­æˆ–å–æ¶ˆã€‚<br>3) è§„æ ¼å±æ€§çš„é€‰æ‹©æˆ–å–æ¶ˆ è§¦å‘è‡ªæœ‰ç»„åˆæ’åˆ—ã€‚ç”Ÿæˆè§„æ ¼æ˜ç»†çš„è¡¨å•ã€‚<br>4) å¡«å†™è§„æ ¼æ˜ç»†</p><ul><li>å•é¡¹å¡«å†™ï¼š æŒ¨ä¸ªå¡«å†™ï¼Œè¿‡æ»¤æ¡ä»¶å¡«å†™ã€‚</li><li>æ‰¹é‡å¡«å†™ã€‚<br>5) æäº¤skuæ˜ç»†é¡¹æ•°æ®ã€‚</li></ul><h4 id="ä¿®æ”¹å•†å“SKU"><a href="#ä¿®æ”¹å•†å“SKU" class="headerlink" title="ä¿®æ”¹å•†å“SKU"></a>ä¿®æ”¹å•†å“SKU</h4><p>1)  åŠ è½½å·²é€‰æ‹©çš„è§„æ ¼ç±»å‹å±æ€§ï¼›</p><p><span style="color:red;">æ³¨æ„ï¼šæ ¹æ®ä¸šåŠ¡æ§åˆ¶å·²é€‰è§„æ ¼ç±»å‹ æ˜¯å¦å¯æ–°å¢ ï¼Œæ˜¯å¦å¯åˆ é™¤çš„æ¡ä»¶ï¼Œå› ä¸ºç›´æ¥æ¶‰åŠåˆ°è§„æ ¼æ˜ç»†çš„æ’åˆ—ç»„åˆç»“æ„ã€‚ å½“å•†å“åº“çš„æŸå•†å“å·²ç»åœ¨åº—é“ºä¸Šçº¿äº†ï¼Œå¦‚æœå†æ–°å¢è§„æ ¼ç±»å‹çš„è¯ï¼Œæ’åˆ—ç»„åˆå°†æ”¹å˜ï¼Œä¹‹å‰è®¾ç½®çš„ä»·æ ¼å’Œåº“å­˜éƒ½ä¼šè·Ÿç€æ”¹å˜ã€‚æ‰€ä»¥ä¸å¯ä»¥å†æ–°å¢æˆ–åˆ å‡è§„æ ¼ç±»å‹ã€‚</span></p><p>2)  è‡ªç”±æ’åˆ—ç»„åˆ ï¼ŒæŠŠå„é¡¹å€¼ èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­ã€‚<br>3) ä¿®æ”¹æ•°æ®åï¼Œé‡æ–°æäº¤SKU çš„æ˜ç»†è¡¨å•ã€‚</p><p><span style="color:purple;">ä¿®æ”¹SKUçš„åœºæ™¯</span><br>1) ä»¥è¡£æœä¸ºä¾‹ï¼šç™½è‰² + M   å–å®Œçš„æ—¶å€™ï¼Œåœ¨è§„æ ¼sku ä¿®æ”¹çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå·²é€‰çš„é¢œè‰²ä¸ºç™½è‰²å»æ‰ã€‚<br>2) ä»¥æ‰‹æœº ä¸ºä¾‹ï¼šç”±äºçƒ­é”€ï¼Œå‚å®¶åˆä¸Šäº† å‡çº§ç‰ˆæœ¬ç«ç‘°é‡‘è‰²ã€‚å¯æ–°å¢ä¸€ä¸ªç«ç‘°é‡‘è‰²å†è®¾ç½®ç›¸åº”çš„ä»·æ ¼ã€‚</p><h2 id="1ã€æŠ€æœ¯è®²è§£"><a href="#1ã€æŠ€æœ¯è®²è§£" class="headerlink" title="1ã€æŠ€æœ¯è®²è§£"></a>1ã€æŠ€æœ¯è®²è§£</h2><h3 id="1-1-æœåŠ¡å™¨ä¸‹å‘çš„Jsonæ•°æ®ç»“æ„"><a href="#1-1-æœåŠ¡å™¨ä¸‹å‘çš„Jsonæ•°æ®ç»“æ„" class="headerlink" title="1.1  æœåŠ¡å™¨ä¸‹å‘çš„Jsonæ•°æ®ç»“æ„"></a>1.1  æœåŠ¡å™¨ä¸‹å‘çš„Jsonæ•°æ®ç»“æ„</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨é‡Šï¼š æœåŠ¡å™¨è¿”å›çš„å•†å“è§„æ ¼ç±»å‹å±æ€§ã€‚ç”¨äºé¡µé¢å¤´éƒ¨æ˜¾ç¤ºå·²é€‰çš„è§„æ ¼ç±»å‹ï¼Œå’Œå…¶å±æ€§ã€‚</span></span><br><span class="line">&#123;</span><br><span class="line">    type : 101, //è§„æ ¼ç±»å‹idå€¼ã€‚</span><br><span class="line">    name : é¢œè‰²,</span><br><span class="line">    types : [</span><br><span class="line">    &#123;</span><br><span class="line">        propertyId : 123255,  //å±æ€§å€¼å”¯ä¸€Idå€¼</span><br><span class="line">        propertyCatId : 101,</span><br><span class="line">        state : 1,  //è®°å½•æ˜¯å¦è¢«é€‰ä¸­è¯¥é¢œè‰²</span><br><span class="line">        name : ç»¿è‰²</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        propertyId : 123254,</span><br><span class="line">        propertyCatId : 101,</span><br><span class="line">        state : 1,</span><br><span class="line">        name : ç™½è‰²</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//è§„æ ¼æ˜ç»†æè¿° ç»“æ„,ç”¨äºSKU ç¼–è¾‘çš„æ—¶å€™ï¼ŒæŠŠè§„æ ¼æ˜ç»†å„é¡¹ç»„åˆæ•°æ® å¡«å……åˆ°è¡¨å•ã€‚</span></span><br><span class="line"></span><br><span class="line">skuDesc : [</span><br><span class="line">&#123;</span><br><span class="line">    skuId : 167977,  //skué¡¹ id</span><br><span class="line">    productId : 166224, //å•†å“id</span><br><span class="line">    price : 334,  //æ™®é€šå”®ä»·</span><br><span class="line">    groupPrice :300, //æ‹¼å›¢å”®ä»·</span><br><span class="line">    image : https://cdn.gaogao.com/image/e0ecd00c2sw2f23f29df6d504987d60d.png, //å›¾ç‰‡</span><br><span class="line">    properties : 101:123253-102:123257  //è§„æ ¼å±æ€§ è‡ªç”±ç»„åˆæ’åˆ—å€¼</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    skuId : 167971,</span><br><span class="line">    productId : 166224,</span><br><span class="line">    price : 200,</span><br><span class="line">    groupPrice : 188,</span><br><span class="line">    image : https://cdn.gaogao.com/image/e0ecd00c2d5f442c49df6d504987d60d.png,</span><br><span class="line">    properties : 101:123253-102:123258</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//å‘æœåŠ¡å™¨æäº¤æŸå•†å“çš„SKU è§„æ ¼æ˜ç»†æ•°æ®:</span></span><br><span class="line"></span><br><span class="line">product_id : 176294;  //å•†å“id</span><br><span class="line">properties : [  //è§„æ ¼å±æ€§æ’åˆ—ç»„åˆé¡¹</span><br><span class="line">&#123;"price":100,"groupPrice":88,"properties":"11:167918-101:123253-102:123259"&#125;,</span><br><span class="line">&#123;"price":100,"groupPrice":88,"properties":"11:172957-101:123253-102:123259"&#125;,</span><br><span class="line">&#123;<span class="attr">"price"</span>:<span class="number">100</span>,<span class="attr">"groupPrice"</span>:<span class="number">88</span>,<span class="attr">"properties"</span>:<span class="string">"11:167918-101:123253-102:123258"</span>&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><span style="color:purple">è¯´æ˜:</span><br>å…ˆæ ¹æ®å·²é€‰çš„ è§„æ ¼å¤§ç±»å‹propertyCatId å€¼æ’åºã€‚ è¿™æ ·åšçš„åŸå› æ˜¯ï¼šæ— è®º A+B+C ï¼ŒB+A+C æˆ– C+A+B  éƒ½æ˜¯è¡¨ç¤ºåŒä¸€ç§SKUç»„åˆã€‚ä»¥ â€œ11:167918-101:123253-102:123259â€ ä¸ºåˆ—ï¼Œæ ¹æ®è§„æ ¼å¤§ç±»å‹idå€¼æ’åºã€‚ æœ€ç»ˆéƒ½ä»¥ Aï¼šaa+B:bb+C:cc ç»„åˆæäº¤ç»™æœåŠ¡å™¨, ä»¥æ­¤æ¥ç»´æŠ¤è¯¥ç»„åˆå¯¹åº”çš„ä»·æ ¼å’Œåº“å­˜ï¼› </p><h2 id="2ã€é¡µé¢ç»„æˆ"><a href="#2ã€é¡µé¢ç»„æˆ" class="headerlink" title="2ã€é¡µé¢ç»„æˆ"></a>2ã€é¡µé¢ç»„æˆ</h2><h3 id="2-1-é¡µé¢å…¨å±€å˜é‡"><a href="#2-1-é¡µé¢å…¨å±€å˜é‡" class="headerlink" title="2.1 é¡µé¢å…¨å±€å˜é‡"></a>2.1 é¡µé¢å…¨å±€å˜é‡</h3><p>NSMutableArray <em>datas; //è§„æ ¼æ˜ç»†åˆ—è¡¨ï¼šæ’åˆ—ç»„åˆçš„æ•°æ®æº<br>NSMutableArray </em>sectionMenuArr;  //è®°å½•é€‰ä¸­çš„å¤§ç±»å‹ï¼›<br>NSMutableDictionary <em> itemArrDic; //map å­˜æ”¾key:ä¸ºid , å€¼ä¸ºå·²é€‰çš„è§„æ ¼ç±»å‹å¯¹è±¡<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/chat_itemArrDic.png" alt="itemSelectedArrDic"><br>NSMutableDictionary </em> itemSelectedArrDic;  //å·²é€‰çš„è§„æ ¼ç±»å‹ä¸‹çš„è§„æ ¼å±æ€§æ•°ç»„ã€‚<br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/itemSelectedArrDic.png" alt="itemSelectedArrDic"></p><h3 id="2-2-æ„å»ºä¸€ä¸ªæ ‘ç»“æ„"><a href="#2-2-æ„å»ºä¸€ä¸ªæ ‘ç»“æ„" class="headerlink" title="2.2 æ„å»ºä¸€ä¸ªæ ‘ç»“æ„"></a>2.2 æ„å»ºä¸€ä¸ªæ ‘ç»“æ„</h3><p>æ ¹æ®æäº¤ç»™æœåŠ¡å™¨çš„ç»„åˆå­—ç¬¦çªœå¦‚ â€œ11:167918-101:123253-102:123258â€, è¿™ä¸ªæ˜¯ä¸€ä¸ªæœ‰ä¸‰ä¸ªå±‚çº§è¡¨ç¤ºçš„SKU ç»„åˆã€‚<br>ä¸¾ä¾‹ï¼šå¤©çŒ«è´­ä¹°æ‰‹æœºï¼ŒåŠ å…¥è´­ç‰©è½¦çš„æ—¶å€™é€‰æ‹©   å†…å­˜ï¼š64g  + é¢œè‰²ï¼šç™½è‰² +  å¥—é¤ç±»å‹ï¼š å®˜æ–¹æ ‡é…<br>å…¶ä¸­åŒ…å«å†…å®¹ï¼š1ï¼‰è§„æ ¼å¤§ç±»å‹è¦å…ˆæ’å¥½åº ï¼Œå±æ€§è¦ä¸€ä¸€å¯¹åº”ç±»å‹ã€‚ ä¸‰ä¸ªå±‚çº§çš„SKUç»„åˆåº”è¯¥æ¯”è¾ƒå¸¸è§ã€‚é€šè¿‡è¿™é‡Œï¼Œæˆ‘ä»¬æ„ä»¶ä¸€ä¸ªmodelå®ä½“ã€‚ç»“æ„å¦‚ä¸‹ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ConditionFilter</span> : <span class="title">NSObject</span>&lt;<span class="title">NSCopying</span>,<span class="title">NSMutableCopying</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">NSInteger</span> value; <span class="comment">// idå€¼</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSString</span> *name; <span class="comment">//åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>) <span class="built_in">NSArray</span>&lt;ConditionFilter&gt; *statusItem; <span class="comment">//å­çº§</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">NSInteger</span> state; <span class="comment">//é€‰ä¸­çŠ¶æ€ï¼š 1å·²é€‰æ‹© 0æœªé€‰æ‹©</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSString</span> * propertyCatId; <span class="comment">//è§„æ ¼ç±»å‹ï¼š ä¸€çº§åˆ†ç±»çš„id</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSString</span> * propertyId; <span class="comment">//è§„æ ¼å±æ€§ï¼š äºŒçº§åˆ†ç±»id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSString</span> * pid; <span class="comment">//çˆ¶èŠ‚ç‚¹ç¼–å·(éšæœºç”Ÿæˆ)</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">NSString</span> * nodeId; <span class="comment">//èŠ‚ç‚¹ç¼–å·(éšæœºç”Ÿæˆ)</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) ConditionFilter *parent; <span class="comment">//çˆ¶èŠ‚ç‚¹ï¼ˆçˆ¶åªæœ‰ä¸€ä¸ªï¼‰</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">BOOL</span> extend; <span class="comment">//æ˜¯å¦å±•å¼€</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">NSInteger</span>  level;<span class="comment">//å½“å‰å±‚çº§</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p><h3 id="2-3-æ ¹æ®å·²é€‰çš„è§„æ ¼ç±»å‹-è‡ªç”±æ’åˆ—ç»„åˆ-å‡ºæ˜ç»†åˆ—è¡¨å„é¡¹ç»„åˆæ•°æ®"><a href="#2-3-æ ¹æ®å·²é€‰çš„è§„æ ¼ç±»å‹-è‡ªç”±æ’åˆ—ç»„åˆ-å‡ºæ˜ç»†åˆ—è¡¨å„é¡¹ç»„åˆæ•°æ®" class="headerlink" title="2.3 æ ¹æ®å·²é€‰çš„è§„æ ¼ç±»å‹ è‡ªç”±æ’åˆ—ç»„åˆ å‡ºæ˜ç»†åˆ—è¡¨å„é¡¹ç»„åˆæ•°æ®"></a>2.3 æ ¹æ®å·²é€‰çš„è§„æ ¼ç±»å‹ è‡ªç”±æ’åˆ—ç»„åˆ å‡ºæ˜ç»†åˆ—è¡¨å„é¡¹ç»„åˆæ•°æ®</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - ä»æœ€åä¸€ä¸ªå±‚çº§ç®—èµ·ï¼›å¾€çˆ¶ç±»èµ‹å€¼ï¼›(æ ¸å¿ƒ: ç»™statusItemèµ‹å€¼)</span></span><br><span class="line">-(<span class="keyword">void</span>)configDataSectionReload</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å…ˆæŠŠå·²é€‰æ‹©çš„å¤§ç±»ï¼Œè¿‡æ»¤å‡ºå·²é€‰æ‹©çš„å±æ€§é¡¹çš„å¤§ç±»</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> *hasChooseSectionMenuArr = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span>(ConditionFilter *sectionMenu <span class="keyword">in</span> <span class="keyword">self</span>.sectionMenuArr)&#123;</span><br><span class="line">        <span class="built_in">NSArray</span> * itemChooseArr = [<span class="keyword">self</span>.itemSelectedArrDic objectForKey:@(sectionMenu.value)];</span><br><span class="line">        <span class="keyword">if</span>(itemChooseArr.count)&#123;</span><br><span class="line">            [hasChooseSectionMenuArr addObject:@(sectionMenu.value)];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç¡®å®šæ ‘çš„å±‚çº§ï¼šä¸ºé€‰æ‹©çš„å·²é€‰å¤§ç±»å‹ä¸ªæ•°ã€‚å¹¶ç»‘å®šå­èŠ‚ç‚¹é›†åˆstatusItem</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> *childArr = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSInteger</span> level = hasChooseSectionMenuArr.count; level&gt;<span class="number">0</span>; level -- ) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSNumber</span> *cellSectionTag = [hasChooseSectionMenuArr objectAtIndex:level<span class="number">-1</span>];</span><br><span class="line">        <span class="comment">//å¯å˜é›†åˆçš„copy å’Œ mutableCopy æ˜¯ä¸€æ ·ï¼›æ·±æ‹·è´ï¼Œåœ°å€ä¸ä¸€æ ·ï¼›å¦‚æœä¸ç”¨copyä¼šé€ æˆå¤šä¸ªåœ°æ–¹å¼•ç”¨åœ°å€å¯¹è±¡ï¼›å€¼ä¼šéšç€å…³è”ï¼›</span></span><br><span class="line">        <span class="built_in">NSMutableArray</span> *itemSelectArr = [[<span class="keyword">self</span>.itemSelectedArrDic objectForKey:cellSectionTag] mutableCopy];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">NSInteger</span> i=<span class="number">0</span>; i&lt; itemSelectArr.count; i++)&#123;</span><br><span class="line">            ConditionFilter *item = [itemSelectArr objectAtIndex:i];</span><br><span class="line">            item.level = level; <span class="comment">//æ ‡è®°ç­‰çº§</span></span><br><span class="line">            item.extend = <span class="literal">NO</span>;</span><br><span class="line">            item.nodeId = <span class="literal">nil</span>;</span><br><span class="line">            item.pid = <span class="literal">nil</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//ï¼ˆè¿™é‡Œä½¿ç”¨æ‹·è´ï¼‰ï¼Œä¸ºå­èŠ‚ç‚¹èµ‹å€¼ã€‚</span></span><br><span class="line">            item.statusItem = [[<span class="built_in">NSMutableArray</span> alloc] initWithArray:childArr copyItems:<span class="literal">YES</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        childArr = [itemSelectArr mutableCopy]; <span class="comment">//ï¼ˆé˜²æ­¢å¯¹childArrçš„æ¥æºæ•°æ®æºæ±¡æŸ“,è¿™é‡Œä½¿ç”¨æ‹·è´ï¼‰ï¼ˆfillParentNodeId ä¼šå¯¹æ•°æ®æºchildArr è¿›è¡Œæ±¡æŸ“ï¼›å¦‚æ”¹å˜å¯¹è±¡çš„nameç­‰è®¾ç½®ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ¸…ç©º</span></span><br><span class="line">    [<span class="keyword">self</span>.datas removeAllObjects];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¡«å……å­èŠ‚ç‚¹ç»‘å®šçˆ¶èŠ‚ç‚¹pid; childArræ˜¯å½¢æˆçš„ä¸€é¢—æ ‘ç»“æ„ã€‚</span></span><br><span class="line">    [<span class="keyword">self</span> fillParentNodeId:childArr parentNode:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - ä»å‰å¾€åèµ‹å€¼ï¼ˆ ç»™å­èŠ‚ç‚¹ç»‘å®šæ ‡è¯†çˆ¶ç±»parentï¼‰,ç”¨äºæ‹¼è£…properties ç»„åˆçš„idå­—ç¬¦çªœ</span></span><br><span class="line">-(<span class="keyword">void</span>)fillParentNodeId:(<span class="built_in">NSArray</span> *)itemArr parentNode:(ConditionFilter *)parent</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">NSInteger</span> i =<span class="number">0</span> ;i &lt; itemArr.count; i++)&#123;</span><br><span class="line">        ConditionFilter *filter = [itemArr objectAtIndex:i];</span><br><span class="line">        filter.pid = parent.nodeId;</span><br><span class="line">        filter.parent = parent; <span class="comment">//ç»‘å®šçˆ¶çº§èŠ‚ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSString</span> *nodeStr = [<span class="built_in">NSString</span> uniqueStringForMessage];</span><br><span class="line">        filter.nodeId = nodeStr;</span><br><span class="line">        filter.extend = filter.statusItem.count;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">self</span>.dataShowLayoutStyle == LayoutComposeStyle)&#123; <span class="comment">//æ’åˆ—ç»„åˆæ ·å¼ï¼›</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(filter.statusItem.count == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//æ ¹æ®statusItemç­‰äº0 è®¾ç½®å±‚çº§ä¸º1çº§çš„æ—¶å€™nameå€¼ ç»„åˆæˆ: ç™½è‰²+XL , ç™½è‰²+L æ ¼å¼ï¼›èµ‹å€¼ç»™æœ€åä¸€ä¸ªå±‚çº§modelsçš„nameå±æ€§</span></span><br><span class="line">                <span class="built_in">NSMutableArray</span>  *allJoinNamesArr = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">                [allJoinNamesArr addObject:filter.name];</span><br><span class="line">                ConditionFilter *parent = filter.parent;</span><br><span class="line">                <span class="keyword">while</span> (parent) &#123;</span><br><span class="line">                    [allJoinNamesArr insertObject:parent.name atIndex:<span class="number">0</span>];</span><br><span class="line">                    parent = parent.parent;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">NSString</span> *allJoinName = [allJoinNamesArr componentsJoinedByString:<span class="string">@"+"</span>];</span><br><span class="line">                filter.name = allJoinName; <span class="comment">//æ‹¼æ¥UIæ˜¾ç¤ºçš„name</span></span><br><span class="line">                filter.level = <span class="number">1</span>; <span class="comment">//æ’åˆ—ç»„åˆæ ·å¼éƒ½ä¸º1çº§UIæ˜¾ç¤ºçš„é—´è·.ï¼ˆlabelæ˜¾ç¤ºæ—¶å€™çš„å·¦è¾¹è·ï¼‰</span></span><br><span class="line">                [<span class="keyword">self</span>.datas addObject:filter]; <span class="comment">//åªæ·»åŠ æœ€åä¸€ä¸ªå±‚çº§ï¼›</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">//æ ‘å±‚çº§ æ ·å¼ï¼ˆå…¨éƒ¨æ·»åŠ ï¼‰</span></span><br><span class="line">            </span><br><span class="line">            [<span class="keyword">self</span>.datas addObject:filter];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é€’å½’</span></span><br><span class="line">        [<span class="keyword">self</span> fillParentNodeId:filter.statusItem  parentNode:filter];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-è‡ªç”±æ’åˆ—ç»„åˆ-ï¼ŒæŠŠå„é¡¹å€¼-èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­"><a href="#2-4-è‡ªç”±æ’åˆ—ç»„åˆ-ï¼ŒæŠŠå„é¡¹å€¼-èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­" class="headerlink" title="2.4 è‡ªç”±æ’åˆ—ç»„åˆ ï¼ŒæŠŠå„é¡¹å€¼ èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­"></a>2.4 è‡ªç”±æ’åˆ—ç»„åˆ ï¼ŒæŠŠå„é¡¹å€¼ èµ‹å€¼åˆ°è§„æ ¼æ˜ç»†è¡¨ä¸­</h3><h4 id="å…ˆæŠŠå„é¡¹å€¼èµ‹å€¼ç»™SKUModel-ï¼Œå­˜åˆ°æ ¹æ®æ’åˆ—ç»„åˆå­—ç¬¦çªœä¸ºkey-ï¼Œå­˜æ”¾åˆ°mapä¸­ã€‚"><a href="#å…ˆæŠŠå„é¡¹å€¼èµ‹å€¼ç»™SKUModel-ï¼Œå­˜åˆ°æ ¹æ®æ’åˆ—ç»„åˆå­—ç¬¦çªœä¸ºkey-ï¼Œå­˜æ”¾åˆ°mapä¸­ã€‚" class="headerlink" title="å…ˆæŠŠå„é¡¹å€¼èµ‹å€¼ç»™SKUModel ï¼Œå­˜åˆ°æ ¹æ®æ’åˆ—ç»„åˆå­—ç¬¦çªœä¸ºkey ï¼Œå­˜æ”¾åˆ°mapä¸­ã€‚"></a>å…ˆæŠŠå„é¡¹å€¼èµ‹å€¼ç»™SKUModel ï¼Œå­˜åˆ°æ ¹æ®æ’åˆ—ç»„åˆå­—ç¬¦çªœä¸ºkey ï¼Œå­˜æ”¾åˆ°mapä¸­ã€‚</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®SKUå€¼</span></span><br><span class="line"><span class="built_in">NSArray</span> *skuArr = [response.responseObject objectForKey:<span class="string">@"sku"</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">NSInteger</span> i=<span class="number">0</span> ;i &lt;<span class="keyword">self</span>.datas.count; i++)&#123;</span><br><span class="line">    ConditionFilter *filter = [<span class="keyword">self</span>.datas objectAtIndex:i];</span><br><span class="line">    <span class="built_in">NSString</span> *storeCellKey = filter.name;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSString</span> *properties = [<span class="keyword">self</span> processPropertiesByFilter:filter];</span><br><span class="line">    <span class="comment">//æ‰¾åˆ°sku è®¾ç½®ä¿¡æ¯ï¼›</span></span><br><span class="line">    <span class="keyword">for</span>(SkuDetailModel *sku <span class="keyword">in</span> skuArr)&#123;</span><br><span class="line">        <span class="keyword">if</span>([sku.properties isEqualToString:properties])&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">SKUModel</span> *writeSku = [[<span class="built_in">SKUModel</span> alloc] init];</span><br><span class="line">            writeSku.properties = sku.properties;</span><br><span class="line">            writeSku.groupPrice = sku.groupPrice;</span><br><span class="line">            writeSku.price = sku.price;</span><br><span class="line">            writeSku.image = sku.image;</span><br><span class="line">            [<span class="keyword">self</span>.writeFieldBoxDic setObject:writeSku forKey:storeCellKey];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-5-propertiesçš„è‡ªç”±ç»„åˆidå€¼æ‹¼æ¥"><a href="#2-5-propertiesçš„è‡ªç”±ç»„åˆidå€¼æ‹¼æ¥" class="headerlink" title="2.5 propertiesçš„è‡ªç”±ç»„åˆidå€¼æ‹¼æ¥"></a>2.5 propertiesçš„è‡ªç”±ç»„åˆidå€¼æ‹¼æ¥</h3><p>å¾ªç¯å–å‡ºå…¶çˆ¶èŠ‚ç‚¹. è®°å½•å¤§ç±»å‹ï¼šå±æ€§ æ ¼å¼ã€‚ æ ¹æ®key æ’åºï¼Œæ‹¼æ¥æˆ A:aa - B:bb - C:cc æ ¼å¼<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - å¤„ç†æ¯è¡Œè§„æ ¼å¡«å†™çš„ æ™®é€šä»·å’Œæ‹¼å›¢ä»· è¿”å› skuçš„ç»„åˆpropertieså€¼</span></span><br><span class="line">-(<span class="built_in">NSString</span> *)processPropertiesByFilter:(ConditionFilter *)filter</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableDictionary</span> *mDic = [[<span class="built_in">NSMutableDictionary</span> alloc] init];</span><br><span class="line">    [mDic setObject:filter.propertyId forKey:filter.propertyCatId];</span><br><span class="line">    </span><br><span class="line">    ConditionFilter *parent = filter.parent;</span><br><span class="line">    <span class="keyword">while</span> (parent) &#123;</span><br><span class="line">        [mDic setObject:parent.propertyId forKey:parent.propertyCatId];</span><br><span class="line">        parent = parent.parent;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ’åº</span></span><br><span class="line">    <span class="built_in">NSArray</span> *keyArr = [mDic.allKeys sortedArrayUsingComparator:^<span class="built_in">NSComparisonResult</span>(<span class="keyword">id</span>  _Nonnull obj1, <span class="keyword">id</span>  _Nonnull obj2) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSNumber</span> *num1 = [<span class="built_in">NSNumber</span> numberWithInteger:[obj1 integerValue]];</span><br><span class="line">        <span class="built_in">NSNumber</span> *num2 = [<span class="built_in">NSNumber</span> numberWithInteger:[obj2 integerValue]];</span><br><span class="line">        <span class="built_in">NSComparisonResult</span> result = [num1 compare:num2];</span><br><span class="line">        <span class="keyword">return</span> result == <span class="built_in">NSOrderedDescending</span>; <span class="comment">// å‡åº</span></span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSMutableArray</span> *joinStrArr = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">NSString</span> *key <span class="keyword">in</span> keyArr)&#123;</span><br><span class="line">        <span class="built_in">NSString</span> *str = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@:%@"</span>,key,[mDic objectForKey:key]];</span><br><span class="line">        [joinStrArr addObject:str];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSString</span> *properties = [joinStrArr componentsJoinedByString:<span class="string">@"-"</span>];</span><br><span class="line">    <span class="keyword">return</span> properties;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="2-6-åˆ—è¡¨çš„UIæ˜¾ç¤ºï¼š-tableViewç›¸å…³å§”æ‰˜"><a href="#2-6-åˆ—è¡¨çš„UIæ˜¾ç¤ºï¼š-tableViewç›¸å…³å§”æ‰˜" class="headerlink" title="2.6 åˆ—è¡¨çš„UIæ˜¾ç¤ºï¼š tableViewç›¸å…³å§”æ‰˜"></a>2.6 åˆ—è¡¨çš„UIæ˜¾ç¤ºï¼š tableViewç›¸å…³å§”æ‰˜</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//å…±ä¸¤ä¸ªåˆ†ç»„ã€‚ç¬¬ä¸€ä¸ªåˆ†ç»„å±•ç¤ºé€‰æ‹©çš„è§„æ ¼ç±»å‹ã€‚ ç¬¬äºŒä¸ªåˆ†ç»„æ˜¯è§„æ ¼æ˜ç»†è¡¨å•é¡¹</span></span><br><span class="line">-(<span class="built_in">NSInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)tableView</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">self</span>.sectionMenuArr.count + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“ä¸ºç¬¬äºŒä¸ªåˆ†ç»„æ—¶,æ˜¾ç¤ºçš„è¡Œæ•°ä¸ºæ’åˆ—ç»„åˆæ•°</span></span><br><span class="line">-(<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(section == <span class="keyword">self</span>.sectionMenuArr.count)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.datas.count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="built_in">UITableViewCell</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(indexPath.section == <span class="keyword">self</span>.sectionMenuArr.count)&#123;</span><br><span class="line">        <span class="comment">//æ’åˆ—ç»„åˆçš„Cellæ˜¾ç¤º</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ’åˆ—ç»„åˆçš„åå­—</span></span><br><span class="line">        ConditionFilter *filter = [<span class="keyword">self</span>.datas objectAtIndex:indexPath.row];</span><br><span class="line">        cell.nameLabel.text = filter.name;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æŸä¸€æ’åˆ—ç»„åˆåç§°å¯¹åº”çš„ skuModel è®°å½•çš„è¡¨å•å€¼å’Œpropertieså€¼</span></span><br><span class="line">        <span class="built_in">SKUModel</span> *sku = [<span class="keyword">self</span>.writeFieldBoxDic objectForKey:filter.name];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-7-ä¿®æ”¹è§„æ ¼æ˜ç»†-çš„è¡¨å•å€¼"><a href="#2-7-ä¿®æ”¹è§„æ ¼æ˜ç»†-çš„è¡¨å•å€¼" class="headerlink" title="2.7 ä¿®æ”¹è§„æ ¼æ˜ç»† çš„è¡¨å•å€¼"></a>2.7 ä¿®æ”¹è§„æ ¼æ˜ç»† çš„è¡¨å•å€¼</h3><p>ä¿®æ”¹æ¯ä¸€ä¸ªæ˜ç»†é¡¹çš„æ—¶å€™ï¼Œå¯å¯¹åº”æ ¹æ®TextFieldValueChange äº‹ä»¶å˜åŒ–ï¼ŒæŠŠå€¼èµ‹å€¼ç»™æ¯ä¸€é¡¹æ’åˆ—ç»„åˆçš„keyå¯¹åº”çš„skuModelä¸­ã€‚<br>skuModelå¯¹è±¡: {â€œpriceâ€:100,â€groupPriceâ€:88,â€propertiesâ€:â€11:167918-101:123253-102:123259â€}<br>å‡†å¤‡ä¸€ä¸ªå­—å…¸æˆ–mapï¼šwriteFieldBoxDic æ ¹æ®æ’åˆ—ç»„åˆçš„å­—ç¬¦çªœ â€œA+B+Câ€ä½œä¸ºkey,  skuModelä½œä¸ºvalue å­˜å‚¨ï¼›<br>writeFieldBoxDic {<br>â€œA+B+Câ€:  skuModel<br>â€¦<br>}<br>cell å–å€¼æ˜¾ç¤ºçš„æ—¶å€™ï¼Œæ ¹æ®key å–å¾— skuModel çš„å€¼ï¼›fieldå€¼æ”¹å˜å¾—æ—¶å€™ï¼Œæ ¹æ®keyå–å¾—skuModel. å­˜åœ¨ç›´æ¥ä¿®æ”¹modelçš„å±æ€§ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„skuModel å­˜åˆ°writeFieldBoxDicä¸­ï¼›</p><h3 id="2-8-æäº¤çš„è¡¨å•æ¡ä»¶åˆ¤æ–­"><a href="#2-8-æäº¤çš„è¡¨å•æ¡ä»¶åˆ¤æ–­" class="headerlink" title="2.8  æäº¤çš„è¡¨å•æ¡ä»¶åˆ¤æ–­"></a>2.8  æäº¤çš„è¡¨å•æ¡ä»¶åˆ¤æ–­</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)submitAction</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">BOOL</span> needReturnFlag = <span class="literal">NO</span>; <span class="comment">//æ˜¯å¦éœ€è¦é˜»æ­¢æé†’ï¼›</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> *skuArr = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">NSInteger</span> i=<span class="number">0</span>; i&lt;<span class="keyword">self</span>.datas.count; i++)&#123;</span><br><span class="line">        ConditionFilter *filter = [<span class="keyword">self</span>.datas objectAtIndex:i];</span><br><span class="line">        <span class="built_in">SKUModel</span> *sku = [<span class="keyword">self</span>.writeFieldBoxDic objectForKey:filter.name];</span><br><span class="line">        <span class="keyword">if</span>(sku)&#123;</span><br><span class="line">            [skuArr addObject:[sku mj_JSONObject]];</span><br><span class="line">            <span class="keyword">if</span>(sku.price == <span class="literal">nil</span> || sku.groupPrice == <span class="literal">nil</span>)&#123;</span><br><span class="line">                needReturnFlag = <span class="literal">YES</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            needReturnFlag = <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(needReturnFlag || skuArr.count == <span class="number">0</span>)&#123;</span><br><span class="line">        [MBProgressHUD showMessage:<span class="string">@"æ‰€æœ‰è§„æ ¼æ™®é€šä»·éœ€å¡«å†™å®Œæ•´ï¼"</span>];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//...ä¿å­˜åˆ°æœåŠ¡å™¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€ä¸šåŠ¡ï¼šåº—é“ºå•†å“å’Œäº§å“åº“å…³ç³»å›¾"><a href="#3ã€ä¸šåŠ¡ï¼šåº—é“ºå•†å“å’Œäº§å“åº“å…³ç³»å›¾" class="headerlink" title="3ã€ä¸šåŠ¡ï¼šåº—é“ºå•†å“å’Œäº§å“åº“å…³ç³»å›¾"></a>3ã€ä¸šåŠ¡ï¼šåº—é“ºå•†å“å’Œäº§å“åº“å…³ç³»å›¾</h2><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/chat_store_product.png" alt="Bç«¯åº—é“ºå•†å“å’Œç´ æåº“"></p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>äº§å“åº“ï¼šåªè´Ÿè´£ç®¡ç†äº§å“çš„ä»·æ ¼ï¼šæ— è®ºæ‹¼å›¢ä»· è¿˜ æ˜¯ç§’æ€ä»·ï¼Œæ´»åŠ¨ä»· æˆ–æ™®é€šä»· éƒ½å¯ç»Ÿä¸€åœ¨åº“ä¸­ç®¡ç†è¯¥è§„æ ¼æ˜ç»†ä¿¡æ¯ã€‚ è¿™æ ·åšçš„ç›®çš„æ˜¯æä¾›å•†å“ä¿¡æ¯çš„å¤ç”¨ã€‚å½“åœ¨åº—é“ºä¸Šæ¶ä¸€ä¸ªå•†å“æ—¶ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å»åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å•†å“ï¼Œå¯é€šè¿‡äº§å“åº“è¿›è¡Œé€‰æ‹©æ·»åŠ ã€‚<br><span style="color:purple">ä»å•†æˆ·è§’è‰²è¿›è¡ŒåŒºåˆ†ï¼š</span></p><ul><li>ä¸ªäººå¼€æ·˜å®åº—æ¨¡å¼ï¼šåº—é“ºéœ€å•ç‹¬ç®¡ç†å•†å“çš„åº“å­˜,  è¿è´¹çš„è®¾ç½® æ˜¯å¦åŒ…é‚®ç­‰ä¿¡æ¯ã€‚</li><li>å‚å®¶å’Œè¿é”åº—æ¨¡å¼ï¼šè¿é”åº—å»åº“å­˜åªè´Ÿè´£ä»£é”€ï¼Œæ— éœ€ç®¡ç†åº“å­˜å’Œå‘è´§ã€‚å½“ç”¨æˆ·ä¸‹å•ï¼Œç»Ÿä¸€æŒ‡å‘å‚å®¶æ¥å‘è´§ã€‚ å‚å®¶ç»Ÿè®¡è®¾ç½®äº§å“ä¿¡æ¯ ï¼Œ ä»·æ ¼ï¼Œ åº“å­˜ã€‚</li><li>è”ç›Ÿçš„æ¦‚å¿µï¼š è”ç›Ÿè®¾ç½®å¥½äº†å•†å“ã€‚å·²åŠ å…¥è”ç›Ÿçš„å•†å®¶å¯ç›´æ¥ä»£é”€è”ç›Ÿæ€»åº—çš„å•†å“è¿›è¡Œå”®å–ï¼Œå–å¾—åˆ†ä½£ã€‚ç±»ä¼¼å¤šå¤šè¿›å®ï¼Œå¯å”®å–å¹³å°å·²å­˜åœ¨çš„å¯åˆ†æˆçš„å•†å“ã€‚</li></ul><h2 id="4ã€-æŠ€æœ¯æ€»ç»“"><a href="#4ã€-æŠ€æœ¯æ€»ç»“" class="headerlink" title="4ã€ æŠ€æœ¯æ€»ç»“"></a>4ã€ æŠ€æœ¯æ€»ç»“</h2><ol><li>æ‰€æœ‰çš„é‡ç‚¹åœ¨äºå»ºç«‹æ ‘å±‚çº§ç»“æ„ï¼Œæ ¹æ®å·²é€‰çš„è§„æ ¼å¤§ç±»å‹å¾ªç¯å…¶å·²é€‰æ‹©çš„è§„æ ¼å±æ€§æ•°ç»„ã€‚é€šè¿‡ConditionFilterå®ä½“çš„å±æ€§statusItem å¯ä»¥å–åˆ°å­èŠ‚ç‚¹ConditionFilter çš„æ•°ç»„ã€‚</li><li>ä»æœ€åä¸€ä¸ªå±‚çº§ä¸€æ¬¡å¾€ä¸Šä¸€å±‚çº§çš„èŠ‚ç‚¹èµ‹å€¼å­èŠ‚ç‚¹æ•°ç»„statusItemã€‚ä¸ºé˜²æ­¢å¯¹æ•°æ®æ¥æºçš„æ±¡æŸ“ï¼Œä¸€å®šè¦ä½¿ç”¨æ·±æ‹·è´ã€‚æ·±æ‹·è´model è¦å®ç°NSCopying,NSMutableCopying ç›¸å…³åè®®æ–¹æ³•ã€‚</li><li>ä»å‘æœåŠ¡å™¨æäº¤æ¯ä¸€é¡¹è§„æ ¼æ˜ç»†çš„ç»„åˆé¡¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯¹ConditionFilter çš„å±æ€§parent è¿›è¡Œéå†ï¼Œä¾æ¬¡å–å¾—ä¸Šä¸€èŠ‚ç‚¹çš„ç›¸å…³å±æ€§ï¼Œç›´åˆ°æœ€ä¸Šä¸€çº§èŠ‚ç‚¹çš„parent å±æ€§ä¸ºnull çš„æ—¶å€™ä¾¿åœæ­¢æ‹¼æ¥ã€‚propertiesçš„æ‹¼æ¥å°±å®Œæˆäº†ã€‚</li><li>åœ¨è¡¨å•å¡«å†™çš„æ—¶å€™ï¼Œé‡‡å–å¯¹å­˜å‚¨çš„æ¨¡å‹skuModelå±æ€§ä½œæ›´æ”¹ã€‚è€Œæ¯ä¸€é¡¹skuModel æ‰€å­˜å‚¨çš„map å­—å…¸çš„key æ˜¯ç”±æ’åˆ—ç»„åˆå¾—åˆ°çš„UIæ˜¾ç¤ºçš„æ‹¼æ¥å­—ç¬¦çªœã€‚å¦‚å•†å“æ‰‹æœºï¼š  64G+é»‘è‰²+æ ‡å‡†ç‰ˆã€‚ æ–¹ä¾¿åœ¨cellæ˜¾ç¤ºçš„æ—¶å€™ç›´æ¥è¯»å–ã€‚</li><li>UIäº¤äº’ä¸Šæä¾›æ‰¹é‡å’Œæ¡ä»¶è¿‡æ»¤å¿«é€Ÿç­›é€‰ è¿›è¡Œå¡«å†™æ¯ä¸€é¡¹æ˜ç»†çš„è¡¨å•å€¼ã€‚æœ‰åˆ©äºå•†æˆ·é«˜æ•ˆå¡«å†™è®¾ç½®sku ç»„åˆã€‚</li></ol><h3 id="ä»¥ä¸‹å‡ ä¸ªUIé¡µé¢ï¼Œä»…ä¾›å‚è€ƒ"><a href="#ä»¥ä¸‹å‡ ä¸ªUIé¡µé¢ï¼Œä»…ä¾›å‚è€ƒ" class="headerlink" title="ä»¥ä¸‹å‡ ä¸ªUIé¡µé¢ï¼Œä»…ä¾›å‚è€ƒ"></a>ä»¥ä¸‹å‡ ä¸ªUIé¡µé¢ï¼Œä»…ä¾›å‚è€ƒ</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/chat_sku_type2.png" alt="å›¾ç‰‡"><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/sku_dataFill2.png" alt="å›¾ç‰‡"><br><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/youzan_filterType.png" alt="å›¾ç‰‡"><br>ç™¾åº¦è„‘å›¾ï¼š<a href="http://naotu.baidu.com/file/48e5a2c0af5d6fedda96e619496fce1e?token=e8f378cc6af83daf" target="_blank" rel="noopener">åº—é“ºå•†å“ ä¸ äº§å“åº“ åŠŸèƒ½æ“ä½œå…³ç³»å›¾</a></p><p>æ–‡ç« ä»£ç ç‰‡æ®µè¾ƒå¤šï¼Œä½†ä¹Ÿéƒ½æ˜¯æŠ€æœ¯æ ¸å¿ƒéƒ¨åˆ†ã€‚é‡Œé¢é€»è¾‘æ€§è¾ƒå¼ºï¼Œéœ€è¦æ…¢æ…¢ç†è§£é€å½»ã€‚å¸Œæœ›èƒ½å¯¹å†çœ‹çš„ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SKU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SKUå•†å“å±æ€§å¤šçº§åŠ¨æ€æ ‘</title>
      <link href="/2019/04/25/skuTree/"/>
      <url>/2019/04/25/skuTree/</url>
      
        <content type="html"><![CDATA[<h1 id="GYLevelTree"><a href="#GYLevelTree" class="headerlink" title="GYLevelTree"></a>GYLevelTree</h1><p>SKU å•†å“å±æ€§ ä»·æ ¼æˆ–åº“å­˜ è®¾ç½®ï¼› åŠ¨æ€å¤šå±‚çº§æ ‘ï¼Œè‡ªç”±æ’åˆ—ç»„åˆï¼Œé€’å½’ï¼Œæ·±æ‹·è´,æµ…æ‹·è´;  </p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/sku_2.PNG" alt="å›¾ç‰‡2"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/sku_3.PNG" alt="å›¾ç‰‡3"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/sku_5.PNG" alt="å›¾ç‰‡5"></p><p><a href="https://github.com/GaoYingQiu/GYLevelTree" target="_blank" rel="noopener">æºç </a></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SKU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰åŒå‘Slideré€‰èŒƒå›´</title>
      <link href="/2019/04/20/doubleSliderRange/"/>
      <url>/2019/04/20/doubleSliderRange/</url>
      
        <content type="html"><![CDATA[<h1 id="GYSliderBar"><a href="#GYSliderBar" class="headerlink" title="GYSliderBar"></a>GYSliderBar</h1><p>åŒå‘Slider, é€‰æ‹©èŒƒå›´æ§ä»¶ï¼›æ”¯æŒé˜¶æ¢¯å€¼æ»‘åŠ¨ï¼› å¯ç”¨äºç­›é€‰ç•Œé¢ï¼Œç­›é€‰ä»·æ ¼ï¼Œå…¶ä»–ä¸šåŠ¡ç­‰ï¼›</p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/gySliderBar.PNG" alt="å›¾ç‰‡"></p><p><a href="https://github.com/GaoYingQiu/GYSliderBar" target="_blank" rel="noopener">æºç </a></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Slider </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¹´å››æœˆ</title>
      <link href="/2019/04/16/2019_April/"/>
      <url>/2019/04/16/2019_April/</url>
      
        <content type="html"><![CDATA[<p>æ—¶é—´åœ¨å¿«é©¬åŠ é­åœ°å‰è¡Œï¼Œèº«è¾¹çš„äººï¼Œåœ¨åšçš„äº‹ï¼Œä¹Ÿéƒ½å‘ç”Ÿäº†å˜åŒ–ï¼›å›é¡¾è¿‡å»ä¸€å¹´ï¼Œåšè¿‡çš„é¡¹ç›®ä¸å°‘ï¼Œä¹Ÿç»å†äº†ç”Ÿå‘½å‘¨æœŸé”€æ¯çš„ä¼ä¸šï¼›é‚£äº›ç›²ç›®è¿­ä»£æ²¡æœ‰æ€è€ƒåŠ›åœ°å †ç ŒåŠŸèƒ½å¯¹äºç”¨æˆ·æ¥è¯´æ˜¯å¤šä½™æ— ç”¨çš„ï¼Œå¯¹äºæ•´ä¸ªäº§å“æˆ˜ç•¥æ¥è¯´ä¼¼ä¹æ¸æ¸æ­¥å…¥æ·±æ¸Šï¼›è¿‡å»ä¸€å¹´çš„å¼€å‘ä¸­ï¼Œè‡ªå·±ä¹Ÿå˜å¾—è¢«åŠ¨ï¼Œæ•´ä¸ªæ€è€ƒåŠ›å’Œè¡Œä¸ºéƒ½è¢«ç‰µç€èµ°ï¼› â€œå®‰åˆ†å®ˆå·±â€ä¸€è¯ å½¢å®¹è‡ªå·±æˆäº†ä¸€ä¸ªâ€æ ‡å‡†â€œçš„èŒä¸šç å†œï¼Œæ—¶é—´ä¹‹æ²³ä¸Šï¼Œæœ‰ä¸€åˆ» ä¼¼ä¹æ„è¯†åˆ°è„‘æ´é½¿è½®å·²ç»ç”Ÿé”ˆ è½¬åŠ¨ç¼“æ…¢ï¼Œå¯¹ï¼Œéœ€è¦ç€æ‰‹åŠ¨èµ·æ¥äº†ï¼Œèµ·èº«ï¼Œå»åšï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ScrollViewåµŒå¥—å¤šæ‰‹åŠ¿å†²çªé—®é¢˜</title>
      <link href="/2019/02/14/scrollViewNested/"/>
      <url>/2019/02/14/scrollViewNested/</url>
      
        <content type="html"><![CDATA[<p>åµŒå¥—ScrollView, ScrollViewåµŒå¥—CollectView, Tabéšå†…å®¹å›ºå®šæ»‘åŠ¨åˆ°é¡¶éƒ¨ï¼Œè§£å†³UIScrollView å¤šæ‰‹åŠ¿å†²çªï¼›</p><h3 id="ScrollView-åµŒå¥—ScrollView"><a href="#ScrollView-åµŒå¥—ScrollView" class="headerlink" title="ScrollView åµŒå¥—ScrollView"></a>ScrollView åµŒå¥—ScrollView</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/scrollview_pan.PNG" alt="å›¾ç‰‡"></p><h3 id="ScrollView-åµŒå¥—CollectionView"><a href="#ScrollView-åµŒå¥—CollectionView" class="headerlink" title="ScrollView åµŒå¥—CollectionView"></a>ScrollView åµŒå¥—CollectionView</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/scrollview_pan1.PNG" alt="å›¾ç‰‡1"></p><h3 id="Demo-æºç "><a href="#Demo-æºç " class="headerlink" title="Demo æºç "></a>Demo æºç </h3><p><a href="https://github.com/GaoYingQiu/GYNestedScrollview" target="_blank" rel="noopener">Demoæºç </a></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾</title>
      <link href="/2019/02/11/customerDatePicker/"/>
      <url>/2019/02/11/customerDatePicker/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾"><a href="#è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾" class="headerlink" title="è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾"></a>è‡ªå®šä¹‰æ—¥æœŸé€‰æ‹©è§†å›¾</h3><p><img src="https://qyanblog.oss-cn-shenzhen.aliyuncs.com/datePicker1.PNG" alt="å›¾ç‰‡1"></p><h3 id="Demo-æºç "><a href="#Demo-æºç " class="headerlink" title="Demo æºç "></a>Demo æºç </h3><p><a href="https://github.com/GaoYingQiu/GYDatePicker" target="_blank" rel="noopener">Demoæºç </a></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DatePicker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¬ç›˜æŠ½å¥–å°åŠŸèƒ½</title>
      <link href="/2019/02/09/sweepstakes/"/>
      <url>/2019/02/09/sweepstakes/</url>
      
        <content type="html"><![CDATA[<p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/WechatIMG8.jpeg" alt="å›¾ç‰‡"></p><p><a href="https://github.com/GaoYingQiu/Rotary-Draw" target="_blank" rel="noopener">æŠ½å¥–åŠŸèƒ½æ¨¡å—æºç </a><br><strong><em>äº§å“å‡ºå‘ç‚¹</em></strong><br>1ã€é€šè¿‡åŠ¨æ€æŠ½å¥–æ•°æ®å’Œæ’è¡Œæ¿€å‘ç”¨æˆ·æŠ½å¥–æ¶ˆè´¹ï¼›<br>2ã€é€šè¿‡æŠ€èƒ½å’Œå®çŸ³ç­‰ä»¥åŠè½¬ç›˜çš„ç‡ƒçˆ†å€¼ï¼Œä¸­å¥–ç‡ç¿»å€ç­‰ç­‰å¸å¼•ç”¨æˆ·ï¼›<br>3ã€æ ¹æœ¬ä¸Šæ˜¯ä¸ºäº†æ¿€å‘ç”¨æˆ·æ´»è·ƒæ€§ä»¥åŠåˆºæ¿€æ¶ˆè´¹</p><p><strong><em>æŠ€æœ¯éš¾ç‚¹</em></strong><br>1ã€æŠ½å¥–è½¬ç›˜åˆ†ä¸ºä¸¤ç§è½¬ç›˜ï¼Œä¸šåŠ¡é€»è¾‘åˆ†ä¸€ä¸ªparentVC ç®¡ç†ä¸¤ä¸ª å­ VCï¼›<br>2ã€æŠ½å¥–å¥–å“æœåŠ¡ç«¯è¿”å›ï¼Œæ˜¾ç¤ºåœ¨æ¯ä¸€ä¸ªæ‰‡å½¢åŒºåŸŸçš„ä¸­é—´ï¼Œé‡‘é¢åŒä¼¼ï¼›<br>3ã€ç‚¹å‡»æŠ½å¥–ï¼Œæ‹¿åˆ°å¥–å“id,  æ‰¾å‡ºæ˜¯åœ¨è½¬ç›˜ä¸­çš„å“ªä¸ªåŒºåŸŸï¼Œè®©è½¬ç›˜æŒ‡é’ˆåœæ­¢åœ¨é‚£ä¸€åŒºåŸŸï¼›<br>4ã€æŠ½å¥–åŠ¨æ€å¼¹å¹•ï¼›<br>5ã€ç‡ƒçƒ§å€¼ å’Œ å€’è®¡æ—¶çš„æ§åˆ¶ï¼›</p><p><strong><em>ä¸šåŠ¡æ“ä½œè¯´æ˜</em></strong><br>1ã€ä¸¤ä¸ªè½¬ç›˜ï¼ŒæŸä¸ªè½¬ç›˜ç‚¹å‡»å¼€å§‹æŠ½å¥– äº’ä¸å½±å“ï¼› é»„é‡‘è½¬ç›˜å…·æœ‰å®ç®±å’ŒæŠ€èƒ½ï¼›<br>2ã€æ¯æŠ½å–ä¸€æ¬¡ï¼Œæ‰£é™¤ç›¸åº”çš„é‡‘é¢ï¼Œå¦‚æœ‰ä¸­å¥–ï¼Œåˆ™å¼¹å‡ºä¸­å¥–å¥–å“ï¼›æŠ½å¥–åˆ†ä¸ºå•æ¬¡ï¼Œåè¿æŠ½ï¼Œä¸‰åè¿æŠ½ç­‰ï¼›<br>3ã€æŠ½å¥–åäº§ç”Ÿè®°å½•ï¼›åœ¨è®°å½•ä¸­å¯çœ‹åˆ°æ¯æ¬¡æŠ½å¥–æ¶ˆè´¹æƒ…å†µï¼›<br>4ã€è½¬ç›˜æœ‰ç‡ƒçƒ§å€¼ï¼Œå½“æ»¡æ—¶å€™ï¼Œè§¦å‘å€’è®¡æ—¶3åˆ†é’Ÿï¼Œå€’è®¡æ—¶å†… ä¸­å¥–ç‡å°†ç¿»å€ï¼›<br>5ã€ç‡ƒçƒ§å€¼æ¯3ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œå½“ä¸­é€”ç¦»å¼€å†æ¬¡æ‰“å¼€ï¼Œåˆ™æ‹¿åˆ°æœ€æ–°å€’è®¡æ—¶æ˜¾ç¤ºï¼›<br>6ã€å¼¹å¹•ä»æœ€æ–°100æ¡è®°å½• æ¯éš”2ç§’éšæœºç”Ÿæˆä¸€æ¡è®°å½•ï¼›</p><p><strong><em>æ¨¡å—è®¾è®¡</em></strong><br>1ã€æ•´ä¸ªæ¡†æ¶å¸ƒå±€åœ¨ä¸€ä¸ª  MainVCä¸­æ§åˆ¶è½¬ç›˜ç±»å‹ï¼Œè¯·æ±‚ä½™é¢ï¼Œé€šçŸ¥ç­‰åˆ·æ–°é‡‘é¢ï¼› ç®¡ç†childVC ï¼›<br>2ã€childVC ä¸­ å¤„ç†æŠ½å¥–ä¸šåŠ¡é€»è¾‘ï¼›UI å¸ƒå±€ï¼ŒæŠ½å¥–è¯·æ±‚ï¼Œ  ç‡ƒçƒ§å€¼å¤„ç†ï¼Œå¼¹å¹•å¤„ç†ï¼›<br>3ã€å…¶ä»–åŠŸèƒ½æ€§å­View å•ç‹¬è‡ªå®šä¹‰è§†å›¾ï¼›   è½¬ç›˜è§†å›¾ï¼Œç‡ƒçƒ§å€¼è¿›åº¦è§†å›¾ï¼Œå€’è®¡æ—¶è¿›åº¦è§†å›¾ï¼Œ å¼¹çª—ç±»è§†å›¾ï¼›å¼¹å¹•è§†å›¾ï¼›<br>4ã€å¼¹çª—ç±»è§†å›¾ ä»¥ä¸€ä¸ªParentViewå…¬å…±è§†å›¾å®¹å™¨ ï¼Œå…¶ä¸­å­è§†å›¾ç”±æšä¸¾å‚æ•°å€¼æ§åˆ¶è‡ªå®šä¹‰ï¼›æœ‰ç©æ³•è§†å›¾ï¼Œè®°å½•è§†å›¾ï¼Œä¿é™©è§†å›¾ï¼ŒæŠ€èƒ½è§†å›¾ï¼Œæ’è¡Œæ¦œè§†å›¾ï¼›<br><a id="more"></a></p><p><strong><em>å¼¹å¹•å¤„ç†</em></strong><br>NSTimer æ¯2ç§’ä¸­å¾€å¼¹å¹•çˆ¶è§†å›¾ä¸­æ·»åŠ ä¸€æ¡å¼¹å¹•view;<br>CADisplayLink  è°ƒåŠ¨ setNeedsDisplay æ–¹æ³• è§¦å‘ ç³»ç»ŸdrawRect æ–¹æ³•ï¼›<br>drawRect æ–¹æ³•ä¸­ ï¼ŒæŠŠå¼¹å¹•çˆ¶è§†å›¾æ‰€æœ‰çš„å¼¹å¹•éƒ½æ¯æ¬¡ç§»åŠ¨xå€¼ï¼Œå† ç§»é™¤å±å¹•ä¸­çš„å¼¹å¹• xå€¼ å°äº0 çš„å¼¹å¹•ï¼ˆåˆ¤æ–­ æ¯æ¡å¼¹å¹•view  æœ‰è‡ªå·±çš„ä½ç½®ï¼‰ï¼›</p><p><strong><em>å€’è®¡æ—¶å¤„ç†</em></strong><br>åœ¨è‡ªå®šä¹‰è§†å›¾ä¸­ ï¼ŒdrawRect æ–¹æ³•ä¸­ è´å¡å°”æ›²çº¿ ç»˜åˆ¶ ä¸¤ä¸ªæ›²çº¿å›­ï¼›clockwise é€†æ–¹å‘ï¼›  æ¯æ¬¡é€šè¿‡è®¾ç½®å‰©ä½™æ—¶é—´ è°ƒç”¨setNeedLayout ä¼šè§¦å‘drawRect ; å€’è®¡æ—¶å¯åŠ¨timerï¼Œæ¯0.05ç§’ é‡å¤ä¸€æ¬¡ï¼Œæ”¹å˜å‰©ä½™æ—¶é—´ï¼›å‰©ä½™æ—¶é—´ å°äº æˆ– ä¸º0 æ—¶å€™ï¼Œåˆ™å€’è®¡æ—¶èµ°å®Œï¼Œåœæ­¢timer;</p><p><strong><em>è½¬ç›˜å¤„ç†</em></strong><br>ä¸€ä¸ªç‚¹å›´ç»• æŸä¸ªèµ·ç‚¹ æ—‹è½¬ n åº¦ å çš„è½¬æ ‡  é€šè¿‡è¿™ä¸ªå…¬å¼è®¡ç®— ï¼š #define pointRotatedAroundAnchorPoint(point,anchorPoint,angle) CGPointMake((point.x-anchorPoint.x)<em>cos(angle) - (point.y-anchorPoint.y)</em>sin(angle) + anchorPoint.x, (point.x-anchorPoint.x)<em>sin(angle) + (point.y-anchorPoint.y)</em>cos(angle)+anchorPoint.y)</p><p>æ‹¿åˆ°å¥–å“åï¼Œæ ¹æ®æ‰‡å½¢ä¸ªæ•° è®¡ç®—æ¯ä¸ªæ‰‡å½¢çš„è§’åº¦ï¼Œæ­£èµ·ç‚¹æ–¹å‘  ä¸ºåŸç‚¹ æ—‹è½¬è§’åº¦ä»¥ä¾¿è®¾ç½®æ¯ä¸ªå¥–å“çš„ä¸­å¿ƒä½ç½®point ï¼› å’Œtransform; </p><p>è½¬ç›˜æŒ‡é’ˆåœåœ¨çš„ä½ç½®ï¼š æŒ‡é’ˆä¸åŠ¨ï¼Œå®é™…æ˜¯è½¬åŠ¨åº•ç›˜ï¼› éœ€å°†åº•ç›˜è§†å›¾ æ—‹è½¬åˆ°å›ºå®šè§’åº¦å³å¯ï¼›é¡ºæ—¶é’ˆæ˜¯ 360åº¦ -  å›ºå®šè§’åº¦ï¼› æ¯æ¬¡è½¬åŠ¨å‰ï¼Œéœ€å°†ä¸Šä¸€æ¬¡è½¬åŠ¨è§’åº¦å½’ä½ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CABasicAnimation *layer &#x3D; [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation&quot;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é¡ºæ—¶é’ˆ(æ‰€æœ‰è¿™é‡Œéœ€è¦ç”¨360-å¯¹åº”çš„è§’åº¦) é€†æ—¶é’ˆä¸éœ€è¦</span><br><span class="line">layer.toValue &#x3D; @((M_PI*2 - (_perSection*index +_perSection*0.5)) + M_PI*2*4); &#x2F;&#x2F;å…ˆè½¬4åœˆ</span><br><span class="line">layer.duration &#x3D; 4;</span><br><span class="line">layer.removedOnCompletion &#x3D; NO;</span><br><span class="line">layer.fillMode &#x3D; kCAFillModeForwards;</span><br><span class="line">layer.timingFunction &#x3D; [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];</span><br><span class="line">layer.delegate &#x3D; self;</span><br><span class="line"></span><br><span class="line">[self.gameBgView.layer addAnimation:layer forKey:nil];</span><br></pre></td></tr></table></figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-(void)backToStartPosition&#123;</span><br><span class="line">    &#x2F;&#x2F;å½’ä½</span><br><span class="line">    CABasicAnimation *layer &#x3D; [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation&quot;];</span><br><span class="line">    layer.toValue &#x3D; @(0);</span><br><span class="line">    layer.duration &#x3D; 0.001;</span><br><span class="line">    layer.removedOnCompletion &#x3D; NO;</span><br><span class="line">    layer.fillMode &#x3D; kCAFillModeForwards;</span><br><span class="line">    [self.gameBgView.layer addAnimation:layer forKey:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong><em>å¼¹å‡ºè§†å›¾</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit&#x2F;UIKit.h&gt;</span><br><span class="line">#import &quot;PrizeRecord.h&quot;</span><br><span class="line"></span><br><span class="line">typedef void(^GYActionDateDoneBlock)(id selectedDate);</span><br><span class="line"></span><br><span class="line">typedef enum : NSInteger &#123;</span><br><span class="line">Prize_Ranking, &#x2F;&#x2F;æŠ½å¥–</span><br><span class="line">Prize_Gift, &#x2F;&#x2F;å¥–å“</span><br><span class="line">Prize_SkillDesc, &#x2F;&#x2F;æè¿°</span><br><span class="line">Prize_PlayDesc, &#x2F;&#x2F;æè¿°</span><br><span class="line">Prize_Record, &#x2F;&#x2F;ä¸­å¥–è®°å½•</span><br><span class="line">Prize_RecordDetail &#x2F;&#x2F;ä¸­å¥–è¯¦æƒ…</span><br><span class="line">&#125; PrizeStyle;</span><br><span class="line"></span><br><span class="line">@interface GYPrizeContairView : UIView</span><br><span class="line"></span><br><span class="line">- (instancetype)initSheetStyle:(PrizeStyle)prizeStyle actionBlock:(GYActionDateDoneBlock)actionDateDoneBlock;</span><br><span class="line"></span><br><span class="line">-(void)showInView;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ä¸­å¥–å¥–å“ï¼›</span><br><span class="line">-(void)fetch_Prize_Gift:(NSArray *)datas;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;é»˜è®¤é€‰ä¸­æŸ¥è¯¢çš„è½¬ç›˜</span><br><span class="line">-(void)fetch_Record_DefaultChooseSelect:(DrawPrizeType)drawType;</span><br><span class="line">-(void)fetch_Record_Detail:(PrizeRecord *)record;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;æ’è¡Œæ¦œ</span><br><span class="line">-(void)fetch_Ranking_DrawType:(DrawPrizeType)drawType;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">if(_sheetCellStyle &#x3D;&#x3D; Prize_Ranking)&#123;</span><br><span class="line">    [self createRankingView]; &#x2F;&#x2F;æ’è¡Œæ¦œï¼›</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;æ’è¡Œæ¦œ&quot;;</span><br><span class="line">&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_Gift)&#123;</span><br><span class="line">    [self createPrizeGiftView]; &#x2F;&#x2F;å¥–å“</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;æ­å–œæ‚¨è·å¾—ä»¥ä¸‹å¥–å“&quot;;</span><br><span class="line">&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_SkillDesc)&#123;</span><br><span class="line">    [self createSkillDescView]; &#x2F;&#x2F;æŠ€èƒ½æè¿°</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;æŠ€èƒ½&quot;;</span><br><span class="line">&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_PlayDesc)&#123;</span><br><span class="line">    [self createPlayPrizeDescView]; &#x2F;&#x2F;æŠ€èƒ½æè¿°</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;ç©æ³•è¯´æ˜&quot;;</span><br><span class="line">&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_Record)&#123;</span><br><span class="line">    [self createPlayPrizeRecordView]; &#x2F;&#x2F;æŠ€èƒ½è®°å½•æè¿°</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;æŠ½å¥–è®°å½•&quot;;</span><br><span class="line">&#125;else if(_sheetCellStyle &#x3D;&#x3D; Prize_RecordDetail)&#123;</span><br><span class="line">    [self createPlayPrizeDetailRecordView]; &#x2F;&#x2F;å¥–å“è®°å½•è¯¦æƒ…</span><br><span class="line">    titleLabel.text &#x3D;  @&quot;æŠ½å¥–è¯¦æƒ…&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š<br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/WechatIMG9.jpeg" alt="å›¾ç‰‡2"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/prize_01.jpeg" alt="å›¾ç‰‡"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/prize_02.jpeg" alt="å›¾ç‰‡"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/prize_03.jpeg" alt="å›¾ç‰‡"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/prize_04.jpeg" alt="å›¾ç‰‡"></p><p><a href="https://github.com/GaoYingQiu/Rotary-Draw" target="_blank" rel="noopener">æŠ½å¥–åŠŸèƒ½æ¨¡å—æºç </a> </p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ½å¥– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ°å›¾å¤šæ‰‹åŠ¿çš„åº”ç”¨</title>
      <link href="/2018/09/28/mapGesture/"/>
      <url>/2018/09/28/mapGesture/</url>
      
        <content type="html"><![CDATA[<p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/WechatIMG253.jpeg" alt="å›¾ç‰‡"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/WechatIMG252.jpeg" alt="å›¾ç‰‡2"><br>å½“éœ€è¦åœ¨åœ°å›¾ä¸Šå±‚è¦†ç›–ä¸€ä¸ªåˆ—è¡¨æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³çœ‹åˆ°æ›´å¤šçš„å†…å®¹ï¼Œåˆ—è¡¨è¢«æ‹‰å‡ºæ¥åç¿»çœ‹æ•°æ®ï¼›<br>å½“æƒ³æ”¶èµ·æ—¶å€™ï¼Œå¯ç”¨ä¸‹æ‹‰ï¼Œæˆ–è€…éšç€æ‰‹åŠ¿æ»‘è½ä¸‹æ¥ï¼›</p><p>éœ€è§£å†³çš„é—®é¢˜ï¼š<br>1ã€æ»‘åŠ¨è¡¨æ ¼ï¼Œåœ°å›¾ä¸ç§»åŠ¨ï¼›æ‰‹åŠ¿æ¥å›æ»‘æ—¶å€™ï¼Œåˆ—è¡¨è¦è·Ÿç€é«˜åº¦å˜åŒ–ï¼›<br>2ã€å½“æ»‘åˆ°æœ€é«˜æ—¶å€™ï¼Œä¸å†å¾€ä¸Šæ»‘åŠ¨ï¼›ç›¸åï¼Œæ»‘åˆ°æœ€ä½é«˜åº¦æ—¶å€™ä¸å†ç»§ç»­å‘ä¸‹ï¼›<br>3ã€æ»‘ä¸Šå»ä¹‹åï¼Œå†å¾€ä¸‹æ»‘åŠ¨ ä¸å½±å“åˆ—è¡¨æ•°æ®çš„æŸ¥çœ‹ä¸æµè§ˆï¼›</p><p><strong>æ€è€ƒ</strong></p><p>æ‰‹åŠ¿å¼€å§‹ï¼šè®°å½• å¼€å§‹ç‚¹startYï¼Œ</p><p>æ‰‹åŠ¿ç§»åŠ¨ï¼š<br>æ ¹æ®èµ·å§‹ä½ç½®ç§»åŠ¨å·®  ç¡®å®šä¸Šæ»‘åŠ¨ ï¼Œ ä¸‹æ»‘åŠ¨ï¼›  </p><p>èµ·ç‚¹B ç‚¹ è®°å½•æ–¹å‘ 0ï¼›<br>B-A æ­£å‘ï¼Œ è®°å½•æ–¹å‘ç¬¦å· 1ï¼›<br>B-C åå‘ ï¼Œè®°å½•æ–¹å‘ -1ï¼›</p><p>åç§»å€¼ å¤§äº0 ï¼Œ ä¸Šæ»‘åŠ¨ï¼›<br>å½“B-A-C åï¼Œç«‹é©¬è®°å½• 1 å˜æˆ -1ï¼›    è®°å½•æ ‡è®°çŠ¶æ€å‰ï¼Œ</p><p>æ­£å‘å¦‚ï¼šB-A çš„è¿‡ç¨‹ ï¼Œéœ€åˆ¤æ–­æ˜¯å¦ä¸º ä¸º -1 åˆ°1 è¿˜æ˜¯ 0-1 ï¼Œ å¦‚æœæ˜¯-1 åˆ™æ˜¯æ¥å›æ‹–åŠ¨ï¼›å¦åˆ™ä¸ºæ­£å‘æ‹–åŠ¨ï¼›</p><p><strong><em>code :ä»¥ä¸‹æ˜¯é‡ç‚¹é€»è¾‘ä»£ç ï¼›</em></strong></p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">if(gestureRecognizer.state &#x3D;&#x3D; UIGestureRecognizerStateChanged)&#123;</span><br><span class="line">    CGPoint point &#x3D; [gestureRecognizer locationInView:self.view];</span><br><span class="line"></span><br><span class="line">    CGFloat topDistance &#x3D; startSpanPoint.y - point.y;</span><br><span class="line">    if(topDistance &gt;0)&#123; &#x2F;&#x2F;&gt;100 å°±æ˜¯å‘ä¸Šæ»‘ï¼Œä½†æ˜¯è¦æ§åˆ¶æ»‘åŠ¨çš„è·ç¦»é™åˆ¶ï¼›</span><br><span class="line"></span><br><span class="line">        if(pointB1_Y &#x3D;&#x3D; -1)&#123;</span><br><span class="line">        blChange &#x3D; YES; &#x2F;&#x2F;è®°å½•ä»å¾€ä¸‹å˜æˆå¾€ä¸Šï¼›</span><br><span class="line">        &#125;else if(pointB1_Y &#x3D;&#x3D; 0)&#123;</span><br><span class="line">        blChange &#x3D; NO; &#x2F;&#x2F;æ–¹å‘æ²¡æœ‰å˜æ›´ï¼›</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pointB1_Y &#x3D; 1; &#x2F;&#x2F;è®°å½•å½“å‰æ˜¯å¾€ä¸Šæ¨ï¼›</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;å¾€ä¸Šæ¨ï¼›</span><br><span class="line">        if(self.tableView.top &#x3D;&#x3D; self.listViewMinTop)&#123;</span><br><span class="line">            self.tableView.scrollEnabled &#x3D; YES;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            if(self.datas.count &gt; 0)&#123; &#x2F;&#x2F;æ— æ•°æ®æ—¶å€™ ä¸ç»™å¾€ä¸Šæ¨</span><br><span class="line">                &#x2F;&#x2F;å‘ä¸Šï¼›ä¸Šå‰©å¤šå°‘ç•™å¤šå°‘ ;</span><br><span class="line">                if(bBottom_Top_Flag &#x3D;&#x3D; NO)&#123;</span><br><span class="line">                    if(!blChange &amp;&amp; self.mapViewHeight - topDistance &gt;&#x3D; self.listViewMinTop)&#123;</span><br><span class="line">                    self.tableView.top &#x3D; self.mapViewHeight - topDistance;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    if(self.mapViewHeight - topDistance &gt;&#x3D; self.listViewMinTop)&#123;</span><br><span class="line">                    self.tableView.top &#x3D; self.mapViewHeight - topDistance;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;else if(topDistance&lt;0)&#123;</span><br><span class="line"></span><br><span class="line">        if(pointB1_Y &#x3D;&#x3D; 1)&#123;</span><br><span class="line">        blChange &#x3D; YES; &#x2F;&#x2F;è®°å½•ä»å¾€ä¸Šå˜æˆå¾€ä¸‹ï¼›</span><br><span class="line">        &#125;else if(pointB1_Y &#x3D;&#x3D; 0)&#123;</span><br><span class="line">        blChange &#x3D; NO; &#x2F;&#x2F;æ–¹å‘æ²¡æœ‰å˜æ›´ï¼›</span><br><span class="line">        &#125;</span><br><span class="line">        pointB1_Y &#x3D; -1; &#x2F;&#x2F;è®°å½•å½“å‰æ˜¯å¾€ä¸‹æ‹‰ï¼›</span><br><span class="line"></span><br><span class="line">        if(self.tableView.contentOffset.y&lt;&#x3D;0 &amp;&amp; self.tableView.top &lt; self.mapViewHeight)&#123; &#x2F;&#x2F;å¹¶ä¸”æ˜¯åœ¨é¡¶éƒ¨å°äº0æ—¶å€™</span><br><span class="line"></span><br><span class="line">            self.tableView.contentOffset &#x3D; CGPointMake(0, 0); &#x2F;&#x2F;å¯å†™å¯ä¸å†™ï¼›</span><br><span class="line">            self.tableView.scrollEnabled &#x3D; NO;</span><br><span class="line"></span><br><span class="line">            if(bBottom_Top_Flag &#x3D;&#x3D; YES)&#123;</span><br><span class="line">                if(!blChange &amp;&amp; self.listViewMinTop - topDistance &lt;&#x3D; self.mapViewHeight)&#123;</span><br><span class="line">                self.tableView.top &#x3D; self.listViewMinTop - topDistance;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                if(self.listViewMinTop - topDistance &lt;&#x3D; self.mapViewHeight)&#123;</span><br><span class="line">                self.tableView.top &#x3D; self.listViewMinTop - topDistance;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å•ç‹¬å†™äº†ä¸ªdemo-ï¼Œä»¿boss-ç›´è˜-æŸ¥çœ‹æ›´å¤šèŒä½ï¼Œä»¿å“ˆå–½å‡ºç°-app-æ‰«ç åº•éƒ¨æŒ‰é’®-æŸ¥çœ‹æ›´å¤šæ´»åŠ¨"><a href="#å•ç‹¬å†™äº†ä¸ªdemo-ï¼Œä»¿boss-ç›´è˜-æŸ¥çœ‹æ›´å¤šèŒä½ï¼Œä»¿å“ˆå–½å‡ºç°-app-æ‰«ç åº•éƒ¨æŒ‰é’®-æŸ¥çœ‹æ›´å¤šæ´»åŠ¨" class="headerlink" title="å•ç‹¬å†™äº†ä¸ªdemo ï¼Œä»¿boss ç›´è˜ æŸ¥çœ‹æ›´å¤šèŒä½ï¼Œä»¿å“ˆå–½å‡ºç° app æ‰«ç åº•éƒ¨æŒ‰é’® æŸ¥çœ‹æ›´å¤šæ´»åŠ¨"></a>å•ç‹¬å†™äº†ä¸ªdemo ï¼Œä»¿boss ç›´è˜ æŸ¥çœ‹æ›´å¤šèŒä½ï¼Œä»¿å“ˆå–½å‡ºç° app æ‰«ç åº•éƒ¨æŒ‰é’® æŸ¥çœ‹æ›´å¤šæ´»åŠ¨</h3><p><a href="https://github.com/GaoYingQiu/GYSlideOnView" target="_blank" rel="noopener">Demo æºç </a><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/slide2OnView.png" alt="å›¾ç‰‡2"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/slide1OnView.png" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MVCè®¾è®¡æ¨¡å¼è§è§£</title>
      <link href="/2018/09/28/mvc/"/>
      <url>/2018/09/28/mvc/</url>
      
        <content type="html"><![CDATA[<p>ï¼ˆæ§åˆ¶å™¨Controllerï¼‰- è´Ÿè´£è½¬å‘è¯·æ±‚ï¼Œç½‘ç»œå¤„ç†ï¼Œæ§åˆ¶ä¸šåŠ¡é€»è¾‘ã€‚</p><p>ï¼ˆè§†å›¾Viewï¼‰ - é¡µé¢è§†å›¾UIäº¤äº’ï¼› æ¨¡å‹ä¸è§†å›¾ä¸èƒ½é€šä¿¡ï¼Œéœ€é€šè¿‡æ§åˆ¶å™¨controlleræ¥å®ç°ï¼›</p><p>ï¼ˆæ¨¡å‹Modelï¼‰ -  æ•°æ®ä¸šåŠ¡æ¨¡å‹çš„å‘ˆç°ï¼› æ¶‰åŠåˆ°çš„UI æ”¹åŠ¨ï¼Œ æ•°æ®é©±åŠ¨UIï¼Œæ”¹åŠ¨æ•°æ®çŠ¶æ€å³å¯å®ç°UIçš„å˜æ›´ï¼›</p><hr><h2 id="æ¼”è¿›ï¼ˆViewModelæ¨¡å‹ï¼‰-åœ¨åŸæœ‰MVC-åŸºç¡€ä¸Šå¤šäº†ä¸€å±‚ï¼ŒControllerä¸ç›´æ¥æ§åˆ¶Model-ç›´æ¥æ“ä½œViewModel-æ¥é—´æ¥ç®¡ç†ï¼›-ViewModel-ï¼ˆNSObjectï¼‰çš„èŒè´£ï¼šæ•°æ®é€»è¾‘å¤„ç†-æ§åˆ¶ï¼Œç®—æ³•ï¼Œè§£æï¼Œç½‘ç»œå¤„ç†ç­‰ç­‰ï¼›-ä¸ç›´æ¥ç®¡ç†View"><a href="#æ¼”è¿›ï¼ˆViewModelæ¨¡å‹ï¼‰-åœ¨åŸæœ‰MVC-åŸºç¡€ä¸Šå¤šäº†ä¸€å±‚ï¼ŒControllerä¸ç›´æ¥æ§åˆ¶Model-ç›´æ¥æ“ä½œViewModel-æ¥é—´æ¥ç®¡ç†ï¼›-ViewModel-ï¼ˆNSObjectï¼‰çš„èŒè´£ï¼šæ•°æ®é€»è¾‘å¤„ç†-æ§åˆ¶ï¼Œç®—æ³•ï¼Œè§£æï¼Œç½‘ç»œå¤„ç†ç­‰ç­‰ï¼›-ä¸ç›´æ¥ç®¡ç†View" class="headerlink" title="æ¼”è¿›ï¼ˆViewModelæ¨¡å‹ï¼‰ - åœ¨åŸæœ‰MVC åŸºç¡€ä¸Šå¤šäº†ä¸€å±‚ï¼ŒControllerä¸ç›´æ¥æ§åˆ¶Model,   ç›´æ¥æ“ä½œViewModel æ¥é—´æ¥ç®¡ç†ï¼› ViewModel ï¼ˆNSObjectï¼‰çš„èŒè´£ï¼šæ•°æ®é€»è¾‘å¤„ç†,æ§åˆ¶ï¼Œç®—æ³•ï¼Œè§£æï¼Œç½‘ç»œå¤„ç†ç­‰ç­‰ï¼›  ä¸ç›´æ¥ç®¡ç†View;"></a>æ¼”è¿›ï¼ˆViewModelæ¨¡å‹ï¼‰ - åœ¨åŸæœ‰MVC åŸºç¡€ä¸Šå¤šäº†ä¸€å±‚ï¼ŒControllerä¸ç›´æ¥æ§åˆ¶Model,   ç›´æ¥æ“ä½œViewModel æ¥é—´æ¥ç®¡ç†ï¼› ViewModel ï¼ˆNSObjectï¼‰çš„èŒè´£ï¼šæ•°æ®é€»è¾‘å¤„ç†,æ§åˆ¶ï¼Œç®—æ³•ï¼Œè§£æï¼Œç½‘ç»œå¤„ç†ç­‰ç­‰ï¼›  ä¸ç›´æ¥ç®¡ç†View;</h2><p>ä¸‰å±‚æ¨¡å¼å¯æœ‰æ•ˆé™ä½é¡¹ç›®å¶å°”åº¦ï¼Œæœ‰æ•ˆä¸šåŠ¡è§„æ•´ï¼Œåˆ†ç±»ï¼› å¤§å¤§æé«˜é¡¹ç›®å¼€å‘æ•ˆç‡ï¼›</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ç§å…¸å‹çš„è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/09/28/designPatterns/"/>
      <url>/2018/09/28/designPatterns/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">----------  ç®€å•å·¥å‚æ¨¡å¼ï¼š---------- </span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªè®¡ç®—æ¥å£ã€‚ </span><br><span class="line"></span><br><span class="line">å®šä¹‰å››ä¸ªåŠ å‡ä¹˜é™¤ çš„å…·æœ‰è¯¥æ¥å£åŠŸèƒ½ çš„ç±»ã€‚</span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ã€‚ ç”¨æ¥åˆ›å»º ä¸åŒçš„ æ¥å£åŠŸèƒ½ç±»ã€‚ </span><br><span class="line"></span><br><span class="line">æ ¹æ®ä¸åŒçš„éœ€è¦ï¼Œé€šè¿‡ æ¥å£ æ¥æ”¶å¯¹è±¡ï¼Œ è°ƒç”¨ä¸åŒçš„åŠŸèƒ½æ“ä½œç±»çš„å®ç°æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------  æ¨¡æ¿æ¨¡å¼ï¼š---------- </span><br><span class="line"></span><br><span class="line">çˆ¶ç±»è¿è¡Œçš„æ—¶å€™ï¼Œè°ƒç”¨å­ç±» é‡å†™çš„æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------  å·¥å‚æ¨¡å¼ï¼š---------- </span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªæ¥å£åŠŸèƒ½ã€‚ ä¸¤ä¸ªæ•°å˜é‡  ï¼Œæœ‰è®¡ç®—åŠŸèƒ½ã€‚ </span><br><span class="line"></span><br><span class="line">å®šä¹‰ ä¸åŒçš„ åŠŸèƒ½æ¥å£å®ç°ç±»ã€‚ ä½¿ç”¨å˜é‡æ—¶å€™ ç”¨  @synthesize numberA &#x3D; _numberA;</span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®šä¹‰åˆ›å»ºå·¥å‚æ–¹æ³•ï¼Œä¸å®ç°ã€‚æ”¹æŠ½è±¡å·¥å‚  å…·æœ‰è®¡ç®—æ¥å£åŠŸèƒ½ã€‚</span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸åŒçš„å·¥å‚å­ç±»ï¼Œå®ç°åˆ›å»ºå·¥å‚å¯¹è±¡ã€‚ </span><br><span class="line"></span><br><span class="line">è°ƒç”¨çš„æ—¶å€™ï¼Œé€šè¿‡ ä¸åŒçš„è®¡ç®—æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------  è´£ä»»æ¨¡å¼ï¼š---------- </span><br><span class="line"></span><br><span class="line">è¯·å‡ï¼š</span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ª é¢†å¯¼ã€‚ Manager  é¢†å¯¼ å…·æœ‰æ‰¹å‡†è¯·å‡åŠŸèƒ½ã€‚ å†…åŒ…å«ç›´å±é¢†å¯¼ã€‚</span><br><span class="line"></span><br><span class="line">é¢†å¯¼æœ‰ä¸‰çº§å±‚æ¬¡çš„é¢†å¯¼ã€‚ï¼ˆå†…åŒ…å«ç›´å±é¢†å¯¼ã€‚å¦‚æœè‡ªå·±å®¡æ‰¹æ—¶å€™å‘ç° éœ€è¦ç›´å±é¢†å¯¼å®¡æ‰¹ åˆ™ç›´æ¥è®©ç›´å±é¢†å¯¼æ“ä½œï¼‰</span><br><span class="line"></span><br><span class="line">æ™®é€šè¯·å‡ æ™®é€šé¢†å¯¼æ‰¹å‡†ï¼Œè¯·å‡å¤©æ•°è¶…è¿‡ä¸€å®šæ•°éœ€è¦æ›´é«˜çº§é¢†å¯¼ æ‰¹å‡†ã€‚ æ™®é€šé¢†å¯¼ æœ‰ç›´å± é¢†å¯¼ ã€‚ æ™®é€šé¢†å¯¼å¤„ç†æ—¶å€™ ä¸€çº§ä¸€çº§ å¤„ç†ä¸Šå» ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------  å‘½ä»¤æ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ï¼š---------- </span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªèœå•ã€‚Order . </span><br><span class="line"></span><br><span class="line">èœå•æœ‰å¾ˆå¤šç§èœå•ã€‚ å­ç±» order .  èœå•ä¸­  å¨å¸ˆ cook  æ‰§è¡Œè¿™ä¸ªèœå•ã€‚</span><br><span class="line"></span><br><span class="line">å¤šä¸ªå®¢æˆ·ä¸‹å• ã€‚ waiter ç»Ÿä¸€æ¥å— èœå•ã€‚ï¼ˆä¸ç®¡ç‚¹çš„ä»€ä¹ˆèœï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">watier å»ä¼ è¾¾ç»™ cook å» åšä¸åŒçš„èœç³»ã€‚è°ƒç”¨ä¸åŒçš„å­ç±»èœå• è®©å¨å¸ˆå» åšèœã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HTTPSè¿æ¥è¿‡ç¨‹</title>
      <link href="/2018/09/25/https/"/>
      <url>/2018/09/25/https/</url>
      
        <content type="html"><![CDATA[<p>ã€HTTPSè¿æ¥è¿‡ç¨‹ã€‘<br>httpsåè®®å°±æ˜¯http+sslåè®®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºå…¶è¿æ¥è¿‡ç¨‹ï¼š<br>ï¿¼<img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/20170509100144426.jpg" alt="å›¾ç‰‡"></p><p>1.httpsè¯·æ±‚<br>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€httpsè¯·æ±‚ï¼›<br>2.ç”Ÿæˆå…¬é’¥å’Œç§é’¥<br>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œç”Ÿæˆå…¬é’¥å’Œç§é’¥ã€‚å…¬é’¥ç›¸å½“äºæ˜¯é”ï¼Œç§é’¥ç›¸å½“äºæ˜¯é’¥åŒ™ï¼Œåªæœ‰ç§é’¥æ‰èƒ½å¤Ÿæ‰“å¼€å…¬é’¥é”ä½çš„å†…å®¹ï¼›<br>3.è¿”å›å…¬é’¥<br>æœåŠ¡ç«¯å°†å…¬é’¥ï¼ˆè¯ä¹¦ï¼‰è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå…¬é’¥é‡Œé¢åŒ…å«æœ‰å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚è¯ä¹¦çš„é¢å‘æœºæ„ã€è¿‡æœŸæ—¶é—´ç­‰ç­‰ï¼›<br>4.å®¢æˆ·ç«¯éªŒè¯å…¬é’¥<br>å®¢æˆ·ç«¯æ”¶åˆ°å…¬é’¥ä¹‹åï¼Œé¦–å…ˆä¼šéªŒè¯å…¶æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚é¢å‘æœºæ„æˆ–è€…è¿‡æœŸæ—¶é—´ç­‰ï¼Œå¦‚æœå‘ç°æœ‰é—®é¢˜å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæç¤ºè¯ä¹¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå°±ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œä½œä¸ºå®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œç„¶åç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†ï¼›<br>5.å‘é€å®¢æˆ·ç«¯å¯†é’¥<br>å®¢æˆ·ç«¯ç”¨æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†å¯†é’¥ï¼Œç„¶åå‘é€ç»™æœåŠ¡ç«¯ã€‚<br>6.æœåŠ¡ç«¯æ”¶å–å¯†é’¥ï¼Œå¯¹ç§°åŠ å¯†å†…å®¹<br>æœåŠ¡ç«¯æ”¶åˆ°ç»è¿‡åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åç”¨ç§é’¥å°†å…¶è§£å¯†ï¼Œå¾—åˆ°å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œç„¶åæœåŠ¡ç«¯æŠŠè¦ä¼ è¾“çš„å†…å®¹å’Œå®¢æˆ·ç«¯çš„å¯†é’¥è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œè¿™æ ·é™¤éçŸ¥é“å¯†é’¥ï¼Œå¦åˆ™æ— æ³•çŸ¥é“ä¼ è¾“çš„å†…å®¹ã€‚<br>7.åŠ å¯†ä¼ è¾“<br>æœåŠ¡ç«¯å°†ç»è¿‡åŠ å¯†çš„å†…å®¹ä¼ è¾“ç»™å®¢æˆ·ç«¯ã€‚<br>8.è·å–åŠ å¯†å†…å®¹ï¼Œè§£å¯†<br>å®¢æˆ·ç«¯è·å–åŠ å¯†å†…å®¹åï¼Œç”¨ä¹‹å‰ç”Ÿæˆçš„å¯†é’¥å¯¹å…¶è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°å†…å®¹ã€‚<br>ä¸­é—´äººåŠ«æŒæ”»å‡»<br>httpsä¹Ÿä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºä¸­é—´äººåŠ«æŒæ”»å‡»ï¼Œä¸­é—´äººå¯ä»¥è·å–åˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´æ‰€æœ‰çš„é€šä¿¡å†…å®¹ã€‚<br>ï¿¼ï¿¼<img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/20170509104722086.jpg" alt="å›¾ç‰‡"></p><p>ä¸­é—´äººæˆªå–å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œç„¶åä¼ªè£…æˆå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼›å°†æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¼ªè£…æˆæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚<br>é€šè¿‡è¿™æ ·çš„æ‰‹æ®µï¼Œä¾¿å¯ä»¥è·å–å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡çš„æ‰€æœ‰å†…å®¹ã€‚<br>ä½¿ç”¨ä¸­é—´äººæ”»å‡»æ‰‹æ®µï¼Œå¿…é¡»è¦è®©å®¢æˆ·ç«¯ä¿¡ä»»ä¸­é—´äººçš„è¯ä¹¦ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸ä¿¡ä»»ï¼Œåˆ™è¿™ç§æ”»å‡»æ‰‹æ®µä¹Ÿæ— æ³•å‘æŒ¥ä½œç”¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTPS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°æµªå¾®åš æ¨å’Œæ‹‰</title>
      <link href="/2018/09/25/sinaPullPush/"/>
      <url>/2018/09/25/sinaPullPush/</url>
      
        <content type="html"><![CDATA[<p>æ¯ä¸ªäººçš„feedå°±æ˜¯ä¸€ä¸ªlistï¼Œå­˜å‚¨åˆ°redis;<br>ç”¨æˆ·å‰ç«¯äº§ç”Ÿçš„æ‰€æœ‰äº‹ä»¶ å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ— RabbitMQ,<br>Server æ ¹æ® ä¸šåŠ¡é€»è¾‘å°†æ–°çš„itemæ’å…¥åˆ°ä¸‹æ¸¸ç”¨æˆ·çš„feedé‡Œé¢ï¼›</p><p>åœ¨çº¿æ¨ï¼Œæ¨ç»™æ´»è·ƒåœ¨çº¿ç”¨æˆ·ï¼Œç¦»çº¿æ‹‰ï¼›</p><p>ä»»åŠ¡è°ƒåº¦ ï¼šé€‰ç”¨äº†Celeryï¼›</p><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªæ”¶ä»¶ç®± å’Œ å‘ä»¶ç®±ï¼›ä¿å­˜è‡ªå·±å‘è¿‡çš„åŠ¨æ€ä»¥åŠFeedåŠ¨æ€ï¼›</p><p>ç”¨æˆ·Aå…³æ³¨äº†ç”¨æˆ·B ï¼Œ ç”¨æˆ·Bå‘å¸ƒåŠ¨æ€åˆ™å°†åŠ¨æ€æ¨è¿›ç”¨æˆ·Açš„feedï¼Œè¿™é‡Œä½¿ç”¨redisçš„zsetå®ç°ï¼Œsortä¸ºtimeï¼ˆè®°å¾—ä»¥æ¯«ç§’ä¸ºæ—¶é—´æˆ³ï¼Œç§’çº§åœ¨æ•°æ®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¼šæœ‰è¯»å–ä¸åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä»¥æ—¶é—´æˆ³ä¸ºåˆ†é¡µé¡µç ï¼‰ï¼Œvalueä¸ºå…·ä½“çš„åŠ¨æ€ IDï¼ˆä¸ºä»€ä¹ˆæ˜¯åŠ¨æ€IDï¼Œ å…¶å®å¾ˆç®€å•ï¼Œ å°±æ˜¯å› ä¸ºåŠ¨æ€çš„å†…å®¹å¯ä»¥è¿›è¡Œç¼“å­˜ï¼Œåœ¨redisé‡Œé¢å…¨éƒ¨èµ°IDï¼Œä¿®æ”¹åŠ¨æ€å†…å®¹ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€å¤„ï¼ŒåŠ¨æ€å†…å®¹å¯ä»¥ä¿å­˜åœ¨hashç»“æ„é‡Œï¼‰ï¼Œ æ¯ä¸ªç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªzsetä¿å­˜æˆ‘å‘å¸ƒçš„åŠ¨æ€ï¼Œä¸€ä¸ªzsetä¿å­˜æˆ‘çš„feedåŠ¨æ€ï¼Œè¿‡æœŸæ—¶é—´3~7å¤©çœ‹æƒ…å†µè€Œå®šã€‚</p><p>å…¨å±€ç»´æŠ¤ä¸€ä¸ªåœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼Œæ€ä¹ˆè®¾è®¡è¿™ä¸ªå°±è‡ªå·±ç¢ç£¨äº†ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·æŒ‚åå°å¯¼è‡´ä¸æœåŠ¡ç«¯ä¸ºç¦»çº¿çŠ¶æ€ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯1~3å°æ—¶æœªæ“ä½œæˆ–è€…ç¦»çº¿æ—¶é—´ä¸å¤§äº3å°æ—¶çš„ï¼Œéƒ½å½“åšåœ¨çº¿å¤„ç†ï¼Œ</p><p>é‚£ä¹ˆï¼Œå½“ç”¨æˆ·å‘äº†ä¸€æ¡åŠ¨æ€åï¼Œåå°ä¼šæœ‰ä»¥ä¸‹è¿™äº›æ“ä½œï¼š</p><p>åœ¨çº¿æ¨ï¼š å¼‚æ­¥éå†åœ¨çº¿çš„ç²‰ä¸ï¼Œå°†åŠ¨æ€IDï¼Œæ·»åŠ åˆ°ç²‰ä¸çš„Feedä¸­ã€‚</p><p>ç¦»çº¿æ‹‰ï¼š ç¦»çº¿ç”¨æˆ·æ‰“å¼€APPåï¼Œæˆ‘ä»¬æ˜¯ä¼šè¯·æ±‚ä¸€ä¸ªå…¬å…±çš„å…¥å£æ¥å£ï¼Œä¸»åšç»Ÿè®¡ä»¥åŠå…¶ä»–åˆå§‹åŒ–æ“ä½œï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¼€äº†ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œå¯¹ç”¨æˆ·è¿›è¡ŒFeedæ›´æ–°æ“ä½œï¼Œé˜²æ­¢ç”¨æˆ·è¿›å…¥APPåç­‰å¾…æ‹‰å–æ—¶é—´è¿‡é•¿ï¼Œæ¯•ç«Ÿå…³æ³¨æˆåƒä¸Šä¸‡çš„äººè‚¯å®šæœ‰ï¼ˆå…¶å®ä¸‡å•ä½ä»¥ä¸‹éå†éƒ½å¾ˆå¿«ï¼‰ã€‚æ‹‰å–è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠè‡ªå·±æœ€åä¸€æ¡Feedçš„æ—¶é—´æˆ³å–å‡ºï¼Œå»éå†å…³æ³¨çš„äººçš„feedï¼Œå°†å¤§äºè¯¥æ—¶é—´çš„IDå…¨éƒ¨æ‹‰å–å›æ¥ã€‚ç”¨æˆ·è¿›å…¥APPåï¼Œåˆ·æ–°å³å¯çœ‹åˆ°æœ€æ–°æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠåŠ¨æ€å¤šç±»å‹cellçš„è®¾è®¡</title>
      <link href="/2018/09/25/typeCells/"/>
      <url>/2018/09/25/typeCells/</url>
      
        <content type="html"><![CDATA[<p>çº¢åŒ…å®ä½“ï¼Œæ–‡ç« å®ä½“  éƒ½å±äºåŠ¨æ€ ï¼Œå®šä¹‰æ—¶å€™å®ç°è¯¥åè®®DynamicPro,ç›¸å½“äºjavaä¸­çš„æ¥å£ã€‚<br>dataList æ•°ç»„ä¸­ å­˜æ”¾çš„æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚æ‹¿åˆ°çš„ DynamicPro ç±»å‹çš„åŠ¨æ€åˆ—è¡¨ã€‚</p><pre><code><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">@protocol</span> <span class="title">DynamicPro</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"> <span class="keyword">@end</span></span><br><span class="line"> </span><br><span class="line"> çº¢åŒ…å®ä½“ï¼Œæ–‡ç« å®ä½“  éƒ½å±äºåŠ¨æ€ ï¼Œå®šä¹‰æ—¶å€™å®ç°è¯¥åè®®DynamicProã€‚</span><br><span class="line"> dataList æ•°ç»„ä¸­ å­˜æ”¾çš„æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚æ‹¿åˆ°çš„ DynamicPro ç±»å‹çš„åŠ¨æ€åˆ—è¡¨ã€‚</span><br><span class="line"> </span><br><span class="line"> DynamicCell: <span class="built_in">UITableViewCell</span></span><br><span class="line"> &#123;</span><br><span class="line"> å±æ€§  Id&lt;DynamicPro&gt; dynamic;  <span class="comment">//æ–‡ç« åŠ¨æ€ï¼Œæ™®é€šåŠ¨æ€ï¼Œç›´æ’­åŠ¨æ€ï¼Œçº¢åŒ…ç±»å‹åŠ¨æ€</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="class"><span class="keyword">@implementation</span> <span class="title">DynamicCell</span></span></span><br><span class="line"> -(<span class="keyword">void</span>)setDynamic:(<span class="keyword">id</span>&lt;DynamicPro&gt;)dynamic&#123;</span><br><span class="line"> _dynamic = dynamic;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//DynamicCell æœ‰å¾ˆå¤šå­ç±»cell:  çº¢åŒ…cell ,æ–‡ç« cell,ç›´æ’­cell ç­‰</span></span><br><span class="line"> <span class="comment">//åœ¨å­ç±»cell  æ¸²æŸ“å…·ä½“UIæ•°æ®ç»‘å®š</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">@end</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> è¡¨æ ¼ cellFor æ¸²æŸ“çš„æ—¶å€™ï¼š&#123;â€¨</span><br><span class="line"> DynamicPro *dynamic  = <span class="keyword">self</span>.dataList[indexPath.row]; </span><br><span class="line"> DynamicCell * cell =  [çº¢åŒ…cell  new]; <span class="comment">//æ ¹æ®dynamicç±»å‹ åˆ›å»º ä¸åŒçš„ åŠ¨æ€cell</span></span><br><span class="line"> <span class="comment">//æœ€ç»ˆç»Ÿä¸€è®¾ç½®åŠ¨æ€æ•°æ®</span></span><br><span class="line"> [cell setDynamic: dynamic];</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> è¡¨æ ¼é«˜åº¦ heightFor æ¸²æŸ“çš„æ—¶å€™ï¼š&#123;</span><br><span class="line"> </span><br><span class="line"> DynamicPro *dynamic  = <span class="keyword">self</span>.dataList[indexPath.row]; </span><br><span class="line"> <span class="keyword">if</span>(dynamic é«˜åº¦ä¸å˜çš„)&#123;</span><br><span class="line"> <span class="keyword">return</span>  <span class="number">44</span>;</span><br><span class="line"> &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> <span class="comment">//é«˜åº¦å˜åŠ¨çš„ç”¨è‡ªåŠ¨å¸ƒå±€</span></span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">UITableViewAutomaticDimension</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> è¡¨æ ¼ estimatedHeightForRowAtIndexPath è¿›è¡Œè‡ªåŠ¨å¸ƒå±€çš„ä¼°ç®—</span><br><span class="line"> &#123;â€¨<span class="keyword">return</span> <span class="number">100</span>; </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºèŠå¤©é¡µé¢çš„å¤šç±»å‹æ¶ˆæ¯çš„å°è£…</title>
      <link href="/2018/07/21/messageUIDesign/"/>
      <url>/2018/07/21/messageUIDesign/</url>
      
        <content type="html"><![CDATA[<p>æ¶ˆæ¯å¸ƒå±€è§‚å¯Ÿï¼šå‘¨è¾¹å¤´åƒï¼Œæ˜µç§°ï¼Œé—´è·  ï¼Œæ°”æ³¡ åŠå…¶ä»–ç»Ÿä¸€ï¼Œå†…å®¹è§†å›¾æŒ–ç©ºï¼› é‡‡å–è‡ªå®šä¹‰æ³¨å…¥è§†å›¾é…ç½®ï¼›</p><p>ä»CellFor æ–¹æ³•è¯´èµ·ï¼›èŠå¤©æ¶ˆæ¯é¡µé¢ï¼Œæˆ‘ä»¬çœ‹åˆ° æœ‰ èŠå¤©æ¶ˆæ¯ è¿˜æœ‰æ—¶é—´æˆ³ï¼›æ ¹æ® ModelItemé¡¹ çš„ classç±»å‹ åˆ†åˆ«å»åˆ›å»º ä¸¤ç§cell ; åªé‡Œåªè®² èŠå¤©æ¶ˆæ¯cell;   </p><p>æµç¨‹ï¼šå½“ä¸ºèŠå¤©æ¶ˆæ¯Model æ—¶å€™ï¼Œå  messageModelï¼ˆmessageModel é‡Œé¢ å¤§è‡´æœ‰ä»¥ä¸‹å±æ€§:   è®°å½•æ¶ˆæ¯æ¨¡å‹ï¼Œæ¶ˆæ¯å¸ƒå±€ï¼Œå¤´åƒï¼Œæ˜µç§° æ˜¾ç¤ºæ§åˆ¶ï¼Œæ¶ˆæ¯å†…å®¹size; ï¼ˆä¸è¶³ åè¡¥ï¼‰ï¼‰ï¼› å–å¾—æ¶ˆæ¯å¸ƒå±€ï¼› ç›¸å¯¹åº”çš„contentç±»å­—ç¬¦ä¸²ï¼›æ ¹æ® identify = content å»é‡ç”¨cell (ä¸åŒæ¶ˆæ¯ç±»å‹é‡ç”¨æ ‡è¯†ä¸åŒ );   åˆ›å»ºMessageCell æ ¹æ® content å»åˆ›å»º å¯¹åº”çš„å†…å®¹è§†å›¾ å³å¯ï¼›å†åˆ·æ–°è§†å›¾æ•°æ® èµ‹å€¼ï¼› </p><p>å¸ƒå±€æ¥æºï¼šå®šä¹‰ ä¸€ä¸ª layoutconfigInterface;<br>layoutconfig é…ç½®åŒ…å«ï¼š{<br>1ï¼‰messageçš„å†…å®¹å¤§å°ï¼›<br>2ï¼‰éœ€è¦åˆ›å»ºæ˜¾ç¤ºçš„CellContent ç±»å<br>3ï¼‰æ°”æ³¡çš„é…ç½®é—´è·ç­‰<br>4ï¼‰æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¤´åƒ<br>5ï¼‰æ§åˆ¶æ˜¯å¦ æ˜¾ç¤ºæ˜µç§°<br>6ï¼‰æ§åˆ¶æ¶ˆæ¯æ˜¾ç¤ºåœ¨å·¦è¾¹è¿˜æ˜¯åœ¨å³è¾¹ ï¼ˆæ˜¯å¦æ˜¯è‡ªå·±å‘çš„ï¼‰<br>}</p><p>Contentæ¥æº<br>1ã€contentConfigInterface æ¥å£ï¼š<br>è€ƒè™‘åˆ°messageçš„å†…å®¹å¤§å° å’Œ cellContent ç±»å æ˜¯ å±äº CellContent é…ç½®ï¼› äºæ˜¯ è€ƒè™‘ç”¨ä¸€ä¸ª cellConentConfigFactory çš„å·¥å‚æ¥ç”Ÿäº§è¿™äº›é…ç½® ï¼› </p><p>2ã€contentConfigInterface å®åˆ—<br>messageçš„å†…å®¹å¤§å° å’Œ cellContent ç±»å æŠ½å‡ºæ¥ å®šä¹‰ä¸€ä¸ªæ¥å£ ContentConfigInterfaceï¼›<br>ï¼ˆè€ƒè™‘åˆ°æœ‰æ–‡æœ¬é…ç½®ï¼Œå›¾ç‰‡é…ç½®ï¼Œä»¥åŠå›¾æ–‡é…ç½®ï¼ŒåæœŸ çš„æ‰©å±• å£°éŸ³é…ç½®ï¼Œçº¢åŒ…é…ç½® ï¼Œ å¥½å‹åˆ†äº«é…ç½®ï¼‰ å‡†å¤‡ä¸€ä¸ªè¶…çº§çˆ¶ç±»<br>BaseContentConfig ï¼ˆå…·æœ‰messageå±æ€§ï¼Œæ–¹ä¾¿è®¡ç®—messageå†…å®¹çš„å¤§å°ï¼‰ï¼›   åæœŸé…ç½®åªéœ€ç»§æ‰¿ BaseContentConfigã€å®ç°ContentConfigInterface æ¥å£ æ–¹æ³•å³å¯ï¼›</p><p>3ã€æœ€ç»ˆè¦æŠŠé…ç½®contentConfigInterface è¿™æ ·çš„å®åˆ— åé¦ˆç»™ å¸ƒå±€ç®¡ç†å™¨;  ä¸ºäº†ä¸æš´éœ²å¤ªå¤šçš„è¯¦ç»†contentConfig ç»†èŠ‚ ä»¥åŠ ä½è€¦åˆï¼›ç”¨ä¸€ä¸ª<br>ConentConfigFactory å·¥å‚ç”Ÿäº§è¿™äº›é…ç½®ç©æ„ ï¼Œæ ¹æ®æ¶ˆæ¯ç±»å‹  è¿”å› æ¶ˆæ¯å†…å®¹é…ç½® contentConfig ï¼ˆå·¥å‚å•åˆ—ï¼Œå®åˆ—åŒ–çš„æ—¶å€™ åˆ›å»ºäº†ä¸€ä¸ªMapæˆ–è€…å­—å…¸ï¼Œ è®°å½•äº†æ¶ˆæ¯ç±»å‹ å¯¹åº”çš„ æ¶ˆæ¯contentConfig;ï¼‰ </p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>iOSå®¢æˆ·ç«¯è¯·æ±‚æ¨¡å—</title>
      <link href="/2018/07/20/iOSNetworkDesign/"/>
      <url>/2018/07/20/iOSNetworkDesign/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¢ç©¶åŸç”Ÿç½‘ç»œè¯·æ±‚"><a href="#æ¢ç©¶åŸç”Ÿç½‘ç»œè¯·æ±‚" class="headerlink" title="æ¢ç©¶åŸç”Ÿç½‘ç»œè¯·æ±‚"></a>æ¢ç©¶åŸç”Ÿç½‘ç»œè¯·æ±‚</h2><h2 id="ä¸šåŠ¡æ¥å£APIè®¾è®¡ä¸ç½‘ç»œè¯·æ±‚"><a href="#ä¸šåŠ¡æ¥å£APIè®¾è®¡ä¸ç½‘ç»œè¯·æ±‚" class="headerlink" title="ä¸šåŠ¡æ¥å£APIè®¾è®¡ä¸ç½‘ç»œè¯·æ±‚"></a>ä¸šåŠ¡æ¥å£APIè®¾è®¡ä¸ç½‘ç»œè¯·æ±‚</h2><h2 id="Swift-ç‰ˆ-Alnofire-æ¡†æ¶ä½¿ç”¨"><a href="#Swift-ç‰ˆ-Alnofire-æ¡†æ¶ä½¿ç”¨" class="headerlink" title="Swift ç‰ˆ Alnofire æ¡†æ¶ä½¿ç”¨"></a>Swift ç‰ˆ Alnofire æ¡†æ¶ä½¿ç”¨</h2><h2 id="Swift-ä¸­çš„Jsonè§£æ"><a href="#Swift-ä¸­çš„Jsonè§£æ" class="headerlink" title="Swift ä¸­çš„Jsonè§£æ"></a>Swift ä¸­çš„Jsonè§£æ</h2><p>VC å‘èµ·è¯·æ±‚ï¼Œ ä¸€ä¸ªä¸“é—¨å‘è¯·æ±‚çš„å‘å°„å™¨ï¼›æˆ‘ç»™å®ƒå–åå­— å« NetManager , æ˜¾ç„¶ ï¼Œä¸º äº†ä¸é‡å¤åˆ›å»ºhttp è¯·æ±‚åŸºç¡€é…ç½®ï¼ˆè¯·æ±‚å¤´ï¼ŒHttpsè¯ä¹¦é…ç½®ç­‰ï¼‰ï¼Œè¿™æ˜¯ä¸ªå•ä¾‹ï¼›</p><p>å‘å°„å™¨ å‘çš„æ˜¯è¯·æ±‚ï¼› è€ƒè™‘åˆ°æ¯ä¸ªä¸šåŠ¡ éƒ½æœ‰ä¸åŒçš„è¯·æ±‚ï¼›æˆ‘å‡†å¤‡äº† ä¸€ä¸ª è¶…çº§çˆ¶ç±»è¯·æ±‚ ï¼›å–å DataRequest;  å…·ä½“çš„è¯·æ±‚ï¼Œåªéœ€ä¼  å…·ä½“çš„å­ç±»requestï¼›</p><p>ä¸€ä¸ªAPP è¯·æ±‚æœ‰å¾ˆå¤šï¼Œä¸ºäº†åŒºåˆ† åŠ ç»´æŠ¤æ–¹ä¾¿ ï¼Œäºæ˜¯æˆ‘å®šä¹‰äº†ä¸€ä¸ªæšä¸¾ï¼›æ¯ä¸ªä¸šåŠ¡è¯·æ±‚ï¼Œåªéœ€ç»™å®ƒè¡¨æ˜ä¸€ä¸ªæ ‡è¯†ï¼›</p><p>è¯·æ±‚å…·æœ‰ä»€ä¹ˆç‰¹æ€§å‘¢ï¼Ÿ 1ï¼‰æœ‰è¯·æ±‚çš„API urlåœ°å€ï¼Œ2ï¼‰è¯·æ±‚çš„å‚æ•°ï¼Œè¯·æ±‚çš„æ ‡è¯†ï¼ˆè¯·æ±‚çš„æšä¸¾å€¼ï¼‰ï¼Œ 3ï¼‰å¯¹è¯·æ±‚å›æ¥çš„æ•°æ®è§£æå¥½å°è£…ï¼ˆä¸šåŠ¡æ•°æ®å°è£…ç­‰å¤„ç†ï¼‰ï¼›   äºæ˜¯æˆ‘å®šä¹‰äº†ä¸€ä¸ªåå«APIInterface çš„æ¥å£åè®®ï¼› çˆ¶ç±»è¯·æ±‚å»å®ç°è¿™ä¸ªAPInterfaceæ¥å£åè®®ï¼› å­ç±»å»Override è¿™å‡ ä¸ªæ–¹æ³•å³å¯ï¼›</p><p>å‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå¿…ç„¶æœ‰ å›ç­”ï¼›è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ ï¼ˆæœ‰çš„å¤±è´¥æ˜¯ä¸šåŠ¡ç å¤±è´¥ï¼‰ï¼› äºæ˜¯ ï¼Œæˆ‘å®šä¹‰äº†å·²ä¸€ä¸ªè¯·æ±‚å›è°ƒçš„æ¥å£ï¼›RequestCallBackInterface ï¼› ï¼ˆå…·æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š ä¸šåŠ¡æˆåŠŸï¼Œä¸šåŠ¡å¤±è´¥ï¼Œç½‘ç»œå…¶ä»–åŸå› å¤±è´¥ï¼‰</p><p>æˆ‘ä»VC å‘å‡ºå»çš„è¯·æ±‚ï¼Œç›¸å½“äºAndroid çš„Activity; ç†Ÿç§°è§†å›¾æ§åˆ¶å™¨ï¼›å½“ç„¶æ˜¯å¸Œæœ›è¯·æ±‚å›è°ƒ å›åˆ° è§†å›¾æ§åˆ¶å™¨ï¼›<br>äºæ˜¯æˆ‘ åœ¨ åŸºç±»è§†å›¾æ§åˆ¶å™¨ BaseViewController æˆ–è€…BaseActivity(Android)  å®ç° è¯·æ±‚å›è°ƒ æ¥å£åè®®ï¼›å®ç°å…¶ä¸­çš„æ–¹æ³•ã€‚<br>å…·ä½“è§†å›¾æ§åˆ¶å™¨ ç»§æ‰¿åŸºç±»ï¼Œ  åªéœ€è¦†ç›–Override è¿™ä¸‰ä¸ªæ–¹æ³• ï¼ˆå…·ä½“VC å®ç°å›è°ƒåçš„ä¸šåŠ¡ï¼‰</p><p>æœ€åï¼›é¡µé¢é€»è¾‘å°±æ˜¾ç¤ºå¾—æ¯”è¾ƒç®€å•äº†ï¼Œä¸€ä¸ªå•ä¾‹ NetManager  æ‰§è¡Œä¸€ä¸ª DataRequest (ä¼ å…·ä½“è¯·æ±‚å­ç±») ï¼› è§†å›¾æ§åˆ¶å™¨åœ¨å…·ä½“RequestCallBackInterface  çš„å›è°ƒæ–¹æ³• ä¸­å¤„ç† æˆåŠŸ ï¼Œå¤±è´¥åçš„æ•°æ®ï¼› </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç™»å½•è¯·æ±‚</span></span><br><span class="line"><span class="keyword">self</span>.loginRequest.userLogin = <span class="keyword">self</span>.userName;</span><br><span class="line"><span class="keyword">self</span>.loginRequest.userPass =  <span class="keyword">self</span>.userPwd;</span><br><span class="line">[[GYNetworkingManager shareInstance] executeRequest:<span class="keyword">self</span>.loginRequest];</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ‹å‹åœˆåˆ—è¡¨è¯·æ±‚</span></span><br><span class="line"><span class="keyword">self</span>.dynamicListRequest.pageIndex = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">self</span>.dynamicListRequest.pageSize = <span class="number">20</span>;</span><br><span class="line">[[GYNetworkingManager shareInstance] executeRequest:<span class="keyword">self</span>.dynamicListRequest];</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) onRequestSuccess:(BaseResponse *)response</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span> (response.requestAPICode ) &#123;  <span class="comment">//è¯·æ±‚çš„æšä¸¾</span></span><br><span class="line"><span class="keyword">case</span> Http_Login:</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¿”å›çš„ç™»å½•å¯¹è±¡</span></span><br><span class="line"><span class="comment">// LoginData *data  = response.responseObject;</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> Http_DynamicList:</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯åˆ—è¡¨,åˆ™ä»å–æ•°ç»„</span></span><br><span class="line"><span class="built_in">NSArray</span> *dataList  = response.tableList.dataList;</span><br><span class="line">[<span class="keyword">self</span> allLoadingCompleted:dataList];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªæ¯å­çš„8ä¸­è¥é”€æ–¹å¼</title>
      <link href="/2017/09/04/marketingMethods/"/>
      <url>/2017/09/04/marketingMethods/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€ä¸ªæ¯å­çš„8ç§è¥é”€æ–¹æ¡ˆï¼š"><a href="#ä¸€ä¸ªæ¯å­çš„8ç§è¥é”€æ–¹æ¡ˆï¼š" class="headerlink" title="ä¸€ä¸ªæ¯å­çš„8ç§è¥é”€æ–¹æ¡ˆï¼š"></a>ä¸€ä¸ªæ¯å­çš„8ç§è¥é”€æ–¹æ¡ˆï¼š</h4><ol><li>å–äº§å“çš„æœ¬èº«ä½¿ç”¨ä»·å€¼ï¼Œåªèƒ½å–3å…ƒ/ä¸ªã€‚</li><li>å–äº§å“çš„æ–‡åŒ–ä»·å€¼ï¼Œå¯ä»¥å–5å…ƒ/ä¸ªã€‚</li><li>å–äº§å“çš„å“ç‰Œä»·å€¼ï¼Œå¯ä»¥å–7å…ƒ/ä¸ªã€‚ ï¼ˆå“ç‰Œæ ‡ç­¾ï¼‰</li><li>å–äº§å“çš„ç»„åˆä»·å€¼ï¼Œå–15å…ƒ/ä¸ªã€‚ï¼ˆæƒ…ä¾£ï¼Œäº²æƒ…å¥—è£…ï¼‰</li><li>å–äº§å“çš„å»¶ä¼¸ä»·å€¼ã€‚ï¼ˆå¯¹äººä½“æœ‰ä»€ä¹ˆå¥½å¤„ä¹‹ç±»çš„ï¼‰</li><li>å–äº§å“çš„ç»†åˆ†å¸‚åœºä»·å€¼ ï¼ˆæƒ…ä¾£å¥—è£…ï¼Œ12ç”Ÿè‚–ï¼Œå¡é€šåŠ¨æ¼« ä¹‹ç±»çš„ï¼Œç²¾è£…ç¤¼ç›’ï¼‰</li><li>å–äº§å“çš„åŒ…è£…ä»·å€¼ã€‚</li><li>ä¹°äº§å“çš„çºªå¿µä»·å€¼ã€‚</li></ol><h4 id="è¥é”€è§£ç ï¼š"><a href="#è¥é”€è§£ç ï¼š" class="headerlink" title="è¥é”€è§£ç ï¼š"></a>è¥é”€è§£ç ï¼š</h4><p>æ¶ˆè´¹è€…å¾€å¾€è´­ä¹°å•†å“æ—¶ï¼Œé™¤äº†äº§å“æœ¬èº«çš„ä½¿ç”¨ä»·å€¼å¤–ï¼Œæ›´å¤šçš„æ˜¯è´­ä¹°ä¸€ç§æ„Ÿè§‰ï¼Œæ–‡åŒ–ï¼ŒæœŸæœ›ï¼Œé¢å­ï¼Œåœˆå­ï¼Œå°Šä¸¥ï¼Œå°Šé‡ï¼Œç†è§£ï¼Œåœ°ä½ç­‰è±¡å¾æ€§çš„æ„ä¹‰ã€‚<br>åŒæ ·ä¸€ä¸ªæ¯å­ï¼Œæ¯å­é‡Œé¢çš„ä¸–ç•Œï¼Œå®ƒçš„åŠŸèƒ½ï¼Œç»“æ„ï¼Œä½œç”¨ï¼Œä¾ç„¶å¦‚æ•…ï¼Œéšç€å¤–é¢çš„åŒ…è£…ï¼Œå®ƒçš„ä»·å€¼å°±åœ¨æå‡ã€‚<br>é‡‡ç”¨ä¸åŒçš„ä»·å€¼åˆ›æ–°ç­–ç•¥ï¼Œç²¾ç¾çš„ç­–åˆ’ï¼Œå°±ä¼šè®©ä½ çš„äº§å“ä»·å€¼å¤§å¤§æå‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åˆ›ä¸šå‰çš„å‡ ç‚¹</title>
      <link href="/2017/09/04/beforeEntrepreneurship/"/>
      <url>/2017/09/04/beforeEntrepreneurship/</url>
      
        <content type="html"><![CDATA[<h4 id="åˆ›ä¸šå»ºè®®"><a href="#åˆ›ä¸šå»ºè®®" class="headerlink" title="åˆ›ä¸šå»ºè®®"></a>åˆ›ä¸šå»ºè®®</h4><p>åœ¨åˆä½œæ–¹é¢ä¸ä¸€å®šè¦æ‰¾å’Œè‡ªå·±ç›¸å·®ä¸å¤šçš„ï¼Œå› ä¸ºè¿™æ ·å½¼æ­¤çš„çœ¼å…‰æˆ–è€…è§†é‡éƒ½æ¯”è¾ƒçŸ­æµ…ï¼Œåˆä¼™æœ¬æ¥å°±æ˜¯ä¸€ç§äº’åŠ©å’Œå­¦ä¹ çš„æœºä¼šï¼æˆ‘è®¤ä¸ºæ‰¾åˆé€‚çš„æ˜¯å¿…é¡»çš„ï¼ŒåŒæ—¶å…ˆè¦äº†è§£å¯¹æ–¹çš„ä¸ºäººï¼Œå› ä¸ºåˆä¼™å¾ˆå®¹æ˜“å‡ºçº çº·çš„ï¼</p><p>ã€€ã€€è‡³äºçœŸæ­£çš„åˆä¼™åˆ›ä¸šï¼Œæˆ‘å»ºè®®ä½ æ…é‡ï¼Œè‡³äºç½‘ç»œå·¥ä½œå®¤çš„æƒ³æ³•æ˜¯å¥½çš„ï¼Œä¸€æ¥ä½ æ²¡æœ‰æŠ€æœ¯ã€æ²¡æœ‰å¤ªå¤šçš„èµ„é‡‘éƒ½ä¸æ˜¯æœ€ä¸»è¦çš„é—®é¢˜ï¼Œå…³é”®æ˜¯ï¼Œèƒ½å¦æ‰¾åˆ°åˆé€‚çš„äººé€‰ï¼æ¯”å¦‚æŠ€æœ¯ä¸åˆ°ä½ä¸‹é¢çš„å·¥ä½œæ˜¯æ— æ³•ç»§ç»­çš„ï¼ŒåŒæ—¶æŠ€æœ¯éœ€è¦ä¸“ä¸šï¼Œä¸ç„¶è°ˆåˆ¤çš„è¿‡ç¨‹ä¸­æ²¡æœ‰è¯´æœåŠ›ï¼</p><p>ã€€ã€€è‡³äºèµ„é‡‘ï¼Œç½‘ç»œå·¥ä½œå®¤çš„èµ·æ­¥èµ„é‡‘ä¸éœ€è¦å¤ªé«˜ï¼Œå†åŠ ä¸Šåˆä¼™åˆ›ä¸šè¦ç»™å¯¹æ–¹å¸Œæœ›ï¼Œå¤§å®¶æœ‰å…±åŒå…´è¶£å’Œç›®æ ‡è¿™æ ·æ‰è¡Œï¼Œä¸ç„¶ä¸€åˆ‡éƒ½æ˜¯ç©ºè°ˆï¼ç”Ÿæ„å¦‚æ­¤ï¼Œåˆä½œä¹Ÿæ˜¯å¦‚æ­¤ï¼</p><p>ã€€ã€€ä¸ªäººè®¤ä¸ºï¼Œä¸€ä¸ªç½‘ç«™çš„å‘å±•å¥½åï¼Œæ›´å¤šçš„å–å†³äºæ¨å¹¿å’Œç®¡ç†è¿è¥ï¼Œå†å¥½çš„å•†ä¸šæ¨¡å¼ï¼Œæ²¡æœ‰å¼ºæœ‰åŠ›çš„æ‰§è¡ŒåŠ›ä¹Ÿåªä¸è¿‡æ˜¯æ³¡å½±è€Œå·²ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿè®¤è¯†ä¸å°‘åšæŠ€æœ¯çš„æœ‹å‹ï¼Œå¼€å‘äº†ä¸å°‘åœ¨æŠ€æœ¯ä¸Šéå¸¸è¿‡ç¡¬çš„äº§å“å‡ºæ¥ï¼Œåšå‡ºä¸å°‘æœ‰æ–°æ¦‚å¿µçš„ç½‘ç«™æˆ–è€…äº§å“å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“ä»–ä»¬åœ¨åšçš„æ—¶å€™æœ‰æ²¡æœ‰è€ƒè™‘è¿‡å¸‚åœºçš„éœ€æ±‚ï¼Œæˆ–è€…æœ‰æ²¡æœ‰æƒ³è¿‡ä¸œè¥¿åšå‡ºæ¥è°ä¼šèŠ±é’±ä¹°ï¼Ÿ</p><p>ã€€ã€€ä¸€ä¸ªä¸æ‡‚æŠ€æœ¯çš„äººï¼Œä¸ä¸€å®šå°±ä¸€å®šä¸æ‡‚äº’è”ç½‘ï¼Œè¯•é—®å½“ä»Šçš„äº’è”ç½‘åˆ›ä¸šçš„å¤§äº¨ä»¬ï¼Œæœ‰å‡ ä¸ªæ˜¯æ­£ç»Ÿç§‘ç­å‡ºèº«çš„ï¼Ÿé©¬äº‘ã€æœ±ä¿Šã€å²ç‰æŸ±ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä»–ä»¬æ‡‚å¾—æ›´å¤šçš„æ˜¯ä»€ä¹ˆä¸œè¥¿èµšé’±ï¼Œæ€ä¹ˆå»åšèƒ½èµšé’±ã€‚æ¯”èµ·è¿½æ±‚ç†æƒ³å’Œå¢ƒç•Œçš„æŠ€æœ¯å¤§å¸ˆä»¬ï¼Œæ˜¾å¾—æ›´ç°å®äº†ä¸€äº›ï¼Œæ›´é“œè‡­å‘³äº†ä¸€äº›ã€‚</p><h4 id="åˆ›ä¸šå‡†å¤‡æ˜“çŠ¯çš„é”™è¯¯"><a href="#åˆ›ä¸šå‡†å¤‡æ˜“çŠ¯çš„é”™è¯¯" class="headerlink" title="åˆ›ä¸šå‡†å¤‡æ˜“çŠ¯çš„é”™è¯¯"></a>åˆ›ä¸šå‡†å¤‡æ˜“çŠ¯çš„é”™è¯¯</h4><ol><li>å‡†å¤‡ä¸è¶³ã€‚ï¼ˆè®¤çœŸæ€è€ƒå’Œå¯¹å¾…è‡ªå·±çš„åˆ›ä¸šï¼Œæ˜¯ä¸æ˜¯èƒ½èšåˆåšè¿™ä»¶äº‹éœ€è¦çš„è¦ç´ ï¼ŒåŒ…æ‹¬ç»éªŒç§¯ç´¯ï¼Œå›¢é˜Ÿï¼Œå¯åŠ¨èµ„é‡‘ï¼Œèµ„è´¨ç‰Œç…§ï¼Œå•†åŠ¡æ¸ é“ç­‰ï¼Œæœ€åŸºæœ¬çš„æ˜¯ç»éªŒå’Œå›¢é˜Ÿï¼Œå¦å¤–æœ€èµ·ç è¦æœ‰å›¢é˜Ÿé¢†å¯¼åŠ›ç­‰ï¼‰</li><li>è¿‡äºé‡è§†ç‚¹å­ï¼Œå¿½è§†æ‰§è¡Œã€‚ï¼ˆåˆ›ä¸šçš„æ ¸å¿ƒåœ¨æ‰§è¡Œã€‚è¿‡äºè¿½æ±‚ç‚¹å­ï¼Œä¸€å‘³æ±‚æ–°æ±‚å˜ï¼Œè¿½æ±‚ä¸åŒï¼Œåè€Œå¯¼è‡´ä¸€å †æ²¡æœ‰å¯æ‰§è¡Œæ€§çš„è®¡åˆ’ã€‚ï¼‰</li><li>é€‰æ‹©è¿‡äºå¤æ‚ï¼Œè¶…å‡ºåˆ›ä¸šå…¬å¸èƒ½åŠ›çš„é¡¹ç›®ã€‚</li><li>é•¿æ—¶é—´å…¼èŒåˆ›ä¸šã€‚ï¼ˆåˆ›ä¸šå‡†å¤‡ï¼Œå’Œç ”ç©¶æ—¶é—´ä¸è¾èŒæ˜¯å¯ä»¥çš„ï¼Œä½†é•¿æ—¶é—´å…¼èŒåˆ›ä¸šæ˜¯ä¸å¯å–çš„ã€‚å…¼èŒå¾€å¾€å¯¼è‡´æ‰§è¡ŒåŠ›ä½ä¸‹ï¼Œæ€è€ƒä¸æ·±å…¥ï¼Œå›¢é˜Ÿæ— æ³•æ­£çœŸç»„å»ºï¼Œä¸èƒ½å¸å¼•å¥½çš„äººåŠ å…¥ã€‚æ— æ³•èèµ„ï¼Œæœ€é‡è¦çš„æ˜¯è½»æ˜“æ”¾å¼ƒäº†å¸‚åœºæœºä¼šã€‚ï¼‰</li><li>å¤šçº¿å¼€å‘ï¼ŒåŒæ—¶æƒ³åšå¤ªå¤šçš„äº‹æƒ…ã€‚å¸Œæœ›äº§å“åŠŸèƒ½ä¸°å¯Œï¼Œå †ç ŒåŠŸèƒ½ï¼Œæ²¡æœ‰æŠ“ä½æ ¸å¿ƒéœ€æ±‚å’Œæ ¸å¿ƒä»·å€¼ã€‚ä¸æ³¨æ„æ”¿ç­–å’Œé™åˆ¶ï¼Œé€‰æ‹©å¤ªç‹­çª„çš„æ–¹å‘ï¼Œä¸å»è€ƒè™‘æ¨å¹¿çš„æ¸ é“ï¼Œç›ˆåˆ©æ¨¡å¼ç­‰ã€‚</li></ol><h4 id="ä»€ä¹ˆæ˜¯åˆ›ä¸šè€…"><a href="#ä»€ä¹ˆæ˜¯åˆ›ä¸šè€…" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ›ä¸šè€…"></a>ä»€ä¹ˆæ˜¯åˆ›ä¸šè€…</h4><ul><li>åœ¨åšæ¯ä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªäº‹æƒ…çš„æ¯ä¸€ä¸ªé˜¶æ®µçš„æ­¥éª¤ï¼Œç„¶åæ¯ä¸ªé˜¶æ®µé‡Œé¢çš„é‡è¦æ€§ï¼Œéƒ½æƒ³å¾—éå¸¸æ¸…æ¥šã€‚</li><li><p>èƒ½å¤Ÿç¬¼ç»œéå¸¸å¥½çš„ä¼˜ç§€å›¢é˜Ÿã€‚è¦æœ‰ä¼˜ç§€çš„èƒ½äººã€‚å¯¹äº§å“çš„ç»†èŠ‚å’Œæ“ä½œæµç¨‹è¦å¾ˆæ•æ„Ÿã€‚åŠæ—¶å‘ç°è‡ªå·±çš„åŠ£åŠ¿ï¼Œæ‰¾åˆ°ä¼˜åŠ¿äº’è¡¥çš„åˆä¼™äººã€‚</p></li><li><p>æ•é”çš„æ´å¯ŸåŠ›ï¼Œå–„äºæŠŠæ¡ä¸€äº›åˆ›ä¸šæœºä¼šã€‚</p></li><li><p>åˆ›ä¸šçš„æ¿€æƒ…ã€‚åˆ›ä¸šè€…æœ€é‡è¦çš„æ˜¯é—®è‡ªå·±ï¼Œè§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œç¬¬äºŒï¼Œä¸ºä»€ä¹ˆåªæœ‰ä½ èƒ½è§£å†³ï¼Œç¬¬äºŒå°±æ˜¯ä½ çš„æ‰§è¡ŒåŠ›ï¼Œæˆ–è€…ä½ çš„åˆ¤æ–­åŠ›ã€‚</p></li><li>åˆ›ä¸šè€…æ˜¯å¦åŒæ—¶å…·æœ‰æ ¼å±€çš„é«˜åº¦ï¼Œåˆèƒ½å¤Ÿæœ‰æ‰§è¡ŒåŠ›ï¼Œæ—¢æœ‰ç‹¬ç‰¹çš„è§‚ç‚¹ï¼Œåˆèƒ½å¤Ÿæœ‰ç©ºæ¯çš„å¿ƒæ€å»å¬å–åˆ«äººçš„æ„è§ï¼Œå­¦ä¹ åˆ«äººçš„é•¿å¤„ã€‚æ—¢æœ‰ä¹è§‚çš„ç²¾ç¥ï¼Œåˆèƒ½å¤Ÿæœ‰è¿™ç§å±æœºçš„æ„è¯†(å¯èƒ½æ¥è‡ªå·¨å¤´çš„æ‰“å‹å’ŒåŒè¡Œçš„ç«äº‰ï¼Œæ‰€ä»¥è¦æœ‰å±æœºæ½œæ„è¯†)ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•æ‰“é€ ç†æƒ³ä¸­çš„å›¢é˜Ÿ</title>
      <link href="/2017/09/04/goodTeam/"/>
      <url>/2017/09/04/goodTeam/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€-è¯šå®æ­£ç›´"><a href="#ä¸€-è¯šå®æ­£ç›´" class="headerlink" title="ä¸€.è¯šå®æ­£ç›´"></a>ä¸€.è¯šå®æ­£ç›´</h3><ol><li>å¯¹è‡ªå·±è¯šå®ï¼Œæ–¹èƒ½çœ‹æ¸…æ¥šçœŸå®çš„æƒ…å†µï¼Œè¿›è€Œèƒ½å‘ç°é—®é¢˜çš„æ‰€åœ¨ï¼Œå¹¶æ‰¾åˆ°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</li></ol><h3 id="äºŒ-å‹å–„"><a href="#äºŒ-å‹å–„" class="headerlink" title="äºŒ.å‹å–„"></a>äºŒ.å‹å–„</h3><ol><li>å‹å–„æ˜¯ä¸€ç§æ€åº¦ï¼Œè¿™æ„å‘³ç€åœ¨ä½ ä¸äººç›¸å¤„æ—¶é™¤äº†è¿‡äºæ®·åˆ‡å’Œæ•Œè§†ä¹‹é—´ï¼Œæœ‰ç€å¹¿é˜”çš„ç©ºé—´ã€‚</li></ol><h3 id="ä¸‰-ç‹¬ç«‹è´£ä»»æ„Ÿ"><a href="#ä¸‰-ç‹¬ç«‹è´£ä»»æ„Ÿ" class="headerlink" title="ä¸‰.ç‹¬ç«‹è´£ä»»æ„Ÿ"></a>ä¸‰.ç‹¬ç«‹è´£ä»»æ„Ÿ</h3><ol><li><p>ä½ åº”è¯¥ä¸ºä½ çš„æ‰€æœ‰é€‰æ‹©è´Ÿè´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„å·¥ä½œæ•ˆç‡è´Ÿè´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„æ—¶é—´è§„åˆ’è´Ÿä¸»è¦è´£ä»»ã€‚ä½ åº”è¯¥ä¸ºä½ çš„è–ªé…¬å’Œæ‰€å¾—è´Ÿä¸»è¦è´£ä»»ï¼Œä½ åº”è¯¥ä¸ºä½ çš„èŒä¸šæˆé•¿è´Ÿä¸»è¦è´£ä»»ã€‚</p><h3 id="å››-æ²Ÿé€šèƒ½åŠ›"><a href="#å››-æ²Ÿé€šèƒ½åŠ›" class="headerlink" title="å››.æ²Ÿé€šèƒ½åŠ›"></a>å››.æ²Ÿé€šèƒ½åŠ›</h3></li><li><p>åœ¨é«˜åº¦ç«äº‰çš„å¸‚åœºä¸‹ï¼Œå•å…µä½œæˆ˜èƒ½å–èƒœçš„ä¾‹å­è¶Šæ¥è¶Šå°‘äº†ï¼Œç›¸ä¿¡æ‹¥æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›çš„å¤©æ‰æ‰€å¾—çš„æˆå°±è¿œé«˜äºé‚£äº›å­¤ç‹¬çš„å¤©æ‰ã€‚</p></li></ol><h3 id="äº”-çµæ´»åº¦"><a href="#äº”-çµæ´»åº¦" class="headerlink" title="äº”.çµæ´»åº¦"></a>äº”.çµæ´»åº¦</h3><ol><li>è®°å¾—éšæ—¶é€€åä¸‰æ­¥å®¡è§†è‡ªå·±ï¼ŒåŒ…æ‹¬å›¢é˜Ÿåœ¨åšçš„äº‹ï¼Œå¹¶åšå¥½éšæ—¶æ¨ç¿»æ˜¨å¤©è‡ªå·±çš„å‡†å¤‡ã€‚</li><li>èƒ½å¦åœ¨å¿…è¦æ—¶å€™é«˜æ•ˆåœ°å¦å®šè‡ªå·±ï¼ŒåŠæ—¶æ‰¿è®¤è‡ªå·±è€ƒè™‘çš„é”™è¯¯å’Œç–æ¼ï¼Œå¹¶å¿«é€Ÿåœ°åˆ‡æ¢åˆ°â€œå¦‚ä½•ä¿®æ­£é”™è¯¯å’Œè°ƒæ•´ç­–ç•¥â€ä¸Šã€‚</li></ol><h3 id="å…­-æœ‰æ•ˆä¸”å°"><a href="#å…­-æœ‰æ•ˆä¸”å°" class="headerlink" title="å…­.æœ‰æ•ˆä¸”å°"></a>å…­.æœ‰æ•ˆä¸”å°</h3><ol><li>å°å›¢é˜Ÿéœ€è¦å¤šé¢æ‰‹ï¼Œå•å…µç´ è´¨è¿œé«˜äºå¤šé¢æ‰‹ï¼Œä¸ä»…ä»…æ„å‘³ç€æ•ˆç‡ï¼Œè¿˜æ„å‘³ç€è·¨é¢†åŸŸè·¨æŠ€æœ¯çš„æ€ç»´äº¤å‰ã€‚</li><li>å°å›¢é˜Ÿç”¨è¾ƒå°‘æˆæœ¬å®ç°å¤§å›¢é˜Ÿçš„ç”¨æˆ·è§„æ¨¡ï¼Œèµ„é‡‘ä½¿ç”¨æ•ˆç‡é«˜ã€‚</li><li>åŒæ ·èµ„æºæƒ…å†µä¸‹ï¼Œå°å›¢çš„çš„ç”Ÿå­˜æœŸæ›´é•¿ã€‚</li><li>å°å›¢çš„å†…éƒ¨æ²Ÿé€šæˆæœ¬è¿œä½äºå¤§å›¢é˜Ÿã€‚æ„å‘³ç€ä¼šè®®ã€äººäº‹ã€è¡Œæ”¿ç­‰è¾¹ç¼˜æ´»åŠ¨è€—æ—¶æ›´ä½ã€‚</li></ol><h3 id="ä¸ƒ-é”‹åˆ©çš„ä¸€è‡´æ€§"><a href="#ä¸ƒ-é”‹åˆ©çš„ä¸€è‡´æ€§" class="headerlink" title="ä¸ƒ.é”‹åˆ©çš„ä¸€è‡´æ€§"></a>ä¸ƒ.é”‹åˆ©çš„ä¸€è‡´æ€§</h3><ol><li>å½“å›¢é˜Ÿä»·å€¼è§‚å»ºç«‹èµ·æ¥äº†åï¼Œå›¢é˜Ÿæœ¬èº«å…·æœ‰äº†æ„è¯†ï¼Œå…¶æ€è€ƒå¾ˆè¡Œä¸ºéƒ½ä¼šæœ‰ä¸€å®šçš„è‡ªä¸»æ€§ã€‚è¿™æ ·æ›´å®¹æ˜“æé«˜æ•ˆç‡ã€‚</li><li>å®¡ç¾è¶£å‘³ä¸€è‡´æ€§è¶Šæ—©å»ºç«‹èµ·æ¥ï¼Œäº§å“å’Œç”¨æˆ·ä½“éªŒçš„è®¾è®¡å¸ˆå’Œå¼€å‘è¿‡ç¨‹è¶Šé«˜æ ¡ã€‚</li></ol><h3 id="å…«-å›¢é˜Ÿä¸­çš„é‚£äº›äº‹å„¿"><a href="#å…«-å›¢é˜Ÿä¸­çš„é‚£äº›äº‹å„¿" class="headerlink" title="å…«.å›¢é˜Ÿä¸­çš„é‚£äº›äº‹å„¿"></a>å…«.å›¢é˜Ÿä¸­çš„é‚£äº›äº‹å„¿</h3><ol><li>æ­£ç¡®çœ‹å¾…Ta çš„çŸ¥è¯†ç©ºç¼ºã€‚</li><li>ä¿è¯è‰¯å¥½çš„åˆä½œå…³ç³»ï¼Œå¿ƒå¹³æ°”å’Œåœ°æ²Ÿé€šï¼Œæ”¾ä½èº«æ®µï¼Œè€å¿ƒå€¾å¬å’Œæ€è€ƒï¼Œä¸è¾ƒçœŸï¼Œèæ´½åä½œæ‰æ˜¯ç‹è€…é£èŒƒã€‚</li><li>å¼•å¯¼ä»–ä»¬ä¹‹é—´æ²Ÿé€šã€‚</li><li>å¦è¯šã€‚ ä¸äººäº¤æµï¼Œå°¤å…¶æ˜¯è¯·æ•™é—®é¢˜çš„æ—¶å€™ï¼Œå¦è¯šä¸€ç‚¹ï¼Œé”™äº†å°±é”™äº†ï¼Œæ²¡æœ‰æƒ³åˆ°å°±æ˜¯æ²¡æœ‰æƒ³åˆ°ï¼Œæ²¡æœ‰å¿…è¦æ˜‚ç€å¤´é—®é—®é¢˜ã€‚è°¦è™šä¸ä¼šé™ä½äººçš„åœ°ä½ï¼Œé™ä½èº«ä»·çš„ï¼Œå¾€å¾€æ˜¯å¾’æœ‰çš„é«˜è°ƒã€‚</li><li>ä¹äºåˆ†äº«æœå®ã€‚æ¯å‘¨åšä¸€æ¬¡æŠ€æœ¯äº¤æµï¼Œå­¦ä¹ å‡ ä¸ªäººçš„çŸ¥è¯†ã€‚</li><li>å……åˆ†ä¿¡ä»»è‡ªå·±çš„ä¼™ä¼´ï¼Œ æ”¾æƒè®©Taå»åšã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>äº’è”ç½‘æ€ç»´åˆ°åº•è¯´å•¥ï¼Ÿ</title>
      <link href="/2017/09/04/InternetThinking/"/>
      <url>/2017/09/04/InternetThinking/</url>
      
        <content type="html"><![CDATA[<h3 id="äº’è”ç½‘æ€ç»´æŒ‡çš„æ˜¯ä»€ä¹ˆæ€ç»´ï¼Ÿ"><a href="#äº’è”ç½‘æ€ç»´æŒ‡çš„æ˜¯ä»€ä¹ˆæ€ç»´ï¼Ÿ" class="headerlink" title="äº’è”ç½‘æ€ç»´æŒ‡çš„æ˜¯ä»€ä¹ˆæ€ç»´ï¼Ÿ"></a>äº’è”ç½‘æ€ç»´æŒ‡çš„æ˜¯ä»€ä¹ˆæ€ç»´ï¼Ÿ</h3><font color=orange>å¿«é€Ÿè¿­ä»£ï¼Œç”¨æˆ·å‚ä¸ã€‚</font>é€šè¿‡ä¸æ–­åœ°è¿­ä»£ä½¿äº§å“æ—¥è‡»å®Œå–„ï¼Œè€Œä¸æ˜¯è¿½æ±‚ä¸€æ¬¡æ€§åšå‡ºå®Œç¾çš„äº§å“ã€‚å¹¶ä¸”ï¼Œç”¨æˆ·çš„åé¦ˆä¼šä½œä¸ºè®¾è®¡å†³ç­–çš„éƒ¨åˆ†ä¾æ®ã€‚<br><br>åŸºäºæµ·é‡æ•°æ®åˆ†æè¿›è¡Œå†³ç­–ã€‚äº’è”ç½‘äº§å“çš„ä¸€å¤§ä¾¿åˆ©æ˜¯å¯ä»¥å®æ—¶è·å–å¤§é‡ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®ï¼Œ<font color=orange>åŸºäºè¿™äº›æ•°æ®å¯è¿›è¡Œäº§å“å†³ç­–ã€‚</font>ä¹Ÿå¯ä»¥é‡‡ç”¨ABæµ‹è¯•ç­‰æ–¹æ³•ä¸»åŠ¨æ¯”è¾ƒä¸åŒçš„è®¾è®¡æ–¹æ¡ˆã€‚<br><br>ç—…æ¯’å¼è¥é”€ï¼Œæ˜Ÿç«ç‡åŸã€‚ åˆ©ç”¨äº’è”ç½‘çš„ä¼ æ’­ç‰¹ç‚¹ï¼Œä¿ƒæˆäº§å“åœ¨ç¤¾äº¤ç½‘ç»œï¼Œç¤¾ä¼šåŒ–åª’ä½“çš„æ¸—é€ï¼Œå¹¶é€šè¿‡åˆ¶é€ è½°åŠ¨æ€§äº‹ä»¶ï¼Œäº‰è®®æ€§è¯é¢˜ï¼Œå®ç°å¤§èŒƒå›´ç—…æ¯’ä¼ æ’­ï¼Œè¿™æ˜¯ä¸€ç§æ— æœ¬ä¸‡åˆ©çš„è¥é”€æ‰‹æ®µã€‚<br><br>å°è€Œç¾ï¼Œå°‘å³å¤šã€‚äº’è”ç½‘äº§å“é€šå¸¸ä¸è¿½æ±‚å¤§è€Œå…¨ï¼Œè€Œæ˜¯æŠ“ä½ç”¨æˆ·çš„æŸä¸ªç—›ç‚¹æˆ–ä»·å€¼ç‚¹ï¼Œé’ˆå¯¹æ€§åœ°åšå‡ºå®šä½æ˜ç¡®çš„äº§å“ã€‚åœ¨åŠŸèƒ½ä¸Šå°½é‡ç®€å•æ˜ç¡®ï¼Œå³ä¾¿è¦åšå¤§åšå¤æ‚ä¹Ÿæ˜¯æ…¢æ…¢åŠ ä¸Šå»çš„ã€‚<font color=orange>ä½“éªŒä¸Šå°½é‡åšåˆ°ç®€å•æ˜“ä¸Šæ‰‹ã€‚</font><p>å…è´¹ç­–ç•¥ï¼Œå¹³å°æˆ˜äº‰ã€‚ äº’è”ç½‘äº§å“å¤§å¤šä¸å‘ç”¨æˆ·ç›´æ¥æ”¶è´¹ï¼Œè€Œæ˜¯ç”¨å…è´¹ç­–ç•¥æåŠ›äº‰å–ç”¨æˆ·ï¼Œé”å®šç”¨æˆ·ã€‚å¹¶ä¸”ï¼ŒåŒæ—¶è‡´åŠ›äºä½¿Imï¼Œæœç´¢å¼•æ“ï¼Œæµè§ˆå™¨ï¼Œæ€æ¯’è½¯ä»¶ç­‰ä»ä¸“ç”¨äº§å“å˜æˆå¹³å°äº§å“ï¼Œå‡­å€Ÿåºå¤§çš„ç”¨æˆ·åŸºæ•°ï¼Œæ¨å¹¿å’Œé”€å”®å…¶ä»–æœåŠ¡ã€‚</p><p>ç²‰ä¸ç»æµï¼Œè‰æ ¹å“ç‰Œã€‚åŸ¹è‚²å’Œå‹¾å¼•æ­»å¿ ç”¨æˆ·ï¼Œå£®å¤§ç²‰ä¸è§„æ¨¡ï¼Œè¥é€ ç²‰ä¸æ–‡åŒ–ä¹ƒè‡³æ„å»ºè¯è¯­ä½“ç³»ã€‚åŒæ—¶å¿…é¡»åœ¨å“ç‰Œä¸­æ³¨å…¥è‰æ ¹åŸºå› ï¼Œæ”¾ä½èº«æ®µï¼Œè®¨å¥½ç”šè‡³éƒ½å¼„ç²‰ä¸ï¼Œä¿æŒé«˜é¢‘ï¼Œå…¨æ–¹ä½çš„äº’åŠ¨ï¼Œæ¯”è¾ƒæˆåŠŸçš„äº’è”ç½‘äº§å“ï¼šå°ç±³ï¼Œé€»è¾‘æ€ç»´ï¼Œæ¢æ¬¢ã€‚</p><p><font color=orange>æ¿€å‘ç”¨æˆ·åˆ›é€ ï¼Œè‡ªç»„ç»‡æ„ç­‘ç½‘ç»œç”Ÿæ€ã€‚</font> ä½¿ç”¨æˆ·ä¹Ÿæˆä¸ºäº§å“çš„ä¸€éƒ¨åˆ†ï¼Œæ¿€åŠ±ç”¨æˆ·è¿›è¡Œåˆ›é€ ï¼Œç”Ÿæˆé«˜ä»·å€¼å†…å®¹ï¼Œç”¨æˆ·åœ¨åˆ›é€ çš„åŒæ—¶è¿˜èƒ½è‡ªç»„ç»‡ï¼Œè‡ªå‘å½¢æˆå¤šå±‚æ¬¡ï¼Œå¤šæ ·æ€§çš„ç½‘ç»œå•å…ƒï¼Œä½¿äº’è”ç½‘äº§å“æ‰©å±•ä¸ºä¸€ä¸ªå¤æ‚çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæœ€å…¸å‹å¦‚è±†ç“£ï¼Œè‡ªè¡Œç¹è£å£®å¤§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æé«˜æ‰§è¡ŒåŠ›</title>
      <link href="/2017/09/04/execution/"/>
      <url>/2017/09/04/execution/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¦‚å¿µ-ä»€ä¹ˆæ˜¯æ‰§è¡ŒåŠ›"><a href="#æ¦‚å¿µ-ä»€ä¹ˆæ˜¯æ‰§è¡ŒåŠ›" class="headerlink" title="æ¦‚å¿µ:ä»€ä¹ˆæ˜¯æ‰§è¡ŒåŠ›?"></a>æ¦‚å¿µ:ä»€ä¹ˆæ˜¯æ‰§è¡ŒåŠ›?</h4><ul><li>ç¬¬ä¸€ï¼Œ é™æ€ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éµå®ˆåˆ¶åº¦ã€‚</li><li>ç¬¬äºŒï¼ŒæŒ‡ä»¤å¦‚å±±ã€‚å°±æ˜¯æŠŠæ‰€æœ‰çš„æŒ‡ä»¤æ”¾åœ¨æ–¹å‘ä¸Šï¼Œå°±æ˜¯ä¸Šå¸äº¤ä»£çš„äº‹æƒ…ï¼Œå¸ƒç½®çš„ä»»åŠ¡å¦‚ä½•å°½å¿«æœ‰æ•ˆã€é«˜æ•ˆåœ°æŠŠå®ƒå®Œæˆã€‚</li><li>ç¬¬ä¸‰ï¼Œåšäº‹è¦æœ‰ç»“æœã€‚æ‰€è°“çš„åšäº‹å°±æ˜¯ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œç»“æœå°±æ˜¯å·¥ä½œä»·å€¼ã€‚</li></ul><h4 id="æ€è€ƒ-æ€æ ·æé«˜æ‰§è¡ŒåŠ›"><a href="#æ€è€ƒ-æ€æ ·æé«˜æ‰§è¡ŒåŠ›" class="headerlink" title="æ€è€ƒ:æ€æ ·æé«˜æ‰§è¡ŒåŠ›?"></a>æ€è€ƒ:æ€æ ·æé«˜æ‰§è¡ŒåŠ›?</h4><ol><li>ç§¯æé€‰æ‹”åˆé€‚çš„äººåˆ°æ°å½“çš„å²—ä½ä¸Šï¼Œè¿˜è¦é”»ç‚¼å‘˜å·¥é˜Ÿä¼çš„æ‰§è¡Œèƒ½åŠ›.</li><li>ä»æœä»å¼€å§‹æŠ“ï¼Œå› ä¸ºä¸æœä»æ€ä¹ˆè°ˆæ‰§è¡Œï¼Ÿæœä»ä¹Ÿåº”å½“æ˜¯å‘˜å·¥çš„ç¬¬ä¸€ç¾å¾·ï¼Œä»»ä½•<a href="http://info.ceo.hc360.com/list/qygl-zlgl-jzfz.shtml" target="_blank" rel="noopener">å‘å±•</a>æˆ˜ç•¥ã€<a href="http://info.ceo.hc360.com/list/qygl-scyx.shtml" target="_blank" rel="noopener">è¥é”€</a>æ¨¡å¼éƒ½è¦å»ºç«‹åœ¨å‘˜å·¥æœä»çš„åŸºç¡€ä¹‹ä¸Šï¼Œæ¯ä¸€ä½å‘˜å·¥éƒ½å¿…é¡»æœä»ä¸Šçº§é¢†å¯¼çš„æŒ‡æŒ¥å®‰æ’ï¼Œæœä»æ˜¯æ‰§è¡Œçš„ç¬¬ä¸€æ­¥ã€‚</li><li>èƒ½å¤Ÿæé«˜æ‰§è¡ŒåŠ›çš„ç®¡ç†åŠ¨ä½œå¿…é¡»å…·å¤‡ä¸‰ä¸ªè¦ç´ ï¼šæ ‡å‡†ã€åˆ¶çº¦ã€è´£ä»»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹æƒ…æ€ä¹ˆåšå¿…é¡»è¦åˆ¶è®¢æ ‡å‡†ï¼Œè¦å…³æ³¨ç»†èŠ‚ï¼Œè¦æœ‰äººæ£€æŸ¥ï¼Œå½¢æˆç›‘ç£å’Œåˆ¶çº¦ï¼›æœ€åï¼Œäº‹æƒ…åšçš„å¥½ä¸åä¸€å®šè¦è¿½ç©¶è´£ä»»ï¼Œå¥½çš„å¥–ï¼Œåçš„ç½šã€‚ </li><li>æŠŠå·¥ä½œé¡¹å’Œä»»åŠ¡è¿›è¡Œæ’åºã€‚é‡è¦ï¼Œç´§è¦ç­‰ã€‚ç§¯æçš„æ€åº¦å»å‚ä¸ã€‚  åšæŒã€‚æ³¨é‡ç»“æœã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½•ä¸ºè¿è¥ï¼Ÿ</title>
      <link href="/2017/09/04/operation/"/>
      <url>/2017/09/04/operation/</url>
      
        <content type="html"><![CDATA[<p>äº§å“è¿è¥å¾€å¾€æ˜¯ç´§ç´§å›´ç»•ä¸‰ä¸ªç›®æ ‡ï¼š <font color=orange > <strong>    äº§å“ï¼Œç”¨æˆ·ï¼Œæ¸ é“ã€‚</strong> </font></p><h3 id="æˆåŠŸçš„è¿è¥èƒ½å¤ŸæŒ–æ˜ç”¨æˆ·çš„ç‰¹ç‚¹å’Œéœ€æ±‚ã€‚"><a href="#æˆåŠŸçš„è¿è¥èƒ½å¤ŸæŒ–æ˜ç”¨æˆ·çš„ç‰¹ç‚¹å’Œéœ€æ±‚ã€‚" class="headerlink" title="æˆåŠŸçš„è¿è¥èƒ½å¤ŸæŒ–æ˜ç”¨æˆ·çš„ç‰¹ç‚¹å’Œéœ€æ±‚ã€‚"></a>æˆåŠŸçš„è¿è¥èƒ½å¤ŸæŒ–æ˜ç”¨æˆ·çš„ç‰¹ç‚¹å’Œéœ€æ±‚ã€‚</h3><ol><li>äº§å“è¿è¥å…·ä½“å·¥ä½œæœ‰å“ªäº›ï¼Ÿ</li><li>è¿è¥ç­–åˆ’ï¼š ä¸»è¦æ˜¯ä»¥æ•°æ®ä¸ºä¾æ®çš„äº§å“è¿è¥æ–¹æ¡ˆç­–åˆ’ï¼Œè¿™å—æ˜¯é‡ç‚¹ã€‚</li><li>BD : è¿è¥ä¼šæ¥è§¦åˆ°ä¸åŒçš„æ¸ é“çš„è½¬åŒ–æ•ˆç‡ï¼Œå› æ­¤ç›¸å¯¹çš„éœ€è¦å’Œæ¸ é“å•†æ‰“äº¤é“æˆ–è€…å…¬å¸å†…éƒ¨çš„é”€å”®äººå‘˜æ¥è§¦ï¼Œè¿™å—å®é™…ä¹Ÿä¼šæ¶‰åŠåˆ°ä¸€å®šçš„æ²Ÿé€šåè°ƒå…¬å…³çš„å·¥ä½œã€‚</li><li>åª’ä»‹ï¼š è¿™é‡ŒåˆåŒ…æ‹¬æ–‡æ¡ˆçš„æ’°å†™ï¼Œè¯é¢˜ç­–åˆ’ï¼Œè½¯æ–‡å‘å¸ƒç­‰ã€‚</li><li>æ´»åŠ¨è¥é”€ï¼š ç»“åˆäº§å“æ¨å¹¿å’Œå“ç‰Œå®£ä¼ ï¼Œç­–åˆ’æ´»åŠ¨è¥é”€æ–¹æ¡ˆå¹¶æœ‰åŠ›æ‰§è¡Œï¼Œä¿ƒä½¿è¾¾åˆ°æé«˜äº§å“å’Œå“ç‰ŒçŸ¥ååº¦çš„ç›®çš„ï¼Œä»¥åŠç”¨æˆ·çš„è°ƒç ”å¥–åŠ±ç­‰ã€‚</li><li>æ•°æ®åˆ†æï¼š æ•°æ®å†³å®šè¿è¥çš„æ‰§è¡Œã€‚</li><li>å¸‚åœºç›‘æ§ï¼š ä¸»è¦æ˜¯æˆ˜ç•¥å±‚é¢ï¼ŒåŒ…æ‹¬è¡Œä¸šå¸‚åœºçš„ç›‘æ§ä»¥åŠç«äº‰å¯¹æ‰‹çš„ç›‘æ§ã€‚</li></ol><h3 id="äº§å“è¿è¥æœ‰æä¸ºæ˜ç¡®çš„ç›®æ ‡ã€‚"><a href="#äº§å“è¿è¥æœ‰æä¸ºæ˜ç¡®çš„ç›®æ ‡ã€‚" class="headerlink" title="äº§å“è¿è¥æœ‰æä¸ºæ˜ç¡®çš„ç›®æ ‡ã€‚"></a>äº§å“è¿è¥æœ‰æä¸ºæ˜ç¡®çš„ç›®æ ‡ã€‚</h3><ol><li>è¥æ”¶ï¼šè¿è¥è¦æ‰¾åˆ°å•†ä¸šæ¨¡å¼ï¼Œæˆ–è€…ä¸ºç°æœ‰çš„äº§å“æ‰©å¤§è¥æ”¶ã€‚</li><li>æ‰©å¤§ç”¨æˆ·ç¾¤ï¼šè®©æ›´å¤šäººçŸ¥é“ï¼Œäº§å“å°†æ›´æˆåŠŸã€‚</li><li>ç”¨æˆ·æ´»è·ƒåº¦ï¼šæ²‰é»˜çš„ç”¨æˆ·æ˜¯æ²¡æœ‰å¤šå°‘å•†ä¸šä»·å€¼çš„ï¼Œåªæœ‰æ´»è·ƒæ–¹èƒ½å¸¦æ¥ä»·å€¼ã€‚</li><li>å¥½çš„äº§å“æ˜¯è¿è¥å‡ºæ¥çš„ã€‚ç¬¬ä¸€ï¼Œå®ƒèƒ½åœ¨ä¸€ä¸ªç‚¹ä¸Šæ‰“åŠ¨ç”¨æˆ·ã€‚ç¬¬äºŒï¼Œ å®ƒä¸€å®šæ˜¯é æŒç»­æ”¹è¿›ï¼ŒæŒç»­è¿è¥çš„ä¸œè¥¿ã€‚äº’è”ç½‘æœ¬è´¨å°±æ˜¯æœåŠ¡ï¼Œç”¨æˆ·çš„éœ€æ±‚ä¸æ–­åœ¨å˜ï¼Œä½ å°±å¾—éšæ—¶è°ƒæ•´ã€‚</li></ol><h3 id="ç›®æ ‡å†³å®šæ•°æ®å–æ ·ï¼Œæ‰¾åˆ°å…³é”®å€¼å¹¶åŠªåŠ›æ‰§è¡Œã€‚"><a href="#ç›®æ ‡å†³å®šæ•°æ®å–æ ·ï¼Œæ‰¾åˆ°å…³é”®å€¼å¹¶åŠªåŠ›æ‰§è¡Œã€‚" class="headerlink" title="ç›®æ ‡å†³å®šæ•°æ®å–æ ·ï¼Œæ‰¾åˆ°å…³é”®å€¼å¹¶åŠªåŠ›æ‰§è¡Œã€‚"></a>ç›®æ ‡å†³å®šæ•°æ®å–æ ·ï¼Œæ‰¾åˆ°å…³é”®å€¼å¹¶åŠªåŠ›æ‰§è¡Œã€‚</h3><ol><li>çœ‹æ•°æ®ï¼Œåˆ†ææ•°æ®ï¼Œæ‰¾åˆ°éœ€è¦åŠæ—¶è°ƒæ•´çš„æ•°æ®ã€‚è¿›è¡Œåç»­æ‰§è¡Œå·¥ä½œã€‚</li><li>é¦–å…ˆæ˜¯è¦æœ‰æ•°æ®ï¼Œå…¶æ¬¡æ˜¯å‡†ç¡®æ€§ï¼Œç„¶åæ•°æ®è¦æœ‰è¿è´¯æ€§ã€‚å†è€…ï¼Œä¸€åˆ‡æ•°æ®è¦æœ‰å¯¹æ¯”æ‰èƒ½äº§ç”Ÿä»·å€¼ã€‚æœ€åå¾—åˆ°ç»“è®ºã€‚</li><li>åŒæ—¶ï¼Œå…³é”®æ•°å€¼æ˜¯é‡è¦ä¸€ç¯ï¼Œå¯ä»¥çœåŠ›é«˜æ•ˆï¼›ä½†çœŸæ­£æ¯å¤©å›´ç»•è¿™ä¸ªæ•°å€¼ä¸æ–­åœ°åŠªåŠ›æ‰§è¡Œä¸‹å»æ‰ä¼šæœ‰çœŸæ­£çš„æé«˜ã€‚</li><li>äº§å“è¿è¥ä¸è¦å¯„äºˆå¸Œæœ›æœ€åä¸€å‡»å‘½ä¸­ç”¨æˆ·éœ€æ±‚ï¼Œè€Œé‡ç‚¹åº”è¯¥ç¨³å®šæœ‰æ•ˆåœ°ä¸€æ­¥æ­¥æ¥è§¦ï¼Œå¼•å¯¼ï¼Œå°è¯•ï¼Œè®¤çŸ¥ï¼Œæ¸—é€ï¼Œç†Ÿæ‚‰ çš„è¿‡ç¨‹ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½ æ˜¯ä¸ªåˆæ ¼çš„äº§å“ç»ç†ï¼Ÿ</title>
      <link href="/2017/09/04/productManager/"/>
      <url>/2017/09/04/productManager/</url>
      
        <content type="html"><![CDATA[<h4 id="é¦–å…ˆï¼Œäº§å“ç»ç†åº”è¯¥åšä»€ä¹ˆï¼Ÿ"><a href="#é¦–å…ˆï¼Œäº§å“ç»ç†åº”è¯¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¦–å…ˆï¼Œäº§å“ç»ç†åº”è¯¥åšä»€ä¹ˆï¼Ÿ"></a>é¦–å…ˆï¼Œäº§å“ç»ç†åº”è¯¥åšä»€ä¹ˆï¼Ÿ</h4><p><strong> <font color=orange>å¸®åŠ©ä¼ä¸š/ç”¨æˆ·ä¸ºç”¨æˆ·æ‰“é€ æœ‰ä»·å€¼çš„äº§å“ã€‚</font> </strong></p><h4 id="äº§å“ç»ç†æ€ç»´åŒ…æ‹¬å“ªäº›ï¼Ÿ"><a href="#äº§å“ç»ç†æ€ç»´åŒ…æ‹¬å“ªäº›ï¼Ÿ" class="headerlink" title="äº§å“ç»ç†æ€ç»´åŒ…æ‹¬å“ªäº›ï¼Ÿ"></a>äº§å“ç»ç†æ€ç»´åŒ…æ‹¬å“ªäº›ï¼Ÿ</h4><ol><li>æŠ“ä½éœ€æ±‚çš„æœ¬è´¨ - äººæ€§ ï¼ˆä¸€ä¸ªä¼˜ç§€çš„äº§å“ç»ç†éœ€è¦å…·å¤‡æŠ“ä½ç”¨æˆ·æ¬²æœ›çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯ä»…ä»…åœ¨äº§å“ä¸Šå¢åŠ ä¸€ä¸ªåŠŸèƒ½è¿™ä¹ˆç®€å•ï¼‰<br/><br/></li><li>æ ¸å¿ƒéœ€æ±‚çš„æŠŠæ§èƒ½åŠ›ã€‚(æ— è®ºåŠŸèƒ½å¦‚ä½•å¢åŠ å’Œå¤–ç•Œç»™äºˆä»»ä½•å¹²æ‰°ï¼Œéƒ½éœ€è¦æ—¶åˆ»ä¿è¯äº§å“çš„æ ¸å¿ƒä¸è¢«å½±å“)<br/><br/></li><li>æ—¶åˆ»æç”»äº§å“çš„è“å›¾ - æœªæ¥ ï¼ˆèµ°ä¸€æ­¥ï¼Œçœ‹ç™¾æ­¥ã€‚éœ€è¦æ—¶åˆ»å¿ƒä¸­æ˜ç™½äº§å“çš„å°†æ¥ä¼šæ˜¯å¦‚ä½•ï¼Œæœ€é‡è¦çš„æ˜¯åœ¨èµ°å‘æœªæ¥çš„è¿‡ç¨‹ä¸­åˆéœ€è¦å“ªäº›åŠ©åŠ›ï¼‰<br/><br/></li><li>ä¸æ–­å¤ç›˜äº§å“çš„ç°åœ¨ - æ€»ç»“ ï¼ˆè¿™ä¸ªå†³å®šåšçš„å¯¹å—ï¼Ÿæœ‰ä»€ä¹ˆæ•°æ®æ”¯æ’‘ï¼Ÿ äº§å“äººéœ€ä¸€æ—¥ä¸‰çœï¼Œä¸æ–­æ€»ç»“ï¼Œä¸æ–­ä¿®æ­£ï¼Œç»™è‡ªå·±æ—¥åå†³ç­–æ›´åŠ å……è¶³çš„ä¾æ®ï¼‰<br/><br/></li><li>æ— æ‡ˆå¯å‡»çš„æ€ç»´ - é€»è¾‘æ€ç»´ ï¼ˆæ…å¯†çš„æ€ç»´èƒ½åŠ›ï¼Œå¯¹æ•´ä¸ªä¸šåŠ¡æµç¨‹è¦éå¸¸ç†Ÿæ‚‰ã€‚ï¼‰<br/><br/></li><li>äº§å“çš„ç»ˆæä»·å€¼ - å•†ä¸šç›ˆåˆ© ï¼ˆä¸æ–­è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‡‚å¾—å¦‚ä½•å¸®åŠ©äº§å“èµ°åˆ°å•†ä¸šå®ç°ï¼‰<br/><br/></li><li>åšå‡æ³•å¦‚åŒåšåŠ æ³• - æç®€ ï¼ˆåšäº§å“ä¸æ˜¯åšåŠŸèƒ½ï¼Œäº§å“ä¸æ˜¯åŠŸèƒ½çš„ä¸æ–­ç´¯åŠ ï¼Œæˆ‘ä»¬éœ€è¦ç»™äº§å“ç˜¦èº«çš„æœºä¼šï¼Œç»™ç”¨æˆ·æç®€çš„ä½“éªŒï¼Œè®¾é—®ï¼šæ¯ä¸ªç‰ˆæœ¬è¦ä¸Šçš„åŠŸèƒ½ï¼Œä½ èƒ½åˆ æ‰ä¸€ä¸ªå—ï¼Ÿï¼‰<br/><br/></li><li>æ‡‚å¾—å’Œä¸åŒçš„äººæ‰“äº¤é“ - æ²Ÿé€šï¼ˆåº”è¯¥å¥½å¥½æ€è€ƒå¦‚ä½•ä¸ä¸åŒå²—ä½çš„åŒå­¦æ‰“äº¤é“ï¼ŒçŸ¥é“å¤§å®¶çš„æ€§æ ¼ç‰¹ç‚¹ï¼Œæ‡‚å¾—å¦‚ä½•æŠŠä¿¡æ¯æœ‰æ•ˆåœ°ä¼ é€’ã€‚ï¼‰<br/><br/></li><li>ç®¡ç†å¥½è‡ªå·±çš„æ—¶é—´å’Œä»»åŠ¡ - todolist (å¯¹æ—¶é—´ç®¡ç†è¦æ›´åŠ ç»†åˆ†åŒ–ï¼Œå¤šç”¨TodoList ï¼Œä¼šæœ‰ä¸å°‘çš„å¸®åŠ©ã€‚)<br/><br/></li><li>å®°ç›¸è‚šé‡Œèƒ½æ’‘èˆ¹  - æŠ—å‹ ï¼ˆäº§å“ç»ç†çš„ç‰¹æ®Šä½ç½®ï¼Œå¯¼è‡´äº†äººäººå¯å–·çš„å¢ƒé‡ã€‚åœ¨å¦‚æ­¤é€†å¢ƒä¸­ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¹¿é˜”çš„èƒ¸æ€€å’Œæå¼ºçš„æŠ—å‹èƒ½åŠ›ï¼Œå…¶å®è¿™äº›éƒ½ä¸æ˜¯ä»€ä¹ˆï¼Œå› ä¸ºæˆ‘ä»¬çœ¼é‡Œåªæœ‰äº§å“ã€‚ï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è¥é”€å…­å¿ƒç†</title>
      <link href="/2017/09/04/marketingPsychology/"/>
      <url>/2017/09/04/marketingPsychology/</url>
      
        <content type="html"><![CDATA[<p>æ³•åˆ™ä¸€ï¼š<font color=orange> ä»ä¼—å¿ƒç† </font></p><p>1ï¼Œæ¯”å¦‚æ·˜å®ã€‚ç”¨æˆ·è´­ç‰©æ—¶å€™å¾€å¾€ä¼šå‚è€ƒåˆ«äººçš„è´­ç‰©ä½“éªŒï¼Œå½“æŸä»¶ä¸œè¥¿å¾ˆç•…é”€ï¼Œäººä»¬ä¼šæœ¬èƒ½åœ°æŠŠå®ƒå½“ä½œä¸€ä¸ªæ­£ç¡®æœ‰æ•ˆçš„é€‰æ‹©ã€‚ </p><ol><li>å€ŸåŠ©é”€å”®æ’è¡Œæ¦œå°†ä¸€ä¸ªå“ç‰Œä¸æœ€ç•…é”€çš„å“ç‰Œè”ç³»åœ¨ä¸€èµ·ã€‚</li><li>å¯åœ¨ç¤¾äº¤å¹³å°åˆ†äº«æ¶ˆè´¹è€…ç”ŸåŠ¨æ„Ÿäººçš„è´­ä¹°ç»å†è·å¾—å…¶ä»–ç”¨æˆ·çš„è®¤åŒæ„Ÿã€‚</li><li>é€šè¿‡å·§å¦™çš„æ–¹å¼è®©æ¶ˆè´¹è€…å¿ƒç”˜æƒ…æ„¿åœ°å®£ä¼ äº§å“çš„å„ç§ä¼˜åŠ¿ã€‚</li><li>åˆ©ç”¨æŠ€æœ¯æ‰‹æ®µï¼Œé€šè¿‡ç¤¾ä¼šåŒ–æ¨èç³»ç»Ÿï¼Œå¯¹ç›¸ä¼¼æ¶ˆè´¹ç¾¤ä½“çš„æŒ–æ˜å¹¶æ¨èä»–ä»¬å¯èƒ½å–œå¥½çš„å•†å“ã€‚</li></ol><p>æ³•åˆ™äºŒï¼š<font color=orange>å½±å“åŠ›</font></p><ol><li>åˆ©ç”¨æ˜æ˜Ÿæˆ–è€…æƒå¨äººå£«è¿›è¡Œäº§å“æ¨èã€‚</li><li>å‘åäººæ¨å‡ºè¯•ç”¨æ´»åŠ¨ï¼Œå¹¶é¼“åŠ±ä»–ä»¬åœ¨ ç¤¾äº¤åª’ä½“å‘å¸ƒã€‚</li></ol><p>æ³•åˆ™ä¸‰ï¼š<font color=orange>ç¨€ç¼ºåŸåˆ™</font></p><ol><li>è¿›è¡Œé™é‡ä½“éªŒï¼Œé™é‡æœºä¼šï¼Œé™é‡æä¾›ï¼Œé™é‡ç‰ˆæœ¬ç­‰åŸºäºç¨€ç¼ºæ€§çš„ä¿ƒé”€æ´»åŠ¨ã€‚</li><li>æ¨å‡ºåªé’ˆå¯¹ç¤¾äº¤åª’ä½“çš„ä¿ƒé”€è®¡åˆ’ã€‚</li></ol><p>æ³•åˆ™å››ï¼š<font color=orange>å–œå¥½åŸåˆ™</font></p><ol><li>å……åˆ†åˆ©ç”¨è´­ç‰©è€…çš„ç¤¾äº¤åœˆè¿›è¡Œäº§å“æ¨èï¼Œä¾‹å¦‚å¾®åšç¾¤ç»„æˆ–QQç¾¤ã€‚</li><li>åˆ©ç”¨ç¤¾ä¼šåŒ–åª’ä½“å¹³å°å…³æ³¨ï¼Œåˆ†äº«å¹¶ä¼ æ’­ä¸€äº›ç›®æ ‡æ¶ˆè´¹è€…å–œæ¬¢çš„ä¿¡æ¯ã€‚æ–°é—»æˆ–ç§‘æ™®çŸ¥è¯†ã€‚</li><li>ç»å¸¸ä¸æ´»è·ƒç²‰ä¸äº’åŠ¨ä»¥è·å¾—ä»–ä»¬çš„å¥½æ„Ÿï¼Œè¿™æ ·æ›´å®¹æ˜“æ ‘ç«‹äº§å“å“ç‰Œå½¢è±¡ã€‚</li></ol><p>æ³•åˆ™äº”ï¼š<font color=orange>ä¸€è‡´æ€§åŸåˆ™</font></p><ol><li>å®šæœŸå¼€å±•å…è´¹è¯•ç”¨ï¼Œçº¿ä¸Šçš„å…è´¹ä½“éªŒç­‰ã€‚</li><li>è®¾è®¡ä¸å“ç‰Œç›¸å…³çš„å°æ¸¸æˆåœ¨ç¤¾äº¤å¹³å°æ¨å¹¿ã€‚</li><li>ä¿ç•™æ¶ˆè´¹è€…å„ç§è´­ç‰©ä¿¡æ¯ï¼Œå¹¶æä¾›è‰¯å¥½çš„æœåŠ¡ï¼Œä½¿æ¶ˆè´¹è€…å½¢æˆä¾èµ–ã€‚</li></ol><p>æ³•åˆ™å…­ï¼š<font color=orange>äº’æƒ åŸåˆ™</font></p><ol><li>ç»å¸¸åœ¨èŠ‚æ—¥ä¸æ¶ˆè´¹è€…äº’åŠ¨ï¼Œèµ é€æ¶ˆè´¹è€…å…è´¹çš„è¯•ç”¨è£…ï¼Œäº§å“å®£ä¼ ï¼Œæ‚å¿—ç­‰ã€‚</li><li>ç”µå•†å¯ä»¥é€è¿‡ç¤¾ä¼šå¿ƒç†å±‚é¢åˆ©ç”¨ç¤¾ä¼šåŒ–åª’ä½“å¹³å°å¡‘é€ å“ç‰Œã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨æˆ·ä½“éªŒ</title>
      <link href="/2017/09/03/userExperience/"/>
      <url>/2017/09/03/userExperience/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¼˜è´¨çš„ç”¨æˆ·ä½“éªŒé€šå¸¸æ˜¯æ€æ ·è¡¨è¾¾ï¼Ÿ"><a href="#ä¼˜è´¨çš„ç”¨æˆ·ä½“éªŒé€šå¸¸æ˜¯æ€æ ·è¡¨è¾¾ï¼Ÿ" class="headerlink" title="ä¼˜è´¨çš„ç”¨æˆ·ä½“éªŒé€šå¸¸æ˜¯æ€æ ·è¡¨è¾¾ï¼Ÿ"></a><font color="orange">ä¼˜è´¨çš„ç”¨æˆ·ä½“éªŒé€šå¸¸æ˜¯æ€æ ·è¡¨è¾¾ï¼Ÿ</font></h3><ol><li>ä¼ ç»Ÿæ–¹å¼å¯é€šè¿‡è§‚å¯Ÿç”¨æˆ·ï¼Œç”¨æˆ·è®¿è°ˆï¼Œé—®å·ï¼Œé¢å¯¹é¢æ²Ÿé€šï¼Œå¯ä»¥å¾—åˆ°å¾ˆå¤šçš„ç»†èŠ‚ä¹‹å¤„ã€‚</li><li>äº’è”ç½‘æ—¶ä»£ï¼Œåˆ©ç”¨æ•°æ®é©±åŠ¨è®¾è®¡ï¼Œå¤§æ•°æ®é‡æ¥åˆ†æç”¨æˆ·ä½“éªŒã€‚</li></ol><p>ç°å®å®ä¾‹ï¼šç½‘è´­ï¼Œé€‰äº§å“ï¼Œè´­ç‰©è¿‡ç¨‹æ˜¯å¦ç•…é€šï¼Œæ”¯ä»˜æµç¨‹æ–¹ä¾¿å¿«æ·ï¼Ÿä¹°å®¶å¥½ä¸å¥½ï¼Œç‰©æµå¿«ä¸å¿«ç­‰ã€‚è¿™å°±æ˜¯ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="ç”¨æˆ·ä½“éªŒåŒ…æ‹¬å…·ä½“å“ªäº›è§’è‰²ï¼Ÿ"><a href="#ç”¨æˆ·ä½“éªŒåŒ…æ‹¬å…·ä½“å“ªäº›è§’è‰²ï¼Ÿ" class="headerlink" title="ç”¨æˆ·ä½“éªŒåŒ…æ‹¬å…·ä½“å“ªäº›è§’è‰²ï¼Ÿ"></a><font color=orange>ç”¨æˆ·ä½“éªŒåŒ…æ‹¬å…·ä½“å“ªäº›è§’è‰²ï¼Ÿ</font></h3><ol><li>ç”¨æˆ·ä½“éªŒç”±äº§å“ç»ç†ï¼Œç”¨æˆ·ä½“éªŒäººå‘˜ï¼Œè®¾è®¡å¸ˆï¼Œè¿è¥äººå‘˜å’Œå¸‚åœºäººå‘˜ï¼Œå•†åŠ¡æ‹“å±•äººå‘˜ã€‚ç”¨æˆ·åœ¨æ„çš„æ˜¯æœ€ç»ˆçš„ä½“éªŒå¦‚ä½•ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ä¸­é—´æµç¨‹ã€‚ </li></ol><h3 id="ç”¨æˆ·ä½“éªŒç”±è°æ¥åšï¼Ÿ"><a href="#ç”¨æˆ·ä½“éªŒç”±è°æ¥åšï¼Ÿ" class="headerlink" title="ç”¨æˆ·ä½“éªŒç”±è°æ¥åšï¼Ÿ"></a><font color=orange>ç”¨æˆ·ä½“éªŒç”±è°æ¥åšï¼Ÿ</font></h3><ol><li>ç”¨æˆ·ä½“éªŒä¸€å®šæ˜¯ç”±æ•´ä¸ªå›¢é˜Ÿæ¥å®ç°ï¼Œè€Œä¸æ˜¯é å•å‡ ä¸ªä¸“ä¸šäººå‘˜ã€‚ä»»ä½•ä¸€ä¸ªç¯èŠ‚å‡ºäº†é—®é¢˜ï¼Œéƒ½ä¼šç»™ç”¨æˆ·ä½“éªŒå¸¦æ¥ç¾éš¾æ€§çš„åæœã€‚</li><li>ç”¨æˆ·ä½“éªŒè¦é å¤§å®¶çš„é›†æ€å¹¿ç›Šï¼Œæ›´å¤šçš„è®¨è®ºï¼Œæ›´å¤šçš„æ–¹æ¡ˆï¼Œå’Œæ¢ç´¢å®éªŒã€‚</li><li>ç”¨æˆ·ä½“éªŒï¼Œè¦é å¿«é€ŸæŠŠæƒ³æ³•è¡¨è¾¾å‡ºæ¥ï¼Œå¿«é€Ÿå°è¯•å°½å¯èƒ½å¤šçš„å¯èƒ½æ€§ã€‚</li><li>ç”¨æˆ·ä½“éªŒæ˜¯å…¸å‹è‡ªä¸Šè€Œä¸‹çš„äº‹æƒ…ã€‚è¿™ä»¶äº‹æƒ…å¿…é¡»æ˜¯å…¬å¸æœ€é«˜å±‚ï¼Œå…¬å¸çš„åˆ›å§‹äººå¾ˆåœ¨æ„çš„ï¼Œæ‰æœ‰å¯èƒ½ç”¨å¥½ã€‚</li><li>ç”¨æˆ·ä½“éªŒé ç ”å‘çš„æ¯ä¸€ä¸ªç¯èŠ‚é‡ç‚¹åˆ‡å…¥ï¼Œå°½æ—©å¼€å§‹ï¼Œå¿«é€Ÿè®¾è®¡ï¼Œå¿«é€Ÿæ£€éªŒï¼Œå……åˆ†åˆ©ç”¨æ•°æ®åé¦ˆï¼Œè¯·ä¸“ä¸šäººå£«è¿›è¡Œè¯„å®¡ã€‚</li></ol><h3 id="ç”¨æˆ·ä½“éªŒè¦åœ¨å“ªäº›æ–¹é¢æé«˜ï¼Ÿ"><a href="#ç”¨æˆ·ä½“éªŒè¦åœ¨å“ªäº›æ–¹é¢æé«˜ï¼Ÿ" class="headerlink" title="ç”¨æˆ·ä½“éªŒè¦åœ¨å“ªäº›æ–¹é¢æé«˜ï¼Ÿ"></a><font color=orange>ç”¨æˆ·ä½“éªŒè¦åœ¨å“ªäº›æ–¹é¢æé«˜ï¼Ÿ</font></h3><ol><li>ç”¨æˆ·ä½“éªŒåŒ…æ‹¬äº§å“æ€§èƒ½ï¼ˆä½¿ç”¨èµ·æ¥å¿«ä¸å¿«ï¼Œæ˜¯å¦æµç•…ï¼‰ï¼Œäº§å“çš„åŠŸèƒ½ï¼ˆèƒ½å¤Ÿå®ç°å“ªäº›æ–¹é¢çš„åŠŸèƒ½ï¼‰ï¼Œåˆé€‚çš„ä»·æ ¼ï¼ˆèƒ½ä¸äºæœ¬çš„æƒ…å†µä¸‹ï¼Œåˆèƒ½è®©äººä¹°å¾—èµ·ï¼‰ã€‚</li><li>ç”¨æˆ·ä½“éªŒæœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ä½ çš„äº§å“é’ˆå¯¹æ ¸å¿ƒç”¨æˆ·æ˜¯è°ã€‚æŠŠæ¡ç”¨æˆ·çš„ç‰¹ç‚¹å’Œä½¿ç”¨ä¹ æƒ¯ã€‚å°±æ˜¯è¦ç«™åœ¨ç”¨æˆ·çš„è§’åº¦å»å¼€å‘äº§å“ï¼ˆç”¨æˆ·æ€ç»´ï¼‰ã€‚</li></ol><h3 id="å…¬å¸ä»€ä¹ˆæ ·çš„äººé€‚åˆåšç”¨æˆ·ä½“éªŒï¼Ÿ"><a href="#å…¬å¸ä»€ä¹ˆæ ·çš„äººé€‚åˆåšç”¨æˆ·ä½“éªŒï¼Ÿ" class="headerlink" title="å…¬å¸ä»€ä¹ˆæ ·çš„äººé€‚åˆåšç”¨æˆ·ä½“éªŒï¼Ÿ"></a><font color=orange>å…¬å¸ä»€ä¹ˆæ ·çš„äººé€‚åˆåšç”¨æˆ·ä½“éªŒï¼Ÿ</font></h3><ol><li>æœ‰ä¸€å®šçš„ç ”å‘èƒŒæ™¯ï¼Œç„¶ååˆæ˜¯ä¸ªå¼€æ”¾ï¼Œæ„¿æ„å­¦ä¹ æ–°ä¸œè¥¿ï¼Œæ„¿æ„æ¥å—ç”¨æˆ·ä½“éªŒï¼Œèƒ½å¤Ÿå¸¦é¢†å›¢é˜Ÿï¼Œèƒ½å¤Ÿä»ç‚¹ç‚¹æ»´æ»´çš„ç»†èŠ‚åšèµ·ã€‚</li></ol><h3 id="ä»€ä¹ˆæ‰æ˜¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ"><a href="#ä»€ä¹ˆæ‰æ˜¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ‰æ˜¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ"></a><font color=orange>ä»€ä¹ˆæ‰æ˜¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ</font></h3><ol><li>æœ€åŸºç¡€ï¼Œæœ‰ç”¨ï¼Œå®ç”¨ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚</li><li>æ˜“ç”¨ï¼ˆå‰æï¼šé’ˆå¯¹æŸäº›åˆé€‚çš„äº§å“ï¼Œå¦‚æœæ˜¯æ¸¸æˆæˆ–è€…ä¼ä¸šçº§çš„åº”ç”¨çš„è¯ï¼Œå¯èƒ½å°±ä¸åŒäº†ï¼Œåè€Œæ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½è¿˜è¦ç»è¿‡åŸ¹è®­æˆ–è€…è¾ƒé•¿çš„ä¸€æ®µæ—¶é—´åæ‰èƒ½äº†è§£ï¼‰ã€‚</li></ol><ol><li>ä½¿ç”¨åä¸å®¹æ˜“é—å¿˜ï¼Œå®¹æ˜“æ“ä½œä¸å®¹æ˜“çŠ¯é”™ï¼Œæœ‰åŠæ—¶çš„åé¦ˆï¼Œæœ‰å¾ˆå¥½çš„ä¸€è‡´æ€§ã€‚æœ‰å¾ˆå¤šå…·ä½“çš„å…ƒç´ ã€‚</li><li>åœ¨ç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œçœ‹æ˜¯ä¸æ˜¯ç¾è§‚ï¼Œæ˜¯ä¸æ˜¯é€‚åˆè‡ªå·±å…¬å¸çš„å“ç‰Œï¼Œæ°›å›´ï¼Œæ°”è´¨ã€‚</li><li>å…·æœ‰æ¿€å‘æ€§ã€‚èƒ½å¤Ÿæ¿€å‘ç”¨æˆ·ã€‚</li></ol><p>ç°å®å®ä¾‹ï¼šå¾®åšã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨å¾®åšï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬èƒ½çœ‹åˆ°å¥½æœ‹å‹çš„ä¸€äº›åˆ†äº«ï¼ŒåŠ¨æ€ç­‰ã€‚çœ‹åˆ°å…³æ³¨æˆ‘çš„äººæ˜¯ä¸æ˜¯åˆå¢åŠ äº†å‡ ä¸ªï¼Œçœ‹çœ‹è°åˆè½¬å‘äº†æˆ‘çš„å¾®åšç­‰ã€‚æ ¹æ®è¿™ç‚¹ï¼Œæˆ‘ä»¬åšçš„äº§å“å¯ä»¥æ ¹æ®ç”¨æˆ·äº§ç”Ÿçš„å†…å®¹åŠ ä¸Šç¤¾äº¤å…ƒç´ ï¼Œä½¿äº§å“å’Œç”¨æˆ·çš„å…³ç³»è½¬å‘ç”¨æˆ·å’Œç”¨æˆ·çš„å…³ç³»ï¼Œç‚¹èµç­‰ï¼Œä½¿å¾—ç”¨æˆ·ä¹‹é—´ç›¸äº’æ¿€åŠ±ã€‚</p><ol><li>å…·æœ‰æ¼‚äº®çš„å›¾æ ‡ã€‚å°¤å…¶æ˜¯æ¶ˆè´¹è€…ç±»å‹çš„äº§å“ã€‚ç”¨æˆ·å¯èƒ½çœ‹åˆ°æ¼‚äº®çš„å›¾æ ‡å°±ä¸‹è½½äº†ã€‚</li><li>åœ¨æ¶ˆè´¹é¢†åŸŸçš„äº§å“ï¼Œä¸€å®šè¦æ‹¿èµ·å°±å¯ä»¥ç”¨ã€‚</li><li>ç”¨æˆ·ä½“éªŒï¼Œäº§å“ä¸€å¼€å§‹æ˜¯é’ˆå¯¹ç§å­ç”¨æˆ·ï¼Œè€Œåæ˜¯è°ƒæ•´é¢å‘å¤§ä¼—ã€‚åŒæ—¶ä¹Ÿä¸ä¼šå½±å“ç§å­ç”¨æˆ·çš„ä½“éªŒã€‚</li></ol><p>æ€»ç»“ä¸€ç‚¹ï¼šäº§å“åšå¾—å¥½äº†ï¼ŒæŒ£é’±ï¼Œåèª‰æ‰€æœ‰çš„å…¶ä»–ä¸œè¥¿éƒ½ä¼šéšä¹‹è€Œæ¥ã€‚ä¸ç„¶çš„è¯ï¼Œå³ä¾¿æ˜¯è·å¾—äº†ï¼Œä¹Ÿåªæ˜¯çŸ­æš‚çš„è·å¾—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å·§ç”¨å›¾è§£æ„æ€-ç™¾åº¦è„‘å›¾</title>
      <link href="/2017/08/11/brainMap/"/>
      <url>/2017/08/11/brainMap/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆå¤šæƒ…å†µï¼Œè½¯ä»¶åŠŸèƒ½å®ç°é‡åˆ°æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œéƒ½ä¼šå€ŸåŠ©äºè‰ç¨¿æˆ–è€…æµç¨‹å›¾ å»ç®€å•ç”»å‡ºä¸šåŠ¡çš„æµç¨‹ï¼Œç„¶åå†ç¼–ç å®ç°ã€‚è¿™æ ·æœ‰åŠ©äºæé«˜ç¨‹åºçš„ç¼–å†™æ•ˆç‡ï¼Œå‡å°‘bug çš„å‡ºç°ã€‚ ä»¥ä¸‹ï¼Œæ˜¯åŸºäºå®æ—¶èŠå¤©çš„ä¼šè®®åŠŸèƒ½è®¾è®¡æµç¨‹å›¾ã€‚é€»è¾‘ç´§ä»£è¡¨æœ¬äººè‰ç¨¿è®¾è®¡æ€è·¯ã€‚</p><h3 id="ä½¿ç”¨ç™¾åº¦è„‘å›¾ç”»å›¾"><a href="#ä½¿ç”¨ç™¾åº¦è„‘å›¾ç”»å›¾" class="headerlink" title="ä½¿ç”¨ç™¾åº¦è„‘å›¾ç”»å›¾"></a>ä½¿ç”¨<a href="http://naotu.baidu.com" target="_blank" rel="noopener">ç™¾åº¦è„‘å›¾</a>ç”»å›¾</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/%E4%BC%9A%E8%AE%AE%E8%A7%92%E8%89%B2%E6%B5%81%E7%A8%8B.png" alt="å›¾ç‰‡1"></p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/%E4%BC%9A%E8%AE%AE%E4%B8%BB%E6%B5%81%E7%A8%8B.png" alt="å›¾ç‰‡2"></p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/%E6%9B%B4%E6%8D%A2%E4%B8%BB%E6%8C%81%E4%BA%BA%E6%B5%81%E7%A8%8B.png" alt="å›¾ç‰‡3"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…³ç³»å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-TableView</title>
      <link href="/2016/11/11/Android-TableView/"/>
      <url>/2016/11/11/Android-TableView/</url>
      
        <content type="html"><![CDATA[<h2 id="How-to-development-a-Android-App"><a href="#How-to-development-a-Android-App" class="headerlink" title="How to development a Android App"></a>How to development a Android App</h2><h4 id="Before-you-begin-Letâ€™s-talk-about-Android-lifecycle-first-Learn-about-Androidâ€™s-four-major-components-And-to-be-familiar-with-Android-development-tool-Android-Studio"><a href="#Before-you-begin-Letâ€™s-talk-about-Android-lifecycle-first-Learn-about-Androidâ€™s-four-major-components-And-to-be-familiar-with-Android-development-tool-Android-Studio" class="headerlink" title="Before you begin, Letâ€™s talk about Android lifecycle first .  Learn about Androidâ€™s four major components,And to be familiar with Android development tool -Android Studio."></a>Before you begin, Letâ€™s talk about Android lifecycle first .  Learn about Androidâ€™s four major components,And to be familiar with Android development tool -Android Studio.</h4><h3 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h3><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Activity1-&gt;Activity2: onCreate()â€”â€”&gt;onStart()â€”â€”&gt;onResume()</span><br><span class="line">Note left of Activity2: ç¬¬ä¸€ä¸ª Pauseï¼Œç¬¬äºŒä¸ªCreateï¼ŒStartï¼ŒResumeã€‚ç¬¬ä¸€ä¸ª Stop</span><br><span class="line">Activity2--&gt;Activity1: back to the activity1</span><br><span class="line">Note left of Activity2: æš‚åœï¼Œrestartç¬¬ä¸€ä¸ªï¼Œstartï¼Œresume,ç¬¬äºŒä¸ªstop,destory.</span><br></pre></td></tr></table></figure><p>when you push a new  Activity or back Activity, itâ€™s due to the stack to manage the Activity status, but how to push a new Activity?</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent &#x3D; new Intent(ReorderFour.this, ReorderTwo.class);    </span><br><span class="line"></span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);</span><br><span class="line"></span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="Activity-Extented"><a href="#Activity-Extented" class="headerlink" title="Activity Extented"></a>Activity Extented</h4><h5 id="after-we-know-the-android-activity-i-want-tall-about-fragment"><a href="#after-we-know-the-android-activity-i-want-tall-about-fragment" class="headerlink" title="after we know the android activity, i want tall about fragment."></a>after we know the android activity, i want tall about fragment.</h5><h4 id="Perhaps-you-have-seen-the-most-app-interfaces-is-like-this-YEs-itâ€™s-Tabbar-UI-Interface"><a href="#Perhaps-you-have-seen-the-most-app-interfaces-is-like-this-YEs-itâ€™s-Tabbar-UI-Interface" class="headerlink" title="Perhaps you have seen the most app interfaces is like this. YEs ,itâ€™s Tabbar UI Interface."></a>Perhaps you have seen the most app interfaces is like this. YEs ,itâ€™s Tabbar UI Interface.</h4><h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get1.png" alt="picture1"><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get2.png" alt="picture2"><br><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get3.png" alt="picture1"><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get4.png" alt="picture1"></p><h6 id="so-what-about-the-fragment"><a href="#so-what-about-the-fragment" class="headerlink" title="so, what about the fragment ?"></a>so, what about the fragment ?</h6><ol><li>tabbar interface is a activity contains one or more fragments.</li><li>fragments lifecycle is rely one activity.   </li></ol><h6 id="what-did-I-do-to-make-layout-the-UITabarActivity"><a href="#what-did-I-do-to-make-layout-the-UITabarActivity" class="headerlink" title="what did I do to make layout the UITabarActivity?"></a>what did I do to make layout the UITabarActivity?</h6><h3 id="app-gradle-é…ç½®"><a href="#app-gradle-é…ç½®" class="headerlink" title="app gradle é…ç½®"></a>app gradle é…ç½®</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_tab1.png" alt="picture1"></p><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_tab2.png!github" alt="picture2">  </p><h3 id="Tabbar-Activity"><a href="#Tabbar-Activity" class="headerlink" title="Tabbar Activity"></a>Tabbar Activity</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_tab3.png" alt="picture1"></p><h3 id="Layout-å¸ƒå±€"><a href="#Layout-å¸ƒå±€" class="headerlink" title="Layout å¸ƒå±€"></a>Layout å¸ƒå±€</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_tab4.png" alt="picture1"> </p><h3 id="ç•Œé¢Fragmenté…ç½®"><a href="#ç•Œé¢Fragmenté…ç½®" class="headerlink" title="ç•Œé¢Fragmenté…ç½®"></a>ç•Œé¢Fragmenté…ç½®</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_tab5.png" alt="picture1"></p><p>ok,after you see my screenshots, you can know  , i use the ViewpagerIndicator to make a tabbar Activity . it can manager fragments. you can easy to change every fragment you need. </p><h6 id="app-gradle-instroduce"><a href="#app-gradle-instroduce" class="headerlink" title="app gradle instroduce"></a>app gradle instroduce</h6><font color="#2D2D39" size="4.5px"><br>1. use the fastjson to make json parse.<br>2. use the butterknife replace the frequent findViewById.<br>3. use the ViewPagerIndicator to achieve a tabbarActivity interface.<br>4. use the android-smart-image-view to make the image cache.<br>5. use the android-async-http to make http request.<br>6. use the recycleView-v7 replace the android system listView.<br>7. use the bga-refreshlayout to make the pull refresh cool header.<br>8. finally, use cn.bingoogolapple:bga-adapter to make the recycleView cell Item can  right move delete, long press event ,ItemChildClickListener ,and so on .  all in all, bga-adapter is perfect !<br></font><p><strong>For your convenience, i encapsulated a tableview like iOS UITableView , you can use the group style or plain style decide by youself; you can find it in the package com.lvj.bookoneday-&gt;widget.view</strong>   </p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get_tableview.png" alt="tableview like iOS UItableView">  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å®šä¹‰è¡¨æ ¼çš„æ•°æ®æºæ¥å£</span><br><span class="line">public interface TableViewDataSource&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    RecyclerViewCell&lt;T&gt;[]  getRecyclerCells(); &#x2F;&#x2F;è·å–cell</span><br><span class="line">int getItemViewType(int position);  &#x2F;&#x2F;è·å–position: cellç±»å‹çš„tag</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å®šä¹‰è¡¨æ ¼çš„äº‹ä»¶å§”æ‰˜æº</span><br><span class="line"> public interface TableViewDelegate &#123;   </span><br><span class="line"> </span><br><span class="line">void onTableViewDidSelectRow(int row);&#x2F;&#x2F;ç‚¹å‡»å•è¡Œ   </span><br><span class="line">void onTableViewDidLongClickRow(int row); &#x2F;&#x2F;é•¿æŒ‰å•è¡Œ   </span><br><span class="line"> void onTableViewDidChangeCheckRow(int row, boolean isChecked); &#x2F;&#x2F;é€‰ä¸­è¡Œ   </span><br><span class="line">void onItemChildClick(View childView, int position); &#x2F;&#x2F;item ç‚¹å‡»</span><br><span class="line">void onTableViewRefresh();&#x2F;&#x2F;ä¸‹æ‹‰åˆ·æ–°</span><br><span class="line">void onTableViewLoadMore();  &#x2F;&#x2F;åŠ è½½æ›´å¤š</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>I create two java interface : TableViewDelete, TableViewDataSoucre. that you can easy<br>implements thereâ€™s methods .</li><li>when you use the activity or fragment need tableView layout , you can easy and fast<br>layout ,and implements TableViewDelegate, TableViewDatasource.</li></ul><h4 id="for-examples"><a href="#for-examples" class="headerlink" title="for examples"></a>for examples</h4><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get_tableViewFragment.png" alt="tableview like iOS UItableView"></p><h3 id="Talk-about-Http-request"><a href="#Talk-about-Http-request" class="headerlink" title="Talk about Http request"></a>Talk about Http request</h3><p>you know, when your app ask a request, may be have two Design Patterns . it named â€œblockâ€ï¼ˆanonymous inner classesï¼‰ ,â€delegateâ€(delegate is named by iOS. on java, itâ€™s interface or ask â€œOOPâ€ thoughts).</p><h4 id="My-HttpRequest-Design"><a href="#My-HttpRequest-Design" class="headerlink" title="My HttpRequest Design"></a>My HttpRequest Design</h4><p>there is a abstract class named BaseDataService.  if you have a   new request . you just extend BaseDataService and @Override three methods. â€œgetAPIRequestMethodName<br>, setRequestParams,parseResponseâ€. look these screenshots. And on your  Activity  or Fragments  , you just implemets RequestCallBackDelegate , and you can use your son of BaseDataService to make some request. </p><h3 id="çˆ¶ç±»"><a href="#çˆ¶ç±»" class="headerlink" title="çˆ¶ç±»"></a>çˆ¶ç±»</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get_request1.png" alt="tableview like iOS UItableView">   </p><h3 id="å­ç±»ç»§æ‰¿çˆ¶ç±»"><a href="#å­ç±»ç»§æ‰¿çˆ¶ç±»" class="headerlink" title="å­ç±»ç»§æ‰¿çˆ¶ç±»"></a>å­ç±»ç»§æ‰¿çˆ¶ç±»</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get_request2.png" alt="tableview like iOS UItableView">   </p><h3 id="ç•Œé¢ç”¨å­ç±»è¯·æ±‚å®ç°"><a href="#ç•Œé¢ç”¨å­ç±»è¯·æ±‚å®ç°" class="headerlink" title="ç•Œé¢ç”¨å­ç±»è¯·æ±‚å®ç°"></a>ç•Œé¢ç”¨å­ç±»è¯·æ±‚å®ç°</h3><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/android_get_request3.png" alt="tableview like iOS UItableView"></p><p><em>For more info about the tableView how to work, you can find my   open source on my <a href="http://github.com/gaoyingqiu" target="_blank" rel="noopener">Github Android-TableView</a>,welcome make you suggestion. if you like this project, on my github, I hope you can click on the star in the upper right corner to give me more encouragement. thank you!</em></p><h3 id="TO-Do-Introduce-Android-Service-components"><a href="#TO-Do-Introduce-Android-Service-components" class="headerlink" title="TO Do:  Introduce Android Service components"></a>TO Do:  Introduce Android Service components</h3>]]></content>
      
      
      
        <tags>
            
            <tag> AndroidTableView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¢æˆ·ç«¯ç½‘ç»œè¯·æ±‚æ¨¡å—çš„è®¾è®¡</title>
      <link href="/2016/05/29/iOSDataTransmission/"/>
      <url>/2016/05/29/iOSDataTransmission/</url>
      
        <content type="html"><![CDATA[<p>AFNetworkingä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚å…¶å®ƒçš„ASIHttpRequestï¼ŒMKNetworkKitå•¥çš„å…¶å®ä¹Ÿéƒ½è¿˜ä¸é”™ï¼Œè‹¹æœå¯¹ç½‘ç»œè¯·æ±‚éƒ¨åˆ†å·²ç»åšäº†å¾ˆå¥½çš„å°è£…ã€‚ä½†ä¸ç®¡å¦‚ä½•ï¼ŒAPPç«¯è¿˜æ˜¯è¦å¯¹ç½‘ç»œè¿›è¡Œä¸€ä¸ªå°è£…ã€‚åœ¨å®é™…çš„Appå¼€å‘ä¸­ï¼ŒAfnetworkingå·²ç»æˆä¸ºäº†äº‹å®ä¸Šå„å¤§Appçš„æ ‡å‡†é…ç½®ã€‚</p><p>iOSå¼€å‘é¢†åŸŸæœ‰å¾ˆå¤šå¯¹è±¡é—´æ•°æ®çš„ä¼ é€’æ–¹å¼ï¼Œæˆ‘çœ‹åˆ°çš„å¤§å¤šæ•°Appåœ¨ç½‘ç»œå±‚æ‰€é‡‡ç”¨çš„æ–¹æ¡ˆä¸»è¦é›†ä¸­äºè¿™ä¸‰ç§ï¼šDelegateï¼ŒNotificationï¼ŒBlockã€‚æˆ‘çš„æ„è§æ˜¯Delegateä¸ºä¸»ï¼ŒNotificationå¯ä»¥ç”¨åœ¨ç½‘ç»œå‘ç”Ÿå˜åŒ–æ—¶å€™ä½¿ç”¨ã€‚<br><a id="more"></a></p><h3 id="è°ˆè°ˆNotification"><a href="#è°ˆè°ˆNotification" class="headerlink" title="è°ˆè°ˆNotification"></a>è°ˆè°ˆNotification</h3><p>ä½¿ç”¨Notificationæ¥è¿›è¡Œç½‘ç»œå±‚å’Œä¸šåŠ¡å±‚ä¹‹é—´æ•°æ®çš„äº¤æ¢ï¼Œ ä½†æ˜¯ä½¿ç”¨Notificationç»™è·¨å±‚æ•°æ®äº¤æµå¼€äº†ä¸€é“å£å­ï¼Œå› ä¸ºNotificationçš„å½±å“é¢ä¸å¯æ§åˆ¶ï¼Œåªè¦å­˜åœ¨å®ä¾‹å°±å­˜åœ¨è¢«å½±å“çš„å¯èƒ½ã€‚Notificationå› ä¸ºæ”¯æ’‘ä¸€å¯¹å¤šçš„æƒ…å†µï¼Œè¿™ä¹Ÿç»™ä»£ç æ•£è½æä¾›äº†æ¡ä»¶ã€‚åŒæ—¶ï¼ŒNotificationæ‰€å¯¹åº”çš„å“åº”æ–¹æ³•å¾ˆéš¾åœ¨ç¼–è¯‘å±‚é¢ä½œé™åˆ¶ã€‚</p><h3 id="å…³äºBlock-ä¹‹è°ˆ"><a href="#å…³äºBlock-ä¹‹è°ˆ" class="headerlink" title="å…³äºBlock ä¹‹è°ˆ"></a>å…³äºBlock ä¹‹è°ˆ</h3><p>1ã€blockå¾ˆéš¾è¿½è¸ªï¼Œéš¾ä»¥ç»´æŠ¤ã€‚è°ƒè¯•çš„æ—¶å€™æœ‰ä¸ªblockï¼Œå¦‚æœæƒ³çŸ¥é“è¿™ä¸ªblocké‡Œé¢éƒ½åšäº†äº›ä»€ä¹ˆäº‹æƒ…ï¼Œè¿™æ—¶å€™å°±è¦ä»ä¹‹å‰å†™çš„ä»£ç å¾€å›æŸ¥äº†ã€‚ã€‚<br>2ã€blockä¼šå»¶é•¿ç›¸å…³å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚blockä¼šç»™å†…éƒ¨æ‰€æœ‰çš„å¯¹è±¡å¼•ç”¨è®¡æ•°åŠ ä¸€ï¼Œè¿™ä¸€æ–¹é¢ä¼šå¸¦æ¥æ½œåœ¨çš„retain cycleã€‚è¿™ä¸ªæ—¶å€™åœ¨blockå—ä¸­éœ€è¦ä½¿ç”¨weak self ä¿®é¥°è¯ã€‚å› ä¸ºblockä¼šå»¶é•¿ç”Ÿå‘½å¥½å‘¨æœŸï¼Œæ‰€ä»¥å¯èƒ½è¯·æ±‚è¿˜åœ¨æ‰§è¡Œä¸­ï¼ŒViewController popä¹‹åï¼Œè¯·æ±‚è¿˜åœ¨é£ã€‚è€Œdelegateæ˜¯å¼±å¼•ç”¨ï¼Œå“ªæ€•è¯·æ±‚ä»ç„¶åœ¨å¤–é¢é£ï¼ŒViewControllerè¿˜æ˜¯èƒ½å¤ŸåŠæ—¶è¢«å›æ”¶çš„ï¼Œå›æ”¶ä¹‹åæŒ‡é’ˆè‡ªåŠ¨è¢«ç½®ä¸ºäº†nilã€‚</p><h3 id="Delegate-å§”æ‰˜"><a href="#Delegate-å§”æ‰˜" class="headerlink" title="Delegate å§”æ‰˜"></a>Delegate å§”æ‰˜</h3><h4 id="å°è£…è¯·æ±‚åŸºç±»-h-æ–‡ä»¶"><a href="#å°è£…è¯·æ±‚åŸºç±»-h-æ–‡ä»¶" class="headerlink" title="å°è£…è¯·æ±‚åŸºç±» h æ–‡ä»¶"></a>å°è£…è¯·æ±‚åŸºç±» h æ–‡ä»¶</h4><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/netRequestDesign1.png" alt="å°è£…è¯·æ±‚åŸºç±»"></p><h4 id="BaseDataService-ç½‘ç»œè¯·æ±‚åŸºç±»-mæ–‡ä»¶-åˆå§‹åŒ–"><a href="#BaseDataService-ç½‘ç»œè¯·æ±‚åŸºç±»-mæ–‡ä»¶-åˆå§‹åŒ–" class="headerlink" title="BaseDataService ç½‘ç»œè¯·æ±‚åŸºç±» mæ–‡ä»¶ åˆå§‹åŒ–"></a>BaseDataService ç½‘ç»œè¯·æ±‚åŸºç±» mæ–‡ä»¶ åˆå§‹åŒ–</h4><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/netRequestDesign2.png" alt="å°è£…è¯·æ±‚åŸºç±»"></p><h4 id="BaseDataService-é…ç½®è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨å…·ä½“ä¸šåŠ¡è¯·æ±‚å­ç±»"><a href="#BaseDataService-é…ç½®è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨å…·ä½“ä¸šåŠ¡è¯·æ±‚å­ç±»" class="headerlink" title="BaseDataService é…ç½®è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨å…·ä½“ä¸šåŠ¡è¯·æ±‚å­ç±»"></a>BaseDataService é…ç½®è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨å…·ä½“ä¸šåŠ¡è¯·æ±‚å­ç±»</h4><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/netRequestDesign3.png" alt="å°è£…è¯·æ±‚åŸºç±»"></p><h4 id="BaseDataService-è¯·æ±‚ç»“æŸï¼Œé€šè¿‡å§”æ‰˜è°ƒç”¨viewController-æ‰€å®ç°çš„æˆåŠŸ-æˆ–å¤±è´¥çš„æ–¹æ³•"><a href="#BaseDataService-è¯·æ±‚ç»“æŸï¼Œé€šè¿‡å§”æ‰˜è°ƒç”¨viewController-æ‰€å®ç°çš„æˆåŠŸ-æˆ–å¤±è´¥çš„æ–¹æ³•" class="headerlink" title="BaseDataService è¯·æ±‚ç»“æŸï¼Œé€šè¿‡å§”æ‰˜è°ƒç”¨viewController æ‰€å®ç°çš„æˆåŠŸ æˆ–å¤±è´¥çš„æ–¹æ³•"></a>BaseDataService è¯·æ±‚ç»“æŸï¼Œé€šè¿‡å§”æ‰˜è°ƒç”¨viewController æ‰€å®ç°çš„æˆåŠŸ æˆ–å¤±è´¥çš„æ–¹æ³•</h4><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/netRequestDesign4.png" alt="å°è£…è¯·æ±‚åŸºç±»"></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆiOSçš„å¤šçº¿ç¨‹</title>
      <link href="/2016/05/16/iOSThread/"/>
      <url>/2016/05/16/iOSThread/</url>
      
        <content type="html"><![CDATA[<p>iosçº¿ç¨‹å½¢å¼æœ‰ä¸‰ç§ã€‚ ios4åï¼Œè‹¹æœæ”¹ç”¨GCDå¤šçº¿ç¨‹ã€‚çº¿ç¨‹å¯ä»¥ç”¨æ¥å¹²ä»€ä¹ˆå‘¢ï¼Ÿå¤šçº¿ç¨‹å¯ä»¥ç”¨æ¥åå°åŠ è½½å›¾ç‰‡æ›´æ–°ä¸»çº¿ç¨‹UI,æˆ–è€…è¯·æ±‚ç½‘ç»œæ•°æ®ç­‰ç­‰ã€‚</p><h3 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h3><h4 id="ä½¿ç”¨-NSThread-æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•"><a href="#ä½¿ç”¨-NSThread-æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•" class="headerlink" title="ä½¿ç”¨ NSThread æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•:"></a>ä½¿ç”¨ NSThread æ¥åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§æ–¹æ³•:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[NSThread detachNewThreadSelector:@selector(myThreadMainMethod:) toTarget:self withObject:nil];</span><br><span class="line"></span><br><span class="line">NSThread* myThread = [[NSThread alloc] initWithTarget:self</span><br><span class="line"></span><br><span class="line">                              selector:@selector(myThreadMainMethod:)</span><br><span class="line"></span><br><span class="line">                              object:nil];</span><br><span class="line">[myThread start]; // Actually create the thread</span><br></pre></td></tr></table></figure><a id="more"></a><p>å¦‚æœä½ æ‹¥æœ‰ä¸€ä¸ª NSThread å¯¹è±¡,å®ƒçš„çº¿ç¨‹å½“å‰æ­£è¿è¡Œ,ä½ å¯ä»¥ç»™è¯¥çº¿ç¨‹å‘é€ æ¶ˆæ¯çš„å”¯ä¸€æ–¹æ³•æ˜¯åœ¨ä½ åº”ç”¨ç¨‹åºé‡Œé¢çš„ä»»ä½•å¯¹è±¡ä½¿ç”¨ performSelector:onThread:withObject:waitUntilDone:æ–¹æ³•ã€‚å®ƒæ˜¯å®ç°çº¿ç¨‹é—´é€š ä¿¡çš„ä¾¿æ·æ–¹æ³•.</p><p>çº¿ç¨‹é€šä¿¡ï¼š<br>1.åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ<br>[self performSelector:@selector(run) onThread:thread withObject:nil waitUntilDone:YES]; </p><p>2.åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ</p><p>[self performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:YES];  </p><p>3.åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ</p><p>[self performSelector:@selector(run) withObject:nil];  </p><h3 id="NSOperation"><a href="#NSOperation" class="headerlink" title="NSOperation"></a>NSOperation</h3><p>é€šå¸¸ NSOperation  ä¼šå’ŒNSOperationQueue ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥äº†è§£ä¸€ä¸‹NSOperation .<br>Cocoa operationsæ˜¯åŸºäº Obective-Cå®ç°çš„ï¼Œç±» NSOperation ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…äº†ç”¨æˆ·éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œæˆ‘ä»¬åªè¦èšç„¦äºæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…ï¼Œè€Œä¸å¿…å¤ªæ“å¿ƒçº¿ç¨‹çš„ç®¡ç†ï¼ŒåŒæ­¥ç­‰äº‹æƒ…ï¼Œ<br>å› ä¸ºNSOperationå·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†è¿™äº›äº‹æƒ…ã€‚ NSOperation æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å®ƒçš„å­ç±»ã€‚iOS æä¾›äº†ä¸¤ç§é»˜è®¤å®ç°ï¼šNSInvocationOperation å’Œ NSBlockOperationã€‚<br>ä»£ç ç¤ºä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSOperationQueue *mainQueue = [NSOperationQueue mainQueue];  //ä¸»é˜Ÿåˆ—</span><br><span class="line">NSOperationQueue *queue = [[NSOperationQueue alloc] init]; //è‡ªå®šä¹‰é˜Ÿåˆ—</span><br><span class="line">NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123;        </span><br><span class="line">       //ä»»åŠ¡æ‰§è¡Œ            &#125;];</span><br><span class="line">[queue addOperation:operation];</span><br></pre></td></tr></table></figure><br>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ªNSOperationæ‰§è¡Œå®Œæ¯•ååšä¸€äº›äº‹æƒ…ï¼Œå°±è°ƒç”¨NSOperationçš„setCompletionBlockæ–¹æ³•æ¥è®¾ç½®æƒ³åšçš„äº‹æƒ…<br>operation.completionBlock = ^() {<br> NSLog(@â€æ‰§è¡Œå®Œæ¯•â€);<br>}; </p><h4 id="NSInvocationOperation"><a href="#NSInvocationOperation" class="headerlink" title="NSInvocationOperation"></a>NSInvocationOperation</h4><p>åŸºäºä¸€ä¸ªå¯¹è±¡å’Œselectoræ¥åˆ›å»ºæ“ä½œã€‚å¦‚æœä½ å·²ç»æœ‰ç°æœ‰çš„æ–¹æ³•æ¥æ‰§è¡Œéœ€è¦çš„ä»»åŠ¡,å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»<br>// è¿™ä¸ªæ“ä½œæ˜¯ï¼šè°ƒç”¨selfçš„runæ–¹æ³•<br>NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run) object:nil];<br>// å¼€å§‹æ‰§è¡Œä»»åŠ¡(åŒæ­¥æ‰§è¡Œ)<br>[operation start]; </p><h3 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h3><h4 id="å•åˆ—æ¨¡å¼"><a href="#å•åˆ—æ¨¡å¼" class="headerlink" title="å•åˆ—æ¨¡å¼"></a>å•åˆ—æ¨¡å¼</h4><p>å•ä¾‹å°±æ˜¯å…¨å±€éƒ½åªæœ‰ä¸€ä¸ªå¯¹è±¡å­˜åœ¨ï¼Œè€Œä¸”æ˜¯åœ¨æ•´ä¸ªAppè¿è¡Œè¿‡ç¨‹ä¸­éƒ½å­˜åœ¨ã€‚ åšç”¨æˆ·æ•°æ®å­˜å‚¨æ—¶ï¼Œé€šå¸¸éƒ½ä¼šç”¨å•ä¾‹å­˜å‚¨ï¼Œå› ä¸ºåº”ç”¨åœ¨æ‰€æœ‰æ“ä½œä¸­ï¼Œç»å¸¸è¦æ±‚å…ˆç™»å½•.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+ (instancetype)shared &#123;</span><br><span class="line">  static HYBUserManager *sg_userManager = nil;</span><br><span class="line">  static dispatch_once_t onceToken;</span><br><span class="line">  dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">    <span class="keyword">if</span> (sg_userManager == nil) &#123;</span><br><span class="line">      sg_userManager = [[HYBUserManager alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">return</span> sg_userManager;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç›¸ä¿¡å¤§å®¶å¯¹dispatch_onceéƒ½ä¸é™Œç”Ÿäº†ï¼Œæˆ‘å°†å’Œå¤§å®¶ä¸€èµ·æ¢ç©¶dispatch_onceçš„æ›´å¤šç»†èŠ‚ã€‚<br>dispatch_onceçš„ä½œç”¨æ­£å¦‚å…¶åï¼šå¯¹äºæŸä¸ªä»»åŠ¡æ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚ dispatch_onceå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°predicateç”¨æ¥ä¿è¯æ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œä¸€æ¬¡çš„ä»»åŠ¡blockã€‚<br>static dispatch_once_t predicate;<br>dispatch_once(&amp;predicate, ^{<br>    // some one-time task<br>});<br>dispatch_onceè¢«å¹¿æ³›ä½¿ç”¨åœ¨å•ä¾‹ã€ç¼“å­˜ç­‰ä»£ç ä¸­ï¼Œç”¨ä»¥ä¿è¯åœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡æŸä»»åŠ¡ã€‚<br>dispatch_onceåœ¨å•çº¿ç¨‹ç¨‹åºä¸­æ¯«æ— æ„ä¹‰ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå…¶ä½è´Ÿè½½ã€é«˜å¯ä¾èµ–æ€§ã€æ¥å£ç®€å•ç­‰ç‰¹æ€§ï¼Œèµ¢å¾—äº†å¹¿å¤§æ¶ˆè´¹è€…çš„ä¸€è‡´äº”æ˜Ÿå¥½è¯„ã€‚</p><p>dispatch_onceä½¿å¾—blockä¸­çš„ä»£ç æ‰§è¡Œä¸”åªæ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨å¤šçº¿ç¨‹ç«æ€æ—¶ï¼Œä½¿å…¶ä»–çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´è‡³blockæ‰§è¡Œå®Œæ¯•ï¼Œå¹¶ä¸”è¿˜ä¿è¯æ— ç«æ€æ—¶æ‰§è¡Œæ•ˆç‡ä¸éçº¿ç¨‹å®‰å…¨çš„ifè¯­å¥æ•ˆç‡ç›¸å½“ã€‚<br>dispatch_onceå†…éƒ¨ä½¿ç”¨äº†å¤§é‡çš„åŸå­æ“ä½œæ¥æ›¿ä»£é”ä¸ä¿¡å·é‡ï¼Œè¿™ä½¿å¾—å…¶æ•ˆç‡å¤§å¤§æå‡ï¼Œä½†å¸¦æ¥çš„æ˜¯ç»´æŠ¤å’Œé˜…è¯»æ€§çš„é™ä½ã€‚<br>dispatch_onceè¢«å¤§é‡ä½¿ç”¨åœ¨æ„å»ºå•ä¾‹ä¸Šï¼Œappleä¹Ÿæ¨èå¦‚æ­¤ã€‚</p><h4 id="Dispatch-Group"><a href="#Dispatch-Group" class="headerlink" title="Dispatch Group"></a>Dispatch Group</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨dispatch_group_asyncå‡½æ•°å°†å¤šä¸ªä»»åŠ¡å…³è”åˆ°ä¸€ä¸ªDispatch Groupå’Œç›¸åº”çš„queueä¸­ï¼Œgroupä¼šå¹¶å‘åœ°åŒæ—¶æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚è€Œä¸”Dispatch Groupå¯ä»¥ç”¨æ¥é˜»å¡ä¸€ä¸ªçº¿ç¨‹, ç›´åˆ°groupå…³è”çš„æ‰€æœ‰çš„ä»»åŠ¡å®Œæˆæ‰§è¡Œã€‚æœ‰æ—¶å€™ä½ å¿…é¡»ç­‰å¾…ä»»åŠ¡å®Œæˆçš„ç»“æœ,ç„¶åæ‰èƒ½ç»§ç»­åé¢çš„å¤„ç†ã€‚<br>ä¸‹é¢ç”¨Dispatch Groupä¼˜åŒ–ä¸Šé¢çš„ä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. // æ ¹æ®urlè·å–UIImage  </span><br><span class="line">2. - (UIImage *)imageWithURLString:(NSString *)urlString &#123;  </span><br><span class="line">3.     NSURL *url = [NSURL URLWithString:urlString];  </span><br><span class="line">4.     NSData *data = [NSData dataWithContentsOfURL:url];  </span><br><span class="line">5.     // è¿™é‡Œå¹¶æ²¡æœ‰è‡ªåŠ¨é‡Šæ”¾UIImageå¯¹è±¡  </span><br><span class="line">6.     <span class="built_in">return</span> [[UIImage alloc] initWithData:data];  </span><br><span class="line">7. &#125;  </span><br><span class="line">8.   </span><br><span class="line">9. - (void)downloadImages &#123;  </span><br><span class="line">10.     dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);  </span><br><span class="line">11.       </span><br><span class="line">12.     // å¼‚æ­¥ä¸‹è½½å›¾ç‰‡  </span><br><span class="line">13.     dispatch_async(queue, ^&#123;  </span><br><span class="line">14.         // åˆ›å»ºä¸€ä¸ªç»„  </span><br><span class="line">15.         dispatch_group_t group = dispatch_group_create();  </span><br><span class="line">16.           </span><br><span class="line">17.         __block UIImage *image1 = nil;  </span><br><span class="line">18.         __block UIImage *image2 = nil;  </span><br><span class="line">19.           </span><br><span class="line">20.         // å…³è”ä¸€ä¸ªä»»åŠ¡åˆ°group  </span><br><span class="line">21.         dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;  </span><br><span class="line">22.             // ä¸‹è½½ç¬¬ä¸€å¼ å›¾ç‰‡  </span><br><span class="line">23.             NSString *url1 = @<span class="string">"http://car0.autoimg.cn/upload/spec/9579/u_20120110174805627264.jpg"</span>;  </span><br><span class="line">24.             image1 = [self imageWithURLString:url1];  </span><br><span class="line">25.         &#125;);  </span><br><span class="line">26.           </span><br><span class="line">27.         // å…³è”ä¸€ä¸ªä»»åŠ¡åˆ°group  </span><br><span class="line">28.         dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;  </span><br><span class="line">29.             // ä¸‹è½½ç¬¬ä¸€å¼ å›¾ç‰‡  </span><br><span class="line">30.             NSString *url2 = @<span class="string">"http://hiphotos.baidu.com/lvpics/pic/item/3a86813d1fa41768bba16746.jpg"</span>;  </span><br><span class="line">31.             image2 = [self imageWithURLString:url2];  </span><br><span class="line">32.         &#125;);  </span><br><span class="line">33.           </span><br><span class="line">34.         // ç­‰å¾…ç»„ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•,å›åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œblockå›è°ƒ  </span><br><span class="line">35.         dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;  </span><br><span class="line">36.             self.imageView1.image = image1;  </span><br><span class="line">37.             self.imageView2.image = image2;  </span><br><span class="line">38.               </span><br><span class="line">39.             // åƒä¸‡ä¸è¦åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­è‡ªåŠ¨é‡Šæ”¾UIImageï¼Œå› ä¸ºå½“å¼‚æ­¥çº¿ç¨‹ç»“æŸï¼Œå¼‚æ­¥çº¿ç¨‹çš„è‡ªåŠ¨é‡Šæ”¾æ± ä¹Ÿä¼šè¢«é”€æ¯ï¼Œé‚£ä¹ˆUIImageä¹Ÿä¼šè¢«é”€æ¯  </span><br><span class="line">40.               </span><br><span class="line">41.             // åœ¨è¿™é‡Œé‡Šæ”¾å›¾ç‰‡èµ„æº  </span><br><span class="line">42.             [image1 release];  </span><br><span class="line">43.             [image2 release];  </span><br><span class="line">44.         &#125;);  </span><br><span class="line">45.           </span><br><span class="line">46.         // é‡Šæ”¾group  </span><br><span class="line">47.         dispatch_release(group);  </span><br><span class="line">48.     &#125;);  </span><br><span class="line">49. &#125;</span><br></pre></td></tr></table></figure><br>dispatch_group_notifyå‡½æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé¢å¤–çš„blockï¼Œè¯¥blockå°†åœ¨groupä¸­æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰§è¡Œ.</p><h4 id="å¼‚æ­¥ä¸‹è½½å›¾ç‰‡"><a href="#å¼‚æ­¥ä¸‹è½½å›¾ç‰‡" class="headerlink" title="å¼‚æ­¥ä¸‹è½½å›¾ç‰‡"></a>å¼‚æ­¥ä¸‹è½½å›¾ç‰‡</h4><p>1&gt; GCDæä¾›ä¸€ä¸ªç‰¹æ®Šçš„dispatch queue,å¯ä»¥åœ¨åº”ç”¨çš„ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ã€‚åªè¦åº”ç”¨ä¸»çº¿ç¨‹è®¾ç½®äº†run loop(ç”±CFRunLoopRefç±»å‹æˆ–NSRunLoopå¯¹è±¡ç®¡ç†),å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªqueue,å¹¶ä¸”æœ€åä¼šè‡ªåŠ¨é”€æ¯ã€‚éCocoaåº”ç”¨å¦‚æœä¸æ˜¾å¼åœ°è®¾ç½®run loop, å°±å¿…é¡»æ˜¾å¼åœ°è°ƒç”¨dispatch_mainå‡½æ•°æ¥æ˜¾å¼åœ°æ¿€æ´»è¿™ä¸ªdispatch queueï¼Œå¦åˆ™è™½ç„¶ä½ å¯ä»¥æ·»åŠ ä»»åŠ¡åˆ°queue,ä½†ä»»åŠ¡æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œã€‚<br>2&gt; è°ƒç”¨dispatch_get_main_queueå‡½æ•°è·å¾—åº”ç”¨ä¸»çº¿ç¨‹çš„dispatch queue,æ·»åŠ åˆ°è¿™ä¸ªqueueçš„ä»»åŠ¡ç”±ä¸»çº¿ç¨‹ä¸²è¡ŒåŒ–æ‰§è¡Œ<br>3&gt; ä»£ç å®ç°ï¼Œæ¯”å¦‚å¼‚æ­¥ä¸‹è½½å›¾ç‰‡åï¼Œå›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºå›¾ç‰‡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. // å¼‚æ­¥ä¸‹è½½å›¾ç‰‡  </span><br><span class="line">2. dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;  </span><br><span class="line">3.     NSURL *url = [NSURL URLWithString:@<span class="string">"http://car0.autoimg.cn/upload/spec/9579/u_20120110174805627264.jpg"</span>];  </span><br><span class="line">4.     UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];  </span><br><span class="line">5.       </span><br><span class="line">6.     // å›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºå›¾ç‰‡  </span><br><span class="line">7.     dispatch_async(dispatch_get_main_queue(), ^&#123;  </span><br><span class="line">8.         self.imageView.image = image;  </span><br><span class="line">9.     &#125;);  </span><br><span class="line">10. &#125;);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Xmppåè®®</title>
      <link href="/2016/05/15/xmpp/"/>
      <url>/2016/05/15/xmpp/</url>
      
        <content type="html"><![CDATA[<p>åŸºäºTCPçš„é•¿è¿æ¥ã€‚åœ¨ä½¿ç”¨ TCP é•¿è¿æ¥çš„ IM æœåŠ¡è®¾è®¡ä¸­ï¼Œå¾€å¾€éƒ½ä¼šæ¶‰åŠåˆ°å¿ƒè·³ã€‚å¿ƒè·³ä¸€èˆ¬æ˜¯æŒ‡æŸç«¯(ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å®¢æˆ·ç«¯)æ¯éš”ä¸€å®šæ—¶é—´å‘å¯¹ç«¯å‘é€è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä»¥åˆ¤æ–­åŒæ–¹æ˜¯å¦å­˜æ´»ï¼Œå› å…¶æŒ‰ç…§ä¸€å®šé—´éš”å‘é€ï¼Œç±»ä¼¼äºå¿ƒè·³ï¼Œæ•…è¢«ç§°ä¸ºå¿ƒè·³æŒ‡ä»¤ã€‚</p><a id="more"></a><h4 id="ä¿æŒå¿ƒè·³çš„å¿…è¦"><a href="#ä¿æŒå¿ƒè·³çš„å¿…è¦" class="headerlink" title="ä¿æŒå¿ƒè·³çš„å¿…è¦"></a>ä¿æŒå¿ƒè·³çš„å¿…è¦</h4><p>æœåŠ¡å™¨éœ€è¦åŠæ—¶æ¸…ç†æ— æ•ˆè¿æ¥ä»¥å‡è½»è´Ÿè½½ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¦‚æ¸¸æˆå‰¯æœ¬ä¸­æœåŠ¡å™¨éœ€è¦åŠæ—¶å¤„ç†ç©å®¶æ‰çº¿å¸¦æ¥çš„é—®é¢˜ã€‚</p><h4 id="ä¸ºä»€ä¹ˆTCP-KeepAlive-ä¸èƒ½ç”¨äºæ£€æµ‹"><a href="#ä¸ºä»€ä¹ˆTCP-KeepAlive-ä¸èƒ½ç”¨äºæ£€æµ‹" class="headerlink" title="ä¸ºä»€ä¹ˆTCP KeepAlive ä¸èƒ½ç”¨äºæ£€æµ‹"></a>ä¸ºä»€ä¹ˆTCP KeepAlive ä¸èƒ½ç”¨äºæ£€æµ‹</h4><p>TCP KeepAliveç”¨äºæ£€æµ‹è¿æ¥çš„æ­»æ´»ï¼Œå¿ƒè·³æœºåˆ¶ç”¨äºæ£€æŸ¥åŒæ–¹çš„å­˜æ´»çŠ¶æ€ã€‚è€ƒè™‘ä¸€ç§æƒ…å†µï¼ŒæŸå°æœåŠ¡å™¨å› ä¸ºæŸäº›åŸå› å¯¼è‡´è´Ÿè½½è¶…é«˜ï¼ŒCPU 100%ï¼Œæ— æ³•å“åº”ä»»ä½•ä¸šåŠ¡è¯·æ±‚ï¼Œä½†æ˜¯ä½¿ç”¨ TCP æ¢é’ˆåˆ™ä»æ—§èƒ½å¤Ÿç¡®å®šè¿æ¥çŠ¶æ€ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è¿æ¥æ´»ç€ä½†ä¸šåŠ¡æä¾›æ–¹å·²æ­»çš„çŠ¶æ€ï¼Œå¯¹å®¢æˆ·ç«¯è€Œè¨€ï¼Œè¿™æ—¶çš„æœ€å¥½é€‰æ‹©å°±æ˜¯æ–­çº¿åé‡æ–°è¿æ¥å…¶ä»–æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä¸€ç›´è®¤ä¸ºå½“å‰æœåŠ¡å™¨æ˜¯å¯ç”¨çŠ¶æ€ï¼Œä¸€ç›´å‘å½“å‰æœåŠ¡å™¨å‘é€äº›å¿…ç„¶ä¼šå¤±è´¥çš„è¯·æ±‚ã€‚</p><h4 id="å¿ƒè·³çš„åšæ³•"><a href="#å¿ƒè·³çš„åšæ³•" class="headerlink" title="å¿ƒè·³çš„åšæ³•"></a>å¿ƒè·³çš„åšæ³•</h4><p>æ¯éš” 30 ç§’å¿ƒè·³ä¸€æ¬¡ï¼Œ15 ç§’å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³å›åŒ…åˆ™è®¤ä¸ºå½“å‰è¿æ¥å·²å¤±æ•ˆï¼Œæ–­å¼€è¿æ¥å¹¶è¿›è¡Œé‡è¿ã€‚è¿æ¥å¯é æ€§å¯åœ¨å¿ƒè·³è¶…æ—¶ n æ¬¡åæ‰åˆ¤å®šå½“å‰è¿æ¥ä¸å¯ç”¨ï¼Œè¿™æ ·åšå¯ä»¥å‡å°‘å¿ƒè·³è¿æ¥çš„æ¬¡æ•°ï¼Œå‡å°‘æµé‡ã€‚</p><h3 id="æ¶ˆæ¯å¯è¾¾"><a href="#æ¶ˆæ¯å¯è¾¾" class="headerlink" title="æ¶ˆæ¯å¯è¾¾"></a>æ¶ˆæ¯å¯è¾¾</h3><p>åœ¨ç§»åŠ¨ç½‘ç»œä¸‹ï¼Œä¸¢åŒ…ï¼Œç½‘ç»œé‡è¿ç­‰æƒ…å†µéå¸¸ä¹‹å¤šï¼Œä¸ºäº†ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ï¼Œä¸€èˆ¬éœ€è¦åšæ¶ˆæ¯å›æ‰§å’Œé‡å‘æœºåˆ¶ã€‚å‚è€ƒæ˜“ä¿¡ï¼Œæ¯æ¡æ¶ˆæ¯ä¼šæœ€å¤šä¼šæœ‰3æ¬¡é‡å‘ï¼Œè¶…æ—¶æ—¶é—´ä¸º15ç§’ï¼ŒåŒæ—¶åœ¨å‘é€ä¹‹å‰ä¼šæ£€æµ‹å½“å‰è¿æ¥çŠ¶æ€ï¼Œå¦‚æœå½“å‰è¿æ¥å¹¶æ²¡æœ‰æ­£ç¡®å»ºç«‹ï¼Œç¼“å­˜æ¶ˆæ¯ä¸”å®šæ—¶æ£€æŸ¥(æ¯éš”2ç§’æ£€æŸ¥ä¸€æ¬¡ï¼Œæ£€æŸ¥15æ¬¡)ã€‚æ‰€ä»¥ä¸€æ¡æ¶ˆæ¯åœ¨æœ€å·®çš„æƒ…å†µä¸‹ä¼šæœ‰2åˆ†é’Ÿå·¦å³çš„é‡è¯•æ—¶é—´ï¼Œä»¥ä¿è¯æ¶ˆæ¯çš„å¯è¾¾ã€‚</p><p>å› ä¸ºé‡å‘çš„å­˜åœ¨ï¼Œæ¥å—ç«¯å¶å°”ä¼šæ”¶åˆ°é‡å¤æ¶ˆæ¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æ¥æ”¶ç«¯è¿›è¡Œå»é‡ã€‚é€šç”¨çš„åšæ³•æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½å¸¦ä¸Šè‡ªå·±å”¯ä¸€çš„message id(ä¸€èˆ¬æ˜¯uuid)ã€‚</p><h3 id="æ¶ˆæ¯åŠ å¯†"><a href="#æ¶ˆæ¯åŠ å¯†" class="headerlink" title="æ¶ˆæ¯åŠ å¯†"></a>æ¶ˆæ¯åŠ å¯†</h3><p>ä¸ºäº†ä¿è¯åè®®ä¸å®¹æ˜“è¢«ç ´è§£ï¼Œå¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰ä¸»æµIMéƒ½ä¼šå¯¹åè®®è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚å¸¸è§çš„æµç¨‹å’ŒHTTPSåŠ å¯†ç›¸ä¼¼:å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œè¿›è¡Œåå•†ï¼Œæœ€ç»ˆå®¢æˆ·ç«¯è·å¾—ä¸€ä¸ªå½“å‰Sessinoçš„ç§˜é’¥ï¼Œåç»­çš„æ•°æ®ä¼ è¾“éƒ½é€šè¿‡è¿™ä¸ªç§˜é’¥è¿›è¡ŒåŠ è§£å¯†ã€‚ä¸€èˆ¬å‡ºäºæ•ˆç‡çš„è€ƒè™‘éƒ½ä¼šé‡‡ç”¨æµå¼åŠ å¯†ï¼Œå¦‚RC4ã€‚è€Œå‰æœŸåå•†è¿‡ç¨‹åˆ™æ¨èä½¿ç”¨RSAç­‰éå¯¹ç§°åŠ å¯†ä»¥å¢åŠ ç ´è§£éš¾åº¦ã€‚</p><h3 id="IMåè®®åŒ…"><a href="#IMåè®®åŒ…" class="headerlink" title="IMåè®®åŒ…"></a>IMåè®®åŒ…</h3><p>åŒ…å¤´ï¼š<br>struct PackHeader<br>{<br>    int32<em>t     length</em>;    //åŒ…é•¿åº¦<br>    int32<em>t     serial</em>;    //åŒ…åºåˆ—å·<br>    int32<em>t     command</em>;   //åŒ…è¯·æ±‚ç±»å‹<br>    int32<em>t     code</em>;      //è¿”å›ç <br>};</p><h3 id="IMèŠå¤©App-ç™»å½•åè¦åšå¾—äº‹æƒ…"><a href="#IMèŠå¤©App-ç™»å½•åè¦åšå¾—äº‹æƒ…" class="headerlink" title="IMèŠå¤©App  ç™»å½•åè¦åšå¾—äº‹æƒ…"></a>IMèŠå¤©App  ç™»å½•åè¦åšå¾—äº‹æƒ…</h3><ul><li>å¥½å‹åˆ—è¡¨</li><li>å¥½å‹ä¸ªäººä¿¡æ¯</li><li>ç¾¤ç»„åˆ—è¡¨</li><li>ç¾¤æˆå‘˜åˆ—è¡¨</li><li>ç¾¤æˆå‘˜ä¸ªäººä¿¡æ¯</li><li>ç¦»çº¿æ¶ˆæ¯</li></ul><p>1ï¼Œå®¢æˆ·ç«¯æ°¸è¿œåªæ›´æ–°æ¯”æœ¬åœ°ç¼“å­˜æ•°æ®æ–°çš„æ•°æ®ã€‚<br>2ã€ç™»å½•æ—¶å€™LBSå¯æ”¾åœ¨ç™»å½•åæˆ–è€…ç½‘ç»œç©ºé—²æ—¶å»è¯·æ±‚ã€‚<br>3ã€æœ‰äº›æ•°æ®åªæ˜¯åœ¨è¯·æ±‚æ—¶å€™å»æ›´æ–°UI.</p><h3 id="ä½¿ç”¨XMppåè®®çš„ä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºé€€åˆ°åå°çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æ¥æ”¶åˆ°èŠå¤©ä¿¡æ¯æˆ–iconæ˜¾ç¤ºbadge-è¯¥æ€ä¹ˆåšï¼ŸGCDAsyncSocket"><a href="#ä½¿ç”¨XMppåè®®çš„ä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºé€€åˆ°åå°çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æ¥æ”¶åˆ°èŠå¤©ä¿¡æ¯æˆ–iconæ˜¾ç¤ºbadge-è¯¥æ€ä¹ˆåšï¼ŸGCDAsyncSocket" class="headerlink" title="ä½¿ç”¨XMppåè®®çš„ä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºé€€åˆ°åå°çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æ¥æ”¶åˆ°èŠå¤©ä¿¡æ¯æˆ–iconæ˜¾ç¤ºbadge, è¯¥æ€ä¹ˆåšï¼ŸGCDAsyncSocket"></a>ä½¿ç”¨XMppåè®®çš„ä¸€ä¸ªèŠå¤©åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºé€€åˆ°åå°çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦ç»§ç»­æ¥æ”¶åˆ°èŠå¤©ä¿¡æ¯æˆ–iconæ˜¾ç¤ºbadge, è¯¥æ€ä¹ˆåšï¼ŸGCDAsyncSocket</h3><p>You need to set the VoIP flag in your appâ€™s (appname)-info.plist file, and then in</p><p>(void)xmppStream:(XMPPStream <em>)sender socketWillConnect:(AsyncSocket </em>)socket<br>Youâ€™ll need to set the socket stream flags to include kCFStreamNetworkServiceTypeVoIP:</p><p> CFReadStreamSetProperty([socket getCFReadStream], kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);<br> CFWriteStreamSetProperty([socket getCFWriteStream], kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);<br>Then, your app will be woken up briefly when a new XMPP message arrives. In your normal</p><p>(void)xmppStream:(XMPPStream <em>)sender didReceiveMessage:(XMPPMessage </em>)message<br>handler, you would want to create a local notification for the message if you are backgrounded (you can keep track of background state via UIApplicationDidEnterBackgroundNotification and UIApplicationWillEnterForegroundNotification). The local notification handler can set the application badge number, etc (just like you would for a push notification).</p><p>EDIT<br>Newer versions of the XMPP Framework (specifically, GCDAsyncSocket) now support a call to make this easier, so you can just have:</p><ul><li>(void)xmppStream:(XMPPStream <em>)sender socketWillConnect:(GCDAsyncSocket </em>)socket<br>{<br>  // Tell the socket to stay around if the app goes to the background (only works on apps with the VoIP background flag set)<br>  [socket performBlock:^{<pre><code>[socket enableBackgroundingOnSocket];</code></pre>  }];<br>}<br><a href="http://stackoverflow.com/questions/5257580/iphone-xmpp-app-run-background" target="_blank" rel="noopener">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½ æˆ–è®¸èƒ½æ‰¾åˆ°ç­”æ¡ˆ</a>  ä¸å¾—ä¸è¯´StackOverFlowçœŸæ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚</li></ul><h3 id="èŠèŠIOSåå°"><a href="#èŠèŠIOSåå°" class="headerlink" title="èŠèŠIOSåå°"></a>èŠèŠIOSåå°</h3><p>åº”ç”¨ç¨‹åºè¿›å…¥åå°çŠ¶æ€ä¸ä¹…åè½¬å…¥æš‚åœçŠ¶æ€ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œåº”ç”¨ç¨‹åºä¸æ‰§è¡Œä»»ä½•ä»£ç ï¼Œå¹¶æœ‰å¯èƒ½åœ¨ä»»æ„æ—¶å€™ä»å†…å­˜ä¸­åˆ é™¤ã€‚åº”ç”¨ç¨‹åºæä¾›ç‰¹å®šçš„æœåŠ¡ï¼Œç”¨æˆ·å¯ä»¥è¯·æ±‚åå°æ‰§è¡Œæ—¶é—´ï¼Œä»¥æä¾›è¿™äº›æœåŠ¡ã€‚<br>ä¸‰ç§ç±»å‹çš„å¯ä»¥è¿è¡Œåœ¨åä»¥ï¼Œ<br>1.éŸ³ä¹<br>2.location<br>3.voip<br>å£°æ˜ä½ éœ€è¦çš„åå°ä»»åŠ¡<br>Info.plistä¸­æ·»åŠ UIBackgroundModesé”®å€¼ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªstringçš„å€¼ï¼ŒåŒ…æ‹¬<br>audio:åœ¨åå°æä¾›å£°éŸ³æ’­æ”¾åŠŸèƒ½ï¼ŒåŒ…æ‹¬éŸ³é¢‘æµå’Œæ’­æ”¾è§†é¢‘æ—¶çš„å£°éŸ³<br>locationï¼šåœ¨åå°å¯ä»¥ä¿æŒç”¨æˆ·çš„ä½ç½®ä¿¡æ¯<br>voipï¼šåœ¨åå°ä½¿ç”¨VOIPåŠŸèƒ½</p><p>å®ç°VOIPåº”ç”¨ï¼š<br>VOIPç¨‹åºéœ€è¦ç¨³å®šçš„ç½‘ç»œå»è¿æ¥å’Œå®ƒç›¸å…³çš„æœåŠ¡ï¼Œè¿™æ ·å®ƒæ‰èƒ½æ¥åˆ°æ¥ç”µå’Œå…¶ä»–ç›¸å…³çš„æ•°æ®ã€‚ç³»ç»Ÿå…è®¸VOIPç¨‹åºè¢«æŒ‚æ–­å¹¶æä¾›ç»„ä»¶å»ç›‘å¬å®ƒä»¬çš„socketsï¼Œè€Œä¸æ˜¯åœ¨ä»»æ„æ—¶å€™éƒ½å¤„äºå”¤é†’çŠ¶æ€ã€‚è®¾ç½®VOIPåº”ç”¨ç¨‹åºå¦‚ä¸‹ï¼š<br>Aã€ æ·»åŠ UIBackgroundModesä¸­çš„VOIPé”®å€¼<br>Bã€ ä¸ºVOIPè®¾ç½®ä¸€ä¸ªåº”ç”¨ç¨‹åºsocket<br>Cã€ åœ¨ç§»å‡ºåå°ä¹‹å‰ï¼Œè°ƒç”¨setKeepAliveTimeout:handler:æ–¹æ³•å»å»ºç«‹ä¸€ä¸ªå®šæœŸæ‰§è¡Œçš„handlerï¼Œä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œè¿™ä¸ªhandleræ¥ä¿æŒæœåŠ¡çš„è¿æ¥ã€‚<br>(<br>BOOL backgroundAccepted = [[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^{ [self backgroundHandler]; }];<br> if (backgroundAccepted)<br> {<br>      NSLog(@â€VOIP backgrounding acceptedâ€);<br> }<br>ä¸ºäº†é˜²æ­¢æ–­è¿ï¼Œvoipç¨‹åºéœ€è¦å®šæœŸè¢«å”¤é†’å»æ£€æŸ¥å®ƒçš„æœåŠ¡ã€‚ä¸ºäº†å®¹æ˜“å®ç°è¿™ä¸ªè¡Œä¸ºï¼ŒIOSé€šè¿‡ä½¿ç”¨ï¼ˆUIApplication setKeepAliveTimeout:handler:ï¼‰æ–¹æ³•å»ºç«‹ä¸€ä¸ªç‰¹æ®Šçš„å¥æŸ„ã€‚ä½ å¯ä»¥åœ¨applicationDidEnterBackgroundæ–¹æ³•ä¸­å»ºç«‹è¯¥å¥æŸ„ã€‚ä¸€æ—¦å»ºç«‹ï¼Œç³»ç»Ÿè‡³å°‘ä¼šåœ¨è¶…æ—¶ä¹‹å‰è°ƒç”¨è¯¥å¥æŸ„ä¸€æ¬¡ï¼Œæ¥å”¤é†’ä½ çš„åº”ç”¨ç¨‹åºã€‚<br>è¿™ä¸ªkeep-alive handleråœ¨åå°æ‰§è¡Œï¼Œå¿…é¡»å°½å¿«çš„è¿”å›å‚æ•°ï¼Œå®ƒæœ‰æœ€å¤š30ç§’çš„æ—¶é—´æ¥æ‰§è¡Œæ‰€éœ€çš„ä»»åŠ¡ï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å¥æŸ„æ²¡æœ‰è¿”å›ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚<br>å½“ä½ å»ºç«‹äº†handlerä¹‹åï¼Œç¡®å®šåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœ€å¤§è¶…æ—¶ã€‚ç³»ç»Ÿä¿è¯ä¼šåœ¨æœ€å¤§è¶…æ—¶ä¹‹å‰è°ƒç”¨handlerï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥ä½ çš„handlerå¿…é¡»åœ¨ä½ ç”³æ˜çš„è¶…æ—¶ä¹‹å‰åšå¥½æ‰§è¡Œç¨‹åºçš„å‡†å¤‡<br>)<br>Dã€ è®¾ç½®ä½ çš„audio sessionå»å¤„ç†è¿™ç§åˆ‡æ¢</p><h4 id="å®‰æ’Local-Notificationçš„ä¼ é€’"><a href="#å®‰æ’Local-Notificationçš„ä¼ é€’" class="headerlink" title="å®‰æ’Local Notificationçš„ä¼ é€’"></a>å®‰æ’Local Notificationçš„ä¼ é€’</h4><p>UILocalNotificationç±»æä¾›äº†ä¸€ç§æ–¹æ³•æ¥ä¼ é€’local notificationsã€‚å’Œpush notificationséœ€è¦è®¾ç½®remote serverä¸åŒï¼Œlocal notifications åœ¨ç¨‹åºä¸­å®‰æ’å¹¶åœ¨å½“å‰çš„è®¾å¤‡ä¸Šæ‰§è¡Œã€‚æ»¡è¶³å¦‚ä¸‹æ¡ä»¶å¯ä»¥ä½¿ç”¨è¯¥èƒ½åŠ›ï¼š<br>1ã€ä¸€ä¸ªåŸºäºæ—¶é—´çš„ç¨‹åºï¼Œå¯ä»¥åœ¨å°†æ¥ç‰¹å®šçš„æ—¶é—´è®©ç¨‹åºpost ä¸€ä¸ªalertï¼Œæ¯”å¦‚é—¹é’Ÿ<br>2ã€ä¸€ä¸ªåœ¨åå°è¿è¡Œçš„ç¨‹åºï¼Œpost ä¸€ä¸ªlocal notificationå»å¼•èµ·ç”¨æˆ·çš„æ³¨æ„<br>ä¸ºäº†å®‰æ’local notification çš„ä¼ é€’ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªUILocalNotificationçš„å®ä¾‹ï¼Œå¹¶è®¾ç½®å®ƒï¼Œä½¿ç”¨UIApplicationç±»æ–¹æ³•æ¥å®‰æ’å®ƒã€‚Local notificationå¯¹è±¡åŒ…å«äº†æ‰€è¦ä¼ é€’çš„ç±»å‹ï¼ˆsoundï¼Œalertï¼Œæˆ–è€…badgeï¼‰å’Œæ—¶é—´ä½•æ—¶å‘ˆç°ï¼‰ ã€‚UIApplicationç±»æ–¹æ³•æä¾›é€‰é¡¹å»ç¡®å®šæ˜¯ç«‹å³ä¼ é€’è¿˜æ˜¯åœ¨æŒ‡å®šçš„æ—¶é—´ä¼ é€’ã€‚<br>Listing 4-3 Scheduling an alarm notification  </p><ul><li>(void)scheduleAlarmForDate:(NSDate<em>)theDate<br>{<br>UIApplication</em> app = [UIApplication sharedApplication];<br>NSArray<em> oldNotifications = [app scheduledLocalNotifications];<br>// Clear out the old notification before scheduling a new one.<br>if ([oldNotifications count] &gt; 0)<br>[app cancelAllLocalNotifications];<br>// Create a new notification.<br>UILocalNotification</em> alarm = [[[UILocalNotification alloc] init] autorelease];<br>if (alarm)<br>{<br>alarm.fireDate = theDate;<br>alarm.timeZone = [NSTimeZone defaultTimeZone];<br>alarm.repeatInterval = 0;<br>alarm.soundName = @â€alarmsound.cafâ€;<br>alarm.alertBody = @â€Time to wake up!â€;<br>[app scheduleLocalNotification:alarm];<br>}<br>}<br>(å¯ä»¥æœ€å¤šåŒ…å«128ä¸ª local notifications active at any given time, any of which can be configured to repeat at a specified interval.)å¦‚æœåœ¨è°ƒç”¨è¯¥notificationçš„æ—¶å€™ï¼Œç¨‹åºå·²ç»å¤„äºå‰å°ï¼Œé‚£ä¹ˆapplicationï¼šdidReceiveLocalNotificationï¼šæ–¹æ³•å°†å–è€Œä»£ä¹‹ã€‚</li></ul><h3 id="voipä¸socketå®ç°åå°æ¨é€"><a href="#voipä¸socketå®ç°åå°æ¨é€" class="headerlink" title="voipä¸socketå®ç°åå°æ¨é€"></a>voipä¸socketå®ç°åå°æ¨é€</h3><h4 id="1-æ‰¾åˆ°è¯¥æ–‡ä»¶-æ·»åŠ è¯¥é¡¹"><a href="#1-æ‰¾åˆ°è¯¥æ–‡ä»¶-æ·»åŠ è¯¥é¡¹" class="headerlink" title="1.æ‰¾åˆ°è¯¥æ–‡ä»¶,æ·»åŠ è¯¥é¡¹"></a>1.æ‰¾åˆ°è¯¥æ–‡ä»¶,æ·»åŠ è¯¥é¡¹</h4><p>(1)èœ—ç‰›å¸®-Info.plist(2)Required background modeså®ƒçš„itemï¼šApp provides Voice over IP services</p><h4 id="2-åœ¨socketè¿æ¥æˆåŠŸä»£ç†é‡Œé¢"><a href="#2-åœ¨socketè¿æ¥æˆåŠŸä»£ç†é‡Œé¢" class="headerlink" title="2.åœ¨socketè¿æ¥æˆåŠŸä»£ç†é‡Œé¢"></a>2.åœ¨socketè¿æ¥æˆåŠŸä»£ç†é‡Œé¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-(void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port//å»ºç«‹è¿æ¥æˆåŠŸåæ‰§è¡Œçš„ä»£ç†</span><br><span class="line">&#123;</span><br><span class="line">    //åå°æŒ‚èµ·voip</span><br><span class="line">    [socket performBlock:^&#123;</span><br><span class="line">        [socket enableBackgroundingOnSocket];</span><br><span class="line">    &#125;];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨æ”¶åˆ°socketæ¶ˆæ¯ä»£ç†é‡Œé¢"><a href="#3-åœ¨æ”¶åˆ°socketæ¶ˆæ¯ä»£ç†é‡Œé¢" class="headerlink" title="3.åœ¨æ”¶åˆ°socketæ¶ˆæ¯ä»£ç†é‡Œé¢"></a>3.åœ¨æ”¶åˆ°socketæ¶ˆæ¯ä»£ç†é‡Œé¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag//æ¥æ”¶åˆ°æ¶ˆæ¯æ‰§è¡Œçš„ä»£ç†ã€‚</span><br><span class="line">&#123;</span><br><span class="line">    [socket readDataWithTimeout:-1 tag:0];//è¿™å¥è¯å¤ªé‡è¦äº†</span><br><span class="line">    UIApplication *application=[UIApplication sharedApplication];</span><br><span class="line">    <span class="keyword">if</span> (application.applicationState==UIApplicationStateBackground||application.applicationState==UIApplicationStateInactive )</span><br><span class="line">    &#123;</span><br><span class="line">        NSArray *oldNotifications=[application scheduledLocalNotifications];</span><br><span class="line">        <span class="keyword">if</span> ([oldNotifications count]&gt;0)</span><br><span class="line">        &#123;</span><br><span class="line">            [application cancelAllLocalNotifications];</span><br><span class="line">        &#125;</span><br><span class="line">        UILocalNotification *alarm=[[UILocalNotification alloc] autorelease];</span><br><span class="line">        <span class="keyword">if</span> (alarm)</span><br><span class="line">        &#123;</span><br><span class="line">            alarm.fireDate=[NSDate date];</span><br><span class="line">            alarm.timeZone=[NSTimeZone defaultTimeZone];</span><br><span class="line">            alarm.repeatInterval=0;</span><br><span class="line">            [Single sharedSingle].iconNumber++;</span><br><span class="line">            alarm.applicationIconBadgeNumber=[Single sharedSingle].iconNumber;</span><br><span class="line">            alarm.soundName=@<span class="string">"alarmsound.caf"</span>;</span><br><span class="line">            alarm.alertBody=[jsonDictionary valueForKey:@<span class="string">"sendmsg"</span>];</span><br><span class="line">            [application scheduleLocalNotification:alarm];</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="4-æŒ‚èµ·æ—¶ï¼Œæœ¬æ“ä½œæ˜¯ä¸ºäº†600ç§’é‡å†™è¿æ¥ä¸€æ¬¡socketï¼Œä¿æŒsocketåœ¨çº¿"><a href="#4-æŒ‚èµ·æ—¶ï¼Œæœ¬æ“ä½œæ˜¯ä¸ºäº†600ç§’é‡å†™è¿æ¥ä¸€æ¬¡socketï¼Œä¿æŒsocketåœ¨çº¿" class="headerlink" title="4.//æŒ‚èµ·æ—¶ï¼Œæœ¬æ“ä½œæ˜¯ä¸ºäº†600ç§’é‡å†™è¿æ¥ä¸€æ¬¡socketï¼Œä¿æŒsocketåœ¨çº¿"></a>4.//æŒ‚èµ·æ—¶ï¼Œæœ¬æ“ä½œæ˜¯ä¸ºäº†600ç§’é‡å†™è¿æ¥ä¸€æ¬¡socketï¼Œä¿æŒsocketåœ¨çº¿</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (void)applicationDidEnterBackground:(UIApplication *)application</span><br><span class="line">&#123;</span><br><span class="line">    [[UIApplication sharedApplication] setKeepAliveTimeout:600 handler:^&#123; [[NSNotificationCenter defaultCenter]postNotificationName:@<span class="string">"CreatSocket"</span> object:nil userInfo:nil];&#125;];</span><br><span class="line">&#125;</span><br><span class="line">-(void)creatSocket</span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> (![[Single sharedSelfMemberID] isEqualToString:@<span class="string">""</span>]) &#123;//ç™»é™†äº†</span><br><span class="line">       </span><br><span class="line">        [Single sharedSingle].socket.delegate=self;</span><br><span class="line">        [Single sharedSingle].socket.delegateQueue=dispatch_get_main_queue();</span><br><span class="line"></span><br><span class="line">        NSError *err = nil;</span><br><span class="line">        <span class="keyword">if</span>(![socket connectToHost:socketURL onPort:socketPort error:&amp;err])</span><br><span class="line">        &#123;</span><br><span class="line">           </span><br><span class="line">            NSLog(@<span class="string">"%@"</span>,err);</span><br><span class="line">            [[Single sharedSingle].socket readDataWithTimeout:-1 tag:0];</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            [[Single sharedSingle].customStatueBar show];</span><br><span class="line">            [Single sharedSingle].customStatueBar.messageLabel.text=@<span class="string">"è¿æ¥ä¸­..."</span>;</span><br><span class="line">            NSLog(@<span class="string">"ok"</span>);</span><br><span class="line">           </span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>AFNNetWorking-åˆ†æ</title>
      <link href="/2016/05/13/AFNNetWorking/"/>
      <url>/2016/05/13/AFNNetWorking/</url>
      
        <content type="html"><![CDATA[<p>åŸºäºASIä¹‹åï¼ŒAFNåº”è¯¥æ˜¯æ¯”è¾ƒæµè¡Œçš„iosç¬¬ä¸‰æ–¹ã€‚<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="noopener">GIthub AFNetWorking</a>.<br>è¿™é‡Œï¼Œå…ˆè´´æˆ‘ä¹‹å‰åšé¡¹ç›® åŸºäºAFNçš„å°è£…ã€‚ä¹‹åï¼Œè§£é‡Šä¸‹AFNetWorking çš„ç›¸å…³çŸ¥è¯†ï¼ŒAFURLConnectionOperation,SSL å®‰å…¨AFSecurityPolicyã€‚</p><a id="more"></a><h3 id="é¡¹ç›®AFNetWorking-è¯·æ±‚å°è£…éƒ¨åˆ†ä»£ç "><a href="#é¡¹ç›®AFNetWorking-è¯·æ±‚å°è£…éƒ¨åˆ†ä»£ç " class="headerlink" title="é¡¹ç›®AFNetWorking è¯·æ±‚å°è£…éƒ¨åˆ†ä»£ç "></a>é¡¹ç›®AFNetWorking è¯·æ±‚å°è£…éƒ¨åˆ†ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³äº åŸºäºAFNç½‘ç»œè¯·æ±‚çš„get,postæ–¹æ³•</span></span><br><span class="line">//  BaseDataService.m</span><br><span class="line">//  LvJinKu</span><br><span class="line">//</span><br><span class="line">//  Created by lvjinku on 15/9/8.</span><br><span class="line">//  Copyright (c) 2015å¹´ lvjinku. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line"><span class="comment">#import "BaseDataService.h"</span></span><br><span class="line"><span class="comment">#import "DFReachabilityUtil.h"</span></span><br><span class="line"><span class="comment">#import "NSString+RRAPI.h"</span></span><br><span class="line"><span class="comment">#import "JSONKit.h"</span></span><br><span class="line"></span><br><span class="line">static const NSString *LvJinKuAgency = @<span class="string">"root"</span>;</span><br><span class="line">static const NSString *LvJinKuSecurity = @<span class="string">"permission"</span>;</span><br><span class="line"></span><br><span class="line">@interface BaseDataService()</span><br><span class="line"></span><br><span class="line">@property (nonatomic,strong) NSMutableDictionary *requestParams;</span><br><span class="line"></span><br><span class="line">-(NSString *) acquireBaseRequestParamDictionary;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation BaseDataService</span><br><span class="line">@synthesize manager,requestType,requestParams;</span><br><span class="line"></span><br><span class="line"><span class="comment">#pragma mark - Lifecycle</span></span><br><span class="line"></span><br><span class="line">- (instancetype)init</span><br><span class="line">&#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    <span class="keyword">if</span> (self) &#123;</span><br><span class="line">        manager = [[AFHTTPRequestOperationManager alloc] init];</span><br><span class="line">        manager.requestSerializer.timeoutInterval = NetworkTimeoutInterval;</span><br><span class="line">        requestType = RequestTypeGet;</span><br><span class="line">        requestParams = [NSMutableDictionary dictionary];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#pragma mark - Method</span></span><br><span class="line"></span><br><span class="line">-(void)executeRequest</span><br><span class="line">&#123;</span><br><span class="line">    //ç½‘ç»œä¸å¯ç”¨</span><br><span class="line">    <span class="keyword">if</span> (![DFReachabilityUtil isNetworkAvailable]) &#123;</span><br><span class="line">        </span><br><span class="line">        NSError *error = [NSError errorWithDomain:CustomErrorDomain code:CustomErrorConnectFailed userInfo:nil];</span><br><span class="line">        [self onError:error];</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    switch (requestType) &#123;</span><br><span class="line">        <span class="keyword">case</span> RequestTypeGet:</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">            NSDictionary *requestParamsDic = @&#123;@<span class="string">"xml"</span>:[self acquireBaseRequestParamDictionary]&#125;;</span><br><span class="line">            NSLog(@<span class="string">"getè¯·æ±‚å‚æ•°ï¼š%@"</span>, [self acquireBaseRequestParamDictionary]);</span><br><span class="line">         </span><br><span class="line">             //å‚æ•°,ç®€å•çš„getè¯·æ±‚</span><br><span class="line">            [manager GET:[self getRequestDomain] parameters:requestParamsDic success:^(AFHTTPRequestOperation *operation, id responseObject) &#123;</span><br><span class="line">                </span><br><span class="line">                [self onSuccess:responseObject];</span><br><span class="line">                </span><br><span class="line">            &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123;</span><br><span class="line">                NSLog(@<span class="string">"é”™è¯¯æ—¥å¿—ï¼š%@"</span>,error.localizedDescription);</span><br><span class="line">                [self onError:error];</span><br><span class="line">            &#125;];</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> RequestTypePost:</span><br><span class="line">        &#123;</span><br><span class="line">            //å‚æ•°,ç®€å•çš„postè¯·æ±‚</span><br><span class="line">            NSDictionary *requestParamsDic = @&#123;@<span class="string">"xml"</span>:[self acquireBaseRequestParamDictionary]&#125;;</span><br><span class="line">            [manager POST:[self getRequestDomain]  parameters:requestParamsDic  success:^(AFHTTPRequestOperation *operation, id responseObject)&#123;</span><br><span class="line">                </span><br><span class="line">                 [self onSuccess:responseObject];</span><br><span class="line">            &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123;</span><br><span class="line">                </span><br><span class="line">                 [self onError:error];</span><br><span class="line">            &#125;];</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> RequestTypePostMultipart:</span><br><span class="line">        &#123;</span><br><span class="line">           </span><br><span class="line">            //æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶ç±»å‹</span><br><span class="line">            BOOL isFile = NO;</span><br><span class="line">            <span class="keyword">for</span> (NSString * key <span class="keyword">in</span> requestParams.allKeys)</span><br><span class="line">            &#123;</span><br><span class="line">                id value = requestParams[key];</span><br><span class="line">                //åˆ¤æ–­è¯·æ±‚å‚æ•°æ˜¯å¦æ˜¯æ–‡ä»¶æ•°æ®</span><br><span class="line">                <span class="keyword">if</span> ([value isKindOfClass:[NSData class]]) &#123;</span><br><span class="line">                    </span><br><span class="line">                    isFile = YES;</span><br><span class="line">                    <span class="built_in">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(isFile)</span><br><span class="line">            &#123;</span><br><span class="line">                //ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">                [manager POST:[self getRequestDomain]  parameters:requestParams constructingBodyWithBlock:^(id formData) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (NSString *key <span class="keyword">in</span> requestParams) &#123;</span><br><span class="line">                        id value = requestParams[key];</span><br><span class="line">                        <span class="keyword">if</span> ([value isKindOfClass:[NSData class]]) &#123;</span><br><span class="line">                            [formData appendPartWithFileData:value  name:key fileName:key  mimeType:@<span class="string">"image/jpeg"</span>];</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                &#125; success:^(AFHTTPRequestOperation *operation, id responseObject) &#123;</span><br><span class="line">                    </span><br><span class="line">                    [self onSuccess:responseObject];</span><br><span class="line">                    </span><br><span class="line">                &#125; failure:^(AFHTTPRequestOperation *operation, NSError *error) &#123;</span><br><span class="line">                    </span><br><span class="line">                    [self onError:error];</span><br><span class="line">                    </span><br><span class="line">                &#125;];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        default:</span><br><span class="line">            <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(NSString *) getRequestDomain</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">return</span> @<span class="string">"https://www.lvjinku.com/Home/Router/doRoute"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void) onSuccess:(id)result</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        BaseResponse *response =  [[BaseResponse alloc] initWithData:result];</span><br><span class="line">        response.requestAPICode = self.requestApiCode;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (response.error == 0) &#123;</span><br><span class="line">            </span><br><span class="line">            NSLog(@<span class="string">"reqest finished:%@"</span>,result);</span><br><span class="line">            //è§£æï¼Œå°†responseObjectè®¾ç½®æˆmodelå¯¹è±¡</span><br><span class="line">            [self parseResponse:response];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestSuccess:)]) &#123;</span><br><span class="line">                [_delegate onRequestSuccess:response];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestStatusError:)]) &#123;</span><br><span class="line">                </span><br><span class="line">                [_delegate onRequestStatusError:response];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(void) onError:(NSError *)error</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_delegate &amp;&amp; [_delegate conformsToProtocol:@protocol(DataServiceDelegate)] &amp;&amp; [_delegate respondsToSelector:@selector(onRequestError:)]) &#123;</span><br><span class="line">        [_delegate onRequestError:error];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//é…ç½®è¯·æ±‚å‚æ•° xmlçš„å€¼</span><br><span class="line">-(NSString *) acquireBaseRequestParamDictionary</span><br><span class="line">&#123;</span><br><span class="line">    [self setRequestParams:self.requestParams];</span><br><span class="line">    </span><br><span class="line">    //jsonå­—ç¬¦ä¸²</span><br><span class="line">    NSMutableDictionary *baseRequestDictionary = [NSMutableDictionary dictionary];</span><br><span class="line">    [baseRequestDictionary setObject:LvJinKuAgency forKey:@<span class="string">"agency"</span>];</span><br><span class="line">    [baseRequestDictionary setObject:LvJinKuSecurity forKey:@<span class="string">"security"</span>];</span><br><span class="line">    [baseRequestDictionary setObject:[self getAPIRequestMethodName] forKey:@<span class="string">"serviceCode"</span>];</span><br><span class="line">    [baseRequestDictionary setObject:self.requestParams forKey:@<span class="string">"params"</span>];</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSString *requestParamJsonStr = [self.requestParams JSONString];</span><br><span class="line">    NSString *tokenIdStr = [NSString stringWithFormat:@<span class="string">"%@%@%@%@"</span>,LvJinKuAgency,LvJinKuSecurity,[self getAPIRequestMethodName],requestParamJsonStr];</span><br><span class="line">    NSString *tokenId = [tokenIdStr MD5Code];</span><br><span class="line">    [baseRequestDictionary setObject:tokenId forKey:@<span class="string">"tokenid"</span>]; //md5åŠ å¯†</span><br><span class="line">    </span><br><span class="line">    NSString *baseRequestParamJsonStr = [baseRequestDictionary JSONString];</span><br><span class="line">    <span class="built_in">return</span> baseRequestParamJsonStr;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  è·å–è¯·æ±‚apiçš„å…·ä½“æ¥å£æ–¹æ³•å</span><br><span class="line"> *</span><br><span class="line"> *  @<span class="built_in">return</span> &lt;<span class="comment">#return value description#&gt;</span></span><br><span class="line"> */</span><br><span class="line">-(NSString *) getAPIRequestMethodName</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">return</span> @<span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  è§£æresponse å­—æ®µ</span><br><span class="line"> *</span><br><span class="line"> *  @param response &lt;<span class="comment">#response description#&gt;</span></span><br><span class="line"> */</span><br><span class="line">-(void) parseResponse:(BaseResponse *)response</span><br><span class="line">&#123;</span><br><span class="line">     //å­ç±»è¦†ç›–è¯¥æ–¹æ³•è¿›è¡Œè§£æ</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><p>ã€åé¢æˆ‘å°†ä¼šç»“åˆHttpè¯·æ±‚å°è£…è§£è€¦ å†™ä¸€ä¸ªç³»åˆ—å…³äºHTTPè¯·æ±‚è‡ªå®šä¹‰å°è£…çš„è§£æï¼Œç»“åˆAFNå°è£…ï¼ŒJSONè§£æï¼Œä¸‹æ‹‰åˆ·æ–°ï¼Œåˆ†é¡µã€‘</p><h3 id="AFNetWorking-h-æ–‡ä»¶ä»£ç "><a href="#AFNetWorking-h-æ–‡ä»¶ä»£ç " class="headerlink" title="AFNetWorking.h æ–‡ä»¶ä»£ç "></a>AFNetWorking.h æ–‡ä»¶ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import &lt;Foundation/Foundation.h&gt;</span></span><br><span class="line"><span class="comment">#import &lt;Availability.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ifndef _AFNETWORKING_</span></span><br><span class="line">    <span class="comment">#define _AFNETWORKING_</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#import "AFURLRequestSerialization.h"</span></span><br><span class="line">    <span class="comment">#import "AFURLResponseSerialization.h"</span></span><br><span class="line">    <span class="comment">#import "AFSecurityPolicy.h"</span></span><br><span class="line">    <span class="comment">#import "AFNetworkReachabilityManager.h"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#import "AFURLConnectionOperation.h"</span></span><br><span class="line">    <span class="comment">#import "AFHTTPRequestOperation.h"</span></span><br><span class="line">    <span class="comment">#import "AFHTTPRequestOperationManager.h"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if ( ( defined(__MAC_OS_X_VERSION_MAX_ALLOWED) &amp;&amp; __MAC_OS_X_VERSION_MAX_ALLOWED &gt;= 1090) || \</span></span><br><span class="line">      ( defined(__IPHONE_OS_VERSION_MAX_ALLOWED) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 70000 ) )</span><br><span class="line">    <span class="comment">#import "AFURLSessionManager.h"</span></span><br><span class="line">    <span class="comment">#import "AFHTTPSessionManager.h"</span></span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#endif /* _AFNETWORKING_ */</span></span><br></pre></td></tr></table></figure><h3 id="ä¸€ã€ç»¼è¿°"><a href="#ä¸€ã€ç»¼è¿°" class="headerlink" title="ä¸€ã€ç»¼è¿°"></a>ä¸€ã€ç»¼è¿°</h3><p>#ç±»åº“çš„å¤´æ–‡ä»¶AFNetworking.hå¼•å…¥äº†ä¸‹é¢çš„æ‰€æœ‰ç±»åº“ï¼Œå¹¶å¯ä»¥æ ¹æ®ä¸åŒçš„ç³»ç»Ÿä½¿ç”¨ä¸åŒçš„å®ç°æ–¹å¼ã€‚</p><h5 id="1ã€AFURLConnectionOperation"><a href="#1ã€AFURLConnectionOperation" class="headerlink" title="1ã€AFURLConnectionOperation"></a>1ã€AFURLConnectionOperation</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AFURLConnectionOperation.h æ–‡ä»¶ </span><br><span class="line">@interface AFURLConnectionOperation : NSOperation &lt;NSURLConnectionDelegate, NSURLConnectionDataDelegate, NSSecureCoding, NSCopying&gt;</span><br></pre></td></tr></table></figure><p>AFNæœ€åŸºç¡€çš„ç±»ç»§æ‰¿è‡ªNSOperationç±»ï¼Œå°†ç½‘ç»œè¯·æ±‚ä¾é™„åˆ°ä¸€ä¸ªoperationä¸Šã€‚ä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆçš„æ§åˆ¶å¹¶è§‚å¯Ÿä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„åˆ›å»ºã€è¿›è¡Œã€å–æ¶ˆã€å®Œæˆã€æš‚åœæ¢å¤<br>ã€å¼‚å¸¸ç­‰é—®é¢˜åŠçŠ¶æ€ã€‚</p><h5 id="2ã€AFHTTPRequestOperation"><a href="#2ã€AFHTTPRequestOperation" class="headerlink" title="2ã€AFHTTPRequestOperation"></a>2ã€AFHTTPRequestOperation</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AFHTTPRequestOperation.h æ–‡ä»¶ </span><br><span class="line">/**</span><br><span class="line">`AFHTTPRequestOperation` is a subclass of `AFURLConnectionOperation` <span class="keyword">for</span> requests using the HTTP or HTTPS protocols. It encapsulates the concept of acceptable status codes and content types, <span class="built_in">which</span> determine the success or failure of a request.</span><br><span class="line">*/</span><br><span class="line">@interface AFHTTPRequestOperation : AFURLConnectionOperation</span><br></pre></td></tr></table></figure><p>HTTPæˆ–HTTPSåè®®è¯·æ±‚çš„AFURLConnectionOperationçš„å­ç±»ã€‚å®ƒå°è£…çš„å¯æ¥å—çŠ¶æ€ç å’Œå†…å®¹çš„ç±»å‹ï¼Œåˆ¤å®šä¸€ä¸ªè¯·æ±‚ç»“æœæ˜¯æˆåŠŸæˆ–å¤±è´¥ã€‚å®é™…ä¸Šå¯¹ç³»ç»Ÿçš„HTTPç½‘ç»œè¯·æ±‚å¢åŠ äº†å‡ ä¸ªHTTPéœ€è¦ç”¨åˆ°çš„å‚æ•°ã€‚</p><h5 id="3ã€AFHTTPRequestOperationManager"><a href="#3ã€AFHTTPRequestOperationManager" class="headerlink" title="3ã€AFHTTPRequestOperationManager"></a>3ã€AFHTTPRequestOperationManager</h5><p>è¿™ä¸ªç±»æ˜¯AFNç±»åº“çš„æ ¸å¿ƒç±»ã€‚å®ƒå°è£…å®Œæˆäº†ä¸€ç§é€šç”¨çš„æ¨¡å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾å‹å¥½çš„å®Œæˆè¯·æ±‚çš„åˆ›å»ºã€å“åº”çš„ç³»åˆ—åŒ–ï¼Œç½‘ç»œçŠ¶æ€çš„ç›‘æ§ä»¥åŠå®‰å…¨ç­–ç•¥ä»¥åŠæ¯ä¸€ä¸ªè¯·æ±‚operationçš„ç®¡ç†ï¼ˆoperationçš„ç›¸äº’ä¾èµ–æˆ–çŠ¶æ€æ”¹å˜ï¼‰ã€‚</p><h5 id="4ã€AFURLSessionManager"><a href="#4ã€AFURLSessionManager" class="headerlink" title="4ã€AFURLSessionManager"></a>4ã€AFURLSessionManager</h5><p>iOS7ä¹‹åï¼Œè‹¹æœå¢åŠ äº†æ–°çš„ç½‘ç»œè¯·æ±‚ç±»â€“NSURLSessionã€‚<br>AFNå®˜æ–¹æ¨èiOS 7 æˆ–è€… Mac OS X 10.9ä»¥ä¸Šçš„ï¼Œæœ€å¥½ä½¿ç”¨è¯¥ç±»å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå–ä»£AFHTTPRequestOperationManagerã€‚åŸºäºç›®å‰å›½å†…appå¤§éƒ½æœ€ä½é€‚é…çš„iOS6ï¼Œè¯¥ç±»çš„ç”¨é€”è¿˜ä¸æ˜¯å¤ªå¹¿æ³›ã€‚</p><h5 id="5ã€AFNetworkReachabilityManager"><a href="#5ã€AFNetworkReachabilityManager" class="headerlink" title="5ã€AFNetworkReachabilityManager"></a>5ã€AFNetworkReachabilityManager</h5><p>ç½‘ç»œçš„è¿é€šçŠ¶æ€ç›‘æ§ä»¥åŠç½‘ç»œçš„ç±»å‹ã€‚å®é™…æ˜¯å°†è‹¹æœå®˜æ–¹æä¾›çš„Reachabilityçš„ç±»åå’Œé€šçŸ¥åæ›´æ¢äº†ä¸€ä¸‹ï¼Œé˜²æ­¢å’Œç³»ç»Ÿæä¾›çš„ç±»çš„é€šçŸ¥åä»¥åŠç±»åçš„å†²çªã€‚</p><h5 id="6ã€AFURLRequestSerialization"><a href="#6ã€AFURLRequestSerialization" class="headerlink" title="6ã€AFURLRequestSerialization"></a>6ã€AFURLRequestSerialization</h5><p>1ï¼šç¬¦åˆè¿™ä¸ªåè®®çš„å¯¹è±¡ç”¨äºå¤„ç†è¯·æ±‚ï¼Œå®ƒå°†è¯·æ±‚å‚æ•°è½¬æ¢ä¸º query string æˆ–æ˜¯ entity body çš„å½¢å¼ï¼Œå¹¶è®¾ç½®å¿…è¦çš„ headerã€‚<br>2ï¼šæ„å»ºmultipartè¯·æ±‚ã€‚</p><h5 id="7ã€AFURLResponseSerialization"><a href="#7ã€AFURLResponseSerialization" class="headerlink" title="7ã€AFURLResponseSerialization"></a>7ã€AFURLResponseSerialization</h5><p>éµå¾ªAFURLResponseSerializationåè®®çš„å¯¹è±¡ï¼Œç”¨äºéªŒè¯ã€åºåˆ—åŒ–å“åº”åŠç›¸å…³æ•°æ®ï¼Œè½¬æ¢ä¸ºæœ‰ç”¨çš„å½¢å¼ï¼Œæ¯”å¦‚ JSON å¯¹è±¡ã€å›¾åƒã€ç”šè‡³åŸºäºmantleçš„æ¨¡å‹å¯¹è±¡ã€‚</p><h5 id="8ã€AFSecurityPolicy"><a href="#8ã€AFSecurityPolicy" class="headerlink" title="8ã€AFSecurityPolicy"></a>8ã€AFSecurityPolicy</h5><p>åŸºäºHTTPS é…ç½®ä¸€äº›è¯·æ±‚è¯ä¹¦ç›¸å…³çš„å®‰å…¨ç­–ç•¥ã€‚<br>è®²åˆ°AFSecurityPolicy ï¼Œæœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹HTTPS.<br>HTTPS è¿æ¥å»ºç«‹è¿‡ç¨‹å¤§è‡´æ˜¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ªè¯ä¹¦ï¼Œå®¢æˆ·ç«¯é‡Œå­˜æœ‰å„ä¸ªå—ä¿¡ä»»çš„è¯ä¹¦æœºæ„æ ¹è¯ä¹¦ï¼Œç”¨è¿™äº›æ ¹è¯ä¹¦å¯¹æœåŠ¡ç«¯ è¿”å›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œç»éªŒè¯å¦‚æœè¯ä¹¦æ˜¯å¯ä¿¡ä»»çš„ï¼Œå°±ç”Ÿæˆä¸€ä¸ªpre-master  secretï¼Œç”¨è¿™ä¸ªè¯ä¹¦çš„å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†åå¾—åˆ°pre-master secretï¼Œå†æ ¹æ®æŸç§ç®—æ³•ç”Ÿæˆmaster  secretï¼Œå®¢æˆ·ç«¯ä¹ŸåŒæ ·æ ¹æ®è¿™ç§ç®—æ³•ä»pre-master secretç”Ÿæˆmaster secretï¼ŒéšååŒæ–¹çš„é€šä¿¡éƒ½ç”¨è¿™ä¸ªmaster  secretå¯¹ä¼ è¾“æ•°æ®è¿›è¡ŒåŠ å¯†è§£å¯†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; </span><br><span class="line"></span><br><span class="line">AFSecurityPolicy *securityPolicy = [[AFSecurityPolicy alloc] init]; </span><br><span class="line">[securityPolicy setAllowInvalidCertificates:NO]; </span><br><span class="line">[securityPolicy setSSLPinningMode:AFSSLPinningModeCertificate]; </span><br><span class="line">[securityPolicy setValidatesDomainName:YES];</span><br><span class="line">[securityPolicy setValidatesCertificateChain:NO]; </span><br><span class="line"></span><br><span class="line">manager.securityPolicy = securityPolicy;</span><br><span class="line"></span><br><span class="line"><span class="comment">## SSL Pinning Modes</span></span><br><span class="line"></span><br><span class="line"> The following constants are provided by `AFSSLPinningMode` as possible SSL pinning modes.</span><br><span class="line"></span><br><span class="line"> enum &#123;</span><br><span class="line"> AFSSLPinningModeNone,</span><br><span class="line"> AFSSLPinningModePublicKey,</span><br><span class="line"> AFSSLPinningModeCertificate,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><br>AFSSLPinningModeNone: ä»£è¡¨å®¢æˆ·ç«¯æ— æ¡ä»¶åœ°ä¿¡ä»»æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦ã€‚<br>AFSSLPinningModePublicKey: ä»£è¡¨å®¢æˆ·ç«¯ä¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦ä¸æœ¬åœ°ä¿å­˜çš„è¯ä¹¦ä¸­ï¼ŒPublicKeyçš„éƒ¨åˆ†è¿›è¡Œæ ¡éªŒï¼›å¦‚æœæ­£ç¡®ï¼Œæ‰ç»§ç»­è¿›è¡Œã€‚<br>AFSSLPinningModeCertificate: ä»£è¡¨å®¢æˆ·ç«¯ä¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„è¯ä¹¦å’Œæœ¬åœ°ä¿å­˜çš„è¯ä¹¦ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬PublicKeyå’Œè¯ä¹¦éƒ¨åˆ†ï¼Œå…¨éƒ¨è¿›è¡Œæ ¡éªŒï¼›å¦‚æœæ­£ç¡®ï¼Œæ‰ç»§ç»­è¿›è¡Œã€‚<br>AFSecurityPolicyç›¸å…³æ›´å¤šçŸ¥è¯†å¯ä»¥äº†è§£è¿™ç¯‡æ–‡ç«  <a href="http://www.jianshu.com/p/4102b817ff2f" target="_blank" rel="noopener">AFSecurityPolicy</a></p><h3 id="AFURLConnectionOperation-å®ç°åˆ†æ"><a href="#AFURLConnectionOperation-å®ç°åˆ†æ" class="headerlink" title="AFURLConnectionOperation å®ç°åˆ†æ"></a>AFURLConnectionOperation å®ç°åˆ†æ</h3><p>1ã€ç»¼è¿°<br>AFURLConnectionOperationå°†Operationå’ŒURLConnectionç»“åˆåˆ°ä¸€èµ·ï¼Œåˆ©ç”¨operationå¯ä»¥ç›‘å¬åˆ°çŠ¶æ€ä»¥åŠå¯ä»¥å»ºç«‹ç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„ç‰¹æ€§ï¼Œå®ç°äº†å¯¹äºä¸€ä¸ªNSURLConnectionå¯¹è±¡çš„å®Œç¾æ§åˆ¶ï¼Œå¹¶å°†è¯·æ±‚çš„ç»“æœé€šè¿‡blockå‹å¥½çš„è¿”å›ã€‚</p><p>2ã€å®ç°æ–‡ä»¶.m<br>æˆ‘ä»¬æ€»ç»“ä¸‹.mä¸­è¿™ä¸ªç±»ä¸»è¦æœ‰å“ªäº›æ–¹æ³•ã€‚</p><p>1ï¼‰ï¼šé¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒåˆ›å»ºäº†ä¸€ä¸ªå•ä¾‹çº¿ç¨‹ã€‚è¿™ä¸ªçº¿ç¨‹å°†ä¼šå¸¸é©»å†…å­˜ï¼Œç”¨æ¥å¤„ç†AFNå‘èµ·çš„æ‰€æœ‰è¯·æ±‚ä»»åŠ¡ã€‚å½“ç„¶ï¼Œçº¿ç¨‹ä¹Ÿè·Ÿéšç€ä¸€ä¸ªrunloopï¼ŒAFNå°†è¿™ä¸ªrunloopçš„æ¨¡å¼è®¾ç½®ä¸ºNSDefaultRunLoopModeã€‚NSDefaultRunLoopModeæ˜¯æ— æ³•æ£€æµ‹åˆ°connectionçš„çŠ¶æ€çš„ã€‚è¿™è¯´æ˜äº†ï¼ŒAFNå°†ä¸ä¼šåœ¨è¿™è¯¥çº¿ç¨‹å¤„ç†connectionå®Œæˆåçš„UIåˆ·æ–°ç­‰å·¥ä½œï¼Œè€Œæ˜¯ä¼šå°†æ•°æ®æŠ›ç»™ä¸»çº¿ç¨‹ï¼Œè®©ä¸»çº¿ç¨‹å»å®ŒæˆUIçš„åˆ·æ–°ã€‚<br>2ï¼‰ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥ç±»é€šè¿‡æ¥å—è¯·æ±‚çš„å­—ç¬¦ä¸²ï¼Œåˆ›å»ºäº†URLRequestä»¥åŠNSURLConnectionå¯¹è±¡ã€‚ä»è€Œå»è¿›è¡Œè¯·æ±‚ã€‚<br>3ï¼‰ï¼šå®ç°æ–‡ä»¶å¤šæ¬¡ä½¿ç”¨åˆ°äº†é”ï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„å®‰å…¨ã€‚å½“ç„¶ä»–ä¹Ÿå®ç°äº†å‡ ä¸ªæ•°æ®çš„NSCopingåè®®ã€‚<br>4ï¼‰ï¼šè¯·æ±‚çš„åˆ›å»ºã€è¿›è¡Œã€å–æ¶ˆã€å®Œæˆã€æš‚åœæ¢å¤ã€å¼‚å¸¸ç­‰é—®é¢˜åŠçŠ¶æ€çš„æ§åˆ¶ã€‚è¿™é‡Œè®²ä¸€ä¸‹æš‚åœå’Œæ¢å¤ã€‚æš‚åœå®é™…ä¸Šå°†ç½‘ç»œè¯·æ±‚å–æ¶ˆæ‰äº†ã€‚ä½†æ˜¯ç”±äºå®ç°äº†nscopingåè®®ï¼Œå·²ç»ä¸‹è½½åˆ°æ•°æ®å¾—ä»¥ä¿å­˜ä¸‹æ¥ã€‚ä¸‹æ¬¡è¿›è¡Œç›¸åŒè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†å·²ç»ä¸‹è½½åˆ°çš„æ•°æ®çš„èŠ‚ç‚¹ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨è¿™äº›éƒ¨é—¨çš„æ•°æ®æˆ‘ä»¬ä¸éœ€è¦äº†ï¼ŒæœåŠ¡å™¨æ ¹æ®æˆ‘å‘é€çš„è¿”å›èŠ‚ç‚¹ç»™æˆ‘è¿”å›ç›¸åº”çš„æ•°æ®å³å¯ã€‚ä»è€Œå®ç°äº†æš‚åœå’Œæ¢å¤åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ–­ç‚¹ç»­ä¼ ã€‚<br>5ï¼‰ï¼šoperationæ–¹æ³•çš„é‡å†™ã€‚<br>6ï¼‰ï¼šçŠ¶æ€çš„å„ç§æ§åˆ¶æ–¹æ³•çš„å®ç°ä»¥åŠå‘é€çŠ¶æ€æ”¹å˜çš„é€šçŸ¥</p><p>3ã€æ¥å£æ–‡ä»¶.h<br>æ¥å£æ–‡æ¡£ä¸­çš„å±æ€§æ–¹æ³•ï¼ŒåŸºæœ¬å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹æ³•</p><p>1ï¼‰ï¼šåªè¯»çš„æ•°æ®ï¼Œè®©ç®¡ç†è€…å¯ä»¥æ¥æ”¶åˆ°ã€‚<br>2ï¼‰ï¼šè®¾ç½®runloopçš„modesã€‚ä¸å†ä½¿ç”¨ç±»åº“é»˜è®¤è®¾ç½®çš„defaultmodesã€‚<br>3ï¼‰ï¼šçŠ¶æ€çš„æ§åˆ¶æ–¹æ³•<br>4ï¼‰ï¼šå®‰å…¨ç­–ç•¥çš„è®¾ç½®æ€»è€Œè¨€ä¹‹ï¼Œæ¥å£æ–‡ä»¶.hæš´éœ²çš„æ¥å£éƒ½æ˜¯ä¸ºäº†è®©managerå¯ä»¥å»å®Œå…¨æ§åˆ¶è¿™ä¸ªoperationä»¥åŠå…¶ä¸­çš„ç½‘ç»œè¯·æ±‚ã€‚</p><h3 id="AFHTTPRequestOperationManger"><a href="#AFHTTPRequestOperationManger" class="headerlink" title="AFHTTPRequestOperationManger"></a>AFHTTPRequestOperationManger</h3><p>2.0åï¼ŒAFNå°†ä¸€äº›è®¾ç½®æå–å‡ºæ¥ï¼Œçº¿ç¨‹äº†ä¸“é—¨çš„ç±»ã€AFSecurityPolicyã€AFURLRequestSerializationã€AFURLResponseSerializationã€‘ã€‚ç°åœ¨çœ‹æ¥ï¼ŒAFNæ•´ä½“çš„è®¾è®¡æ˜¯éå¸¸å®Œç¾çš„ã€‚è€¦åˆæ€§å˜å¾—éå¸¸ä½ï¼Œä¸€äº›1.0ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜ä¹Ÿå¾—åˆ°äº†æ”¹å–„ã€‚</p><p>1ã€å®ç°æ–‡ä»¶.m<br>å®ç°æ–‡ä»¶è¾ƒä¸ºç®€å•ï¼Œå¯ä»¥çœ‹åˆ°ä»–åˆ›å»ºäº†ä¸€ä¸ªé˜Ÿåˆ—ã€‚å¹¶å°†å„ä¸ªoperationåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚åœ¨é˜Ÿåˆ—ä¸­ï¼Œå„ä¸ªè¯·æ±‚å°±å¯ä»¥è®¾ç½®ä¾èµ–å…³ç³»ï¼Œå¹¶å‘çš„æ•°é‡ç­‰ç­‰ã€‚</p><p>2ã€æ¥å£æ–‡ä»¶.h<br>æ¥å£æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ã€‚è¿™ä¸ªç±»å¯ä»¥è®¾ç½®AFSecurityPolicyã€AFURLRequestSerializationã€AFURLResponseSerialization ç­‰å‚æ•°äº†ã€‚è¿™å°±æ˜¯ç»¼è¿°æ‰€è¯´çš„é™ä½è€¦åˆæ€§çš„æ–¹å¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> iOS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2015å¹´æ€»ç»“</title>
      <link href="/2016/02/03/2015_Overview/"/>
      <url>/2016/02/03/2015_Overview/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯2016å¹´ 2æœˆ 3å·äº†ï¼Œå†™è¿™ç¯‡åšæ–‡çš„æ—¶å€™ï¼Œæ‰‹è„šå†°å†·å†°å†·çš„ã€‚å›æƒ³èµ·èµ°è¿‡çš„2015å¹´ï¼Œè™½ç„¶ä¸æ˜¯å¾ˆé¡ºåˆ©ï¼Œå¥½å‡ æ¬¡é‡åˆ°å›°éš¾éƒ½æ˜¯åœ¨é›¶ç•Œç‚¹å¿«è¦æ”¾å¼ƒäº†ï¼Œè‡ªå·±çš„æœ€ååšæŒåˆè®©æˆ‘é‡æ–°çœ‹åˆ°å¸Œæœ›ã€‚å½“ç„¶ï¼Œæˆ‘ä¸€ç›´åšä¿¡ç­”æ¡ˆæ˜¯åœ¨æœ€åæ‰èƒ½å¾—åˆ°ã€‚æˆ‘çš„ç”Ÿæ´»ï¼Œæ€æƒ³ éƒ½åœ¨å˜åŒ–ç€ã€‚ä½†æˆ‘ä¸€ç›´åšä¿¡æ‰€ç»å†çš„ä¸€åˆ‡éƒ½å¯¹çš„ï¼Œè™½ç„¶æœ‰æ—¶å€™å›å¤´æƒ³äº†ä¸€äº›äº‹æƒ…çš„å†³å®šåï¼Œå¶å°”ä¼šæœ‰äº›é—æ†¾ï¼Œä½†æˆ‘ä¸€ç›´åœ¨è·Ÿç€å¿ƒèµ°ï¼Œæƒ³æ¸…æ¥šäº†ï¼Œå†³å®šäº†ï¼Œå°±å»åšã€‚ç”¨å¿ƒå»è‡ªå·±å–œæ¬¢åšå¾—äº‹ï¼ŒæŠŠæ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›èŠ±åœ¨ä¸Šé¢æˆ‘åè€Œè§‰å¾—æ›´æœ‰æ„ä¹‰ã€‚<br><a id="more"></a></p><h3 id="å·¥ä½œç¼©å½±"><a href="#å·¥ä½œç¼©å½±" class="headerlink" title="å·¥ä½œç¼©å½±"></a>å·¥ä½œç¼©å½±</h3><p>å‰8ä¸ªæœˆï¼Œæˆ‘åœ¨ä¸€å®¶ç¤¾äº¤å…¬å¸æ‹…ä»»ioså¼€å‘ä¸€èŒã€‚æ¯å‘¨6å¤©ç­ï¼Œæ¯å¤©10ç‚¹åˆ°æ™šä¸Š10ç‚¹ã€‚å½“ç„¶æˆ‘ä¸æ˜¯è¯´å·¥ä½œæ—¶é—´å¾ˆé•¿ï¼Œæ­£çœŸå·¥ä½œçš„æ—¶é—´ä¹Ÿæ‰5åˆ°6ä¸ªå¤šå°æ—¶ã€‚è¿™æ ·é•¿æœŸä¸‹å»ï¼Œä¸€ï¼šèº«ä½“é€æ”¯ã€‚ äºŒï¼šå·¥ä½œæ•ˆç‡é™ä½ã€‚ä¸‰ï¼šç”Ÿæ´»ä¸Šå¤§éƒ¨åˆ†æ—¶é—´è¢«å ç”¨ï¼Œæœ‰äº›äº‹æƒ…å¤„ç†å¾—ä¸æ˜¯å¾ˆå¥½ã€‚ æˆ‘å–œæ¬¢å·¥ä½œå’Œç”Ÿæ´»å®‰æ’éƒ½é€‚å½“çš„èŠ‚å¥ã€‚ä¼ä¸šæ–‡åŒ–é—®é¢˜ä¹Ÿæ— æ³•ä¸€ä¸‹å­æå»ºè®®å°±æ”¹å˜çš„ã€‚9æœˆåå…¥èŒä¸€å®¶P2På…¬å¸ï¼Œè´Ÿè´£IOSä»¥åŠçš„å¼€å‘ã€‚å¼€å‘å®Œåï¼Œè€æ¿ä¸€ç›´æ²¡æœ‰ä¸Šçº¿çš„æ„æ€ã€‚å·¥ä½œ2ä¸ªæœˆåï¼Œå…¬å¸å‘å±•æˆ˜ç•¥é‡åˆ°ç“¶é¢ˆï¼Œ15å¹´å¾ˆå¤šP2Pçš„å…¬å¸è·‘è·¯ï¼Œå‘å±•å¾—ä¸æ˜¯å¾ˆå¥½ã€‚åé¢å…¬å¸è½¬ç§»æ–¹å‘åšP2Pçš„ä¿¡æ¯å¹³å°äº†ã€‚åé¢æƒ¨çš„å°±æ˜¯å‘˜å·¥äº†ï¼Œæœ¬èº«å…¬å¸å¾ˆå°ï¼Œå‘˜å·¥æ²¡å‡ ä¸ªã€‚ä½†éƒ½è¢«é™å·¥èµ„äº†ã€‚åˆ°1æœˆ19å·ï¼Œæˆ‘ä¹Ÿç¦»èŒèµ°äº†ã€‚</p><h3 id="ç»å†"><a href="#ç»å†" class="headerlink" title="ç»å†"></a>ç»å†</h3><p>ä¸ŠåŠå¹´è¿‡å¾—ç‰¹åˆ«å……å®ï¼Œä¸Šç­ä¸‹ç­ã€‚ç§Ÿå®¤ ï¼Œå…¬å¸ ã€‚ä¸¤ç‚¹ä¸€çº¿ï¼Œæ¯å¤©è¿™æ ·ï¼Œéƒ½æ²‰æµ¸åœ¨ä»£ç ä¸­ã€‚é‚£æ®µæ—¥å­ï¼Œå¸ˆå‚…ä¹Ÿæ¯”è¾ƒå–œæ¬¢æˆ‘ã€‚ç§¯æå‘ä¸Šï¼Œèƒ½å¤Ÿå¿«é€Ÿå®Œæˆå¸ˆå‚…åˆ†é…çš„ä»»åŠ¡ï¼Œå’ŒåŒäº‹ä»–ä»¬å…³ç³»å¾ˆèæ´½ï¼Œç©å¾—å¾ˆå¥½ã€‚ä¹Ÿå¾ˆæœ‰è¯é¢˜ï¼Œæ¯å¤©ä¸­åˆæœåŠ¡å™¨ï¼Œandroid ,ioséƒ½æ˜¯ä¸€äº›ææŠ€æœ¯çš„äºº ä¸€èµ·å»åƒé¥­ã€‚èŠèŠæŠ€æœ¯ï¼Œå¼€å¼€ç©ç¬‘ï¼Œå“ˆã€‚é‚£æ®µæ—¶é—´æœ€å¼€å¿ƒäº†ã€‚è‡ªå·±ä¹Ÿæˆé•¿æœ€å¿«ã€‚å·¥ä½œå¿«åŠå¹´çš„æ ·å­ï¼Œæˆ‘å°±è¯·äº†ä¸€è¶Ÿå‡å»æ­å·ç©ã€‚å› ä¸ºä¼¯ä¼¯åœ¨é‚£è¾¹ï¼Œå»çœ‹çœ‹è¥¿æ¹–ï¼Œé’±å¡˜æ±Ÿã€‚é‚£æ®µæ—¶é—´å¾ˆç¾å¥½ï¼Œå¾ˆæ€€å¿µï¼Œå¾ˆæ”¾æ¾ã€‚çŸ­çŸ­çš„ç©ä¸€æ˜ŸæœŸã€‚ç„¶å6æœˆ1å·å°±åé£æœºå›æ¥äº†ã€‚</p><h3 id="æ³¢æŠ˜çš„å…­æœˆ"><a href="#æ³¢æŠ˜çš„å…­æœˆ" class="headerlink" title="æ³¢æŠ˜çš„å…­æœˆ"></a>æ³¢æŠ˜çš„å…­æœˆ</h3><p>å…­æœˆï¼Œé‚£ä¸ªæœˆæˆ‘ç”Ÿç—…äº†ã€‚èŠ±äº†8åƒå—é’±æ²»ç–—ã€‚æ¥ç€å®¶é‡Œåˆå‡ºç°ä¸€äº›äº‹æƒ…ï¼Œæ‰€ä»¥å·¥ä½œä¸€ç›´æ²¡æœ‰å¾ˆä¸“å¿ƒã€‚æ¥ç€å…¬å¸ä¹Ÿæ¥äº†ä¸€ä¸ªæ–°å¦¹å­ï¼Œå¹³é™çš„ç”Ÿæ´»ä¸€ä¸‹å­è¢«æ‰“ç ´äº†ã€‚åæ¥é‡åˆ°äº†é‚£è¡¨è¿°ä¸æ¸…å´å¾ˆæ¸´æœ›çš„ç¥åœ£ä¸œè¥¿åæ›°çˆ±æƒ…ã€‚æ¥ç€ç¬¬ä¸ƒä¸ªæœˆï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å¿ƒæ€éƒ½æ²¡æœ‰è®¤çœŸèŠ±åœ¨å·¥ä½œä¸Šã€‚æ¯å¤©éƒ½ä¼šå¼€å°å·®ï¼Œç„¶åè¶å¥¹ä¸æ³¨æ„å¤šçœ‹å¥¹å‡ çœ¼ã€‚é‚£æ®µæ—¶é—´ï¼Œå†™ç¨‹åºæ€»æ˜¯ç²—å¿ƒï¼Œbug .  è¿˜æœ‰ä¸€ä¸ªbugæ²¡è§£å†³ . æ¥ç€ï¼Œéšç€ç›¸å¤„ã€‚8æœˆä»½æˆ‘ä»¬å°±å†ä¸€èµ·äº†ï¼Œåæ¥ä¸ƒå¤•æˆ‘é€ç«ç‘°ç»™å¥¹äº†ã€‚ä½†æ˜¯åŠä¸ªæœˆåï¼Œå› ä¸ºä¸€ä¸ªå°è¯¯ä¼šï¼Œåˆè®©æˆ‘æ²‰æµ¸åœ¨éš¾è¿‡å½“ä¸­ã€‚æ¥ä¸‹æ¥çš„ä¸€æ˜ŸæœŸï¼Œå¼‚å¸¸éš¾è¿‡ã€‚åæ¥åŒæ–¹å†·æˆ˜ã€‚çœ‹åˆ°å¥¹éš¾è¿‡ï¼Œå®¶é‡Œçäº‹é‡é‡ï¼Œå·¥ä½œä½œæ¯ç­‰ä¸åè°ƒï¼Œä¹Ÿç¡®å®ç´¯äº†ã€‚å½“æ—¶å†²åŠ¨å°±ç¦»èŒäº†ã€‚ã€‚</p><h3 id="å…³äºçˆ±æƒ…çš„æƒ³æ³•"><a href="#å…³äºçˆ±æƒ…çš„æƒ³æ³•" class="headerlink" title="å…³äºçˆ±æƒ…çš„æƒ³æ³•"></a>å…³äºçˆ±æƒ…çš„æƒ³æ³•</h3><p>çˆ±æƒ…æ˜¯åŒæ–¹çš„ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šåµæ¶ï¼Œä½†è¿™ä¹Ÿè®¸å°±æ˜¯å°æ’æ›²å§ã€‚ä¸­é—´ä¼šå‡ºç°å¾ˆå¤šç£¨åˆï¼Œæ­£æ˜¯å› ä¸ºè¿™äº›ï¼Œæ‰è®©å¯¹æ–¹å’Œè‡ªå·±å˜å¾—æ…¢æ…¢ç†æ€§æˆç†Ÿèµ·æ¥ï¼Œåªæœ‰ç›¸äº’åœ°å®½å®¹å¯¹æ–¹ï¼Œç†è§£å¯¹æ–¹ï¼Œæ‰èƒ½æ›´é•¿ä¹…åœ°èµ°ä¸‹å»ã€‚ç‡•å„¿ï¼Œæˆ‘çˆ±ä½ ã€‚</p><h3 id="æ–°çš„ä¸€å¹´å‰åšå¾—äº‹æƒ…"><a href="#æ–°çš„ä¸€å¹´å‰åšå¾—äº‹æƒ…" class="headerlink" title="æ–°çš„ä¸€å¹´å‰åšå¾—äº‹æƒ…"></a>æ–°çš„ä¸€å¹´å‰åšå¾—äº‹æƒ…</h3><p>è™½ç„¶è¿™ä¸€å¹´æ›²æŠ˜å¤šå˜ï¼Œä½†ä¹Ÿè®©æˆ‘æˆé•¿ä¸å°‘ã€‚æ–°çš„ä¸€å¹´2016å¹´ä¸€æœˆï¼Œæˆ‘ä¸ºè‡ªå·±åšäº†è¿™äº›äº‹æƒ…ï¼Œ1.20å·ç¦»èŒäº†ã€‚21å·åˆ°31å·è¿™åå¤©ï¼š<br>1ã€æ­å»ºäº†ä¸€ä¸ªä¸ªäººåšå®¢ç½‘ç«™ã€‚<br>2ã€æ¨¡ä»¿ä¸€ä¸ªappåšäº†ä¸€ä¸ªAndroidç‰ˆdemo.(æ‰€æœ‰UIä»¥åŠåŠ¨æ•ˆ) åæœŸç­‰å®Œå–„æœåŠ¡å™¨åå°æ¥å£è°ƒé€šåï¼Œæˆ‘ä¼šå‘åšæ–‡å‰–ææ•´ä¸ªæ¶æ„ã€‚<br>3ã€åšæŒæ¯å¤©å‚æ™šå»è·‘3åœˆã€‚ä»ç¬¬ä¸€å¤©çš„11åˆ†06ç§’ åˆ° ç¬¬ä¹å¤©çš„ 9åˆ† 06 ç§’ã€‚<br>4ã€å‡†å¤‡å¥½äº†å¹´åçš„è®¡åˆ’ï¼Œä»¥åŠè¦å»åšçš„äº‹æƒ…ã€‚åˆ›ä¸šèµ°èµ·ã€‚ç›¸ä¿¡ç”Ÿæ´»ä¼šè¶Šæ¥è¶Šå¥½ã€‚</p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/red_flower.jpg" alt="flower2"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æ’•æœº-æ‹†ç¬”è®°æœ¬äº†è§£ç»“æ„</title>
      <link href="/2016/01/24/openTheNotebook/"/>
      <url>/2016/01/24/openTheNotebook/</url>
      
        <content type="html"><![CDATA[<h3 id="è¿™å‡ å¤©"><a href="#è¿™å‡ å¤©" class="headerlink" title="è¿™å‡ å¤©"></a>è¿™å‡ å¤©</h3><p>ä»Šå¤©å¹¿å·çš„å¤©æ°”å¥½å†·ï¼Œæœ€ä½æ°”æ¸©0åº¦ã€‚ç¦»èŒåæœ‰å‡ å¤©äº†ï¼Œåœ¨å®¶é‡Œå†™ä»£ç ï¼Œå‚æ™šçš„æ—¶å€™å°±å»è·‘æ­¥ã€‚ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œå°±ç¨å¾®ä¼‘æ¯äº†ä¸‹ã€‚å‰å‡ å¤©åˆšå¥½æŠŠåšå®¢æ­å»ºèµ·æ¥äº†ï¼Œä»Šå¤©å°±è·Ÿå¤§å®¶å¤§æ¦‚è®²ä¸€ä¸‹ç¬”è®°æœ¬çš„ä¸»æ¿ç»“æ„ã€‚ä»¥ä¸‹å›¾ä¸ºä»…ä»Šå¤©åŠ¨æ‰‹æ‹†å¸åæ‰€æ‹ã€‚ï¼ˆæ³¨ï¼šäº²ï¼Œè¯·å‹¿å†²åŠ¨æ‹†å¸ç¬”è®°æœ¬ã€‚ï¼‰</p><h3 id="ä¸»æ¿æ‹æ‘„å›¾"><a href="#ä¸»æ¿æ‹æ‘„å›¾" class="headerlink" title="ä¸»æ¿æ‹æ‘„å›¾"></a>ä¸»æ¿æ‹æ‘„å›¾</h3><h5 id="ä¸»æ¿"><a href="#ä¸»æ¿" class="headerlink" title="ä¸»æ¿"></a>ä¸»æ¿</h5><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/notebook_boot.jpg" alt=""></p><a id="more"></a><h5 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h5><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/notebook_cpu.jpg" alt=""></p><h5 id="å†…å­˜æ¡"><a href="#å†…å­˜æ¡" class="headerlink" title="å†…å­˜æ¡"></a>å†…å­˜æ¡</h5><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/notebook_memery.jpg" alt=""></p><h5 id="ä¸»æ¿æ­£é¢"><a href="#ä¸»æ¿æ­£é¢" class="headerlink" title="ä¸»æ¿æ­£é¢"></a>ä¸»æ¿æ­£é¢</h5><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/notebook_boot1.jpg" alt=""></p><h5 id="ä¸»æ¿èƒŒé¢"><a href="#ä¸»æ¿èƒŒé¢" class="headerlink" title="ä¸»æ¿èƒŒé¢"></a>ä¸»æ¿èƒŒé¢</h5><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/notebook_boot2.jpg" alt=""></p><p>æŠ€æœ¯ä»æ¥å°±ä¸æ˜¯å› ä¸ºéš¾è€Œè®©æˆ‘ä»¬åœæ­¢ï¼Œåªæœ‰åŠ¨æ‰‹å°è¯•ï¼Œå»åšå°±å¯¹äº†ã€‚æ¬¢è¿å¤§å®¶æœ‰å…³ç¬”è®°æœ¬æ’è§£æ–¹é¢æœ‰å…³çš„è®¨è®ºå’Œåé¦ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ­å»ºGithubPage ä¸ªäººåšå®¢</title>
      <link href="/2016/01/22/hexoGithubPageBlog/"/>
      <url>/2016/01/22/hexoGithubPageBlog/</url>
      
        <content type="html"><![CDATA[<p>ç¨‹åºå‘˜éƒ½å–œæ¬¢æŠ˜è…¾ï¼Œæˆ‘ä¹Ÿä¸åˆ—å¤–ã€‚å½“ç„¶ï¼Œç”¨hexo å»ºåšå®¢ä¹Ÿæ˜¯å½“æ—¶ç¢°å·§åœ¨ç½‘ä¸Šçœ‹åˆ°åˆ«äººçš„åšå®¢ï¼Œç”¨æ¥å†™æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè¯»ä¹¦ï¼Œä»¥åŠä¸ä¸€æ ·çš„å¿ƒæƒ…ã€‚<br>å½“æ—¶æˆ‘ä¹Ÿå¾ˆæ˜¯å¥½å¥‡è¿™æ ·çš„åšå®¢æ˜¯ç”¨ä»€ä¹ˆæ­å»ºçš„ã€‚çœ‹åˆ°åšå°¾æœ‰ä¸€è¡Œå°å­—â€œPowered by Hexo.â€, äºæ˜¯ï¼Œå¼€å§‹äº†è‡ªå·±çš„ä¸æ–­æŠ˜è…¾ã€‚å› ä¸ºè¿™æ®µæ—¶é—´ç¦»èŒäº†ï¼Œåˆšå¥½ä¹Ÿæœ‰ç©ºé—²ä¸‹æ¥å»åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘å¤§æ¦‚æŒ‰ç…§æˆ‘çš„æ€è·¯è®°ä¸‹æ¥æˆ‘æ­å»ºhexoçš„æ­¥éª¤ã€‚<br><a id="more"></a></p><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/avatar.jpg" alt="sea"></p><h3 id="ä¸‹è½½node-js"><a href="#ä¸‹è½½node-js" class="headerlink" title="ä¸‹è½½node.js"></a>ä¸‹è½½node.js</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1) åœ¨ Windows ç¯å¢ƒä¸‹å®‰è£… Node.js éå¸¸ç®€å•.åˆ°æ­¤å¤„ä¸‹è½½ [ä¸‹è½½node.js](http://nodejs.org/)</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½-Gitç¨³å®šç‰ˆ"><a href="#ä¸‹è½½-Gitç¨³å®šç‰ˆ" class="headerlink" title="ä¸‹è½½ Gitç¨³å®šç‰ˆ"></a>ä¸‹è½½ Gitç¨³å®šç‰ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”±äºgitå®˜ç½‘ä¸‹è½½ å¯èƒ½æ¯”è¾ƒç¼“æ…¢ï¼Œå¯é€šè¿‡å…¶ä»–é€”å¾„å¦‚csdnä¸‹è½½ã€‚æˆ‘ä¸‹è½½çš„gitç‰ˆæœ¬æ˜¯ 2.6.2.windows.1</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Git-SSH-keyã€‚æœ¬åœ°ä¸githubæœåŠ¡å™¨é“¾æ¥ã€‚"><a href="#é…ç½®Git-SSH-keyã€‚æœ¬åœ°ä¸githubæœåŠ¡å™¨é“¾æ¥ã€‚" class="headerlink" title="é…ç½®Git SSH keyã€‚æœ¬åœ°ä¸githubæœåŠ¡å™¨é“¾æ¥ã€‚"></a>é…ç½®Git SSH keyã€‚æœ¬åœ°ä¸githubæœåŠ¡å™¨é“¾æ¥ã€‚</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1)æ‰“å¼€æœ¬åœ°C:\Documents and Settings\Administrator.ssh\id_rsa.pubæ–‡ä»¶ã€‚æ­¤æ–‡ä»¶é‡Œé¢å†…å®¹ä¸ºåˆšæ‰ç”Ÿæˆäººå¯†é’¥ã€‚</span><br><span class="line">å¦‚æœçœ‹ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦è®¾ç½®æ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚å‡†ç¡®çš„å¤åˆ¶è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ‰èƒ½ä¿è¯è®¾ç½®çš„æˆåŠŸã€‚</span><br><span class="line">2)ç™»é™†githubç³»ç»Ÿã€‚ç‚¹å‡»å³ä¸Šè§’çš„ Account Settings---&gt;SSH Public keys ---&gt; add another public keys</span><br><span class="line">3)æŠŠä½ æœ¬åœ°ç”Ÿæˆçš„å¯†é’¥å¤åˆ¶åˆ°é‡Œé¢ï¼ˆkeyæ–‡æœ¬æ¡†ä¸­ï¼‰ï¼Œ ç‚¹å‡» add key å°±okäº†</span><br><span class="line">4)æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸ  $ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p><img src="http://qyanblog.oss-cn-shenzhen.aliyuncs.com/config_sshKey_success.png" alt=""></p><h3 id="ä¸‹è½½å¹¶å®‰è£…-Hexo"><a href="#ä¸‹è½½å¹¶å®‰è£…-Hexo" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£… Hexo"></a>ä¸‹è½½å¹¶å®‰è£… Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1) åœ¨ä»»æ„ä½ç½®æ‰“å¼€ git bash .</span><br><span class="line">2) è¿è¡Œä»¥ä¸‹å‘½ä»¤ $ npm install -g hexo</span><br><span class="line">3) ä¸‹è½½å®Œæˆåï¼Œåœ¨ä½ å–œæ¬¢çš„ä½ç½® å¦‚D:/hexo ä¸‹æ‰“å¼€git bash è¿è¡Œ hexo init  è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ Hexo å³ä¼šè‡ªåŠ¨åœ¨ç›®æ ‡</span><br><span class="line">æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™æ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">4) å®‰è£…hexo ç›¸å…³çš„ä¾èµ–åŒ… npm install</span><br><span class="line">5) è¿è¡Œhexo g ç¼–è¯‘é™æ€æ–‡ä»¶ ï¼Œç„¶åå†hexo s å¯åŠ¨æœ¬åœ°æœåŠ¡ã€‚æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ åœ¨æµè§ˆå™¨åœ°å€è¾“å…¥ localhost:4000</span><br></pre></td></tr></table></figure><h3 id="hexo-configçš„åŸºæœ¬é…ç½®"><a href="#hexo-configçš„åŸºæœ¬é…ç½®" class="headerlink" title="hexo configçš„åŸºæœ¬é…ç½®"></a>hexo configçš„åŸºæœ¬é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨hexoçš„æ ¹ç›®å½•ä¸‹é…ç½® _config.yml æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½å¹¶ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œä¸»é¢˜çš„é…ç½®"><a href="#ä¸‹è½½å¹¶ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œä¸»é¢˜çš„é…ç½®" class="headerlink" title="ä¸‹è½½å¹¶ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œä¸»é¢˜çš„é…ç½®"></a>ä¸‹è½½å¹¶ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œä¸»é¢˜çš„é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) æˆ‘ä½¿ç”¨çš„æ˜¯nextä¸»é¢˜ã€‚è¿›å…¥ä½ çš„hexoæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸‹è½½å¯ä»¥ä½¿ç”¨</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br><span class="line">2) ä¸‹è½½å®‰è£…ï¼Œä¸»é¢˜è®¾ç½®å¯å‚è€ƒ [Nextä¸»é¢˜](http://theme-next.iissnan.com/five-minutes-setup.html)</span><br></pre></td></tr></table></figure><h3 id="hexo-çš„ä½¿ç”¨ï¼Œä»¥åŠéƒ¨ç½²åˆ°ä½ çš„githubåº“"><a href="#hexo-çš„ä½¿ç”¨ï¼Œä»¥åŠéƒ¨ç½²åˆ°ä½ çš„githubåº“" class="headerlink" title="hexo çš„ä½¿ç”¨ï¼Œä»¥åŠéƒ¨ç½²åˆ°ä½ çš„githubåº“"></a>hexo çš„ä½¿ç”¨ï¼Œä»¥åŠéƒ¨ç½²åˆ°ä½ çš„githubåº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨hexo æ ¹ç›®å½• _config.yml æ–‡ä»¶é…ç½®</span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/gaoyingqiu/gaoyingqiu.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><h2 id="hexoæ­å»ºé‡åˆ°çš„ç›¸å…³é—®é¢˜è§£å†³åŠæ³•"><a href="#hexoæ­å»ºé‡åˆ°çš„ç›¸å…³é—®é¢˜è§£å†³åŠæ³•" class="headerlink" title="hexoæ­å»ºé‡åˆ°çš„ç›¸å…³é—®é¢˜è§£å†³åŠæ³•"></a>hexoæ­å»ºé‡åˆ°çš„ç›¸å…³é—®é¢˜è§£å†³åŠæ³•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³äº hexo d å‡ºç° ERROR Deployer not found : github å¦‚ä½•è§£å†³ï¼Ÿ</span></span><br><span class="line">1) deployçš„<span class="built_in">type</span>æ”¹æˆgitï¼Œç„¶åè¿è¡Œä¸‹npm install hexo-deployer-git --save</span><br><span class="line">2) ç»§ç»­è¿è¡Œ hexo g  ç„¶åå†hexo d</span><br><span class="line"></span><br><span class="line"><span class="comment"># *** Please tell me who you are.</span></span><br><span class="line">Run git config --global user.email <span class="string">"you@example.com"</span>  git config --global user.name <span class="string">"Your Name"</span> å¦‚ä½•è§£å†³ï¼Ÿ</span><br><span class="line">1) æ ¹æ®æ­¤é”™è¯¯å¯çŸ¥ï¼Œéƒ¨ç½²åˆ°github åº“éœ€è¦ è¾“å…¥é‚®ç®±å’Œä½ çš„githubçš„ç”¨æˆ·åã€‚æ‰€ä»¥æ ¹æ®æç¤ºï¼Œè¿è¡Œç›¸åº”çš„å‘½ä»¤å³å¯ï¼Œå†æ¬¡éƒ¨ç½²ä¸€æ¬¡ã€‚hexo d.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®faviconã€‚</span></span><br><span class="line">1)æŠŠfavicon.iconå›¾æ ‡æ‹·è´åˆ°hexo æ ¹ç›®å½•çš„<span class="built_in">source</span>æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æ²¡ç½‘é¡µiconä¸æ˜¾ç¤ºå¯æ›´æ”¹ä¸»é¢˜æ–‡ä»¶é…ç½®ä¸­çš„faviconå±æ€§ ã€‚</span><br><span class="line">æŠŠfavicon.iconæ‹·è´åˆ°imagesæ–‡ä»¶å¤¹ä¸‹ã€‚faviconçš„é…ç½®å¦‚  favicon: /images/favicon.icon</span><br><span class="line"></span><br><span class="line"><span class="comment">#hexo éƒ¨ç½²åˆ°githubæ—¶å€™ï¼Œæ€æ ·è§£å†³é¢‘ç¹åœ°è¾“å…¥ç”¨æˆ·å å’Œå¯†ç ï¼Ÿ</span></span><br><span class="line">1) åœ¨ç³»ç»Ÿå±æ€§ç¯å¢ƒå˜é‡å¤„ æ·»åŠ ç”¨æˆ·ç¯å¢ƒå˜é‡ã€‚å˜é‡åï¼šHOME å˜é‡å€¼ï¼š %USERPROFILE%</span><br><span class="line">2) åœ¨ C:\Users\Administrator æ·»åŠ ä¸€ä¸ªåä¸º â€œ_netrcâ€ çš„æ–‡ä»¶ï¼Œæ— åç¼€ã€‚åœ¨é‡Œé¢è®¾ç½®</span><br><span class="line">   machine github.com  </span><br><span class="line">   login ä½ çš„githubç”¨æˆ·å</span><br><span class="line">   password ä½ çš„githubç™»å½•å¯†ç </span><br></pre></td></tr></table></figure><p><a href="http://zipperary.com/2013/05/27/domain-name-and-dns/" target="_blank" rel="noopener">è´­ä¹°åŸŸåï¼ŒDNSè§£æ</a></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
